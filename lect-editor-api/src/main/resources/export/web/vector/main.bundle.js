/*! For license information please see main.bundle.js.LICENSE.txt */
(()=>{var __webpack_modules__={757:(t,r,i)=>{t.exports=i(666)},626:(t,r,i)=>{"use strict";i.d(r,{Z:()=>h});var o=i(645),a=i.n(o),l=i(516),c=i(849),u=a()((function(t){return t[1]}));u.i(l.Z),u.i(c.Z),u.push([t.id,"/*! tailwindcss v2.0.3 | MIT License | https://tailwindcss.com */\n\n/*! modern-normalize v1.0.0 | MIT License | https://github.com/sindresorhus/modern-normalize */\n\n/*\nDocument\n========\n*/\n\n/**\nUse a better box model (opinionated).\n*/\n\n*,\n*::before,\n*::after {\n  box-sizing: border-box;\n}\n\n/**\nUse a more readable tab size (opinionated).\n*/\n\n:root {\n  -moz-tab-size: 4;\n  -o-tab-size: 4;\n     tab-size: 4;\n}\n\n/**\n1. Correct the line height in all browsers.\n2. Prevent adjustments of font size after orientation changes in iOS.\n*/\n\nhtml {\n  line-height: 1.15; /* 1 */\n  -webkit-text-size-adjust: 100%; /* 2 */\n}\n\n/*\nSections\n========\n*/\n\n/**\nRemove the margin in all browsers.\n*/\n\nbody {\n  margin: 0;\n}\n\n/**\nImprove consistency of default fonts in all browsers. (https://github.com/sindresorhus/modern-normalize/issues/3)\n*/\n\nbody {\n  font-family:\n\t\tsystem-ui,\n\t\t-apple-system, /* Firefox supports this but not yet `system-ui` */\n\t\t'Segoe UI',\n\t\tRoboto,\n\t\tHelvetica,\n\t\tArial,\n\t\tsans-serif,\n\t\t'Apple Color Emoji',\n\t\t'Segoe UI Emoji';\n}\n\n/*\nGrouping content\n================\n*/\n\n/**\n1. Add the correct height in Firefox.\n2. Correct the inheritance of border color in Firefox. (https://bugzilla.mozilla.org/show_bug.cgi?id=190655)\n*/\n\nhr {\n  height: 0; /* 1 */\n  color: inherit; /* 2 */\n}\n\n/*\nText-level semantics\n====================\n*/\n\n/**\nAdd the correct text decoration in Chrome, Edge, and Safari.\n*/\n\nabbr[title] {\n  -webkit-text-decoration: underline dotted;\n          text-decoration: underline dotted;\n}\n\n/**\nAdd the correct font weight in Edge and Safari.\n*/\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\n/**\n1. Improve consistency of default fonts in all browsers. (https://github.com/sindresorhus/modern-normalize/issues/3)\n2. Correct the odd 'em' font sizing in all browsers.\n*/\n\ncode,\nkbd,\nsamp,\npre {\n  font-family:\n\t\tui-monospace,\n\t\tSFMono-Regular,\n\t\tConsolas,\n\t\t'Liberation Mono',\n\t\tMenlo,\n\t\tmonospace; /* 1 */\n  font-size: 1em; /* 2 */\n}\n\n/**\nAdd the correct font size in all browsers.\n*/\n\nsmall {\n  font-size: 80%;\n}\n\n/**\nPrevent 'sub' and 'sup' elements from affecting the line height in all browsers.\n*/\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\n\nsub {\n  bottom: -0.25em;\n}\n\nsup {\n  top: -0.5em;\n}\n\n/*\nTabular data\n============\n*/\n\n/**\n1. Remove text indentation from table contents in Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=999088, https://bugs.webkit.org/show_bug.cgi?id=201297)\n2. Correct table border color inheritance in all Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=935729, https://bugs.webkit.org/show_bug.cgi?id=195016)\n*/\n\ntable {\n  text-indent: 0; /* 1 */\n  border-color: inherit; /* 2 */\n}\n\n/*\nForms\n=====\n*/\n\n/**\n1. Change the font styles in all browsers.\n2. Remove the margin in Firefox and Safari.\n*/\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: inherit; /* 1 */\n  font-size: 100%; /* 1 */\n  line-height: 1.15; /* 1 */\n  margin: 0; /* 2 */\n}\n\n/**\nRemove the inheritance of text transform in Edge and Firefox.\n1. Remove the inheritance of text transform in Firefox.\n*/\n\nbutton,\nselect { /* 1 */\n  text-transform: none;\n}\n\n/**\nCorrect the inability to style clickable types in iOS and Safari.\n*/\n\nbutton,\n[type='button'],\n[type='reset'] {\n  -webkit-appearance: button;\n}\n\n/**\nRemove the inner border and padding in Firefox.\n*/\n\n/**\nRestore the focus styles unset by the previous rule.\n*/\n\n/**\nRemove the additional ':invalid' styles in Firefox.\nSee: https://github.com/mozilla/gecko-dev/blob/2f9eacd9d3d995c937b4251a5557d95d494c9be1/layout/style/res/forms.css#L728-L737\n*/\n\n/**\nRemove the padding so developers are not caught out when they zero out 'fieldset' elements in all browsers.\n*/\n\nlegend {\n  padding: 0;\n}\n\n/**\nAdd the correct vertical alignment in Chrome and Firefox.\n*/\n\nprogress {\n  vertical-align: baseline;\n}\n\n/**\nCorrect the cursor style of increment and decrement buttons in Safari.\n*/\n\n/**\n1. Correct the odd appearance in Chrome and Safari.\n2. Correct the outline style in Safari.\n*/\n\n[type='search'] {\n  -webkit-appearance: textfield; /* 1 */\n  outline-offset: -2px; /* 2 */\n}\n\n/**\nRemove the inner padding in Chrome and Safari on macOS.\n*/\n\n/**\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Change font properties to 'inherit' in Safari.\n*/\n\n/*\nInteractive\n===========\n*/\n\n/*\nAdd the correct display in Chrome and Safari.\n*/\n\nsummary {\n  display: list-item;\n}\n\n/**\n * Manually forked from SUIT CSS Base: https://github.com/suitcss/base\n * A thin layer on top of normalize.css that provides a starting point more\n * suitable for web applications.\n */\n\n/**\n * Removes the default spacing and border for appropriate elements.\n */\n\nblockquote,\ndl,\ndd,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\nhr,\nfigure,\np,\npre {\n  margin: 0;\n}\n\nbutton {\n  background-color: transparent;\n  background-image: none;\n}\n\n/**\n * Work around a Firefox/IE bug where the transparent `button` background\n * results in a loss of the default `button` focus styles.\n */\n\nbutton:focus {\n  outline: 1px dotted;\n  outline: 5px auto -webkit-focus-ring-color;\n}\n\nfieldset {\n  margin: 0;\n  padding: 0;\n}\n\nol,\nul {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n/**\n * Tailwind custom reset styles\n */\n\n/**\n * 1. Use the user's configured `sans` font-family (with Tailwind's default\n *    sans-serif font stack as a fallback) as a sane default.\n * 2. Use Tailwind's default \"normal\" line-height so the user isn't forced\n *    to override it to ensure consistency even when using the default theme.\n */\n\nhtml {\n  font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, \"Noto Sans\", sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\"; /* 1 */\n  line-height: 1.5; /* 2 */\n}\n\n/**\n * Inherit font-family and line-height from `html` so users can set them as\n * a class directly on the `html` element.\n */\n\nbody {\n  font-family: inherit;\n  line-height: inherit;\n}\n\n/**\n * 1. Prevent padding and border from affecting element width.\n *\n *    We used to set this in the html element and inherit from\n *    the parent element for everything else. This caused issues\n *    in shadow-dom-enhanced elements like <details> where the content\n *    is wrapped by a div with box-sizing set to `content-box`.\n *\n *    https://github.com/mozdevs/cssremedy/issues/4\n *\n *\n * 2. Allow adding a border to an element by just adding a border-width.\n *\n *    By default, the way the browser specifies that an element should have no\n *    border is by setting it's border-style to `none` in the user-agent\n *    stylesheet.\n *\n *    In order to easily add borders to elements by just setting the `border-width`\n *    property, we change the default border-style for all elements to `solid`, and\n *    use border-width to hide them instead. This way our `border` utilities only\n *    need to set the `border-width` property instead of the entire `border`\n *    shorthand, making our border utilities much more straightforward to compose.\n *\n *    https://github.com/tailwindcss/tailwindcss/pull/116\n */\n\n*,\n::before,\n::after {\n  box-sizing: border-box; /* 1 */\n  border-width: 0; /* 2 */\n  border-style: solid; /* 2 */\n  border-color: #e5e7eb; /* 2 */\n}\n\n/*\n * Ensure horizontal rules are visible by default\n */\n\nhr {\n  border-top-width: 1px;\n}\n\n/**\n * Undo the `border-style: none` reset that Normalize applies to images so that\n * our `border-{width}` utilities have the expected effect.\n *\n * The Normalize reset is unnecessary for us since we default the border-width\n * to 0 on all elements.\n *\n * https://github.com/tailwindcss/tailwindcss/issues/362\n */\n\nimg {\n  border-style: solid;\n}\n\ntextarea {\n  resize: vertical;\n}\n\ninput::-moz-placeholder, textarea::-moz-placeholder {\n  opacity: 1;\n  color: #9ca3af;\n}\n\ninput:-ms-input-placeholder, textarea:-ms-input-placeholder {\n  opacity: 1;\n  color: #9ca3af;\n}\n\ninput::placeholder,\ntextarea::placeholder {\n  opacity: 1;\n  color: #9ca3af;\n}\n\nbutton {\n  cursor: pointer;\n}\n\ntable {\n  border-collapse: collapse;\n}\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  font-size: inherit;\n  font-weight: inherit;\n}\n\n/**\n * Reset links to optimize for opt-in styling instead of\n * opt-out.\n */\n\na {\n  color: inherit;\n  text-decoration: inherit;\n}\n\n/**\n * Reset form element properties that are easy to forget to\n * style explicitly so you don't inadvertently introduce\n * styles that deviate from your design system. These styles\n * supplement a partial reset that is already applied by\n * normalize.css.\n */\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  padding: 0;\n  line-height: inherit;\n  color: inherit;\n}\n\n/**\n * Use the configured 'mono' font family for elements that\n * are expected to be rendered with a monospace font, falling\n * back to the system monospace stack if there is no configured\n * 'mono' font family.\n */\n\npre,\ncode,\nkbd,\nsamp {\n  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace;\n}\n\n/**\n * Make replaced elements `display: block` by default as that's\n * the behavior you want almost all of the time. Inspired by\n * CSS Remedy, with `svg` added as well.\n *\n * https://github.com/mozdevs/cssremedy/issues/14\n */\n\nimg,\nsvg,\nvideo,\ncanvas,\naudio,\niframe,\nembed,\nobject {\n  display: block;\n  vertical-align: middle;\n}\n\n/**\n * Constrain images and videos to the parent width and preserve\n * their instrinsic aspect ratio.\n *\n * https://github.com/mozdevs/cssremedy/issues/14\n */\n\nimg,\nvideo {\n  max-width: 100%;\n  height: auto;\n}\n\n.container{\n  width: 100%;\n}\n\n@media (min-width: 640px){\n  .container{\n    max-width: 640px;\n  }\n}\n\n@media (min-width: 768px){\n  .container{\n    max-width: 768px;\n  }\n}\n\n@media (min-width: 1024px){\n  .container{\n    max-width: 1024px;\n  }\n}\n\n@media (min-width: 1280px){\n  .container{\n    max-width: 1280px;\n  }\n}\n\n@media (min-width: 1536px){\n  .container{\n    max-width: 1536px;\n  }\n}\n\n.inline{\n  display: inline;\n}\n\n.table{\n  display: table;\n}\n\n.hidden{\n  display: none;\n}\n\n.static{\n  position: static;\n}\n\n.absolute{\n  position: absolute;\n}\n\n.resize{\n  resize: both;\n}\n\n*{\n  --tw-shadow: 0 0 #0000;\n}\n\n*{\n  --tw-ring-inset: var(--tw-empty,/*!*/ /*!*/);\n  --tw-ring-offset-width: 0px;\n  --tw-ring-offset-color: #fff;\n  --tw-ring-color: rgba(59, 130, 246, 0.5);\n  --tw-ring-offset-shadow: 0 0 #0000;\n  --tw-ring-shadow: 0 0 #0000;\n}\n\n.ring{\n  --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);\n  --tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(3px + var(--tw-ring-offset-width)) var(--tw-ring-color);\n  box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);\n}\n\n.italic{\n  font-style: italic;\n}\n\n.underline{\n  text-decoration: underline;\n}\n\n.visible{\n  visibility: visible;\n}\n\n.transform{\n  --tw-translate-x: 0;\n  --tw-translate-y: 0;\n  --tw-rotate: 0;\n  --tw-skew-x: 0;\n  --tw-skew-y: 0;\n  --tw-scale-x: 1;\n  --tw-scale-y: 1;\n  transform: translateX(var(--tw-translate-x)) translateY(var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}\n\n.transition{\n  transition-property: background-color, border-color, color, fill, stroke, opacity, box-shadow, transform;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 150ms;\n}\n\nbody{\n  font-family:Arial,Helvetica,sans-serif;\n  overflow-x:hidden\n}\n\nhtml,body{\n  padding:0;\n  margin:0;\n  width:100vw;\n  height:100vh\n}\n\n@media (min-width: 640px){\n}\n\n@media (min-width: 768px){\n}\n\n@media (min-width: 1024px){\n}\n\n@media (min-width: 1280px){\n}\n\n@media (min-width: 1536px){\n}",""]);const h=u},516:(t,r,i)=>{"use strict";i.d(r,{Z:()=>p});var o=i(645),a=i.n(o),l=i(667),c=i.n(l),u=i(809),h=a()((function(t){return t[1]})),d=c()(u);h.push([t.id,"@font-face {\n\tfont-family: 'player-icons';\n\tsrc: url("+d+') format(\'truetype\');\n\tfont-weight: normal;\n\tfont-style: normal;\n}\n\n[class^="icon-"], [class*=" icon-"] {\n\t/* use !important to prevent issues with browser extensions that change fonts */\n\tfont-family: \'player-icons\' !important;\n\tspeak: none;\n\tfont-style: normal;\n\tfont-weight: normal;\n\tfont-variant: normal;\n\ttext-transform: none;\n\tline-height: 1;\n\n\t/* Better Font Rendering =========== */\n\t-webkit-font-smoothing: antialiased;\n\t-moz-osx-font-smoothing: grayscale;\n}\n\n.icon-document:before {\n\tcontent: "\\ed43";\n}\n.icon-sidebar-left:before {\n\tcontent: "\\e900";\n}\n.icon-sidebar-none:before {\n\tcontent: "\\e901";\n}\n.icon-sidebar-right:before {\n\tcontent: "\\e902";\n}\n.icon-search:before {\n\tcontent: "\\e908";\n}\n.icon-contract:before {\n\tcontent: "\\e906";\n}\n.icon-expand:before {\n\tcontent: "\\e905";\n}\n.icon-arrow-dropdown:before {\n\tcontent: "\\e903";\n}\n.icon-arrow-dropup:before {\n\tcontent: "\\e904";\n}\n.icon-close-circle-outline:before {\n\tcontent: "\\e907";\n}\n.icon-previous:before {\n\tcontent: "\\ed7f";\n}\n.icon-next:before {\n\tcontent: "\\ed16";\n}\n.icon-pause:before {\n\tcontent: "\\ed4f";\n}\n.icon-play:before {\n\tcontent: "\\ed6c";\n}\n.icon-playback-rate:before {\n\tcontent: "\\ed72";\n}\n.icon-mute:before {\n\tcontent: "\\ecf9";\n}\n.icon-volume0:before {\n\tcontent: "\\ef0c";\n}\n.icon-volume1:before {\n\tcontent: "\\ef0d";\n}\n.icon-volume2:before {\n\tcontent: "\\ef0e";\n}\n.icon-volume3:before {\n\tcontent: "\\ef0f";\n}\n',""]);const p=h},849:(t,r,i)=>{"use strict";i.d(r,{Z:()=>l});var o=i(645),a=i.n(o)()((function(t){return t[1]}));a.push([t.id,"[tooltip],\n[tooltip-bottom],\n[tooltip-left],\n[tooltip-right] {\n\tposition: relative;\n}\n\n[tooltip]:before,\n[tooltip]:after,\n[tooltip-bottom]:before,\n[tooltip-bottom]:after,\n[tooltip-left]:before,\n[tooltip-left]:after,\n[tooltip-right]:before,\n[tooltip-right]:after {\n\tposition: absolute;\n\tvisibility: hidden;\n\topacity: 0;\n\tpointer-events: none;\n\n\t-webkit-transition:\n\t\topacity 0.2s ease-in-out,\n\t\tvisibility 0.2s ease-in-out;\n\t-moz-transition:\n\t\topacity 0.2s ease-in-out,\n\t\tvisibility 0.2s ease-in-out;\n\ttransition:\n\t\topacity 0.2s ease-in-out,\n\t\tvisibility 0.2s ease-in-out;\n}\n\n[tooltip]:hover:before,\n[tooltip]:hover:after,\n[tooltip]:focus:before,\n[tooltip]:focus:after,\n[tooltip-bottom]:hover:before,\n[tooltip-bottom]:hover:after,\n[tooltip-bottom]:focus:before,\n[tooltip-bottom]:focus:after,\n[tooltip-left]:hover:before,\n[tooltip-left]:hover:after,\n[tooltip-left]:focus:before,\n[tooltip-left]:focus:after,\n[tooltip-right]:hover:before,\n[tooltip-right]:hover:after,\n[tooltip-right]:focus:before,\n[tooltip-right]:focus:after {\n\tvisibility: visible;\n\topacity: 1;\n}\n\n/* Base styles for the tooltip's directional arrow */\n[tooltip]:before,\n[tooltip-bottom]:before,\n[tooltip-left]:before,\n[tooltip-right]:before {\n\tz-index: 1001;\n\tborder: 6px solid transparent;\n\tbackground: transparent;\n\tcontent: \"\";\n}\n\n/* Base styles for the tooltip's content area */\n[tooltip]:after,\n[tooltip-bottom]:after,\n[tooltip-left]:after,\n[tooltip-right]:after {\n\tz-index: 1000;\n\tpadding: 8px;\n\tmargin: 0;\n\tbackground-color: #000;\n\tbackground-color: hsl(0, 0%, 20%);\n\tcolor: #fff;\n\tfont-size: 14px;\n\tline-height: 1.2;\n\twhite-space: pre;\n}\n\n/* Top (default) */\n[tooltip]:after {\n\tmargin-bottom: 12px;\n\tcontent: attr(tooltip);\n}\n\n[tooltip]:before,\n[tooltip]:after {\n\tbottom: 100%;\n\tleft: 50%;\n\n\t-webkit-transform: translateX(-50%);\n\ttransform: translateX(-50%);\n}\n\n[tooltip]:before {\n\tborder-top-color: #000;\n\tborder-top-color: hsl(0, 0%, 20%);\n}\n\n/* Bottom */\n[tooltip-bottom]:after {\n\tmargin-top: 12px;\n\tcontent: attr(tooltip-bottom);\n}\n\n[tooltip-bottom]:before,\n[tooltip-bottom]:after {\n\ttop: 100%;\n\tleft: 50%;\n\n\t-webkit-transform: translateX(-50%);\n\ttransform: translateX(-50%);\n}\n\n[tooltip-bottom]:before {\n\tborder-bottom-color: #000;\n\tborder-bottom-color: hsl(0, 0%, 20%);\n}\n\n/* Left */\n[tooltip-left]:before,\n[tooltip-left]:after {\n\ttop: 50%;\n\tright: 100%;\n\t-webkit-transform: translateY(-50%);\n\ttransform: translateY(-50%);\n}\n\n[tooltip-left]:before {\n\tbottom: 50%;\n\tmargin-bottom: 0;\n\tborder-top-color: transparent;\n\tborder-left-color: #000;\n\tborder-left-color: hsl(0, 0%, 20%);\n}\n\n[tooltip-left]:after {\n\tmargin-right: 12px;\n\tcontent: attr(tooltip-left);\n}\n\n/* Right */\n[tooltip-right]:before,\n[tooltip-right]:after {\n\ttop: 50%;\n\tleft: 100%;\n\t-webkit-transform: translateY(-50%);\n\ttransform: translateY(-50%);\n}\n\n[tooltip-right]:before {\n\tbottom: 50%;\n\tmargin-bottom: 0;\n\tborder-top-color: transparent;\n\tborder-right-color: #000;\n\tborder-right-color: hsl(0, 0%, 20%);\n}\n\n[tooltip-right]:after {\n\tmargin-left: 12px;\n\tcontent: attr(tooltip-right);\n}",""]);const l=a},645:t=>{"use strict";t.exports=function(t){var r=[];return r.toString=function toString(){return this.map((function(r){var i=t(r);return r[2]?"@media ".concat(r[2]," {").concat(i,"}"):i})).join("")},r.i=function(t,i,o){"string"==typeof t&&(t=[[null,t,""]]);var a={};if(o)for(var l=0;l<this.length;l++){var c=this[l][0];null!=c&&(a[c]=!0)}for(var u=0;u<t.length;u++){var h=[].concat(t[u]);o&&a[h[0]]||(i&&(h[2]?h[2]="".concat(i," and ").concat(h[2]):h[2]=i),r.push(h))}},r}},667:t=>{"use strict";t.exports=function(t,r){return r||(r={}),"string"!=typeof(t=t&&t.__esModule?t.default:t)?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),r.hash&&(t+=r.hash),/["'() \t\n]/.test(t)||r.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},466:function(t){t.exports=function(){"use strict";var t=Object.prototype.toString,r=Array.isArray||function isArrayPolyfill(r){return"[object Array]"===t.call(r)};function isFunction(t){return"function"==typeof t}function typeStr(t){return r(t)?"array":typeof t}function escapeRegExp(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function hasProperty(t,r){return null!=t&&"object"==typeof t&&r in t}function primitiveHasOwnProperty(t,r){return null!=t&&"object"!=typeof t&&t.hasOwnProperty&&t.hasOwnProperty(r)}var i=RegExp.prototype.test;function testRegExp(t,r){return i.call(t,r)}var o=/\S/;function isWhitespace(t){return!testRegExp(o,t)}var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function escapeHtml(t){return String(t).replace(/[&<>"'`=\/]/g,(function fromEntityMap(t){return a[t]}))}var l=/\s*/,c=/\s+/,u=/\s*=/,h=/\s*\}/,d=/#|\^|\/|>|\{|&|=|!/;function parseTemplate(t,i){if(!t)return[];var o,a,g,v=!1,y=[],_=[],m=[],b=!1,A=!1,S="",w=0;function stripSpace(){if(b&&!A)for(;m.length;)delete _[m.pop()];else m=[];b=!1,A=!1}function compileTags(t){if("string"==typeof t&&(t=t.split(c,2)),!r(t)||2!==t.length)throw new Error("Invalid tags: "+t);o=new RegExp(escapeRegExp(t[0])+"\\s*"),a=new RegExp("\\s*"+escapeRegExp(t[1])),g=new RegExp("\\s*"+escapeRegExp("}"+t[1]))}compileTags(i||p.tags);for(var x,C,k,P,R,T,E=new Scanner(t);!E.eos();){if(x=E.pos,k=E.scanUntil(o))for(var L=0,I=k.length;L<I;++L)isWhitespace(P=k.charAt(L))?(m.push(_.length),S+=P):(A=!0,v=!0,S+=" "),_.push(["text",P,x,x+1]),x+=1,"\n"===P&&(stripSpace(),S="",w=0,v=!1);if(!E.scan(o))break;if(b=!0,C=E.scan(d)||"name",E.scan(l),"="===C?(k=E.scanUntil(u),E.scan(u),E.scanUntil(a)):"{"===C?(k=E.scanUntil(g),E.scan(h),E.scanUntil(a),C="&"):k=E.scanUntil(a),!E.scan(a))throw new Error("Unclosed tag at "+E.pos);if(R=">"==C?[C,k,x,E.pos,S,w,v]:[C,k,x,E.pos],w++,_.push(R),"#"===C||"^"===C)y.push(R);else if("/"===C){if(!(T=y.pop()))throw new Error('Unopened section "'+k+'" at '+x);if(T[1]!==k)throw new Error('Unclosed section "'+T[1]+'" at '+x)}else"name"===C||"{"===C||"&"===C?A=!0:"="===C&&compileTags(k)}if(stripSpace(),T=y.pop())throw new Error('Unclosed section "'+T[1]+'" at '+E.pos);return nestTokens(squashTokens(_))}function squashTokens(t){for(var r,i,o=[],a=0,l=t.length;a<l;++a)(r=t[a])&&("text"===r[0]&&i&&"text"===i[0]?(i[1]+=r[1],i[3]=r[3]):(o.push(r),i=r));return o}function nestTokens(t){for(var r,i=[],o=i,a=[],l=0,c=t.length;l<c;++l)switch((r=t[l])[0]){case"#":case"^":o.push(r),a.push(r),o=r[4]=[];break;case"/":a.pop()[5]=r[2],o=a.length>0?a[a.length-1][4]:i;break;default:o.push(r)}return i}function Scanner(t){this.string=t,this.tail=t,this.pos=0}function Context(t,r){this.view=t,this.cache={".":this.view},this.parent=r}function Writer(){this.cache={}}Scanner.prototype.eos=function eos(){return""===this.tail},Scanner.prototype.scan=function scan(t){var r=this.tail.match(t);if(!r||0!==r.index)return"";var i=r[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},Scanner.prototype.scanUntil=function scanUntil(t){var r,i=this.tail.search(t);switch(i){case-1:r=this.tail,this.tail="";break;case 0:r="";break;default:r=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=r.length,r},Context.prototype.push=function push(t){return new Context(t,this)},Context.prototype.lookup=function lookup(t){var r,i=this.cache;if(i.hasOwnProperty(t))r=i[t];else{for(var o,a,l,c=this,u=!1;c;){if(t.indexOf(".")>0)for(o=c.view,a=t.split("."),l=0;null!=o&&l<a.length;)l===a.length-1&&(u=hasProperty(o,a[l])||primitiveHasOwnProperty(o,a[l])),o=o[a[l++]];else o=c.view[t],u=hasProperty(c.view,t);if(u){r=o;break}c=c.parent}i[t]=r}return isFunction(r)&&(r=r.call(this.view)),r},Writer.prototype.clearCache=function clearCache(){this.cache={}},Writer.prototype.parse=function parse(t,r){var i=this.cache,o=t+":"+(r||p.tags).join(":"),a=i[o];return null==a&&(a=i[o]=parseTemplate(t,r)),a},Writer.prototype.render=function render(t,r,i,o){var a=this.parse(t,o),l=r instanceof Context?r:new Context(r,void 0);return this.renderTokens(a,l,i,t,o)},Writer.prototype.renderTokens=function renderTokens(t,r,i,o,a){for(var l,c,u,h="",d=0,p=t.length;d<p;++d)u=void 0,"#"===(c=(l=t[d])[0])?u=this.renderSection(l,r,i,o):"^"===c?u=this.renderInverted(l,r,i,o):">"===c?u=this.renderPartial(l,r,i,a):"&"===c?u=this.unescapedValue(l,r):"name"===c?u=this.escapedValue(l,r):"text"===c&&(u=this.rawValue(l)),void 0!==u&&(h+=u);return h},Writer.prototype.renderSection=function renderSection(t,i,o,a){var l=this,c="",u=i.lookup(t[1]);function subRender(t){return l.render(t,i,o)}if(u){if(r(u))for(var h=0,d=u.length;h<d;++h)c+=this.renderTokens(t[4],i.push(u[h]),o,a);else if("object"==typeof u||"string"==typeof u||"number"==typeof u)c+=this.renderTokens(t[4],i.push(u),o,a);else if(isFunction(u)){if("string"!=typeof a)throw new Error("Cannot use higher-order sections without the original template");null!=(u=u.call(i.view,a.slice(t[3],t[5]),subRender))&&(c+=u)}else c+=this.renderTokens(t[4],i,o,a);return c}},Writer.prototype.renderInverted=function renderInverted(t,i,o,a){var l=i.lookup(t[1]);if(!l||r(l)&&0===l.length)return this.renderTokens(t[4],i,o,a)},Writer.prototype.indentPartial=function indentPartial(t,r,i){for(var o=r.replace(/[^ \t]/g,""),a=t.split("\n"),l=0;l<a.length;l++)a[l].length&&(l>0||!i)&&(a[l]=o+a[l]);return a.join("\n")},Writer.prototype.renderPartial=function renderPartial(t,r,i,o){if(i){var a=isFunction(i)?i(t[1]):i[t[1]];if(null!=a){var l=t[6],c=t[5],u=t[4],h=a;return 0==c&&u&&(h=this.indentPartial(a,u,l)),this.renderTokens(this.parse(h,o),r,i,h)}}},Writer.prototype.unescapedValue=function unescapedValue(t,r){var i=r.lookup(t[1]);if(null!=i)return i},Writer.prototype.escapedValue=function escapedValue(t,r){var i=r.lookup(t[1]);if(null!=i)return p.escape(i)},Writer.prototype.rawValue=function rawValue(t){return t[1]};var p={name:"mustache.js",version:"3.2.1",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,to_html:void 0,Scanner:void 0,Context:void 0,Writer:void 0},g=new Writer;return p.clearCache=function clearCache(){return g.clearCache()},p.parse=function parse(t,r){return g.parse(t,r)},p.render=function render(t,r,i,o){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+typeStr(t)+'" was given as the first argument for mustache#render(template, view, partials)');return g.render(t,r,i,o)},p.to_html=function to_html(t,r,i,o){var a=p.render(t,r,i);if(!isFunction(o))return a;o(a)},p.escape=escapeHtml,p.Scanner=Scanner,p.Context=Context,p.Writer=Writer,p}()},299:function(module,__unused_webpack_exports,__webpack_require__){!function webpackUniversalModuleDefinition(t,r){module.exports=r()}(0,(function(){return function(t){var r={};function __w_pdfjs_require__(i){if(r[i])return r[i].exports;var o=r[i]={i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,__w_pdfjs_require__),o.l=!0,o.exports}return __w_pdfjs_require__.m=t,__w_pdfjs_require__.c=r,__w_pdfjs_require__.d=function(t,r,i){__w_pdfjs_require__.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:i})},__w_pdfjs_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__w_pdfjs_require__.t=function(t,r){if(1&r&&(t=__w_pdfjs_require__(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(__w_pdfjs_require__.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)__w_pdfjs_require__.d(i,o,function(r){return t[r]}.bind(null,o));return i},__w_pdfjs_require__.n=function(t){var r=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __w_pdfjs_require__.d(r,"a",r),r},__w_pdfjs_require__.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},__w_pdfjs_require__.p="",__w_pdfjs_require__(__w_pdfjs_require__.s=0)}([function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"addLinkAttributes",{enumerable:!0,get:function(){return o.addLinkAttributes}}),Object.defineProperty(r,"getFilenameFromUrl",{enumerable:!0,get:function(){return o.getFilenameFromUrl}}),Object.defineProperty(r,"LinkTarget",{enumerable:!0,get:function(){return o.LinkTarget}}),Object.defineProperty(r,"loadScript",{enumerable:!0,get:function(){return o.loadScript}}),Object.defineProperty(r,"PDFDateString",{enumerable:!0,get:function(){return o.PDFDateString}}),Object.defineProperty(r,"RenderingCancelledException",{enumerable:!0,get:function(){return o.RenderingCancelledException}}),Object.defineProperty(r,"build",{enumerable:!0,get:function(){return a.build}}),Object.defineProperty(r,"getDocument",{enumerable:!0,get:function(){return a.getDocument}}),Object.defineProperty(r,"LoopbackPort",{enumerable:!0,get:function(){return a.LoopbackPort}}),Object.defineProperty(r,"PDFDataRangeTransport",{enumerable:!0,get:function(){return a.PDFDataRangeTransport}}),Object.defineProperty(r,"PDFWorker",{enumerable:!0,get:function(){return a.PDFWorker}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return a.version}}),Object.defineProperty(r,"CMapCompressionType",{enumerable:!0,get:function(){return l.CMapCompressionType}}),Object.defineProperty(r,"createObjectURL",{enumerable:!0,get:function(){return l.createObjectURL}}),Object.defineProperty(r,"createPromiseCapability",{enumerable:!0,get:function(){return l.createPromiseCapability}}),Object.defineProperty(r,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return l.createValidAbsoluteUrl}}),Object.defineProperty(r,"InvalidPDFException",{enumerable:!0,get:function(){return l.InvalidPDFException}}),Object.defineProperty(r,"MissingPDFException",{enumerable:!0,get:function(){return l.MissingPDFException}}),Object.defineProperty(r,"OPS",{enumerable:!0,get:function(){return l.OPS}}),Object.defineProperty(r,"PasswordResponses",{enumerable:!0,get:function(){return l.PasswordResponses}}),Object.defineProperty(r,"PermissionFlag",{enumerable:!0,get:function(){return l.PermissionFlag}}),Object.defineProperty(r,"removeNullCharacters",{enumerable:!0,get:function(){return l.removeNullCharacters}}),Object.defineProperty(r,"shadow",{enumerable:!0,get:function(){return l.shadow}}),Object.defineProperty(r,"UnexpectedResponseException",{enumerable:!0,get:function(){return l.UnexpectedResponseException}}),Object.defineProperty(r,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return l.UNSUPPORTED_FEATURES}}),Object.defineProperty(r,"Util",{enumerable:!0,get:function(){return l.Util}}),Object.defineProperty(r,"VerbosityLevel",{enumerable:!0,get:function(){return l.VerbosityLevel}}),Object.defineProperty(r,"AnnotationLayer",{enumerable:!0,get:function(){return c.AnnotationLayer}}),Object.defineProperty(r,"apiCompatibilityParams",{enumerable:!0,get:function(){return u.apiCompatibilityParams}}),Object.defineProperty(r,"GlobalWorkerOptions",{enumerable:!0,get:function(){return h.GlobalWorkerOptions}}),Object.defineProperty(r,"renderTextLayer",{enumerable:!0,get:function(){return d.renderTextLayer}}),Object.defineProperty(r,"SVGGraphics",{enumerable:!0,get:function(){return p.SVGGraphics}});var o=i(1),a=i(5),l=i(2),c=i(19),u=i(9),h=i(12),d=i(20),p=i(21);{const{isNodeJS:t}=i(4);if(t){const t=i(22).PDFNodeStream;(0,a.setPDFNetworkStreamFactory)((r=>new t(r)))}else{const t=i(25).PDFNetworkStream;let r;(0,o.isFetchSupported)()&&(r=i(26).PDFFetchStream),(0,a.setPDFNetworkStreamFactory)((i=>r&&(0,o.isValidFetchUrl)(i.url)?new r(i):new t(i)))}}},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.addLinkAttributes=function addLinkAttributes(t,{url:r,target:i,rel:l,enabled:u=!0}={}){(0,o.assert)(r&&"string"==typeof r,'addLinkAttributes: A valid "url" parameter must provided.');const h=(0,o.removeNullCharacters)(r);u?t.href=t.title=h:(t.href="",t.title=`Disabled: ${h}`,t.onclick=()=>!1);let d="";switch(i){case c.NONE:break;case c.SELF:d="_self";break;case c.BLANK:d="_blank";break;case c.PARENT:d="_parent";break;case c.TOP:d="_top"}t.target=d,t.rel="string"==typeof l?l:a},r.getFilenameFromUrl=function getFilenameFromUrl(t){const r=t.indexOf("#"),i=t.indexOf("?"),o=Math.min(r>0?r:t.length,i>0?i:t.length);return t.substring(t.lastIndexOf("/",o)+1,o)},r.isFetchSupported=isFetchSupported,r.isValidFetchUrl=isValidFetchUrl,r.loadScript=function loadScript(t){return new Promise(((r,i)=>{const o=document.createElement("script");o.src=t,o.onload=r,o.onerror=function(){i(new Error(`Cannot load script at: ${o.src}`))},(document.head||document.documentElement).appendChild(o)}))},r.deprecated=function deprecated(t){console.log("Deprecated API usage: "+t)},r.PDFDateString=r.StatTimer=r.DOMSVGFactory=r.DOMCMapReaderFactory=r.BaseCMapReaderFactory=r.DOMCanvasFactory=r.BaseCanvasFactory=r.DEFAULT_LINK_REL=r.LinkTarget=r.RenderingCancelledException=r.PageViewport=void 0;var o=i(2);const a="noopener noreferrer nofollow";r.DEFAULT_LINK_REL=a;const l="http://www.w3.org/2000/svg";class BaseCanvasFactory{constructor(){this.constructor===BaseCanvasFactory&&(0,o.unreachable)("Cannot initialize BaseCanvasFactory.")}create(t,r){(0,o.unreachable)("Abstract method `create` called.")}reset(t,r,i){if(!t.canvas)throw new Error("Canvas is not specified");if(r<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=r,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}}r.BaseCanvasFactory=BaseCanvasFactory;r.DOMCanvasFactory=class DOMCanvasFactory extends BaseCanvasFactory{constructor({ownerDocument:t=globalThis.document}={}){super(),this._document=t}create(t,r){if(t<=0||r<=0)throw new Error("Invalid canvas size");const i=this._document.createElement("canvas"),o=i.getContext("2d");return i.width=t,i.height=r,{canvas:i,context:o}}};class BaseCMapReaderFactory{constructor({baseUrl:t=null,isCompressed:r=!1}){this.constructor===BaseCMapReaderFactory&&(0,o.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=r}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const r=this.baseUrl+t+(this.isCompressed?".bcmap":""),i=this.isCompressed?o.CMapCompressionType.BINARY:o.CMapCompressionType.NONE;return this._fetchData(r,i).catch((t=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${r}`)}))}_fetchData(t,r){(0,o.unreachable)("Abstract method `_fetchData` called.")}}r.BaseCMapReaderFactory=BaseCMapReaderFactory;r.DOMCMapReaderFactory=class DOMCMapReaderFactory extends BaseCMapReaderFactory{_fetchData(t,r){return isFetchSupported()&&isValidFetchUrl(t,document.baseURI)?fetch(t).then((async t=>{if(!t.ok)throw new Error(t.statusText);let i;return i=this.isCompressed?new Uint8Array(await t.arrayBuffer()):(0,o.stringToBytes)(await t.text()),{cMapData:i,compressionType:r}})):new Promise(((i,a)=>{const l=new XMLHttpRequest;l.open("GET",t,!0),this.isCompressed&&(l.responseType="arraybuffer"),l.onreadystatechange=()=>{if(l.readyState===XMLHttpRequest.DONE){if(200===l.status||0===l.status){let t;if(this.isCompressed&&l.response?t=new Uint8Array(l.response):!this.isCompressed&&l.responseText&&(t=(0,o.stringToBytes)(l.responseText)),t)return void i({cMapData:t,compressionType:r})}a(new Error(l.statusText))}},l.send(null)}))}};r.DOMSVGFactory=class DOMSVGFactory{create(t,r){(0,o.assert)(t>0&&r>0,"Invalid SVG dimensions");const i=document.createElementNS(l,"svg:svg");return i.setAttribute("version","1.1"),i.setAttribute("width",t+"px"),i.setAttribute("height",r+"px"),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox","0 0 "+t+" "+r),i}createElement(t){return(0,o.assert)("string"==typeof t,"Invalid SVG element type"),document.createElementNS(l,t)}};class PageViewport{constructor({viewBox:t,scale:r,rotation:i,offsetX:o=0,offsetY:a=0,dontFlip:l=!1}){this.viewBox=t,this.scale=r,this.rotation=i,this.offsetX=o,this.offsetY=a;const c=(t[2]+t[0])/2,u=(t[3]+t[1])/2;let h,d,p,g,v,y,_,m;switch(i=(i%=360)<0?i+360:i){case 180:h=-1,d=0,p=0,g=1;break;case 90:h=0,d=1,p=1,g=0;break;case 270:h=0,d=-1,p=-1,g=0;break;case 0:h=1,d=0,p=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(p=-p,g=-g),0===h?(v=Math.abs(u-t[1])*r+o,y=Math.abs(c-t[0])*r+a,_=Math.abs(t[3]-t[1])*r,m=Math.abs(t[2]-t[0])*r):(v=Math.abs(c-t[0])*r+o,y=Math.abs(u-t[1])*r+a,_=Math.abs(t[2]-t[0])*r,m=Math.abs(t[3]-t[1])*r),this.transform=[h*r,d*r,p*r,g*r,v-h*r*c-p*r*u,y-d*r*c-g*r*u],this.width=_,this.height=m}clone({scale:t=this.scale,rotation:r=this.rotation,offsetX:i=this.offsetX,offsetY:o=this.offsetY,dontFlip:a=!1}={}){return new PageViewport({viewBox:this.viewBox.slice(),scale:t,rotation:r,offsetX:i,offsetY:o,dontFlip:a})}convertToViewportPoint(t,r){return o.Util.applyTransform([t,r],this.transform)}convertToViewportRectangle(t){const r=o.Util.applyTransform([t[0],t[1]],this.transform),i=o.Util.applyTransform([t[2],t[3]],this.transform);return[r[0],r[1],i[0],i[1]]}convertToPdfPoint(t,r){return o.Util.applyInverseTransform([t,r],this.transform)}}r.PageViewport=PageViewport;class RenderingCancelledException extends o.BaseException{constructor(t,r){super(t),this.type=r}}r.RenderingCancelledException=RenderingCancelledException;const c={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};r.LinkTarget=c;function isFetchSupported(){return"undefined"!=typeof fetch&&"undefined"!=typeof Response&&"body"in Response.prototype&&"undefined"!=typeof ReadableStream}function isValidFetchUrl(t,r){try{const{protocol:i}=r?new URL(t,r):new URL(t);return"http:"===i||"https:"===i}catch(t){return!1}}let u;r.StatTimer=class StatTimer{constructor(){this.started=Object.create(null),this.times=[]}time(t){t in this.started&&(0,o.warn)(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||(0,o.warn)(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let r=0;for(const t of this.times){const i=t.name;i.length>r&&(r=i.length)}for(const i of this.times){const o=i.end-i.start;t.push(`${i.name.padEnd(r)} ${o}ms\n`)}return t.join("")}};r.PDFDateString=class PDFDateString{static toDateObject(t){if(!t||!(0,o.isString)(t))return null;u||(u=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const r=u.exec(t);if(!r)return null;const i=parseInt(r[1],10);let a=parseInt(r[2],10);a=a>=1&&a<=12?a-1:0;let l=parseInt(r[3],10);l=l>=1&&l<=31?l:1;let c=parseInt(r[4],10);c=c>=0&&c<=23?c:0;let h=parseInt(r[5],10);h=h>=0&&h<=59?h:0;let d=parseInt(r[6],10);d=d>=0&&d<=59?d:0;const p=r[7]||"Z";let g=parseInt(r[8],10);g=g>=0&&g<=23?g:0;let v=parseInt(r[9],10)||0;return v=v>=0&&v<=59?v:0,"-"===p?(c+=g,h+=v):"+"===p&&(c-=g,h-=v),new Date(Date.UTC(i,a,l,c,h,d))}}},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.arrayByteLength=arrayByteLength,r.arraysToBytes=function arraysToBytes(t){const r=t.length;if(1===r&&t[0]instanceof Uint8Array)return t[0];let i=0;for(let o=0;o<r;o++)i+=arrayByteLength(t[o]);let o=0;const a=new Uint8Array(i);for(let i=0;i<r;i++){let r=t[i];r instanceof Uint8Array||(r="string"==typeof r?stringToBytes(r):new Uint8Array(r));const l=r.byteLength;a.set(r,o),o+=l}return a},r.assert=assert,r.bytesToString=function bytesToString(t){assert(null!==t&&"object"==typeof t&&void 0!==t.length,"Invalid argument for bytesToString");const r=t.length,i=8192;if(r<i)return String.fromCharCode.apply(null,t);const o=[];for(let a=0;a<r;a+=i){const l=Math.min(a+i,r),c=t.subarray(a,l);o.push(String.fromCharCode.apply(null,c))}return o.join("")},r.createPromiseCapability=function createPromiseCapability(){const t=Object.create(null);let r=!1;return Object.defineProperty(t,"settled",{get:()=>r}),t.promise=new Promise((function(i,o){t.resolve=function(t){r=!0,i(t)},t.reject=function(t){r=!0,o(t)}})),t},r.escapeString=function escapeString(t){return t.replace(/([\(\)\\])/g,"\\$1")},r.getModificationDate=function getModificationDate(t=new Date(Date.now())){return[t.getUTCFullYear().toString(),(t.getUTCMonth()+1).toString().padStart(2,"0"),(t.getUTCDate()+1).toString().padStart(2,"0"),t.getUTCHours().toString().padStart(2,"0"),t.getUTCMinutes().toString().padStart(2,"0"),t.getUTCSeconds().toString().padStart(2,"0")].join("")},r.getVerbosityLevel=function getVerbosityLevel(){return a},r.info=function info(t){a>=o.INFOS&&console.log(`Info: ${t}`)},r.isArrayBuffer=function isArrayBuffer(t){return"object"==typeof t&&null!==t&&void 0!==t.byteLength},r.isArrayEqual=function isArrayEqual(t,r){if(t.length!==r.length)return!1;return t.every((function(t,i){return t===r[i]}))},r.isBool=function isBool(t){return"boolean"==typeof t},r.isNum=function isNum(t){return"number"==typeof t},r.isString=function isString(t){return"string"==typeof t},r.isSameOrigin=function isSameOrigin(t,r){let i;try{if(i=new URL(t),!i.origin||"null"===i.origin)return!1}catch(t){return!1}const o=new URL(r,i);return i.origin===o.origin},r.createValidAbsoluteUrl=function createValidAbsoluteUrl(t,r){if(!t)return null;try{const i=r?new URL(t,r):new URL(t);if(function _isValidProtocol(t){if(!t)return!1;switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(i))return i}catch(t){}return null},r.removeNullCharacters=function removeNullCharacters(t){if("string"!=typeof t)return warn("The argument for removeNullCharacters must be a string."),t;return t.replace(c,"")},r.setVerbosityLevel=function setVerbosityLevel(t){Number.isInteger(t)&&(a=t)},r.shadow=shadow,r.string32=function string32(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)},r.stringToBytes=stringToBytes,r.stringToPDFString=function stringToPDFString(t){const r=t.length,i=[];if("þ"===t[0]&&"ÿ"===t[1])for(let o=2;o<r;o+=2)i.push(String.fromCharCode(t.charCodeAt(o)<<8|t.charCodeAt(o+1)));else if("ÿ"===t[0]&&"þ"===t[1])for(let o=2;o<r;o+=2)i.push(String.fromCharCode(t.charCodeAt(o+1)<<8|t.charCodeAt(o)));else for(let o=0;o<r;++o){const r=p[t.charCodeAt(o)];i.push(r?String.fromCharCode(r):t.charAt(o))}return i.join("")},r.stringToUTF8String=function stringToUTF8String(t){return decodeURIComponent(escape(t))},r.utf8StringToString=function utf8StringToString(t){return unescape(encodeURIComponent(t))},r.warn=warn,r.unreachable=unreachable,r.IsEvalSupportedCached=r.IsLittleEndianCached=r.createObjectURL=r.FormatError=r.Util=r.UnknownErrorException=r.UnexpectedResponseException=r.TextRenderingMode=r.StreamType=r.PermissionFlag=r.PasswordResponses=r.PasswordException=r.MissingPDFException=r.InvalidPDFException=r.AbortException=r.CMapCompressionType=r.ImageKind=r.FontType=r.AnnotationType=r.AnnotationStateModelType=r.AnnotationReviewState=r.AnnotationReplyType=r.AnnotationMarkedState=r.AnnotationFlag=r.AnnotationFieldFlag=r.AnnotationBorderStyleType=r.UNSUPPORTED_FEATURES=r.VerbosityLevel=r.OPS=r.IDENTITY_MATRIX=r.FONT_IDENTITY_MATRIX=r.BaseException=void 0,i(3);r.IDENTITY_MATRIX=[1,0,0,1,0,0];r.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];r.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};r.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};r.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};r.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};r.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"};r.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"};r.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};r.AnnotationReplyType={GROUP:"Group",REPLY:"R"};r.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};r.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};r.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};r.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};r.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const o={ERRORS:0,WARNINGS:1,INFOS:5};r.VerbosityLevel=o;r.CMapCompressionType={NONE:0,BINARY:1,STREAM:2};r.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};r.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent"};r.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let a=o.WARNINGS;function warn(t){a>=o.WARNINGS&&console.log(`Warning: ${t}`)}function unreachable(t){throw new Error(t)}function assert(t,r){t||unreachable(r)}function shadow(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!1}),i}const l=function BaseExceptionClosure(){function BaseException(t){this.constructor===BaseException&&unreachable("Cannot initialize BaseException."),this.message=t,this.name=this.constructor.name}return BaseException.prototype=new Error,BaseException.constructor=BaseException,BaseException}();r.BaseException=l;r.PasswordException=class PasswordException extends l{constructor(t,r){super(t),this.code=r}};r.UnknownErrorException=class UnknownErrorException extends l{constructor(t,r){super(t),this.details=r}};r.InvalidPDFException=class InvalidPDFException extends l{};r.MissingPDFException=class MissingPDFException extends l{};r.UnexpectedResponseException=class UnexpectedResponseException extends l{constructor(t,r){super(t),this.status=r}};r.FormatError=class FormatError extends l{};r.AbortException=class AbortException extends l{};const c=/\x00/g;function stringToBytes(t){assert("string"==typeof t,"Invalid argument for stringToBytes");const r=t.length,i=new Uint8Array(r);for(let o=0;o<r;++o)i[o]=255&t.charCodeAt(o);return i}function arrayByteLength(t){return void 0!==t.length?t.length:(assert(void 0!==t.byteLength,"arrayByteLength - invalid argument."),t.byteLength)}const u={get value(){return shadow(this,"value",function isLittleEndian(){const t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]}())}};r.IsLittleEndianCached=u;const h={get value(){return shadow(this,"value",function isEvalSupported(){try{return new Function(""),!0}catch(t){return!1}}())}};r.IsEvalSupportedCached=h;const d=["rgb(",0,",",0,",",0,")"];class Util{static makeCssRgb(t,r,i){return d[1]=t,d[3]=r,d[5]=i,d.join("")}static transform(t,r){return[t[0]*r[0]+t[2]*r[1],t[1]*r[0]+t[3]*r[1],t[0]*r[2]+t[2]*r[3],t[1]*r[2]+t[3]*r[3],t[0]*r[4]+t[2]*r[5]+t[4],t[1]*r[4]+t[3]*r[5]+t[5]]}static applyTransform(t,r){return[t[0]*r[0]+t[1]*r[2]+r[4],t[0]*r[1]+t[1]*r[3]+r[5]]}static applyInverseTransform(t,r){const i=r[0]*r[3]-r[1]*r[2];return[(t[0]*r[3]-t[1]*r[2]+r[2]*r[5]-r[4]*r[3])/i,(-t[0]*r[1]+t[1]*r[0]+r[4]*r[1]-r[5]*r[0])/i]}static getAxialAlignedBoundingBox(t,r){const i=Util.applyTransform(t,r),o=Util.applyTransform(t.slice(2,4),r),a=Util.applyTransform([t[0],t[3]],r),l=Util.applyTransform([t[2],t[1]],r);return[Math.min(i[0],o[0],a[0],l[0]),Math.min(i[1],o[1],a[1],l[1]),Math.max(i[0],o[0],a[0],l[0]),Math.max(i[1],o[1],a[1],l[1])]}static inverseTransform(t){const r=t[0]*t[3]-t[1]*t[2];return[t[3]/r,-t[1]/r,-t[2]/r,t[0]/r,(t[2]*t[5]-t[4]*t[3])/r,(t[4]*t[1]-t[5]*t[0])/r]}static apply3dTransform(t,r){return[t[0]*r[0]+t[1]*r[1]+t[2]*r[2],t[3]*r[0]+t[4]*r[1]+t[5]*r[2],t[6]*r[0]+t[7]*r[1]+t[8]*r[2]]}static singularValueDecompose2dScale(t){const r=[t[0],t[2],t[1],t[3]],i=t[0]*r[0]+t[1]*r[2],o=t[0]*r[1]+t[1]*r[3],a=t[2]*r[0]+t[3]*r[2],l=t[2]*r[1]+t[3]*r[3],c=(i+l)/2,u=Math.sqrt((i+l)*(i+l)-4*(i*l-a*o))/2,h=c+u||1,d=c-u||1;return[Math.sqrt(h),Math.sqrt(d)]}static normalizeRect(t){const r=t.slice(0);return t[0]>t[2]&&(r[0]=t[2],r[2]=t[0]),t[1]>t[3]&&(r[1]=t[3],r[3]=t[1]),r}static intersect(t,r){function compare(t,r){return t-r}const i=[t[0],t[2],r[0],r[2]].sort(compare),o=[t[1],t[3],r[1],r[3]].sort(compare),a=[];return t=Util.normalizeRect(t),r=Util.normalizeRect(r),i[0]===t[0]&&i[1]===r[0]||i[0]===r[0]&&i[1]===t[0]?(a[0]=i[1],a[2]=i[2],o[0]===t[1]&&o[1]===r[1]||o[0]===r[1]&&o[1]===t[1]?(a[1]=o[1],a[3]=o[2],a):null):null}}r.Util=Util;const p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];const g=function createObjectURLClosure(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function createObjectURL(r,i,o=!1){if(!o&&URL.createObjectURL){const t=new Blob([r],{type:i});return URL.createObjectURL(t)}let a=`data:${i};base64,`;for(let i=0,o=r.length;i<o;i+=3){const l=255&r[i],c=255&r[i+1],u=255&r[i+2];a+=t[l>>2]+t[(3&l)<<4|c>>4]+t[i+1<o?(15&c)<<2|u>>6:64]+t[i+2<o?63&u:64]}return a}}();r.createObjectURL=g},function(t,r,i){"use strict";i(4)},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isNodeJS=void 0;const o=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);r.isNodeJS=o},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.build=exports.version=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFWorker=exports.PDFDataRangeTransport=exports.LoopbackPort=void 0;var _util=__w_pdfjs_require__(2),_display_utils=__w_pdfjs_require__(1),_font_loader=__w_pdfjs_require__(6),_node_utils=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_api_compatibility=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(12),_is_node=__w_pdfjs_require__(4),_message_handler=__w_pdfjs_require__(13),_metadata=__w_pdfjs_require__(14),_optional_content_config=__w_pdfjs_require__(16),_transport_stream=__w_pdfjs_require__(17),_webgl=__w_pdfjs_require__(18);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_is_node.isNodeJS?_node_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory,DefaultCMapReaderFactory=_is_node.isNodeJS?_node_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;let createPDFNetworkStream;function setPDFNetworkStreamFactory(t){createPDFNetworkStream=t}function getDocument(t){const r=new PDFDocumentLoadingTask;let i;if("string"==typeof t)i={url:t};else if((0,_util.isArrayBuffer)(t))i={data:t};else if(t instanceof PDFDataRangeTransport)i={range:t};else{if("object"!=typeof t)throw new Error("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");i=t}const o=Object.create(null);let a=null,l=null;for(const t in i)if("url"!==t||"undefined"==typeof window)if("range"!==t)if("worker"!==t)if("data"!==t||i[t]instanceof Uint8Array)o[t]=i[t];else{const r=i[t];if("string"==typeof r)o[t]=(0,_util.stringToBytes)(r);else if("object"!=typeof r||null===r||isNaN(r.length)){if(!(0,_util.isArrayBuffer)(r))throw new Error("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property.");o[t]=new Uint8Array(r)}else o[t]=new Uint8Array(r)}else l=i[t];else a=i[t];else o[t]=new URL(i[t],window.location).href;if(o.rangeChunkSize=o.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,o.CMapReaderFactory=o.CMapReaderFactory||DefaultCMapReaderFactory,o.ignoreErrors=!0!==o.stopAtErrors,o.fontExtraProperties=!0===o.fontExtraProperties,o.pdfBug=!0===o.pdfBug,Number.isInteger(o.maxImageSize)||(o.maxImageSize=-1),"boolean"!=typeof o.isEvalSupported&&(o.isEvalSupported=!0),"boolean"!=typeof o.disableFontFace&&(o.disableFontFace=_api_compatibility.apiCompatibilityParams.disableFontFace||!1),void 0===o.ownerDocument&&(o.ownerDocument=globalThis.document),"boolean"!=typeof o.disableRange&&(o.disableRange=!1),"boolean"!=typeof o.disableStream&&(o.disableStream=!1),"boolean"!=typeof o.disableAutoFetch&&(o.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(o.verbosity),!l){const t={verbosity:o.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};l=t.port?PDFWorker.fromPort(t):new PDFWorker(t),r._worker=l}const c=r.docId;return l.promise.then((function(){if(r.destroyed)throw new Error("Loading aborted");const t=_fetchDocument(l,o,a,c),i=new Promise((function(t){let r;a?r=new _transport_stream.PDFDataTransportStream({length:o.length,initialData:o.initialData,progressiveDone:o.progressiveDone,disableRange:o.disableRange,disableStream:o.disableStream},a):o.data||(r=createPDFNetworkStream({url:o.url,length:o.length,httpHeaders:o.httpHeaders,withCredentials:o.withCredentials,rangeChunkSize:o.rangeChunkSize,disableRange:o.disableRange,disableStream:o.disableStream})),t(r)}));return Promise.all([t,i]).then((function([t,i]){if(r.destroyed)throw new Error("Loading aborted");const a=new _message_handler.MessageHandler(c,t,l.port);a.postMessageTransfers=l.postMessageTransfers;const u=new WorkerTransport(a,r,i,o);r._transport=u,a.send("Ready",null)}))})).catch(r._capability.reject),r}function _fetchDocument(t,r,i,o){return t.destroyed?Promise.reject(new Error("Worker was destroyed")):(i&&(r.length=i.length,r.initialData=i.initialData,r.progressiveDone=i.progressiveDone),t.messageHandler.sendWithPromise("GetDocRequest",{docId:o,apiVersion:"2.6.347",source:{data:r.data,url:r.url,password:r.password,disableAutoFetch:r.disableAutoFetch,rangeChunkSize:r.rangeChunkSize,length:r.length},maxImageSize:r.maxImageSize,disableFontFace:r.disableFontFace,postMessageTransfers:t.postMessageTransfers,docBaseUrl:r.docBaseUrl,ignoreErrors:r.ignoreErrors,isEvalSupported:r.isEvalSupported,fontExtraProperties:r.fontExtraProperties}).then((function(r){if(t.destroyed)throw new Error("Worker was destroyed");return r})))}const PDFDocumentLoadingTask=function PDFDocumentLoadingTaskClosure(){let t=0;return class PDFDocumentLoadingTask{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+t++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){this.destroyed=!0;return(this._transport?this._transport.destroy():Promise.resolve()).then((()=>{this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}))}}}();class PDFDataRangeTransport{constructor(t,r,i=!1){this.length=t,this.initialData=r,this.progressiveDone=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,r){for(const i of this._rangeListeners)i(t,r)}onDataProgress(t,r){this._readyCapability.promise.then((()=>{for(const i of this._progressListeners)i(t,r)}))}onDataProgressiveRead(t){this._readyCapability.promise.then((()=>{for(const r of this._progressiveReadListeners)r(t)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const t of this._progressiveDoneListeners)t()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(t,r){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(t,r){this._pdfInfo=t,this._transport=r}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get numPages(){return this._pdfInfo.numPages}get fingerprint(){return this._pdfInfo.fingerprint}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}getStats(){return this._transport.getStats()}cleanup(){return this._transport.startCleanup()}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(t){return this._transport.saveDocument(t)}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(t,r,i,o,a=!1){this._pageIndex=t,this._pageInfo=r,this._ownerDocument=o,this._transport=i,this._stats=a?new _display_utils.StatTimer:null,this._pdfBug=a,this.commonObjs=i.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:r=this.rotate,offsetX:i=0,offsetY:o=0,dontFlip:a=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:t,rotation:r,offsetX:i,offsetY:o,dontFlip:a})}getAnnotations({intent:t=null}={}){return this.annotationsPromise&&this.annotationsIntent===t||(this.annotationsPromise=this._transport.getAnnotations(this._pageIndex,t),this.annotationsIntent=t),this.annotationsPromise}render({canvasContext:t,viewport:r,intent:i="display",enableWebGL:o=!1,renderInteractiveForms:a=!1,transform:l=null,imageLayer:c=null,canvasFactory:u=null,background:h=null,annotationStorage:d=null,optionalContentConfigPromise:p=null}){this._stats&&this._stats.time("Overall");const g="print"===i?"print":"display";this.pendingCleanup=!1,p||(p=this._transport.getOptionalContentConfig());let v=this._intentStates.get(g);v||(v=Object.create(null),this._intentStates.set(g,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const y=u||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),_=new _webgl.WebGLContext({enable:o});v.displayReadyCapability||(v.displayReadyCapability=(0,_util.createPromiseCapability)(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:g,renderInteractiveForms:!0===a,annotationStorage:d&&d.getAll()||null}));const complete=t=>{const r=v.renderTasks.indexOf(m);r>=0&&v.renderTasks.splice(r,1),(this.cleanupAfterRender||"print"===g)&&(this.pendingCleanup=!0),this._tryCleanup(),t?(m.capability.reject(t),this._abortOperatorList({intentState:v,reason:t})):m.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},m=new InternalRenderTask({callback:complete,params:{canvasContext:t,viewport:r,transform:l,imageLayer:c,background:h},objs:this.objs,commonObjs:this.commonObjs,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:y,webGLContext:_,useRequestAnimationFrame:"print"!==g,pdfBug:this._pdfBug});v.renderTasks||(v.renderTasks=[]),v.renderTasks.push(m);const b=m.task;return Promise.all([v.displayReadyCapability.promise,p]).then((([t,r])=>{this.pendingCleanup?complete():(this._stats&&this._stats.time("Rendering"),m.initializeGraphics({transparency:t,optionalContentConfig:r}),m.operatorListChanged())})).catch(complete),b}getOperatorList(){const t="oplist";let r,i=this._intentStates.get(t);return i||(i=Object.create(null),this._intentStates.set(t,i)),i.opListReadCapability||(r=Object.create(null),r.operatorListChanged=function operatorListChanged(){if(i.operatorList.lastChunk){i.opListReadCapability.resolve(i.operatorList);const t=i.renderTasks.indexOf(r);t>=0&&i.renderTasks.splice(t,1)}},i.opListReadCapability=(0,_util.createPromiseCapability)(),i.renderTasks=[],i.renderTasks.push(r),i.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:t})),i.opListReadCapability.promise}streamTextContent({normalizeWhitespace:t=!1,disableCombineTextItems:r=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,normalizeWhitespace:!0===t,combineTextItems:!0!==r},{highWaterMark:100,size:t=>t.items.length})}getTextContent(t={}){const r=this.streamTextContent(t);return new Promise((function(t,i){const o=r.getReader(),a={items:[],styles:Object.create(null)};!function pump(){o.read().then((function({value:r,done:i}){i?t(a):(Object.assign(a.styles,r.styles),a.items.push(...r.items),pump())}),i)}()}))}_destroy(){this.destroyed=!0,this._transport.pageCache[this._pageIndex]=null;const t=[];for(const[r,i]of this._intentStates)if(this._abortOperatorList({intentState:i,reason:new Error("Page was destroyed."),force:!0}),"oplist"!==r)for(const r of i.renderTasks)t.push(r.completed),r.cancel();return this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1,Promise.all(t)}cleanup(t=!1){return this.pendingCleanup=!0,this._tryCleanup(t)}_tryCleanup(t=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:t,operatorList:r}of this._intentStates.values())if(0!==t.length||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.annotationsPromise=null,t&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}_startRenderPage(t,r){const i=this._intentStates.get(r);i&&(this._stats&&this._stats.timeEnd("Page Request"),i.displayReadyCapability&&i.displayReadyCapability.resolve(t))}_renderPageChunk(t,r){for(let i=0,o=t.length;i<o;i++)r.operatorList.fnArray.push(t.fnArray[i]),r.operatorList.argsArray.push(t.argsArray[i]);r.operatorList.lastChunk=t.lastChunk;for(let t=0;t<r.renderTasks.length;t++)r.renderTasks[t].operatorListChanged();t.lastChunk&&this._tryCleanup()}_pumpOperatorList(t){(0,_util.assert)(t.intent,'PDFPageProxy._pumpOperatorList: Expected "intent" argument.');const r=this._transport.messageHandler.sendWithStream("GetOperatorList",t).getReader(),i=this._intentStates.get(t.intent);i.streamReader=r;const pump=()=>{r.read().then((({value:t,done:r})=>{r?i.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,i),pump())}),(t=>{if(i.streamReader=null,!this._transport.destroyed){if(i.operatorList){i.operatorList.lastChunk=!0;for(let t=0;t<i.renderTasks.length;t++)i.renderTasks[t].operatorListChanged();this._tryCleanup()}if(i.displayReadyCapability)i.displayReadyCapability.reject(t);else{if(!i.opListReadCapability)throw t;i.opListReadCapability.reject(t)}}}))};pump()}_abortOperatorList({intentState:t,reason:r,force:i=!1}){if((0,_util.assert)(r instanceof Error||"object"==typeof r&&null!==r,'PDFPageProxy._abortOperatorList: Expected "reason" argument.'),t.streamReader){if(!i){if(0!==t.renderTasks.length)return;if(r instanceof _display_utils.RenderingCancelledException)return void(t.streamReaderCancelTimeout=setTimeout((()=>{this._abortOperatorList({intentState:t,reason:r,force:!0}),t.streamReaderCancelTimeout=null}),RENDERING_CANCELLED_TIMEOUT))}if(t.streamReader.cancel(new _util.AbortException(r&&r.message)),t.streamReader=null,!this._transport.destroyed){for(const[r,i]of this._intentStates)if(i===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(t=!0){this._listeners=[],this._defer=t,this._deferred=Promise.resolve(void 0)}postMessage(t,r){if(!this._defer)return void this._listeners.forEach((r=>{r.call(this,{data:t})}));const i=new WeakMap,o={data:function cloneValue(t){if("object"!=typeof t||null===t)return t;if(i.has(t))return i.get(t);let o,a;if((o=t.buffer)&&(0,_util.isArrayBuffer)(o)){return a=r&&r.includes(o)?new t.constructor(o,t.byteOffset,t.byteLength):new t.constructor(t),i.set(t,a),a}a=Array.isArray(t)?[]:{},i.set(t,a);for(const r in t){let i,o=t;for(;!(i=Object.getOwnPropertyDescriptor(o,r));)o=Object.getPrototypeOf(o);if(void 0!==i.value)if("function"!=typeof i.value)a[r]=cloneValue(i.value);else if(t.hasOwnProperty&&t.hasOwnProperty(r))throw new Error(`LoopbackPort.postMessage - cannot clone: ${t[r]}`)}return a}(t)};this._deferred.then((()=>{this._listeners.forEach((t=>{t.call(this,o)}))}))}addEventListener(t,r){this._listeners.push(r)}removeEventListener(t,r){const i=this._listeners.indexOf(r);this._listeners.splice(i,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorker=function PDFWorkerClosure(){const pdfWorkerPorts=new WeakMap;let isWorkerDisabled=!1,fallbackWorkerSrc,nextFakeWorkerId=0,fakeWorkerCapability;if(_is_node.isNodeJS)isWorkerDisabled=!0,fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document&&"currentScript"in document){const t=document.currentScript&&document.currentScript.src;t&&(fallbackWorkerSrc=t.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}function getWorkerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(void 0!==fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}function getMainThreadWorkerMessageHandler(){let t;try{t=globalThis.pdfjsWorker&&globalThis.pdfjsWorker.WorkerMessageHandler}catch(t){}return t||null}function setupFakeWorkerGlobal(){if(fakeWorkerCapability)return fakeWorkerCapability.promise;fakeWorkerCapability=(0,_util.createPromiseCapability)();const loader=async function(){const mainWorkerMessageHandler=getMainThreadWorkerMessageHandler();if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(getWorkerSrc());return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(getWorkerSrc()),window.pdfjsWorker.WorkerMessageHandler};return loader().then(fakeWorkerCapability.resolve,fakeWorkerCapability.reject),fakeWorkerCapability.promise}function createCDNWrapper(t){const r="importScripts('"+t+"');";return URL.createObjectURL(new Blob([r]))}class PDFWorker{constructor({name:t=null,port:r=null,verbosity:i=(0,_util.getVerbosityLevel)()}={}){if(r&&pdfWorkerPorts.has(r))throw new Error("Cannot use more than one PDFWorker per port");if(this.name=t,this.destroyed=!1,this.postMessageTransfers=!0,this.verbosity=i,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,r)return pdfWorkerPorts.set(r,this),void this._initializeFromPort(r);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new _message_handler.MessageHandler("main","worker",t),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve()}_initialize(){if("undefined"!=typeof Worker&&!isWorkerDisabled&&!getMainThreadWorkerMessageHandler()){let t=getWorkerSrc();try{(0,_util.isSameOrigin)(window.location.href,t)||(t=createCDNWrapper(new URL(t,window.location).href));const r=new Worker(t),i=new _message_handler.MessageHandler("main","worker",r),terminateEarly=()=>{r.removeEventListener("error",onWorkerError),i.destroy(),r.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},onWorkerError=()=>{this._webWorker||terminateEarly()};r.addEventListener("error",onWorkerError),i.on("test",(t=>{r.removeEventListener("error",onWorkerError),this.destroyed?terminateEarly():t?(this._messageHandler=i,this._port=r,this._webWorker=r,t.supportTransfers||(this.postMessageTransfers=!1),this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),i.destroy(),r.terminate())})),i.on("ready",(t=>{if(r.removeEventListener("error",onWorkerError),this.destroyed)terminateEarly();else try{sendTest()}catch(t){this._setupFakeWorker()}}));const sendTest=()=>{const t=new Uint8Array([this.postMessageTransfers?255:0]);try{i.send("test",t,[t.buffer])}catch(r){(0,_util.warn)("Cannot use postMessage transfers."),t[0]=0,i.send("test",t)}};return void sendTest()}catch(t){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),isWorkerDisabled=!0),setupFakeWorkerGlobal().then((t=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const r=new LoopbackPort;this._port=r;const i="fake"+nextFakeWorkerId++,o=new _message_handler.MessageHandler(i+"_worker",i,r);t.setup(o,r);const a=new _message_handler.MessageHandler(i,i+"_worker",r);this._messageHandler=a,this._readyCapability.resolve(),a.send("configure",{verbosity:this.verbosity})})).catch((t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))}))}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),pdfWorkerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){if(!t||!t.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return pdfWorkerPorts.has(t.port)?pdfWorkerPorts.get(t.port):new PDFWorker(t)}static getWorkerSrc(){return getWorkerSrc()}}return PDFWorker}();exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(t,r,i,o){this.messageHandler=t,this.loadingTask=r,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:r.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:o.ownerDocument}),this._params=o,this.CMapReaderFactory=new o.CMapReaderFactory({baseUrl:o.cMapUrl,isCompressed:o.cMapPacked}),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];this.pageCache.forEach((function(r){r&&t.push(r._destroy())})),this.pageCache.length=0,this.pagePromises.length=0;const r=this.messageHandler.sendWithPromise("Terminate",null);return t.push(r),Promise.all(t).then((()=>{this.fontLoader.clear(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:r}=this;t.on("GetReader",((t,r)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}},r.onPull=()=>{this._fullReader.read().then((function({value:t,done:i}){i?r.close():((0,_util.assert)((0,_util.isArrayBuffer)(t),"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(t),1,[t]))})).catch((t=>{r.error(t)}))},r.onCancel=t=>{this._fullReader.cancel(t),r.ready.catch((t=>{if(!this.destroyed)throw t}))}})),t.on("ReaderHeadersReady",(t=>{const i=(0,_util.createPromiseCapability)(),o=this._fullReader;return o.headersReady.then((()=>{o.isStreamingSupported&&o.isRangeSupported||(this._lastProgress&&r.onProgress&&r.onProgress(this._lastProgress),o.onProgress=t=>{r.onProgress&&r.onProgress({loaded:t.loaded,total:t.total})}),i.resolve({isStreamingSupported:o.isStreamingSupported,isRangeSupported:o.isRangeSupported,contentLength:o.contentLength})}),i.reject),i.promise})),t.on("GetRangeReader",((t,r)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(t.begin,t.end);i?(r.onPull=()=>{i.read().then((function({value:t,done:i}){i?r.close():((0,_util.assert)((0,_util.isArrayBuffer)(t),"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(t),1,[t]))})).catch((t=>{r.error(t)}))},r.onCancel=t=>{i.cancel(t),r.ready.catch((t=>{if(!this.destroyed)throw t}))}):r.close()})),t.on("GetDoc",(({pdfInfo:t})=>{this._numPages=t.numPages,r._capability.resolve(new PDFDocumentProxy(t,this))})),t.on("DocException",(function(t){let i;switch(t.name){case"PasswordException":i=new _util.PasswordException(t.message,t.code);break;case"InvalidPDFException":i=new _util.InvalidPDFException(t.message);break;case"MissingPDFException":i=new _util.MissingPDFException(t.message);break;case"UnexpectedResponseException":i=new _util.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":i=new _util.UnknownErrorException(t.message,t.details)}if(!(i instanceof Error)){const t="DocException - expected a valid Error.";(0,_util.warn)(t)}r._capability.reject(i)})),t.on("PasswordRequest",(t=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),r.onPassword){const updatePassword=t=>{this._passwordCapability.resolve({password:t})};try{r.onPassword(updatePassword,t.code)}catch(t){this._passwordCapability.reject(t)}}else this._passwordCapability.reject(new _util.PasswordException(t.message,t.code));return this._passwordCapability.promise})),t.on("DataLoaded",(t=>{r.onProgress&&r.onProgress({loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)})),t.on("StartRenderPage",(t=>{if(this.destroyed)return;this.pageCache[t.pageIndex]._startRenderPage(t.transparency,t.intent)})),t.on("commonobj",(r=>{if(this.destroyed)return;const[i,o,a]=r;if(!this.commonObjs.has(i))switch(o){case"Font":const r=this._params;if("error"in a){const t=a.error;(0,_util.warn)(`Error during font loading: ${t}`),this.commonObjs.resolve(i,t);break}let l=null;r.pdfBug&&globalThis.FontInspector&&globalThis.FontInspector.enabled&&(l={registerFont(t,r){globalThis.FontInspector.fontAdded(t,r)}});const c=new _font_loader.FontFaceObject(a,{isEvalSupported:r.isEvalSupported,disableFontFace:r.disableFontFace,ignoreErrors:r.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:l});this.fontLoader.bind(c).catch((r=>t.sendWithPromise("FontFallback",{id:i}))).finally((()=>{!r.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(i,c)}));break;case"FontPath":case"Image":this.commonObjs.resolve(i,a);break;default:throw new Error(`Got unknown common object type ${o}`)}})),t.on("obj",(t=>{if(this.destroyed)return;const[r,i,o,a]=t,l=this.pageCache[i];if(!l.objs.has(r))switch(o){case"Image":l.objs.resolve(r,a);const t=8e6;a&&"data"in a&&a.data.length>t&&(l.cleanupAfterRender=!0);break;default:throw new Error(`Got unknown object type ${o}`)}})),t.on("DocProgress",(t=>{this.destroyed||r.onProgress&&r.onProgress({loaded:t.loaded,total:t.total})})),t.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),t.on("FetchBuiltInCMap",((t,r)=>{if(this.destroyed)return void r.error(new Error("Worker was destroyed"));let i=!1;r.onPull=()=>{i?r.close():(i=!0,this.CMapReaderFactory.fetch(t).then((function(t){r.enqueue(t,1,[t.cMapData.buffer])})).catch((function(t){r.error(t)})))}}))}_onUnsupportedFeature({featureId:t}){this.destroyed||this.loadingTask.onUnsupportedFeature&&this.loadingTask.onUnsupportedFeature(t)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request"));const r=t-1;if(r in this.pagePromises)return this.pagePromises[r];const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:r}).then((t=>{if(this.destroyed)throw new Error("Transport destroyed");const i=new PDFPageProxy(r,t,this,this._params.ownerDocument,this._params.pdfBug);return this.pageCache[r]=i,i}));return this.pagePromises[r]=i,i}getPageIndex(t){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:t}).catch((function(t){return Promise.reject(new Error(t))}))}getAnnotations(t,r){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:r})}saveDocument(t){return this.messageHandler.sendWithPromise("SaveDocument",{numPages:this._numPages,annotationStorage:t&&t.getAll()||null,filename:this._fullReader?this._fullReader.filename:null}).finally((()=>{t&&t.resetModified()}))}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then((t=>new _optional_content_config.OptionalContentConfig(t)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return this.messageHandler.sendWithPromise("GetMetadata",null).then((t=>({info:t[0],metadata:t[1]?new _metadata.Metadata(t[1]):null,contentDispositionFilename:this._fullReader?this._fullReader.filename:null})))}getStats(){return this.messageHandler.sendWithPromise("GetStats",null)}startCleanup(){return this.messageHandler.sendWithPromise("Cleanup",null).then((()=>{for(let t=0,r=this.pageCache.length;t<r;t++){const r=this.pageCache[t];if(r){if(!r.cleanup())throw new Error(`startCleanup: Page ${t+1} is currently rendering.`)}}this.commonObjs.clear(),this.fontLoader.clear()}))}get loadingParams(){const t=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t.disableAutoFetch,disableFontFace:t.disableFontFace})}}class PDFObjects{constructor(){this._objs=Object.create(null)}_ensureObj(t){return this._objs[t]?this._objs[t]:this._objs[t]={capability:(0,_util.createPromiseCapability)(),data:null,resolved:!1}}get(t,r=null){if(r)return this._ensureObj(t).capability.promise.then(r),null;const i=this._objs[t];if(!i||!i.resolved)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const r=this._objs[t];return!!r&&r.resolved}resolve(t,r){const i=this._ensureObj(t);i.resolved=!0,i.data=r,i.capability.resolve(r)}clear(){this._objs=Object.create(null)}}class RenderTask{constructor(t){this._internalRenderTask=t,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}const InternalRenderTask=function InternalRenderTaskClosure(){const t=new WeakSet;return class InternalRenderTask{constructor({callback:t,params:r,objs:i,commonObjs:o,operatorList:a,pageIndex:l,canvasFactory:c,webGLContext:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1}){this.callback=t,this.params=r,this.objs=i,this.commonObjs=o,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=l,this.canvasFactory=c,this.webGLContext=u,this._pdfBug=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===h&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=r.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics({transparency:r=!1,optionalContentConfig:i}){if(this.cancelled)return;if(this._canvas){if(t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager&&globalThis.StepperManager.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:o,viewport:a,transform:l,imageLayer:c,background:u}=this.params;this.gfx=new _canvas.CanvasGraphics(o,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext,c,i),this.gfx.beginDrawing({transform:l,viewport:a,transparency:r,background:u}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(r=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&t.delete(this._canvas),this.callback(r||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame((()=>{this._nextBound().catch(this.cancel.bind(this))})):Promise.resolve().then(this._nextBound).catch(this.cancel.bind(this))}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&t.delete(this._canvas),this.callback())))}}}(),version="2.6.347";exports.version=version;const build="3be9c65f";exports.build=build},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FontLoader=r.FontFaceObject=void 0;var o=i(2);class BaseFontLoader{constructor({docId:t,onUnsupportedFeature:r,ownerDocument:i=globalThis.document}){this.constructor===BaseFontLoader&&(0,o.unreachable)("Cannot initialize BaseFontLoader."),this.docId=t,this._onUnsupportedFeature=r,this._document=i,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(t){this.nativeFontFaces.push(t),this._document.fonts.add(t)}insertRule(t){let r=this.styleElement;r||(r=this.styleElement=this._document.createElement("style"),r.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(r));const i=r.sheet;i.insertRule(t,i.cssRules.length)}clear(){this.nativeFontFaces.forEach((t=>{this._document.fonts.delete(t)})),this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(t){if(t.attached||t.missingFile)return;if(t.attached=!0,this.isFontLoadingAPISupported){const r=t.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(i){throw this._onUnsupportedFeature({featureId:o.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,o.warn)(`Failed to load font '${r.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const r=t.createFontFaceRule();if(r){if(this.insertRule(r),this.isSyncFontLoadingSupported)return;await new Promise((i=>{const o=this._queueLoadingCallback(i);this._prepareFontLoadEvent([r],[t],o)}))}}_queueLoadingCallback(t){(0,o.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){const t=void 0!==this._document&&!!this._document.fonts;return(0,o.shadow)(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){(0,o.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,o.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(t,r,i){(0,o.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let a;r.FontLoader=a,r.FontLoader=a=class GenericFontLoader extends BaseFontLoader{constructor(t){super(t),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let t=!1;if("undefined"==typeof navigator)t=!0;else{const r=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);r&&r[1]>=14&&(t=!0)}return(0,o.shadow)(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){const r=this.loadingContext,i={id:"pdfjs-font-loading-"+r.nextRequestId++,done:!1,complete:function completeRequest(){for((0,o.assert)(!i.done,"completeRequest() cannot be called twice."),i.done=!0;r.requests.length>0&&r.requests[0].done;){const t=r.requests.shift();setTimeout(t.callback,0)}},callback:t};return r.requests.push(i),i}get _loadTestFont(){return(0,o.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(t,r,i){function int32(t,r){return t.charCodeAt(r)<<24|t.charCodeAt(r+1)<<16|t.charCodeAt(r+2)<<8|255&t.charCodeAt(r+3)}function spliceString(t,r,i,o){return t.substring(0,r)+o+t.substring(r+i)}let a,l;const c=this._document.createElement("canvas");c.width=1,c.height=1;const u=c.getContext("2d");let h=0;const d=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=spliceString(p,976,d.length,d);const g=1482184792;let v=int32(p,16);for(a=0,l=d.length-3;a<l;a+=4)v=v-g+int32(d,a)|0;a<d.length&&(v=v-g+int32(d+"XXX",a)|0),p=spliceString(p,16,4,(0,o.string32)(v));const y=`@font-face {font-family:"${d}";src:${`url(data:font/opentype;base64,${btoa(p)});`}}`;this.insertRule(y);const _=[];for(a=0,l=r.length;a<l;a++)_.push(r[a].loadedName);_.push(d);const m=this._document.createElement("div");for(m.style.visibility="hidden",m.style.width=m.style.height="10px",m.style.position="absolute",m.style.top=m.style.left="0px",a=0,l=_.length;a<l;++a){const t=this._document.createElement("span");t.textContent="Hi",t.style.fontFamily=_[a],m.appendChild(t)}this._document.body.appendChild(m),function isFontReady(t,r){if(h++,h>30)return(0,o.warn)("Load test font never loaded."),void r();u.font="30px "+t,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0?r():setTimeout(isFontReady.bind(null,t,r))}(d,(()=>{this._document.body.removeChild(m),i.complete()}))}};r.FontFaceObject=class FontFaceObject{constructor(t,{isEvalSupported:r=!0,disableFontFace:i=!1,ignoreErrors:o=!1,onUnsupportedFeature:a=null,fontRegistry:l=null}){this.compiledGlyphs=Object.create(null);for(const r in t)this[r]=t[r];this.isEvalSupported=!1!==r,this.disableFontFace=!0===i,this.ignoreErrors=!0===o,this._onUnsupportedFeature=a,this.fontRegistry=l}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;const t=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=(0,o.bytesToString)(new Uint8Array(this.data)),r=`url(data:${this.mimetype};base64,${btoa(t)});`,i=`@font-face {font-family:"${this.loadedName}";src:${r}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,r),i}getPathGenerator(t,r){if(void 0!==this.compiledGlyphs[r])return this.compiledGlyphs[r];let i,a;try{i=t.get(this.loadedName+"_path_"+r)}catch(t){if(!this.ignoreErrors)throw t;return this._onUnsupportedFeature&&this._onUnsupportedFeature({featureId:o.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,o.warn)(`getPathGenerator - ignoring character: "${t}".`),this.compiledGlyphs[r]=function(t,r){}}if(this.isEvalSupported&&o.IsEvalSupportedCached.value){let t,o="";for(let r=0,l=i.length;r<l;r++)a=i[r],t=void 0!==a.args?a.args.join(","):"",o+="c."+a.cmd+"("+t+");\n";return this.compiledGlyphs[r]=new Function("c","size",o)}return this.compiledGlyphs[r]=function(t,r){for(let o=0,l=i.length;o<l;o++)a=i[o],"scale"===a.cmd&&(a.args=[r,-r]),t[a.cmd].apply(t,a.args)}}}},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NodeCMapReaderFactory=r.NodeCanvasFactory=void 0;var o=i(1),a=i(4),l=i(2);let c=class{constructor(){(0,l.unreachable)("Not implemented: NodeCanvasFactory")}};r.NodeCanvasFactory=c;let u=class{constructor(){(0,l.unreachable)("Not implemented: NodeCMapReaderFactory")}};r.NodeCMapReaderFactory=u,a.isNodeJS&&(r.NodeCanvasFactory=c=class extends o.BaseCanvasFactory{create(t,r){if(t<=0||r<=0)throw new Error("Invalid canvas size");const i=__webpack_require__(377).createCanvas(t,r);return{canvas:i,context:i.getContext("2d")}}},r.NodeCMapReaderFactory=u=class extends o.BaseCMapReaderFactory{_fetchData(t,r){return new Promise(((i,o)=>{__webpack_require__(993).readFile(t,((t,a)=>{!t&&a?i({cMapData:new Uint8Array(a),compressionType:r}):o(new Error(t))}))}))}})},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AnnotationStorage=void 0;r.AnnotationStorage=class AnnotationStorage{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getOrCreateValue(t,r){return this._storage.has(t)?this._storage.get(t):(this._storage.set(t,r),r)}setValue(t,r){this._storage.get(t)!==r&&this._setModified(),this._storage.set(t,r)}getAll(){return 0===this._storage.size?null:Object.fromEntries(this._storage)}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}}},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.apiCompatibilityParams=void 0;var o=i(4);const a=Object.create(null);!function checkFontFace(){o.isNodeJS&&(a.disableFontFace=!0)}();const l=Object.freeze(a);r.apiCompatibilityParams=l},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CanvasGraphics=void 0;var o=i(2),a=i(11),l=4096,c=.65,u=16;function addContextCurrentTransform(t){t.mozCurrentTransform||(t._originalSave=t.save,t._originalRestore=t.restore,t._originalRotate=t.rotate,t._originalScale=t.scale,t._originalTranslate=t.translate,t._originalTransform=t.transform,t._originalSetTransform=t.setTransform,t._transformMatrix=t._transformMatrix||[1,0,0,1,0,0],t._transformStack=[],Object.defineProperty(t,"mozCurrentTransform",{get:function getCurrentTransform(){return this._transformMatrix}}),Object.defineProperty(t,"mozCurrentTransformInverse",{get:function getCurrentTransformInverse(){var t=this._transformMatrix,r=t[0],i=t[1],o=t[2],a=t[3],l=t[4],c=t[5],u=r*a-i*o,h=i*o-r*a;return[a/u,i/h,o/h,r/u,(a*l-o*c)/h,(i*l-r*c)/u]}}),t.save=function ctxSave(){var t=this._transformMatrix;this._transformStack.push(t),this._transformMatrix=t.slice(0,6),this._originalSave()},t.restore=function ctxRestore(){var t=this._transformStack.pop();t&&(this._transformMatrix=t,this._originalRestore())},t.translate=function ctxTranslate(t,r){var i=this._transformMatrix;i[4]=i[0]*t+i[2]*r+i[4],i[5]=i[1]*t+i[3]*r+i[5],this._originalTranslate(t,r)},t.scale=function ctxScale(t,r){var i=this._transformMatrix;i[0]=i[0]*t,i[1]=i[1]*t,i[2]=i[2]*r,i[3]=i[3]*r,this._originalScale(t,r)},t.transform=function ctxTransform(r,i,o,a,l,c){var u=this._transformMatrix;this._transformMatrix=[u[0]*r+u[2]*i,u[1]*r+u[3]*i,u[0]*o+u[2]*a,u[1]*o+u[3]*a,u[0]*l+u[2]*c+u[4],u[1]*l+u[3]*c+u[5]],t._originalTransform(r,i,o,a,l,c)},t.setTransform=function ctxSetTransform(r,i,o,a,l,c){this._transformMatrix=[r,i,o,a,l,c],t._originalSetTransform(r,i,o,a,l,c)},t.rotate=function ctxRotate(t){var r=Math.cos(t),i=Math.sin(t),o=this._transformMatrix;this._transformMatrix=[o[0]*r+o[2]*i,o[1]*r+o[3]*i,o[0]*-i+o[2]*r,o[1]*-i+o[3]*r,o[4],o[5]],this._originalRotate(t)})}var h=function CachedCanvasesClosure(){function CachedCanvases(t){this.canvasFactory=t,this.cache=Object.create(null)}return CachedCanvases.prototype={getCanvas:function CachedCanvases_getCanvas(t,r,i,o){var a;return void 0!==this.cache[t]?(a=this.cache[t],this.canvasFactory.reset(a,r,i),a.context.setTransform(1,0,0,1,0,0)):(a=this.canvasFactory.create(r,i),this.cache[t]=a),o&&addContextCurrentTransform(a.context),a},clear(){for(var t in this.cache){var r=this.cache[t];this.canvasFactory.destroy(r),delete this.cache[t]}}},CachedCanvases}();var d=function CanvasExtraStateClosure(){function CanvasExtraState(){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null,this.transferMaps=null}return CanvasExtraState.prototype={clone:function CanvasExtraState_clone(){return Object.create(this)},setCurrentPoint:function CanvasExtraState_setCurrentPoint(t,r){this.x=t,this.y=r}},CanvasExtraState}(),p=function CanvasGraphicsClosure(){function CanvasGraphics(t,r,i,o,a,l,c){this.ctx=t,this.current=new d,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=r,this.objs=i,this.canvasFactory=o,this.webGLContext=a,this.imageLayer=l,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=c,this.cachedCanvases=new h(this.canvasFactory),t&&addContextCurrentTransform(t),this._cachedGetSinglePixelWidth=null}function putBinaryImageData(t,r,i=null){if("undefined"!=typeof ImageData&&r instanceof ImageData)return void t.putImageData(r,0,0);var a,l,c,h,d,p=r.height,g=r.width,v=p%u,y=(p-v)/u,_=0===v?y:y+1,m=t.createImageData(g,u),b=0,A=r.data,S=m.data;let w,x,C,k;if(i)switch(i.length){case 1:w=i[0],x=i[0],C=i[0],k=i[0];break;case 4:w=i[0],x=i[1],C=i[2],k=i[3]}if(r.kind===o.ImageKind.GRAYSCALE_1BPP){var P=A.byteLength,R=new Uint32Array(S.buffer,0,S.byteLength>>2),T=R.length,E=g+7>>3,L=4294967295,I=o.IsLittleEndianCached.value?4278190080:255;for(k&&255===k[0]&&0===k[255]&&([L,I]=[I,L]),l=0;l<_;l++){for(h=l<y?u:v,a=0,c=0;c<h;c++){var O=P-b;let t=0;for(var M=O>E?g:8*O-7,D=-8&M,N=0,B=0;t<D;t+=8)B=A[b++],R[a++]=128&B?L:I,R[a++]=64&B?L:I,R[a++]=32&B?L:I,R[a++]=16&B?L:I,R[a++]=8&B?L:I,R[a++]=4&B?L:I,R[a++]=2&B?L:I,R[a++]=1&B?L:I;for(;t<M;t++)0===N&&(B=A[b++],N=128),R[a++]=B&N?L:I,N>>=1}for(;a<T;)R[a++]=0;t.putImageData(m,0,l*u)}}else if(r.kind===o.ImageKind.RGBA_32BPP){const r=!!(w||x||C);for(c=0,d=g*u*4,l=0;l<y;l++){if(S.set(A.subarray(b,b+d)),b+=d,r)for(let t=0;t<d;t+=4)w&&(S[t+0]=w[S[t+0]]),x&&(S[t+1]=x[S[t+1]]),C&&(S[t+2]=C[S[t+2]]);t.putImageData(m,0,c),c+=u}if(l<_){if(d=g*v*4,S.set(A.subarray(b,b+d)),r)for(let t=0;t<d;t+=4)w&&(S[t+0]=w[S[t+0]]),x&&(S[t+1]=x[S[t+1]]),C&&(S[t+2]=C[S[t+2]]);t.putImageData(m,0,c)}}else{if(r.kind!==o.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${r.kind}`);{const r=!!(w||x||C);for(d=g*(h=u),l=0;l<_;l++){for(l>=y&&(d=g*(h=v)),a=0,c=d;c--;)S[a++]=A[b++],S[a++]=A[b++],S[a++]=A[b++],S[a++]=255;if(r)for(let t=0;t<a;t+=4)w&&(S[t+0]=w[S[t+0]]),x&&(S[t+1]=x[S[t+1]]),C&&(S[t+2]=C[S[t+2]]);t.putImageData(m,0,l*u)}}}}function putBinaryImageMask(t,r){for(var i=r.height,o=r.width,a=i%u,l=(i-a)/u,c=0===a?l:l+1,h=t.createImageData(o,u),d=0,p=r.data,g=h.data,v=0;v<c;v++){for(var y=v<l?u:a,_=3,m=0;m<y;m++)for(var b=0,A=0;A<o;A++){if(!b){var S=p[d++];b=128}g[_]=S&b?0:255,_+=4,b>>=1}t.putImageData(h,0,v*u)}}function copyCtxState(t,r){for(var i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],o=0,a=i.length;o<a;o++){var l=i[o];void 0!==t[l]&&(r[l]=t[l])}void 0!==t.setLineDash&&(r.setLineDash(t.getLineDash()),r.lineDashOffset=t.lineDashOffset)}function resetCtxToDefault(t){t.strokeStyle="#000000",t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0)}function composeSMaskBackdrop(t,r,i,o){for(var a=t.length,l=3;l<a;l+=4){var c=t[l];if(0===c)t[l-3]=r,t[l-2]=i,t[l-1]=o;else if(c<255){var u=255-c;t[l-3]=t[l-3]*c+r*u>>8,t[l-2]=t[l-2]*c+i*u>>8,t[l-1]=t[l-1]*c+o*u>>8}}}function composeSMaskAlpha(t,r,i){for(var o=t.length,a=3;a<o;a+=4){var l=i?i[t[a]]:t[a];r[a]=r[a]*l*.00392156862745098|0}}function composeSMaskLuminosity(t,r,i){for(var o=t.length,a=3;a<o;a+=4){var l=77*t[a-3]+152*t[a-2]+28*t[a-1];r[a]=i?r[a]*i[l>>8]>>8:r[a]*l>>16}}function composeSMask(t,r,i,o){var a=r.canvas,l=r.context;t.setTransform(r.scaleX,0,0,r.scaleY,r.offsetX,r.offsetY);var c=r.backdrop||null;if(!r.transferMap&&o.isEnabled){const l=o.composeSMask({layer:i.canvas,mask:a,properties:{subtype:r.subtype,backdrop:c}});return t.setTransform(1,0,0,1,0,0),void t.drawImage(l,r.offsetX,r.offsetY)}!function genericComposeSMask(t,r,i,o,a,l,c){var u,h=!!l,d=h?l[0]:0,p=h?l[1]:0,g=h?l[2]:0;u="Luminosity"===a?composeSMaskLuminosity:composeSMaskAlpha;for(var v=Math.min(o,Math.ceil(1048576/i)),y=0;y<o;y+=v){var _=Math.min(v,o-y),m=t.getImageData(0,y,i,_),b=r.getImageData(0,y,i,_);h&&composeSMaskBackdrop(m.data,d,p,g),u(m.data,b.data,c),t.putImageData(b,0,y)}}(l,i,a.width,a.height,r.subtype,c,r.transferMap),t.drawImage(a,0,0)}var t=["butt","round","square"],r=["miter","round","bevel"],i={},p={};for(var g in CanvasGraphics.prototype={beginDrawing({transform:t,viewport:r,transparency:i=!1,background:o=null}){var a=this.ctx.canvas.width,l=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=o||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,a,l),this.ctx.restore(),i){var c=this.cachedCanvases.getCanvas("transparent",a,l,!0);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),resetCtxToDefault(this.ctx),t&&this.ctx.transform.apply(this.ctx,t),this.ctx.transform.apply(this.ctx,r.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function CanvasGraphics_executeOperatorList(t,r,i,a){var l=t.argsArray,c=t.fnArray,u=r||0,h=l.length;if(h===u)return u;for(var d,p=h-u>10&&"function"==typeof i,g=p?Date.now()+15:0,v=0,y=this.commonObjs,_=this.objs;;){if(void 0!==a&&u===a.nextBreakPoint)return a.breakIt(u,i),u;if((d=c[u])!==o.OPS.dependency)this[d].apply(this,l[u]);else for(const t of l[u]){const r=t.startsWith("g_")?y:_;if(!r.has(t))return r.get(t,i),u}if(++u===h)return u;if(p&&++v>10){if(Date.now()>g)return i(),u;v=0}}},endDrawing:function CanvasGraphics_endDrawing(){null!==this.current.activeSMask&&this.endSMaskGroup(),this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.webGLContext.clear(),this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function CanvasGraphics_setLineWidth(t){this.current.lineWidth=t,this.ctx.lineWidth=t},setLineCap:function CanvasGraphics_setLineCap(r){this.ctx.lineCap=t[r]},setLineJoin:function CanvasGraphics_setLineJoin(t){this.ctx.lineJoin=r[t]},setMiterLimit:function CanvasGraphics_setMiterLimit(t){this.ctx.miterLimit=t},setDash:function CanvasGraphics_setDash(t,r){var i=this.ctx;void 0!==i.setLineDash&&(i.setLineDash(t),i.lineDashOffset=r)},setRenderingIntent(t){},setFlatness(t){},setGState:function CanvasGraphics_setGState(t){for(var r=0,i=t.length;r<i;r++){var o=t[r],a=o[0],l=o[1];switch(a){case"LW":this.setLineWidth(l);break;case"LC":this.setLineCap(l);break;case"LJ":this.setLineJoin(l);break;case"ML":this.setMiterLimit(l);break;case"D":this.setDash(l[0],l[1]);break;case"RI":this.setRenderingIntent(l);break;case"FL":this.setFlatness(l);break;case"Font":this.setFont(l[0],l[1]);break;case"CA":this.current.strokeAlpha=o[1];break;case"ca":this.current.fillAlpha=o[1],this.ctx.globalAlpha=o[1];break;case"BM":this.ctx.globalCompositeOperation=l;break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=l?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null;break;case"TR":this.current.transferMaps=l}}},beginSMaskGroup:function CanvasGraphics_beginSMaskGroup(){var t=this.current.activeSMask,r=t.canvas.width,i=t.canvas.height,o="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(o,r,i,!0),l=this.ctx,c=l.mozCurrentTransform;this.ctx.save();var u=a.context;u.scale(1/t.scaleX,1/t.scaleY),u.translate(-t.offsetX,-t.offsetY),u.transform.apply(u,c),t.startTransformInverse=u.mozCurrentTransformInverse,copyCtxState(l,u),this.ctx=u,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(l),this.groupLevel++},suspendSMaskGroup:function CanvasGraphics_endSMaskGroup(){var t=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),composeSMask(this.ctx,this.current.activeSMask,t,this.webGLContext),this.ctx.restore(),this.ctx.save(),copyCtxState(t,this.ctx),this.current.resumeSMaskCtx=t;var r=o.Util.transform(this.current.activeSMask.startTransformInverse,t.mozCurrentTransform);this.ctx.transform.apply(this.ctx,r),t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,t.canvas.width,t.canvas.height),t.restore()},resumeSMaskGroup:function CanvasGraphics_endSMaskGroup(){var t=this.current.resumeSMaskCtx,r=this.ctx;this.ctx=t,this.groupStack.push(r),this.groupLevel++},endSMaskGroup:function CanvasGraphics_endSMaskGroup(){var t=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),composeSMask(this.ctx,this.current.activeSMask,t,this.webGLContext),this.ctx.restore(),copyCtxState(t,this.ctx);var r=o.Util.transform(this.current.activeSMask.startTransformInverse,t.mozCurrentTransform);this.ctx.transform.apply(this.ctx,r)},save:function CanvasGraphics_save(){this.ctx.save();var t=this.current;this.stateStack.push(t),this.current=t.clone(),this.current.resumeSMaskCtx=null},restore:function CanvasGraphics_restore(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),null===this.current.activeSMask||0!==this.stateStack.length&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask||this.endSMaskGroup(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null)},transform:function CanvasGraphics_transform(t,r,i,o,a,l){this.ctx.transform(t,r,i,o,a,l),this._cachedGetSinglePixelWidth=null},constructPath:function CanvasGraphics_constructPath(t,r){for(var i=this.ctx,a=this.current,l=a.x,c=a.y,u=0,h=0,d=t.length;u<d;u++)switch(0|t[u]){case o.OPS.rectangle:l=r[h++],c=r[h++];var p=r[h++],g=r[h++];0===p&&i.lineWidth<this.getSinglePixelWidth()&&(p=this.getSinglePixelWidth()),0===g&&i.lineWidth<this.getSinglePixelWidth()&&(g=this.getSinglePixelWidth());var v=l+p,y=c+g;i.moveTo(l,c),i.lineTo(v,c),i.lineTo(v,y),i.lineTo(l,y),i.lineTo(l,c),i.closePath();break;case o.OPS.moveTo:l=r[h++],c=r[h++],i.moveTo(l,c);break;case o.OPS.lineTo:l=r[h++],c=r[h++],i.lineTo(l,c);break;case o.OPS.curveTo:l=r[h+4],c=r[h+5],i.bezierCurveTo(r[h],r[h+1],r[h+2],r[h+3],l,c),h+=6;break;case o.OPS.curveTo2:i.bezierCurveTo(l,c,r[h],r[h+1],r[h+2],r[h+3]),l=r[h+2],c=r[h+3],h+=4;break;case o.OPS.curveTo3:l=r[h+2],c=r[h+3],i.bezierCurveTo(r[h],r[h+1],l,c,l,c),h+=4;break;case o.OPS.closePath:i.closePath()}a.setCurrentPoint(l,c)},closePath:function CanvasGraphics_closePath(){this.ctx.closePath()},stroke:function CanvasGraphics_stroke(t){t=void 0===t||t;var r=this.ctx,i=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(i&&i.hasOwnProperty("type")&&"Pattern"===i.type){r.save();const t=r.mozCurrentTransform,a=o.Util.singularValueDecompose2dScale(t)[0];r.strokeStyle=i.getPattern(r,this),r.lineWidth=Math.max(this.getSinglePixelWidth()*c,this.current.lineWidth*a),r.stroke(),r.restore()}else r.lineWidth=Math.max(this.getSinglePixelWidth()*c,this.current.lineWidth),r.stroke();t&&this.consumePath(),r.globalAlpha=this.current.fillAlpha},closeStroke:function CanvasGraphics_closeStroke(){this.closePath(),this.stroke()},fill:function CanvasGraphics_fill(t){t=void 0===t||t;var r=this.ctx,i=this.current.fillColor,o=!1;this.current.patternFill&&(r.save(),this.baseTransform&&r.setTransform.apply(r,this.baseTransform),r.fillStyle=i.getPattern(r,this),o=!0),this.contentVisible&&(this.pendingEOFill?(r.fill("evenodd"),this.pendingEOFill=!1):r.fill()),o&&r.restore(),t&&this.consumePath()},eoFill:function CanvasGraphics_eoFill(){this.pendingEOFill=!0,this.fill()},fillStroke:function CanvasGraphics_fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()},eoFillStroke:function CanvasGraphics_eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()},closeFillStroke:function CanvasGraphics_closeFillStroke(){this.closePath(),this.fillStroke()},closeEOFillStroke:function CanvasGraphics_closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()},endPath:function CanvasGraphics_endPath(){this.consumePath()},clip:function CanvasGraphics_clip(){this.pendingClip=i},eoClip:function CanvasGraphics_eoClip(){this.pendingClip=p},beginText:function CanvasGraphics_beginText(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},endText:function CanvasGraphics_endText(){var t=this.pendingTextPaths,r=this.ctx;if(void 0!==t){r.save(),r.beginPath();for(var i=0;i<t.length;i++){var o=t[i];r.setTransform.apply(r,o.transform),r.translate(o.x,o.y),o.addToPath(r,o.fontSize)}r.restore(),r.clip(),r.beginPath(),delete this.pendingTextPaths}else r.beginPath()},setCharSpacing:function CanvasGraphics_setCharSpacing(t){this.current.charSpacing=t},setWordSpacing:function CanvasGraphics_setWordSpacing(t){this.current.wordSpacing=t},setHScale:function CanvasGraphics_setHScale(t){this.current.textHScale=t/100},setLeading:function CanvasGraphics_setLeading(t){this.current.leading=-t},setFont:function CanvasGraphics_setFont(t,r){var i=this.commonObjs.get(t),a=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(a.fontMatrix=i.fontMatrix?i.fontMatrix:o.FONT_IDENTITY_MATRIX,0!==a.fontMatrix[0]&&0!==a.fontMatrix[3]||(0,o.warn)("Invalid font matrix for font "+t),r<0?(r=-r,a.fontDirection=-1):a.fontDirection=1,this.current.font=i,this.current.fontSize=r,i.isType3Font)return;var l=i.loadedName||"sans-serif";let c="normal";i.black?c="900":i.bold&&(c="bold");var u=i.italic?"italic":"normal",h=`"${l}", ${i.fallbackName}`;let d=r;r<16?d=16:r>100&&(d=100),this.current.fontSizeScale=r/d,this.ctx.font=`${u} ${c} ${d}px ${h}`},setTextRenderingMode:function CanvasGraphics_setTextRenderingMode(t){this.current.textRenderingMode=t},setTextRise:function CanvasGraphics_setTextRise(t){this.current.textRise=t},moveText:function CanvasGraphics_moveText(t,r){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=r},setLeadingMoveText:function CanvasGraphics_setLeadingMoveText(t,r){this.setLeading(-r),this.moveText(t,r)},setTextMatrix:function CanvasGraphics_setTextMatrix(t,r,i,o,a,l){this.current.textMatrix=[t,r,i,o,a,l],this.current.textMatrixScale=Math.sqrt(t*t+r*r),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},nextLine:function CanvasGraphics_nextLine(){this.moveText(0,this.current.leading)},paintChar(t,r,i,a){var l=this.ctx,c=this.current,u=c.font,h=c.textRenderingMode,d=c.fontSize/c.fontSizeScale,p=h&o.TextRenderingMode.FILL_STROKE_MASK,g=!!(h&o.TextRenderingMode.ADD_TO_PATH_FLAG);const v=c.patternFill&&!u.missingFile;var y;((u.disableFontFace||g||v)&&(y=u.getPathGenerator(this.commonObjs,t)),u.disableFontFace||v?(l.save(),l.translate(r,i),l.beginPath(),y(l,d),a&&l.setTransform.apply(l,a),p!==o.TextRenderingMode.FILL&&p!==o.TextRenderingMode.FILL_STROKE||l.fill(),p!==o.TextRenderingMode.STROKE&&p!==o.TextRenderingMode.FILL_STROKE||l.stroke(),l.restore()):(p!==o.TextRenderingMode.FILL&&p!==o.TextRenderingMode.FILL_STROKE||l.fillText(t,r,i),p!==o.TextRenderingMode.STROKE&&p!==o.TextRenderingMode.FILL_STROKE||l.strokeText(t,r,i)),g)&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:l.mozCurrentTransform,x:r,y:i,fontSize:d,addToPath:y})},get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);for(var r=t.getImageData(0,0,10,10).data,i=!1,a=3;a<r.length;a+=4)if(r[a]>0&&r[a]<255){i=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",i)},showText:function CanvasGraphics_showText(t){var r=this.current,i=r.font;if(i.isType3Font)return this.showType3Text(t);var a=r.fontSize;if(0===a)return;var l=this.ctx,u=r.fontSizeScale,h=r.charSpacing,d=r.wordSpacing,p=r.fontDirection,g=r.textHScale*p,v=t.length,y=i.vertical,_=y?1:-1,m=i.defaultVMetrics,b=a*r.fontMatrix[0],A=r.textRenderingMode===o.TextRenderingMode.FILL&&!i.disableFontFace&&!r.patternFill;let S;if(l.save(),r.patternFill){l.save();const t=r.fillColor.getPattern(l,this);S=l.mozCurrentTransform,l.restore(),l.fillStyle=t}l.transform.apply(l,r.textMatrix),l.translate(r.x,r.y+r.textRise),p>0?l.scale(g,-1):l.scale(g,1);var w=r.lineWidth,x=r.textMatrixScale;if(0===x||0===w){var C=r.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;C!==o.TextRenderingMode.STROKE&&C!==o.TextRenderingMode.FILL_STROKE||(this._cachedGetSinglePixelWidth=null,w=this.getSinglePixelWidth()*c)}else w/=x;1!==u&&(l.scale(u,u),w/=u),l.lineWidth=w;var k,P=0;for(k=0;k<v;++k){var R=t[k];if((0,o.isNum)(R))P+=_*R*a/1e3;else{var T,E,L,I,O,M,D,N=!1,B=(R.isSpace?d:0)+h,z=R.fontChar,j=R.accent,U=R.width;if(y)O=R.vmetric||m,M=-(M=R.vmetric?O[1]:.5*U)*b,D=O[2]*b,U=O?-O[0]:U,T=M/u,E=(P+D)/u;else T=P/u,E=0;if(i.remeasure&&U>0){var H=1e3*l.measureText(z).width/a*u;if(U<H&&this.isFontSubpixelAAEnabled){var V=U/H;N=!0,l.save(),l.scale(V,1),T/=V}else U!==H&&(T+=(U-H)/2e3*a/u)}this.contentVisible&&(R.isInFont||i.missingFile)&&(A&&!j?l.fillText(z,T,E):(this.paintChar(z,T,E,S),j&&(L=T+a*j.offset.x/u,I=E-a*j.offset.y/u,this.paintChar(j.fontChar,L,I,S)))),P+=y?U*b-B*p:U*b+B*p,N&&l.restore()}}y?r.y-=P:r.x+=P*g,l.restore()},showType3Text:function CanvasGraphics_showType3Text(t){var r,i,a,l,c=this.ctx,u=this.current,h=u.font,d=u.fontSize,p=u.fontDirection,g=h.vertical?1:-1,v=u.charSpacing,y=u.wordSpacing,_=u.textHScale*p,m=u.fontMatrix||o.FONT_IDENTITY_MATRIX,b=t.length;if(!(u.textRenderingMode===o.TextRenderingMode.INVISIBLE)&&0!==d){for(this._cachedGetSinglePixelWidth=null,c.save(),c.transform.apply(c,u.textMatrix),c.translate(u.x,u.y),c.scale(_,p),r=0;r<b;++r)if(i=t[r],(0,o.isNum)(i))l=g*i*d/1e3,this.ctx.translate(l,0),u.x+=l*_;else{var A=(i.isSpace?y:0)+v,S=h.charProcOperatorList[i.operatorListId];if(S)this.contentVisible&&(this.processingType3=i,this.save(),c.scale(d,d),c.transform.apply(c,m),this.executeOperatorList(S),this.restore()),a=o.Util.applyTransform([i.width,0],m)[0]*d+A,c.translate(a,0),u.x+=a*_;else(0,o.warn)(`Type3 character "${i.operatorListId}" is not available.`)}c.restore(),this.processingType3=null}},setCharWidth:function CanvasGraphics_setCharWidth(t,r){},setCharWidthAndBounds:function CanvasGraphics_setCharWidthAndBounds(t,r,i,o,a,l){this.ctx.rect(i,o,a-i,l-o),this.clip(),this.endPath()},getColorN_Pattern:function CanvasGraphics_getColorN_Pattern(t){var r;if("TilingPattern"===t[0]){var i=t[1],o=this.baseTransform||this.ctx.mozCurrentTransform.slice(),l={createCanvasGraphics:t=>new CanvasGraphics(t,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext)};r=new a.TilingPattern(t,i,this.ctx,l,o)}else r=(0,a.getShadingPatternFromIR)(t);return r},setStrokeColorN:function CanvasGraphics_setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function CanvasGraphics_setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0},setStrokeRGBColor:function CanvasGraphics_setStrokeRGBColor(t,r,i){var a=o.Util.makeCssRgb(t,r,i);this.ctx.strokeStyle=a,this.current.strokeColor=a},setFillRGBColor:function CanvasGraphics_setFillRGBColor(t,r,i){var a=o.Util.makeCssRgb(t,r,i);this.ctx.fillStyle=a,this.current.fillColor=a,this.current.patternFill=!1},shadingFill:function CanvasGraphics_shadingFill(t){if(this.contentVisible){var r=this.ctx;this.save();var i=(0,a.getShadingPatternFromIR)(t);r.fillStyle=i.getPattern(r,this,!0);var l=r.mozCurrentTransformInverse;if(l){var c=r.canvas,u=c.width,h=c.height,d=o.Util.applyTransform([0,0],l),p=o.Util.applyTransform([0,h],l),g=o.Util.applyTransform([u,0],l),v=o.Util.applyTransform([u,h],l),y=Math.min(d[0],p[0],g[0],v[0]),_=Math.min(d[1],p[1],g[1],v[1]),m=Math.max(d[0],p[0],g[0],v[0]),b=Math.max(d[1],p[1],g[1],v[1]);this.ctx.fillRect(y,_,m-y,b-_)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()}},beginInlineImage:function CanvasGraphics_beginInlineImage(){(0,o.unreachable)("Should not call beginInlineImage")},beginImageData:function CanvasGraphics_beginImageData(){(0,o.unreachable)("Should not call beginImageData")},paintFormXObjectBegin:function CanvasGraphics_paintFormXObjectBegin(t,r){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(t)&&6===t.length&&this.transform.apply(this,t),this.baseTransform=this.ctx.mozCurrentTransform,r)){var i=r[2]-r[0],o=r[3]-r[1];this.ctx.rect(r[0],r[1],i,o),this.clip(),this.endPath()}},paintFormXObjectEnd:function CanvasGraphics_paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())},beginGroup:function CanvasGraphics_beginGroup(t){if(this.contentVisible){this.save();var r=this.ctx;t.isolated||(0,o.info)("TODO: Support non-isolated groups."),t.knockout&&(0,o.warn)("Knockout groups not supported.");var i=r.mozCurrentTransform;if(t.matrix&&r.transform.apply(r,t.matrix),!t.bbox)throw new Error("Bounding box is required.");var a=o.Util.getAxialAlignedBoundingBox(t.bbox,r.mozCurrentTransform),c=[0,0,r.canvas.width,r.canvas.height];a=o.Util.intersect(a,c)||[0,0,0,0];var u=Math.floor(a[0]),h=Math.floor(a[1]),d=Math.max(Math.ceil(a[2])-u,1),p=Math.max(Math.ceil(a[3])-h,1),g=1,v=1;d>l&&(g=d/l,d=l),p>l&&(v=p/l,p=l);var y="groupAt"+this.groupLevel;t.smask&&(y+="_smask_"+this.smaskCounter++%2);var _=this.cachedCanvases.getCanvas(y,d,p,!0),m=_.context;m.scale(1/g,1/v),m.translate(-u,-h),m.transform.apply(m,i),t.smask?this.smaskStack.push({canvas:_.canvas,context:m,offsetX:u,offsetY:h,scaleX:g,scaleY:v,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(r.setTransform(1,0,0,1,0,0),r.translate(u,h),r.scale(g,v)),copyCtxState(r,m),this.ctx=m,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++,this.current.activeSMask=null}},endGroup:function CanvasGraphics_endGroup(t){if(this.contentVisible){this.groupLevel--;var r=this.ctx;this.ctx=this.groupStack.pop(),void 0!==this.ctx.imageSmoothingEnabled?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1,t.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(r.canvas,0,0),this.restore()}},beginAnnotations:function CanvasGraphics_beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)},endAnnotations:function CanvasGraphics_endAnnotations(){this.restore()},beginAnnotation:function CanvasGraphics_beginAnnotation(t,r,i){if(this.save(),resetCtxToDefault(this.ctx),this.current=new d,Array.isArray(t)&&4===t.length){var o=t[2]-t[0],a=t[3]-t[1];this.ctx.rect(t[0],t[1],o,a),this.clip(),this.endPath()}this.transform.apply(this,r),this.transform.apply(this,i)},endAnnotation:function CanvasGraphics_endAnnotation(){this.restore()},paintImageMaskXObject:function CanvasGraphics_paintImageMaskXObject(t){if(this.contentVisible){var r=this.ctx,i=t.width,o=t.height,a=this.current.fillColor,l=this.current.patternFill,c=this.processingType3;if(c&&void 0===c.compiled&&(c.compiled=i<=1e3&&o<=1e3?function compileType3Glyph(t){var r,i,o,a,l=t.width,c=t.height,u=l+1,h=new Uint8Array(u*(c+1)),d=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),p=l+7&-8,g=t.data,v=new Uint8Array(p*c),y=0;for(r=0,a=g.length;r<a;r++)for(var _=128,m=g[r];_>0;)v[y++]=m&_?0:255,_>>=1;var b=0;for(0!==v[y=0]&&(h[0]=1,++b),i=1;i<l;i++)v[y]!==v[y+1]&&(h[i]=v[y]?2:1,++b),y++;for(0!==v[y]&&(h[i]=2,++b),r=1;r<c;r++){o=r*u,v[(y=r*p)-p]!==v[y]&&(h[o]=v[y]?1:8,++b);var A=(v[y]?4:0)+(v[y-p]?8:0);for(i=1;i<l;i++)d[A=(A>>2)+(v[y+1]?4:0)+(v[y-p+1]?8:0)]&&(h[o+i]=d[A],++b),y++;if(v[y-p]!==v[y]&&(h[o+i]=v[y]?2:4,++b),b>1e3)return null}for(o=r*u,0!==v[y=p*(c-1)]&&(h[o]=8,++b),i=1;i<l;i++)v[y]!==v[y+1]&&(h[o+i]=v[y]?4:8,++b),y++;if(0!==v[y]&&(h[o+i]=4,++b),b>1e3)return null;var S=new Int32Array([0,u,-1,0,-u,0,0,0,1]),w=[];for(r=0;b&&r<=c;r++){for(var x=r*u,C=x+l;x<C&&!h[x];)x++;if(x!==C){var k,P=[x%u,r],R=h[x],T=x;do{var E=S[R];do{x+=E}while(!h[x]);5!==(k=h[x])&&10!==k?(R=k,h[x]=0):(R=k&51*R>>4,h[x]&=R>>2|R<<2),P.push(x%u),P.push(x/u|0),h[x]||--b}while(T!==x);w.push(P),--r}}return function(t){t.save(),t.scale(1/l,-1/c),t.translate(0,-c),t.beginPath();for(let i=0,o=w.length;i<o;i++){var r=w[i];t.moveTo(r[0],r[1]);for(let i=2,o=r.length;i<o;i+=2)t.lineTo(r[i],r[i+1])}t.fill(),t.beginPath(),t.restore()}}({data:t.data,width:i,height:o}):null),c&&c.compiled)c.compiled(r);else{var u=this.cachedCanvases.getCanvas("maskCanvas",i,o),h=u.context;h.save(),putBinaryImageMask(h,t),h.globalCompositeOperation="source-in",h.fillStyle=l?a.getPattern(h,this):a,h.fillRect(0,0,i,o),h.restore(),this.paintInlineImageXObject(u.canvas)}}},paintImageMaskXObjectRepeat(t,r,i=0,o=0,a,l){if(this.contentVisible){var c=t.width,u=t.height,h=this.current.fillColor,d=this.current.patternFill,p=this.cachedCanvases.getCanvas("maskCanvas",c,u),g=p.context;g.save(),putBinaryImageMask(g,t),g.globalCompositeOperation="source-in",g.fillStyle=d?h.getPattern(g,this):h,g.fillRect(0,0,c,u),g.restore();for(var v=this.ctx,y=0,_=l.length;y<_;y+=2)v.save(),v.transform(r,i,o,a,l[y],l[y+1]),v.scale(1,-1),v.drawImage(p.canvas,0,0,c,u,0,-1,1,1),v.restore()}},paintImageMaskXObjectGroup:function CanvasGraphics_paintImageMaskXObjectGroup(t){if(this.contentVisible)for(var r=this.ctx,i=this.current.fillColor,o=this.current.patternFill,a=0,l=t.length;a<l;a++){var c=t[a],u=c.width,h=c.height,d=this.cachedCanvases.getCanvas("maskCanvas",u,h),p=d.context;p.save(),putBinaryImageMask(p,c),p.globalCompositeOperation="source-in",p.fillStyle=o?i.getPattern(p,this):i,p.fillRect(0,0,u,h),p.restore(),r.save(),r.transform.apply(r,c.transform),r.scale(1,-1),r.drawImage(d.canvas,0,0,u,h,0,-1,1,1),r.restore()}},paintImageXObject:function CanvasGraphics_paintImageXObject(t){if(!this.contentVisible)return;const r=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);r?this.paintInlineImageXObject(r):(0,o.warn)("Dependent image isn't ready yet")},paintImageXObjectRepeat:function CanvasGraphics_paintImageXObjectRepeat(t,r,i,a){if(!this.contentVisible)return;const l=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);if(l){for(var c=l.width,u=l.height,h=[],d=0,p=a.length;d<p;d+=2)h.push({transform:[r,0,0,i,a[d],a[d+1]],x:0,y:0,w:c,h:u});this.paintInlineImageXObjectGroup(l,h)}else(0,o.warn)("Dependent image isn't ready yet")},paintInlineImageXObject:function CanvasGraphics_paintInlineImageXObject(t){if(this.contentVisible){var r=t.width,i=t.height,o=this.ctx;this.save(),o.scale(1/r,-1/i);var a,l,c=o.mozCurrentTransformInverse,u=c[0],h=c[1],d=Math.max(Math.sqrt(u*u+h*h),1),p=c[2],g=c[3],v=Math.max(Math.sqrt(p*p+g*g),1);if("function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data)a=t;else{var y=(l=this.cachedCanvases.getCanvas("inlineImage",r,i)).context;putBinaryImageData(y,t,this.current.transferMaps),a=l.canvas}for(var _=r,m=i,b="prescale1";d>2&&_>1||v>2&&m>1;){var A=_,S=m;d>2&&_>1&&(d/=_/(A=Math.ceil(_/2))),v>2&&m>1&&(v/=m/(S=Math.ceil(m/2))),(y=(l=this.cachedCanvases.getCanvas(b,A,S)).context).clearRect(0,0,A,S),y.drawImage(a,0,0,_,m,0,0,A,S),a=l.canvas,_=A,m=S,b="prescale1"===b?"prescale2":"prescale1"}if(o.drawImage(a,0,0,_,m,0,-i,r,i),this.imageLayer){var w=this.getCanvasPosition(0,-i);this.imageLayer.appendImage({imgData:t,left:w[0],top:w[1],width:r/c[0],height:i/c[3]})}this.restore()}},paintInlineImageXObjectGroup:function CanvasGraphics_paintInlineImageXObjectGroup(t,r){if(this.contentVisible){var i=this.ctx,o=t.width,a=t.height,l=this.cachedCanvases.getCanvas("inlineImage",o,a);putBinaryImageData(l.context,t,this.current.transferMaps);for(var c=0,u=r.length;c<u;c++){var h=r[c];if(i.save(),i.transform.apply(i,h.transform),i.scale(1,-1),i.drawImage(l.canvas,h.x,h.y,h.w,h.h,0,-1,1,1),this.imageLayer){var d=this.getCanvasPosition(h.x,h.y);this.imageLayer.appendImage({imgData:t,left:d[0],top:d[1],width:o,height:a})}i.restore()}}},paintSolidColorImageMask:function CanvasGraphics_paintSolidColorImageMask(){this.contentVisible&&this.ctx.fillRect(0,0,1,1)},markPoint:function CanvasGraphics_markPoint(t){},markPointProps:function CanvasGraphics_markPointProps(t,r){},beginMarkedContent:function CanvasGraphics_beginMarkedContent(t){this.markedContentStack.push({visible:!0})},beginMarkedContentProps:function CanvasGraphics_beginMarkedContentProps(t,r){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()},endMarkedContent:function CanvasGraphics_endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()},beginCompat:function CanvasGraphics_beginCompat(){},endCompat:function CanvasGraphics_endCompat(){},consumePath:function CanvasGraphics_consumePath(){var t=this.ctx;this.pendingClip&&(this.pendingClip===p?t.clip("evenodd"):t.clip(),this.pendingClip=null),t.beginPath()},getSinglePixelWidth(t){if(null===this._cachedGetSinglePixelWidth){const t=this.ctx.mozCurrentTransformInverse;this._cachedGetSinglePixelWidth=Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1],t[2]*t[2]+t[3]*t[3]))}return this._cachedGetSinglePixelWidth},getCanvasPosition:function CanvasGraphics_getCanvasPosition(t,r){var i=this.ctx.mozCurrentTransform;return[i[0]*t+i[2]*r+i[4],i[1]*t+i[3]*r+i[5]]},isContentVisible:function CanvasGraphics_isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}},o.OPS)CanvasGraphics.prototype[o.OPS[g]]=CanvasGraphics.prototype[g];return CanvasGraphics}();r.CanvasGraphics=p},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getShadingPatternFromIR=function getShadingPatternFromIR(t){var r=a[t[0]];if(!r)throw new Error(`Unknown IR type: ${t[0]}`);return r.fromIR(t)},r.TilingPattern=void 0;var o=i(2),a={};function applyBoundingBox(t,r){if(!r||"undefined"==typeof Path2D)return;const i=r[2]-r[0],o=r[3]-r[1],a=new Path2D;a.rect(r[0],r[1],i,o),t.clip(a)}a.RadialAxial={fromIR:function RadialAxial_fromIR(t){var r=t[1],i=t[2],o=t[3],a=t[4],l=t[5],c=t[6],u=t[7];return{type:"Pattern",getPattern:function RadialAxial_getPattern(t){var h;applyBoundingBox(t,i),"axial"===r?h=t.createLinearGradient(a[0],a[1],l[0],l[1]):"radial"===r&&(h=t.createRadialGradient(a[0],a[1],c,l[0],l[1],u));for(var d=0,p=o.length;d<p;++d){var g=o[d];h.addColorStop(g[0],g[1])}return h}}}};var l=function createMeshCanvasClosure(){function drawTriangle(t,r,i,o,a,l,c,u){var h,d=r.coords,p=r.colors,g=t.data,v=4*t.width;d[i+1]>d[o+1]&&(h=i,i=o,o=h,h=l,l=c,c=h),d[o+1]>d[a+1]&&(h=o,o=a,a=h,h=c,c=u,u=h),d[i+1]>d[o+1]&&(h=i,i=o,o=h,h=l,l=c,c=h);var y=(d[i]+r.offsetX)*r.scaleX,_=(d[i+1]+r.offsetY)*r.scaleY,m=(d[o]+r.offsetX)*r.scaleX,b=(d[o+1]+r.offsetY)*r.scaleY,A=(d[a]+r.offsetX)*r.scaleX,S=(d[a+1]+r.offsetY)*r.scaleY;if(!(_>=S))for(var w,x,C,k,P,R,T,E,L=p[l],I=p[l+1],O=p[l+2],M=p[c],D=p[c+1],N=p[c+2],B=p[u],z=p[u+1],j=p[u+2],U=Math.round(_),H=Math.round(S),V=U;V<=H;V++){if(V<b){let t;t=V<_?0:_===b?1:(_-V)/(_-b),w=y-(y-m)*t,x=L-(L-M)*t,C=I-(I-D)*t,k=O-(O-N)*t}else{let t;t=V>S?1:b===S?0:(b-V)/(b-S),w=m-(m-A)*t,x=M-(M-B)*t,C=D-(D-z)*t,k=N-(N-j)*t}let t;t=V<_?0:V>S?1:(_-V)/(_-S),P=y-(y-A)*t,R=L-(L-B)*t,T=I-(I-z)*t,E=O-(O-j)*t;for(var G=Math.round(Math.min(w,P)),W=Math.round(Math.max(w,P)),q=v*V+4*G,Y=G;Y<=W;Y++)t=(w-Y)/(w-P),t<0?t=0:t>1&&(t=1),g[q++]=x-(x-R)*t|0,g[q++]=C-(C-T)*t|0,g[q++]=k-(k-E)*t|0,g[q++]=255}}function drawFigure(t,r,i){var o,a,l=r.coords,c=r.colors;switch(r.type){case"lattice":var u=r.verticesPerRow,h=Math.floor(l.length/u)-1,d=u-1;for(o=0;o<h;o++)for(var p=o*u,g=0;g<d;g++,p++)drawTriangle(t,i,l[p],l[p+1],l[p+u],c[p],c[p+1],c[p+u]),drawTriangle(t,i,l[p+u+1],l[p+1],l[p+u],c[p+u+1],c[p+1],c[p+u]);break;case"triangles":for(o=0,a=l.length;o<a;o+=3)drawTriangle(t,i,l[o],l[o+1],l[o+2],c[o],c[o+1],c[o+2]);break;default:throw new Error("illegal figure")}}return function createMeshCanvas(t,r,i,o,a,l,c,u){var h,d,p,g,v=Math.floor(t[0]),y=Math.floor(t[1]),_=Math.ceil(t[2])-v,m=Math.ceil(t[3])-y,b=Math.min(Math.ceil(Math.abs(_*r[0]*1.1)),3e3),A=Math.min(Math.ceil(Math.abs(m*r[1]*1.1)),3e3),S=_/b,w=m/A,x={coords:i,colors:o,offsetX:-v,offsetY:-y,scaleX:1/S,scaleY:1/w},C=b+4,k=A+4;if(u.isEnabled)h=u.drawFigures({width:b,height:A,backgroundColor:l,figures:a,context:x}),(d=c.getCanvas("mesh",C,k,!1)).context.drawImage(h,2,2),h=d.canvas;else{var P=(d=c.getCanvas("mesh",C,k,!1)).context,R=P.createImageData(b,A);if(l){var T=R.data;for(p=0,g=T.length;p<g;p+=4)T[p]=l[0],T[p+1]=l[1],T[p+2]=l[2],T[p+3]=255}for(p=0;p<a.length;p++)drawFigure(R,a[p],x);P.putImageData(R,2,2),h=d.canvas}return{canvas:h,offsetX:v-2*S,offsetY:y-2*w,scaleX:S,scaleY:w}}}();a.Mesh={fromIR:function Mesh_fromIR(t){var r=t[2],i=t[3],a=t[4],c=t[5],u=t[6],h=t[7],d=t[8];return{type:"Pattern",getPattern:function Mesh_getPattern(t,p,g){var v;if(applyBoundingBox(t,h),g)v=o.Util.singularValueDecompose2dScale(t.mozCurrentTransform);else if(v=o.Util.singularValueDecompose2dScale(p.baseTransform),u){var y=o.Util.singularValueDecompose2dScale(u);v=[v[0]*y[0],v[1]*y[1]]}var _=l(c,v,r,i,a,g?null:d,p.cachedCanvases,p.webGLContext);return g||(t.setTransform.apply(t,p.baseTransform),u&&t.transform.apply(t,u)),t.translate(_.offsetX,_.offsetY),t.scale(_.scaleX,_.scaleY),t.createPattern(_.canvas,"no-repeat")}}}},a.Dummy={fromIR:function Dummy_fromIR(){return{type:"Pattern",getPattern:function Dummy_fromIR_getPattern(){return"hotpink"}}}};var c=function TilingPatternClosure(){var t=1,r=2;function TilingPattern(t,r,i,o,a){this.operatorList=t[2],this.matrix=t[3]||[1,0,0,1,0,0],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=r,this.canvasGraphicsFactory=o,this.baseTransform=a,this.type="Pattern",this.ctx=i}return TilingPattern.prototype={createPatternCanvas:function TilinPattern_createPatternCanvas(t){var r=this.operatorList,i=this.bbox,a=this.xstep,l=this.ystep,c=this.paintType,u=this.tilingType,h=this.color,d=this.canvasGraphicsFactory;(0,o.info)("TilingType: "+u);var p=i[0],g=i[1],v=i[2],y=i[3],_=o.Util.singularValueDecompose2dScale(this.matrix),m=o.Util.singularValueDecompose2dScale(this.baseTransform),b=[_[0]*m[0],_[1]*m[1]],A=this.getSizeAndScale(a,this.ctx.canvas.width,b[0]),S=this.getSizeAndScale(l,this.ctx.canvas.height,b[1]),w=t.cachedCanvases.getCanvas("pattern",A.size,S.size,!0),x=w.context,C=d.createCanvasGraphics(x);return C.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(C,c,h),C.transform(A.scale,0,0,S.scale,0,0),C.transform(1,0,0,1,-p,-g),this.clipBbox(C,i,p,g,v,y),C.executeOperatorList(r),this.ctx.transform(1,0,0,1,p,g),this.ctx.scale(1/A.scale,1/S.scale),w.canvas},getSizeAndScale:function TilingPattern_getSizeAndScale(t,r,i){t=Math.abs(t);var o=Math.max(3e3,r),a=Math.ceil(t*i);return a>=o?a=o:i=a/t,{scale:i,size:a}},clipBbox:function clipBbox(t,r,i,o,a,l){if(Array.isArray(r)&&4===r.length){var c=a-i,u=l-o;t.ctx.rect(i,o,c,u),t.clip(),t.endPath()}},setFillAndStrokeStyleToContext:function setFillAndStrokeStyleToContext(i,a,l){const c=i.ctx,u=i.current;switch(a){case t:var h=this.ctx;c.fillStyle=h.fillStyle,c.strokeStyle=h.strokeStyle,u.fillColor=h.fillStyle,u.strokeColor=h.strokeStyle;break;case r:var d=o.Util.makeCssRgb(l[0],l[1],l[2]);c.fillStyle=d,c.strokeStyle=d,u.fillColor=d,u.strokeColor=d;break;default:throw new o.FormatError(`Unsupported paint type: ${a}`)}},getPattern:function TilingPattern_getPattern(t,r){(t=this.ctx).setTransform.apply(t,this.baseTransform),t.transform.apply(t,this.matrix);var i=this.createPatternCanvas(r);return t.createPattern(i,"repeat")}},TilingPattern}();r.TilingPattern=c},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GlobalWorkerOptions=void 0;const o=Object.create(null);r.GlobalWorkerOptions=o,o.workerPort=void 0===o.workerPort?null:o.workerPort,o.workerSrc=void 0===o.workerSrc?"":o.workerSrc},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MessageHandler=void 0;var o=i(2);const a=1,l=2,c=1,u=2,h=3,d=4,p=5,g=6,v=7,y=8;function wrapReason(t){if("object"!=typeof t||null===t)return t;switch(t.name){case"AbortException":return new o.AbortException(t.message);case"MissingPDFException":return new o.MissingPDFException(t.message);case"UnexpectedResponseException":return new o.UnexpectedResponseException(t.message,t.status);case"UnknownErrorException":return new o.UnknownErrorException(t.message,t.details);default:return new o.UnknownErrorException(t.message,t.toString())}}r.MessageHandler=class MessageHandler{constructor(t,r,i){this.sourceName=t,this.targetName=r,this.comObj=i,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=t=>{const r=t.data;if(r.targetName!==this.sourceName)return;if(r.stream)return void this._processStreamMessage(r);if(r.callback){const t=r.callbackId,i=this.callbackCapabilities[t];if(!i)throw new Error(`Cannot resolve callback ${t}`);if(delete this.callbackCapabilities[t],r.callback===a)i.resolve(r.data);else{if(r.callback!==l)throw new Error("Unexpected callback case");i.reject(wrapReason(r.reason))}return}const o=this.actionHandler[r.action];if(!o)throw new Error(`Unknown action from worker: ${r.action}`);if(r.callbackId){const t=this.sourceName,c=r.sourceName;new Promise((function(t){t(o(r.data))})).then((function(o){i.postMessage({sourceName:t,targetName:c,callback:a,callbackId:r.callbackId,data:o})}),(function(o){i.postMessage({sourceName:t,targetName:c,callback:l,callbackId:r.callbackId,reason:wrapReason(o)})}))}else r.streamId?this._createStreamSink(r):o(r.data)},i.addEventListener("message",this._onComObjOnMessage)}on(t,r){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=r}send(t,r,i){this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:r},i)}sendWithPromise(t,r,i){const a=this.callbackId++,l=(0,o.createPromiseCapability)();this.callbackCapabilities[a]=l;try{this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:r},i)}catch(t){l.reject(t)}return l.promise}sendWithStream(t,r,i,a){const l=this.streamId++,u=this.sourceName,h=this.targetName,d=this.comObj;return new ReadableStream({start:i=>{const c=(0,o.createPromiseCapability)();return this.streamControllers[l]={controller:i,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},this._postMessage({sourceName:u,targetName:h,action:t,streamId:l,data:r,desiredSize:i.desiredSize},a),c.promise},pull:t=>{const r=(0,o.createPromiseCapability)();return this.streamControllers[l].pullCall=r,d.postMessage({sourceName:u,targetName:h,stream:g,streamId:l,desiredSize:t.desiredSize}),r.promise},cancel:t=>{(0,o.assert)(t instanceof Error,"cancel must have a valid reason");const r=(0,o.createPromiseCapability)();return this.streamControllers[l].cancelCall=r,this.streamControllers[l].isClosed=!0,d.postMessage({sourceName:u,targetName:h,stream:c,streamId:l,reason:wrapReason(t)}),r.promise}},i)}_createStreamSink(t){const r=this,i=this.actionHandler[t.action],a=t.streamId,l=this.sourceName,c=t.sourceName,u=this.comObj,g={enqueue(t,i=1,u){if(this.isCancelled)return;const h=this.desiredSize;this.desiredSize-=i,h>0&&this.desiredSize<=0&&(this.sinkCapability=(0,o.createPromiseCapability)(),this.ready=this.sinkCapability.promise),r._postMessage({sourceName:l,targetName:c,stream:d,streamId:a,chunk:t},u)},close(){this.isCancelled||(this.isCancelled=!0,u.postMessage({sourceName:l,targetName:c,stream:h,streamId:a}),delete r.streamSinks[a])},error(t){(0,o.assert)(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,u.postMessage({sourceName:l,targetName:c,stream:p,streamId:a,reason:wrapReason(t)}))},sinkCapability:(0,o.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};g.sinkCapability.resolve(),g.ready=g.sinkCapability.promise,this.streamSinks[a]=g,new Promise((function(r){r(i(t.data,g))})).then((function(){u.postMessage({sourceName:l,targetName:c,stream:y,streamId:a,success:!0})}),(function(t){u.postMessage({sourceName:l,targetName:c,stream:y,streamId:a,reason:wrapReason(t)})}))}_processStreamMessage(t){const r=t.streamId,i=this.sourceName,a=t.sourceName,l=this.comObj;switch(t.stream){case y:t.success?this.streamControllers[r].startCall.resolve():this.streamControllers[r].startCall.reject(wrapReason(t.reason));break;case v:t.success?this.streamControllers[r].pullCall.resolve():this.streamControllers[r].pullCall.reject(wrapReason(t.reason));break;case g:if(!this.streamSinks[r]){l.postMessage({sourceName:i,targetName:a,stream:v,streamId:r,success:!0});break}this.streamSinks[r].desiredSize<=0&&t.desiredSize>0&&this.streamSinks[r].sinkCapability.resolve(),this.streamSinks[r].desiredSize=t.desiredSize;const{onPull:_}=this.streamSinks[t.streamId];new Promise((function(t){t(_&&_())})).then((function(){l.postMessage({sourceName:i,targetName:a,stream:v,streamId:r,success:!0})}),(function(t){l.postMessage({sourceName:i,targetName:a,stream:v,streamId:r,reason:wrapReason(t)})}));break;case d:if((0,o.assert)(this.streamControllers[r],"enqueue should have stream controller"),this.streamControllers[r].isClosed)break;this.streamControllers[r].controller.enqueue(t.chunk);break;case h:if((0,o.assert)(this.streamControllers[r],"close should have stream controller"),this.streamControllers[r].isClosed)break;this.streamControllers[r].isClosed=!0,this.streamControllers[r].controller.close(),this._deleteStreamController(r);break;case p:(0,o.assert)(this.streamControllers[r],"error should have stream controller"),this.streamControllers[r].controller.error(wrapReason(t.reason)),this._deleteStreamController(r);break;case u:t.success?this.streamControllers[r].cancelCall.resolve():this.streamControllers[r].cancelCall.reject(wrapReason(t.reason)),this._deleteStreamController(r);break;case c:if(!this.streamSinks[r])break;const{onCancel:m}=this.streamSinks[t.streamId];new Promise((function(r){r(m&&m(wrapReason(t.reason)))})).then((function(){l.postMessage({sourceName:i,targetName:a,stream:u,streamId:r,success:!0})}),(function(t){l.postMessage({sourceName:i,targetName:a,stream:u,streamId:r,reason:wrapReason(t)})})),this.streamSinks[r].sinkCapability.reject(wrapReason(t.reason)),this.streamSinks[r].isCancelled=!0,delete this.streamSinks[r];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(t){await Promise.allSettled([this.streamControllers[t].startCall,this.streamControllers[t].pullCall,this.streamControllers[t].cancelCall].map((function(t){return t&&t.promise}))),delete this.streamControllers[t]}_postMessage(t,r){r&&this.postMessageTransfers?this.comObj.postMessage(t,r):this.comObj.postMessage(t)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Metadata=void 0;var o=i(2),a=i(15);r.Metadata=class Metadata{constructor(t){(0,o.assert)("string"==typeof t,"Metadata: input is not a string"),t=this._repair(t);const r=(new a.SimpleXMLParser).parseFromString(t);this._metadataMap=new Map,r&&this._parse(r)}_repair(t){return t.replace(/^[^<]+/,"").replace(/>\\376\\377([^<]+)/g,(function(t,r){const i=r.replace(/\\([0-3])([0-7])([0-7])/g,(function(t,r,i,o){return String.fromCharCode(64*r+8*i+1*o)})).replace(/&(amp|apos|gt|lt|quot);/g,(function(t,r){switch(r){case"amp":return"&";case"apos":return"'";case"gt":return">";case"lt":return"<";case"quot":return'"'}throw new Error(`_repair: ${r} isn't defined.`)}));let o="";for(let t=0,r=i.length;t<r;t+=2){const r=256*i.charCodeAt(t)+i.charCodeAt(t+1);o+=r>=32&&r<127&&60!==r&&62!==r&&38!==r?String.fromCharCode(r):"&#x"+(65536+r).toString(16).substring(1)+";"}return">"+o}))}_parse(t){let r=t.documentElement;if("rdf:rdf"!==r.nodeName.toLowerCase())for(r=r.firstChild;r&&"rdf:rdf"!==r.nodeName.toLowerCase();)r=r.nextSibling;const i=r?r.nodeName.toLowerCase():null;if(!r||"rdf:rdf"!==i||!r.hasChildNodes())return;const o=r.childNodes;for(let t=0,r=o.length;t<r;t++){const r=o[t];if("rdf:description"===r.nodeName.toLowerCase())for(let t=0,i=r.childNodes.length;t<i;t++)if("#text"!==r.childNodes[t].nodeName.toLowerCase()){const i=r.childNodes[t],o=i.nodeName.toLowerCase();this._metadataMap.set(o,i.textContent.trim())}}}get(t){return this._metadataMap.has(t)?this._metadataMap.get(t):null}getAll(){return Object.fromEntries(this._metadataMap)}has(t){return this._metadataMap.has(t)}}},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SimpleXMLParser=void 0;const o=0,a=-2,l=-3,c=-4,u=-5,h=-6,d=-9;function isWhitespace(t,r){const i=t[r];return" "===i||"\n"===i||"\r"===i||"\t"===i}class SimpleDOMNode{constructor(t,r){this.nodeName=t,this.nodeValue=r,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}get firstChild(){return this.childNodes&&this.childNodes[0]}get nextSibling(){const t=this.parentNode.childNodes;if(!t)return;const r=t.indexOf(this);return-1!==r?t[r+1]:void 0}get textContent(){return this.childNodes?this.childNodes.map((function(t){return t.textContent})).join(""):this.nodeValue||""}hasChildNodes(){return this.childNodes&&this.childNodes.length>0}}r.SimpleXMLParser=class SimpleXMLParser extends class XMLParserBase{_resolveEntities(t){return t.replace(/&([^;]+);/g,((t,r)=>{if("#x"===r.substring(0,2))return String.fromCharCode(parseInt(r.substring(2),16));if("#"===r.substring(0,1))return String.fromCharCode(parseInt(r.substring(1),10));switch(r){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"'}return this.onResolveEntity(r)}))}_parseContent(t,r){const i=[];let o=r;function skipWs(){for(;o<t.length&&isWhitespace(t,o);)++o}for(;o<t.length&&!isWhitespace(t,o)&&">"!==t[o]&&"/"!==t[o];)++o;const a=t.substring(r,o);for(skipWs();o<t.length&&">"!==t[o]&&"/"!==t[o]&&"?"!==t[o];){skipWs();let r="",a="";for(;o<t.length&&!isWhitespace(t,o)&&"="!==t[o];)r+=t[o],++o;if(skipWs(),"="!==t[o])return null;++o,skipWs();const l=t[o];if('"'!==l&&"'"!==l)return null;const c=t.indexOf(l,++o);if(c<0)return null;a=t.substring(o,c),i.push({name:r,value:this._resolveEntities(a)}),o=c+1,skipWs()}return{name:a,attributes:i,parsed:o-r}}_parseProcessingInstruction(t,r){let i=r;for(;i<t.length&&!isWhitespace(t,i)&&">"!==t[i]&&"/"!==t[i];)++i;const o=t.substring(r,i);!function skipWs(){for(;i<t.length&&isWhitespace(t,i);)++i}();const a=i;for(;i<t.length&&("?"!==t[i]||">"!==t[i+1]);)++i;return{name:o,value:t.substring(a,i),parsed:i-r}}parseXml(t){let r=0;for(;r<t.length;){let i=r;if("<"===t[r]){++i;let r;switch(t[i]){case"/":if(++i,r=t.indexOf(">",i),r<0)return void this.onError(d);this.onEndElement(t.substring(i,r)),i=r+1;break;case"?":++i;const o=this._parseProcessingInstruction(t,i);if("?>"!==t.substring(i+o.parsed,i+o.parsed+2))return void this.onError(l);this.onPi(o.name,o.value),i+=o.parsed+2;break;case"!":if("--"===t.substring(i+1,i+3)){if(r=t.indexOf("--\x3e",i+3),r<0)return void this.onError(u);this.onComment(t.substring(i+3,r)),i=r+3}else if("[CDATA["===t.substring(i+1,i+8)){if(r=t.indexOf("]]>",i+8),r<0)return void this.onError(a);this.onCdata(t.substring(i+8,r)),i=r+3}else{if("DOCTYPE"!==t.substring(i+1,i+8))return void this.onError(h);{const o=t.indexOf("[",i+8);let a=!1;if(r=t.indexOf(">",i+8),r<0)return void this.onError(c);if(o>0&&r>o){if(r=t.indexOf("]>",i+8),r<0)return void this.onError(c);a=!0}const l=t.substring(i+8,r+(a?1:0));this.onDoctype(l),i=r+(a?2:1)}}break;default:const p=this._parseContent(t,i);if(null===p)return void this.onError(h);let g=!1;if("/>"===t.substring(i+p.parsed,i+p.parsed+2))g=!0;else if(">"!==t.substring(i+p.parsed,i+p.parsed+1))return void this.onError(d);this.onBeginElement(p.name,p.attributes,g),i+=p.parsed+(g?2:1)}}else{for(;i<t.length&&"<"!==t[i];)i++;const o=t.substring(r,i);this.onText(this._resolveEntities(o))}r=i}}onResolveEntity(t){return`&${t};`}onPi(t,r){}onComment(t){}onCdata(t){}onDoctype(t){}onText(t){}onBeginElement(t,r,i){}onEndElement(t){}onError(t){}}{constructor(){super(),this._currentFragment=null,this._stack=null,this._errorCode=o}parseFromString(t){if(this._currentFragment=[],this._stack=[],this._errorCode=o,this.parseXml(t),this._errorCode!==o)return;const[r]=this._currentFragment;return r?{documentElement:r}:void 0}onResolveEntity(t){switch(t){case"apos":return"'"}return super.onResolveEntity(t)}onText(t){if(function isWhitespaceString(t){for(let r=0,i=t.length;r<i;r++)if(!isWhitespace(t,r))return!1;return!0}(t))return;const r=new SimpleDOMNode("#text",t);this._currentFragment.push(r)}onCdata(t){const r=new SimpleDOMNode("#text",t);this._currentFragment.push(r)}onBeginElement(t,r,i){const o=new SimpleDOMNode(t);o.childNodes=[],this._currentFragment.push(o),i||(this._stack.push(this._currentFragment),this._currentFragment=o.childNodes)}onEndElement(t){this._currentFragment=this._stack.pop()||[];const r=this._currentFragment[this._currentFragment.length-1];if(r)for(let t=0,i=r.childNodes.length;t<i;t++)r.childNodes[t].parentNode=r}onError(t){this._errorCode=t}}},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OptionalContentConfig=void 0;var o=i(2);class OptionalContentGroup{constructor(t,r){this.visible=!0,this.name=t,this.intent=r}}r.OptionalContentConfig=class OptionalContentConfig{constructor(t){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,null!==t){this.name=t.name,this.creator=t.creator,this._order=t.order;for(const r of t.groups)this._groups.set(r.id,new OptionalContentGroup(r.name,r.intent));if("OFF"===t.baseState)for(const t of this._groups)t.visible=!1;for(const r of t.on)this._groups.get(r).visible=!0;for(const r of t.off)this._groups.get(r).visible=!1}}isVisible(t){if("OCG"===t.type)return this._groups.has(t.id)?this._groups.get(t.id).visible:((0,o.warn)(`Optional content group not found: ${t.id}`),!0);if("OCMD"===t.type){if(t.expression&&(0,o.warn)("Visibility expression not supported yet."),!t.policy||"AnyOn"===t.policy){for(const r of t.ids){if(!this._groups.has(r))return(0,o.warn)(`Optional content group not found: ${r}`),!0;if(this._groups.get(r).visible)return!0}return!1}if("AllOn"===t.policy){for(const r of t.ids){if(!this._groups.has(r))return(0,o.warn)(`Optional content group not found: ${r}`),!0;if(!this._groups.get(r).visible)return!1}return!0}if("AnyOff"===t.policy){for(const r of t.ids){if(!this._groups.has(r))return(0,o.warn)(`Optional content group not found: ${r}`),!0;if(!this._groups.get(r).visible)return!0}return!1}if("AllOff"===t.policy){for(const r of t.ids){if(!this._groups.has(r))return(0,o.warn)(`Optional content group not found: ${r}`),!0;if(this._groups.get(r).visible)return!1}return!0}return(0,o.warn)(`Unknown optional content policy ${t.policy}.`),!0}return(0,o.warn)(`Unknown group type ${t.type}.`),!0}setVisibility(t,r=!0){this._groups.has(t)?this._groups.get(t).visible=!!r:(0,o.warn)(`Optional content group not found: ${t}`)}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size?Object.fromEntries(this._groups):null}getGroup(t){return this._groups.get(t)||null}}},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PDFDataTransportStream=void 0;var o=i(2);r.PDFDataTransportStream=class PDFDataTransportStream{constructor(t,r){(0,o.assert)(r,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=t.progressiveDone||!1;const i=t.initialData;if(i&&i.length>0){const t=new Uint8Array(i).buffer;this._queuedChunks.push(t)}this._pdfDataRangeTransport=r,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._contentLength=t.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener(((t,r)=>{this._onReceiveData({begin:t,chunk:r})})),this._pdfDataRangeTransport.addProgressListener(((t,r)=>{this._onProgress({loaded:t,total:r})})),this._pdfDataRangeTransport.addProgressiveReadListener((t=>{this._onReceiveData({chunk:t})})),this._pdfDataRangeTransport.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),this._pdfDataRangeTransport.transportReady()}_onReceiveData(t){const r=new Uint8Array(t.chunk).buffer;if(void 0===t.begin)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const i=this._rangeReaders.some((function(i){return i._begin===t.begin&&(i._enqueue(r),!0)}));(0,o.assert)(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}_onProgress(t){if(void 0===t.total){const r=this._rangeReaders[0];r&&r.onProgress&&r.onProgress({loaded:t.loaded})}else{const r=this._fullRequestReader;r&&r.onProgress&&r.onProgress({loaded:t.loaded,total:t.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const r=this._rangeReaders.indexOf(t);r>=0&&this._rangeReaders.splice(r,1)}getFullReader(){(0,o.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new PDFDataTransportStreamReader(this,t,this._progressiveDone)}getRangeReader(t,r){if(r<=this._progressiveDataLength)return null;const i=new PDFDataTransportStreamRangeReader(this,t,r);return this._pdfDataRangeTransport.requestDataRange(t,r),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);this._rangeReaders.slice(0).forEach((function(r){r.cancel(t)})),this._pdfDataRangeTransport.abort()}};class PDFDataTransportStreamReader{constructor(t,r,i=!1){this._stream=t,this._done=i||!1,this._filename=null,this._queuedChunks=r||[],this._loaded=0;for(const t of this._queuedChunks)this._loaded+=t.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunks.push(t);this._loaded+=t.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const t=(0,o.createPromiseCapability)();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[]}progressiveDone(){this._done||(this._done=!0)}}class PDFDataTransportStreamRangeReader{constructor(t,r,i){this._stream=t,this._begin=r,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1}),this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[]}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=(0,o.createPromiseCapability)();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[],this._stream._removeRangeReader(this)}}},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WebGLContext=void 0;var o=i(2);r.WebGLContext=class WebGLContext{constructor({enable:t=!1}){this._enabled=!0===t}get isEnabled(){let t=this._enabled;return t&&(t=a.tryInitGL()),(0,o.shadow)(this,"isEnabled",t)}composeSMask({layer:t,mask:r,properties:i}){return a.composeSMask(t,r,i)}drawFigures({width:t,height:r,backgroundColor:i,figures:o,context:l}){return a.drawFigures(t,r,i,o,l)}clear(){a.cleanup()}};var a=function WebGLUtilsClosure(){function loadShader(t,r,i){var o=t.createShader(i);if(t.shaderSource(o,r),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS)){var a=t.getShaderInfoLog(o);throw new Error("Error during shader compilation: "+a)}return o}function createVertexShader(t,r){return loadShader(t,r,t.VERTEX_SHADER)}function createFragmentShader(t,r){return loadShader(t,r,t.FRAGMENT_SHADER)}function createProgram(t,r){for(var i=t.createProgram(),o=0,a=r.length;o<a;++o)t.attachShader(i,r[o]);if(t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS)){var l=t.getProgramInfoLog(i);throw new Error("Error during program linking: "+l)}return i}function createTexture(t,r,i){t.activeTexture(i);var o=t.createTexture();return t.bindTexture(t.TEXTURE_2D,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r),o}var t,r;function generateGL(){t||(r=document.createElement("canvas"),t=r.getContext("webgl",{premultipliedalpha:!1}))}var i=null;var o=null;return{tryInitGL(){try{return generateGL(),!!t}catch(t){}return!1},composeSMask:function composeSMask(o,a,l){var c=o.width,u=o.height;i||function initSmaskGL(){var o,a;generateGL(),o=r,r=null,a=t,t=null;var l=createProgram(a,[createVertexShader(a,"  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             "),createFragmentShader(a,"  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ")]);a.useProgram(l);var c={};c.gl=a,c.canvas=o,c.resolutionLocation=a.getUniformLocation(l,"u_resolution"),c.positionLocation=a.getAttribLocation(l,"a_position"),c.backdropLocation=a.getUniformLocation(l,"u_backdrop"),c.subtypeLocation=a.getUniformLocation(l,"u_subtype");var u=a.getAttribLocation(l,"a_texCoord"),h=a.getUniformLocation(l,"u_image"),d=a.getUniformLocation(l,"u_mask"),p=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,p),a.bufferData(a.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),a.STATIC_DRAW),a.enableVertexAttribArray(u),a.vertexAttribPointer(u,2,a.FLOAT,!1,0,0),a.uniform1i(h,0),a.uniform1i(d,1),i=c}();var h=i,d=h.canvas,p=h.gl;d.width=c,d.height=u,p.viewport(0,0,p.drawingBufferWidth,p.drawingBufferHeight),p.uniform2f(h.resolutionLocation,c,u),l.backdrop?p.uniform4f(h.resolutionLocation,l.backdrop[0],l.backdrop[1],l.backdrop[2],1):p.uniform4f(h.resolutionLocation,0,0,0,0),p.uniform1i(h.subtypeLocation,"Luminosity"===l.subtype?1:0);var g=createTexture(p,o,p.TEXTURE0),v=createTexture(p,a,p.TEXTURE1),y=p.createBuffer();return p.bindBuffer(p.ARRAY_BUFFER,y),p.bufferData(p.ARRAY_BUFFER,new Float32Array([0,0,c,0,0,u,0,u,c,0,c,u]),p.STATIC_DRAW),p.enableVertexAttribArray(h.positionLocation),p.vertexAttribPointer(h.positionLocation,2,p.FLOAT,!1,0,0),p.clearColor(0,0,0,0),p.enable(p.BLEND),p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA),p.clear(p.COLOR_BUFFER_BIT),p.drawArrays(p.TRIANGLES,0,6),p.flush(),p.deleteTexture(g),p.deleteTexture(v),p.deleteBuffer(y),d},drawFigures:function drawFigures(i,a,l,c,u){o||function initFiguresGL(){var i,a;generateGL(),i=r,r=null,a=t,t=null;var l=createProgram(a,[createVertexShader(a,"  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             "),createFragmentShader(a,"  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ")]);a.useProgram(l);var c={};c.gl=a,c.canvas=i,c.resolutionLocation=a.getUniformLocation(l,"u_resolution"),c.scaleLocation=a.getUniformLocation(l,"u_scale"),c.offsetLocation=a.getUniformLocation(l,"u_offset"),c.positionLocation=a.getAttribLocation(l,"a_position"),c.colorLocation=a.getAttribLocation(l,"a_color"),o=c}();var h=o,d=h.canvas,p=h.gl;d.width=i,d.height=a,p.viewport(0,0,p.drawingBufferWidth,p.drawingBufferHeight),p.uniform2f(h.resolutionLocation,i,a);var g,v,y,_=0;for(g=0,v=c.length;g<v;g++)switch(c[g].type){case"lattice":_+=((y=c[g].coords.length/c[g].verticesPerRow|0)-1)*(c[g].verticesPerRow-1)*6;break;case"triangles":_+=c[g].coords.length}var m=new Float32Array(2*_),b=new Uint8Array(3*_),A=u.coords,S=u.colors,w=0,x=0;for(g=0,v=c.length;g<v;g++){var C=c[g],k=C.coords,P=C.colors;switch(C.type){case"lattice":var R=C.verticesPerRow;y=k.length/R|0;for(var T=1;T<y;T++)for(var E=T*R+1,L=1;L<R;L++,E++)m[w]=A[k[E-R-1]],m[w+1]=A[k[E-R-1]+1],m[w+2]=A[k[E-R]],m[w+3]=A[k[E-R]+1],m[w+4]=A[k[E-1]],m[w+5]=A[k[E-1]+1],b[x]=S[P[E-R-1]],b[x+1]=S[P[E-R-1]+1],b[x+2]=S[P[E-R-1]+2],b[x+3]=S[P[E-R]],b[x+4]=S[P[E-R]+1],b[x+5]=S[P[E-R]+2],b[x+6]=S[P[E-1]],b[x+7]=S[P[E-1]+1],b[x+8]=S[P[E-1]+2],m[w+6]=m[w+2],m[w+7]=m[w+3],m[w+8]=m[w+4],m[w+9]=m[w+5],m[w+10]=A[k[E]],m[w+11]=A[k[E]+1],b[x+9]=b[x+3],b[x+10]=b[x+4],b[x+11]=b[x+5],b[x+12]=b[x+6],b[x+13]=b[x+7],b[x+14]=b[x+8],b[x+15]=S[P[E]],b[x+16]=S[P[E]+1],b[x+17]=S[P[E]+2],w+=12,x+=18;break;case"triangles":for(var I=0,O=k.length;I<O;I++)m[w]=A[k[I]],m[w+1]=A[k[I]+1],b[x]=S[P[I]],b[x+1]=S[P[I]+1],b[x+2]=S[P[I]+2],w+=2,x+=3}}l?p.clearColor(l[0]/255,l[1]/255,l[2]/255,1):p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT);var M=p.createBuffer();p.bindBuffer(p.ARRAY_BUFFER,M),p.bufferData(p.ARRAY_BUFFER,m,p.STATIC_DRAW),p.enableVertexAttribArray(h.positionLocation),p.vertexAttribPointer(h.positionLocation,2,p.FLOAT,!1,0,0);var D=p.createBuffer();return p.bindBuffer(p.ARRAY_BUFFER,D),p.bufferData(p.ARRAY_BUFFER,b,p.STATIC_DRAW),p.enableVertexAttribArray(h.colorLocation),p.vertexAttribPointer(h.colorLocation,3,p.UNSIGNED_BYTE,!1,0,0),p.uniform2f(h.scaleLocation,u.scaleX,u.scaleY),p.uniform2f(h.offsetLocation,u.offsetX,u.offsetY),p.drawArrays(p.TRIANGLES,0,_),p.flush(),p.deleteBuffer(M),p.deleteBuffer(D),d},cleanup(){i&&i.canvas&&(i.canvas.width=0,i.canvas.height=0),o&&o.canvas&&(o.canvas.width=0,o.canvas.height=0),i=null,o=null}}}()},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AnnotationLayer=void 0;var o=i(1),a=i(2),l=i(8);class AnnotationElementFactory{static create(t){switch(t.data.annotationType){case a.AnnotationType.LINK:return new LinkAnnotationElement(t);case a.AnnotationType.TEXT:return new TextAnnotationElement(t);case a.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(t);case"Btn":return t.data.radioButton?new RadioButtonWidgetAnnotationElement(t):t.data.checkBox?new CheckboxWidgetAnnotationElement(t):new PushButtonWidgetAnnotationElement(t);case"Ch":return new ChoiceWidgetAnnotationElement(t)}return new WidgetAnnotationElement(t);case a.AnnotationType.POPUP:return new PopupAnnotationElement(t);case a.AnnotationType.FREETEXT:return new FreeTextAnnotationElement(t);case a.AnnotationType.LINE:return new LineAnnotationElement(t);case a.AnnotationType.SQUARE:return new SquareAnnotationElement(t);case a.AnnotationType.CIRCLE:return new CircleAnnotationElement(t);case a.AnnotationType.POLYLINE:return new PolylineAnnotationElement(t);case a.AnnotationType.CARET:return new CaretAnnotationElement(t);case a.AnnotationType.INK:return new InkAnnotationElement(t);case a.AnnotationType.POLYGON:return new PolygonAnnotationElement(t);case a.AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(t);case a.AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(t);case a.AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(t);case a.AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(t);case a.AnnotationType.STAMP:return new StampAnnotationElement(t);case a.AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(t);default:return new AnnotationElement(t)}}}class AnnotationElement{constructor(t,r=!1,i=!1){this.isRenderable=r,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderInteractiveForms=t.renderInteractiveForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,r&&(this.container=this._createContainer(i))}_createContainer(t=!1){const r=this.data,i=this.page,o=this.viewport,l=document.createElement("section");let c=r.rect[2]-r.rect[0],u=r.rect[3]-r.rect[1];l.setAttribute("data-annotation-id",r.id);const h=a.Util.normalizeRect([r.rect[0],i.view[3]-r.rect[1]+i.view[1],r.rect[2],i.view[3]-r.rect[3]+i.view[1]]);if(l.style.transform=`matrix(${o.transform.join(",")})`,l.style.transformOrigin=`-${h[0]}px -${h[1]}px`,!t&&r.borderStyle.width>0){l.style.borderWidth=`${r.borderStyle.width}px`,r.borderStyle.style!==a.AnnotationBorderStyleType.UNDERLINE&&(c-=2*r.borderStyle.width,u-=2*r.borderStyle.width);const t=r.borderStyle.horizontalCornerRadius,i=r.borderStyle.verticalCornerRadius;if(t>0||i>0){const r=`${t}px / ${i}px`;l.style.borderRadius=r}switch(r.borderStyle.style){case a.AnnotationBorderStyleType.SOLID:l.style.borderStyle="solid";break;case a.AnnotationBorderStyleType.DASHED:l.style.borderStyle="dashed";break;case a.AnnotationBorderStyleType.BEVELED:(0,a.warn)("Unimplemented border style: beveled");break;case a.AnnotationBorderStyleType.INSET:(0,a.warn)("Unimplemented border style: inset");break;case a.AnnotationBorderStyleType.UNDERLINE:l.style.borderBottomStyle="solid"}r.color?l.style.borderColor=a.Util.makeCssRgb(0|r.color[0],0|r.color[1],0|r.color[2]):l.style.borderWidth=0}return l.style.left=`${h[0]}px`,l.style.top=`${h[1]}px`,l.style.width=`${c}px`,l.style.height=`${u}px`,l}_createPopup(t,r,i){r||((r=document.createElement("div")).style.height=t.style.height,r.style.width=t.style.width,t.appendChild(r));const o=new PopupElement({container:t,trigger:r,color:i.color,title:i.title,modificationDate:i.modificationDate,contents:i.contents,hideWrapper:!0}).render();o.style.left=t.style.width,t.appendChild(o)}render(){(0,a.unreachable)("Abstract method `AnnotationElement.render` called")}}class LinkAnnotationElement extends AnnotationElement{constructor(t){super(t,!!(t.data.url||t.data.dest||t.data.action))}render(){this.container.className="linkAnnotation";const{data:t,linkService:r}=this,i=document.createElement("a");return t.url?(0,o.addLinkAttributes)(i,{url:t.url,target:t.newWindow?o.LinkTarget.BLANK:r.externalLinkTarget,rel:r.externalLinkRel,enabled:r.externalLinkEnabled}):t.action?this._bindNamedAction(i,t.action):this._bindLink(i,t.dest),this.container.appendChild(i),this.container}_bindLink(t,r){t.href=this.linkService.getDestinationHash(r),t.onclick=()=>(r&&this.linkService.navigateTo(r),!1),r&&(t.className="internalLink")}_bindNamedAction(t,r){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(r),!1),t.className="internalLink"}}class TextAnnotationElement extends AnnotationElement{constructor(t){super(t,!!(t.data.hasPopup||t.data.title||t.data.contents))}render(){this.container.className="textAnnotation";const t=document.createElement("img");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(this.container,t,this.data),this.container.appendChild(t),this.container}}class WidgetAnnotationElement extends AnnotationElement{render(){return this.container}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,t.renderInteractiveForms||!t.data.hasAppearance&&!!t.data.fieldValue)}render(){const t=["left","center","right"],r=this.annotationStorage,i=this.data.id;this.container.className="textWidgetAnnotation";let o=null;if(this.renderInteractiveForms){const t=r.getOrCreateValue(i,this.data.fieldValue);if(this.data.multiLine?(o=document.createElement("textarea"),o.textContent=t):(o=document.createElement("input"),o.type="text",o.setAttribute("value",t)),o.addEventListener("input",(function(t){r.setValue(i,t.target.value)})),o.disabled=this.data.readOnly,o.name=this.data.fieldName,null!==this.data.maxLen&&(o.maxLength=this.data.maxLen),this.data.comb){const t=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;o.classList.add("comb"),o.style.letterSpacing=`calc(${t}px - 1ch)`}}else{o=document.createElement("div"),o.textContent=this.data.fieldValue,o.style.verticalAlign="middle",o.style.display="table-cell";let t=null;this.data.fontRefName&&this.page.commonObjs.has(this.data.fontRefName)&&(t=this.page.commonObjs.get(this.data.fontRefName)),this._setTextStyle(o,t)}return null!==this.data.textAlignment&&(o.style.textAlign=t[this.data.textAlignment]),this.container.appendChild(o),this.container}_setTextStyle(t,r){const i=t.style;if(i.fontSize=`${this.data.fontSize}px`,i.direction=this.data.fontDirection<0?"rtl":"ltr",!r)return;let o="normal";r.black?o="900":r.bold&&(o="bold"),i.fontWeight=o,i.fontStyle=r.italic?"italic":"normal";const a=r.loadedName?`"${r.loadedName}", `:"",l=r.fallbackName||"Helvetica, sans-serif";i.fontFamily=a+l}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,t.renderInteractiveForms)}render(){const t=this.annotationStorage,r=this.data,i=r.id,o=t.getOrCreateValue(i,r.fieldValue&&"Off"!==r.fieldValue);this.container.className="buttonWidgetAnnotation checkBox";const a=document.createElement("input");return a.disabled=r.readOnly,a.type="checkbox",a.name=this.data.fieldName,o&&a.setAttribute("checked",!0),a.addEventListener("change",(function(r){t.setValue(i,r.target.checked)})),this.container.appendChild(a),this.container}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,t.renderInteractiveForms)}render(){this.container.className="buttonWidgetAnnotation radioButton";const t=this.annotationStorage,r=this.data,i=r.id,o=t.getOrCreateValue(i,r.fieldValue===r.buttonValue),a=document.createElement("input");return a.disabled=r.readOnly,a.type="radio",a.name=r.fieldName,o&&a.setAttribute("checked",!0),a.addEventListener("change",(function(r){const o=r.target.name;for(const i of document.getElementsByName(o))i!==r.target&&t.setValue(i.parentNode.getAttribute("data-annotation-id"),!1);t.setValue(i,r.target.checked)})),this.container.appendChild(a),this.container}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{render(){const t=super.render();return t.className="buttonWidgetAnnotation pushButton",t}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,t.renderInteractiveForms)}render(){this.container.className="choiceWidgetAnnotation";const t=this.annotationStorage,r=this.data.id;t.getOrCreateValue(r,this.data.fieldValue.length>0?this.data.fieldValue[0]:null);const i=document.createElement("select");i.disabled=this.data.readOnly,i.name=this.data.fieldName,this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0));for(const t of this.data.options){const r=document.createElement("option");r.textContent=t.displayValue,r.value=t.exportValue,this.data.fieldValue.includes(t.exportValue)&&r.setAttribute("selected",!0),i.appendChild(r)}return i.addEventListener("input",(function(i){const o=i.target.options,a=o[o.selectedIndex].value;t.setValue(r,a)})),this.container.appendChild(i),this.container}}class PopupAnnotationElement extends AnnotationElement{constructor(t){super(t,!(!t.data.title&&!t.data.contents))}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const t=`[data-annotation-id="${this.data.parentId}"]`,r=this.layer.querySelector(t);if(!r)return this.container;const i=new PopupElement({container:this.container,trigger:r,color:this.data.color,title:this.data.title,modificationDate:this.data.modificationDate,contents:this.data.contents}),o=parseFloat(r.style.left),a=parseFloat(r.style.width);return this.container.style.transformOrigin=`-${o+a}px -${r.style.top}`,this.container.style.left=`${o+a}px`,this.container.appendChild(i.render()),this.container}}class PopupElement{constructor(t){this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.title=t.title,this.modificationDate=t.modificationDate,this.contents=t.contents,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}render(){const t=document.createElement("div");t.className="popupWrapper",this.hideElement=this.hideWrapper?t:this.container,this.hideElement.setAttribute("hidden",!0);const r=document.createElement("div");r.className="popup";const i=this.color;if(i){const t=.7*(255-i[0])+i[0],o=.7*(255-i[1])+i[1],l=.7*(255-i[2])+i[2];r.style.backgroundColor=a.Util.makeCssRgb(0|t,0|o,0|l)}const l=document.createElement("h1");l.textContent=this.title,r.appendChild(l);const c=o.PDFDateString.toDateObject(this.modificationDate);if(c){const t=document.createElement("span");t.textContent="{{date}}, {{time}}",t.dataset.l10nId="annotation_date_string",t.dataset.l10nArgs=JSON.stringify({date:c.toLocaleDateString(),time:c.toLocaleTimeString()}),r.appendChild(t)}const u=this._formatContents(this.contents);return r.appendChild(u),this.trigger.addEventListener("click",this._toggle.bind(this)),this.trigger.addEventListener("mouseover",this._show.bind(this,!1)),this.trigger.addEventListener("mouseout",this._hide.bind(this,!1)),r.addEventListener("click",this._hide.bind(this,!0)),t.appendChild(r),t}_formatContents(t){const r=document.createElement("p"),i=t.split(/(?:\r\n?|\n)/);for(let t=0,o=i.length;t<o;++t){const a=i[t];r.appendChild(document.createTextNode(a)),t<o-1&&r.appendChild(document.createElement("br"))}return r}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(t=!1){t&&(this.pinned=!0),this.hideElement.hasAttribute("hidden")&&(this.hideElement.removeAttribute("hidden"),this.container.style.zIndex+=1)}_hide(t=!0){t&&(this.pinned=!1),this.hideElement.hasAttribute("hidden")||this.pinned||(this.hideElement.setAttribute("hidden",!0),this.container.style.zIndex-=1)}}class FreeTextAnnotationElement extends AnnotationElement{constructor(t){super(t,!!(t.data.hasPopup||t.data.title||t.data.contents),!0)}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class LineAnnotationElement extends AnnotationElement{constructor(t){super(t,!!(t.data.hasPopup||t.data.title||t.data.contents),!0)}render(){this.container.className="lineAnnotation";const t=this.data,r=t.rect[2]-t.rect[0],i=t.rect[3]-t.rect[1],o=this.svgFactory.create(r,i),a=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),o.appendChild(a),this.container.append(o),this._createPopup(this.container,a,t),this.container}}class SquareAnnotationElement extends AnnotationElement{constructor(t){super(t,!!(t.data.hasPopup||t.data.title||t.data.contents),!0)}render(){this.container.className="squareAnnotation";const t=this.data,r=t.rect[2]-t.rect[0],i=t.rect[3]-t.rect[1],o=this.svgFactory.create(r,i),a=t.borderStyle.width,l=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",a/2),l.setAttribute("y",a/2),l.setAttribute("width",r-a),l.setAttribute("height",i-a),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","none"),o.appendChild(l),this.container.append(o),this._createPopup(this.container,l,t),this.container}}class CircleAnnotationElement extends AnnotationElement{constructor(t){super(t,!!(t.data.hasPopup||t.data.title||t.data.contents),!0)}render(){this.container.className="circleAnnotation";const t=this.data,r=t.rect[2]-t.rect[0],i=t.rect[3]-t.rect[1],o=this.svgFactory.create(r,i),a=t.borderStyle.width,l=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",r/2),l.setAttribute("cy",i/2),l.setAttribute("rx",r/2-a/2),l.setAttribute("ry",i/2-a/2),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","none"),o.appendChild(l),this.container.append(o),this._createPopup(this.container,l,t),this.container}}class PolylineAnnotationElement extends AnnotationElement{constructor(t){super(t,!!(t.data.hasPopup||t.data.title||t.data.contents),!0),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,r=t.rect[2]-t.rect[0],i=t.rect[3]-t.rect[1],o=this.svgFactory.create(r,i);let a=[];for(const r of t.vertices){const i=r.x-t.rect[0],o=t.rect[3]-r.y;a.push(i+","+o)}a=a.join(" ");const l=this.svgFactory.createElement(this.svgElementName);return l.setAttribute("points",a),l.setAttribute("stroke-width",t.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","none"),o.appendChild(l),this.container.append(o),this._createPopup(this.container,l,t),this.container}}class PolygonAnnotationElement extends PolylineAnnotationElement{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class CaretAnnotationElement extends AnnotationElement{constructor(t){super(t,!!(t.data.hasPopup||t.data.title||t.data.contents),!0)}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class InkAnnotationElement extends AnnotationElement{constructor(t){super(t,!!(t.data.hasPopup||t.data.title||t.data.contents),!0),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,r=t.rect[2]-t.rect[0],i=t.rect[3]-t.rect[1],o=this.svgFactory.create(r,i);for(const r of t.inkLists){let i=[];for(const o of r){const r=o.x-t.rect[0],a=t.rect[3]-o.y;i.push(`${r},${a}`)}i=i.join(" ");const a=this.svgFactory.createElement(this.svgElementName);a.setAttribute("points",i),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","none"),this._createPopup(this.container,a,t),o.appendChild(a)}return this.container.append(o),this.container}}class HighlightAnnotationElement extends AnnotationElement{constructor(t){super(t,!!(t.data.hasPopup||t.data.title||t.data.contents),!0)}render(){return this.container.className="highlightAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class UnderlineAnnotationElement extends AnnotationElement{constructor(t){super(t,!!(t.data.hasPopup||t.data.title||t.data.contents),!0)}render(){return this.container.className="underlineAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class SquigglyAnnotationElement extends AnnotationElement{constructor(t){super(t,!!(t.data.hasPopup||t.data.title||t.data.contents),!0)}render(){return this.container.className="squigglyAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class StrikeOutAnnotationElement extends AnnotationElement{constructor(t){super(t,!!(t.data.hasPopup||t.data.title||t.data.contents),!0)}render(){return this.container.className="strikeoutAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class StampAnnotationElement extends AnnotationElement{constructor(t){super(t,!!(t.data.hasPopup||t.data.title||t.data.contents),!0)}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class FileAttachmentAnnotationElement extends AnnotationElement{constructor(t){super(t,!0);const{filename:r,content:i}=this.data.file;this.filename=(0,o.getFilenameFromUrl)(r),this.content=i,this.linkService.eventBus&&this.linkService.eventBus.dispatch("fileattachmentannotation",{source:this,id:(0,a.stringToPDFString)(r),filename:r,content:i})}render(){this.container.className="fileAttachmentAnnotation";const t=document.createElement("div");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.addEventListener("dblclick",this._download.bind(this)),this.data.hasPopup||!this.data.title&&!this.data.contents||this._createPopup(this.container,t,this.data),this.container.appendChild(t),this.container}_download(){this.downloadManager?this.downloadManager.downloadData(this.content,this.filename,""):(0,a.warn)("Download cannot be started due to unavailable download manager")}}r.AnnotationLayer=class AnnotationLayer{static render(t){const r=[],i=[];for(const o of t.annotations)o&&(o.annotationType!==a.AnnotationType.POPUP?r.push(o):i.push(o));i.length&&r.push(...i);for(const i of r){const r=AnnotationElementFactory.create({data:i,layer:t.div,page:t.page,viewport:t.viewport,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderInteractiveForms:"boolean"!=typeof t.renderInteractiveForms||t.renderInteractiveForms,svgFactory:new o.DOMSVGFactory,annotationStorage:t.annotationStorage||new l.AnnotationStorage});r.isRenderable&&t.div.appendChild(r.render())}}static update(t){for(const r of t.annotations){const i=t.div.querySelector(`[data-annotation-id="${r.id}"]`);i&&(i.style.transform=`matrix(${t.viewport.transform.join(",")})`)}t.div.removeAttribute("hidden")}}},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.renderTextLayer=void 0;var o=i(2),a=function renderTextLayerClosure(){var t=/\S/;function appendText(r,i,a){var l=document.createElement("span"),c={angle:0,canvasWidth:0,isWhitespace:!1,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};if(r._textDivs.push(l),function isAllWhitespace(r){return!t.test(r)}(i.str))return c.isWhitespace=!0,void r._textDivProperties.set(l,c);var u=o.Util.transform(r._viewport.transform,i.transform),h=Math.atan2(u[1],u[0]),d=a[i.fontName];d.vertical&&(h+=Math.PI/2);var p=Math.sqrt(u[2]*u[2]+u[3]*u[3]),g=p;let v,y;d.ascent?g=d.ascent*g:d.descent&&(g=(1+d.descent)*g),0===h?(v=u[4],y=u[5]-g):(v=u[4]+g*Math.sin(h),y=u[5]-g*Math.cos(h)),l.style.left=`${v}px`,l.style.top=`${y}px`,l.style.fontSize=`${p}px`,l.style.fontFamily=d.fontFamily,l.textContent=i.str,r._fontInspectorEnabled&&(l.dataset.fontName=i.fontName),0!==h&&(c.angle=h*(180/Math.PI));let _=!1;if(i.str.length>1)_=!0;else if(i.transform[0]!==i.transform[3]){const t=Math.abs(i.transform[0]),r=Math.abs(i.transform[3]);t!==r&&Math.max(t,r)/Math.min(t,r)>1.5&&(_=!0)}if(_&&(d.vertical?c.canvasWidth=i.height*r._viewport.scale:c.canvasWidth=i.width*r._viewport.scale),r._textDivProperties.set(l,c),r._textContentStream&&r._layoutText(l),r._enhanceTextSelection){var m=1,b=0;0!==h&&(m=Math.cos(h),b=Math.sin(h));var A,S,w=(d.vertical?i.height:i.width)*r._viewport.scale,x=p;0!==h?(A=[m,b,-b,m,v,y],S=o.Util.getAxialAlignedBoundingBox([0,0,w,x],A)):S=[v,y,v+w,y+x],r._bounds.push({left:S[0],top:S[1],right:S[2],bottom:S[3],div:l,size:[w,x],m:A})}}function render(t){if(!t._canceled){var r=t._textDivs,i=t._capability,o=r.length;if(o>1e5)return t._renderingDone=!0,void i.resolve();if(!t._textContentStream)for(var a=0;a<o;a++)t._layoutText(r[a]);t._renderingDone=!0,i.resolve()}}function findPositiveMin(t,r,i){let o=0;for(let a=0;a<i;a++){const i=t[r++];i>0&&(o=o?Math.min(i,o):i)}return o}function expand(t){for(var r=t._bounds,i=t._viewport,a=function expandBounds(t,r,i){var o=i.map((function(t,r){return{x1:t.left,y1:t.top,x2:t.right,y2:t.bottom,index:r,x1New:void 0,x2New:void 0}}));expandBoundsLTR(t,o);var a=new Array(i.length);return o.forEach((function(t){var r=t.index;a[r]={left:t.x1New,top:0,right:t.x2New,bottom:0}})),i.map((function(r,i){var l=a[i],c=o[i];c.x1=r.top,c.y1=t-l.right,c.x2=r.bottom,c.y2=t-l.left,c.index=i,c.x1New=void 0,c.x2New=void 0})),expandBoundsLTR(r,o),o.forEach((function(t){var r=t.index;a[r].top=t.x1New,a[r].bottom=t.x2New})),a}(i.width,i.height,r),l=0;l<a.length;l++){var c=r[l].div,u=t._textDivProperties.get(c);if(0!==u.angle){var h=a[l],d=r[l],p=d.m,g=p[0],v=p[1],y=[[0,0],[0,d.size[1]],[d.size[0],0],d.size],_=new Float64Array(64);y.forEach((function(t,r){var i=o.Util.applyTransform(t,p);_[r+0]=g&&(h.left-i[0])/g,_[r+4]=v&&(h.top-i[1])/v,_[r+8]=g&&(h.right-i[0])/g,_[r+12]=v&&(h.bottom-i[1])/v,_[r+16]=v&&(h.left-i[0])/-v,_[r+20]=g&&(h.top-i[1])/g,_[r+24]=v&&(h.right-i[0])/-v,_[r+28]=g&&(h.bottom-i[1])/g,_[r+32]=g&&(h.left-i[0])/-g,_[r+36]=v&&(h.top-i[1])/-v,_[r+40]=g&&(h.right-i[0])/-g,_[r+44]=v&&(h.bottom-i[1])/-v,_[r+48]=v&&(h.left-i[0])/v,_[r+52]=g&&(h.top-i[1])/-g,_[r+56]=v&&(h.right-i[0])/v,_[r+60]=g&&(h.bottom-i[1])/-g}));var m=1+Math.min(Math.abs(g),Math.abs(v));u.paddingLeft=findPositiveMin(_,32,16)/m,u.paddingTop=findPositiveMin(_,48,16)/m,u.paddingRight=findPositiveMin(_,0,16)/m,u.paddingBottom=findPositiveMin(_,16,16)/m,t._textDivProperties.set(c,u)}else u.paddingLeft=r[l].left-a[l].left,u.paddingTop=r[l].top-a[l].top,u.paddingRight=a[l].right-r[l].right,u.paddingBottom=a[l].bottom-r[l].bottom,t._textDivProperties.set(c,u)}}function expandBoundsLTR(t,r){r.sort((function(t,r){return t.x1-r.x1||t.index-r.index}));var i=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];r.forEach((function(t){for(var r=0;r<i.length&&i[r].end<=t.y1;)r++;for(var o,a,l=i.length-1;l>=0&&i[l].start>=t.y2;)l--;var c,u,h=-1/0;for(c=r;c<=l;c++){var d;(d=(a=(o=i[c]).boundary).x2>t.x1?a.index>t.index?a.x1New:t.x1:void 0===a.x2New?(a.x2+t.x1)/2:a.x2New)>h&&(h=d)}for(t.x1New=h,c=r;c<=l;c++)void 0===(a=(o=i[c]).boundary).x2New?a.x2>t.x1?a.index>t.index&&(a.x2New=a.x2):a.x2New=h:a.x2New>h&&(a.x2New=Math.max(h,a.x2));var p=[],g=null;for(c=r;c<=l;c++){var v=(a=(o=i[c]).boundary).x2>t.x2?a:t;g===v?p[p.length-1].end=o.end:(p.push({start:o.start,end:o.end,boundary:v}),g=v)}for(i[r].start<t.y1&&(p[0].start=t.y1,p.unshift({start:i[r].start,end:t.y1,boundary:i[r].boundary})),t.y2<i[l].end&&(p[p.length-1].end=t.y2,p.push({start:t.y2,end:i[l].end,boundary:i[l].boundary})),c=r;c<=l;c++)if(void 0===(a=(o=i[c]).boundary).x2New){var y=!1;for(u=r-1;!y&&u>=0&&i[u].start>=a.y1;u--)y=i[u].boundary===a;for(u=l+1;!y&&u<i.length&&i[u].end<=a.y2;u++)y=i[u].boundary===a;for(u=0;!y&&u<p.length;u++)y=p[u].boundary===a;y||(a.x2New=h)}Array.prototype.splice.apply(i,[r,l-r+1].concat(p))})),i.forEach((function(r){var i=r.boundary;void 0===i.x2New&&(i.x2New=Math.max(t,i.x2))}))}function TextLayerRenderTask({textContent:t,textContentStream:r,container:i,viewport:a,textDivs:l,textContentItemsStr:c,enhanceTextSelection:u}){this._textContent=t,this._textContentStream=r,this._container=i,this._document=i.ownerDocument,this._viewport=a,this._textDivs=l||[],this._textContentItemsStr=c||[],this._enhanceTextSelection=!!u,this._fontInspectorEnabled=!(!globalThis.FontInspector||!globalThis.FontInspector.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,o.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally((()=>{this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)})).catch((()=>{}))}return TextLayerRenderTask.prototype={get promise(){return this._capability.promise},cancel:function TextLayer_cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new o.AbortException("TextLayer task cancelled.")),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))},_processItems(t,r){for(let i=0,o=t.length;i<o;i++)this._textContentItemsStr.push(t[i].str),appendText(this,t[i],r)},_layoutText(t){const r=this._textDivProperties.get(t);if(r.isWhitespace)return;let i="";if(0!==r.canvasWidth){const{fontSize:o,fontFamily:a}=t.style;o===this._layoutTextLastFontSize&&a===this._layoutTextLastFontFamily||(this._layoutTextCtx.font=`${o} ${a}`,this._layoutTextLastFontSize=o,this._layoutTextLastFontFamily=a);const{width:l}=this._layoutTextCtx.measureText(t.textContent);l>0&&(r.scale=r.canvasWidth/l,i=`scaleX(${r.scale})`)}0!==r.angle&&(i=`rotate(${r.angle}deg) ${i}`),i.length>0&&(this._enhanceTextSelection&&(r.originalTransform=i),t.style.transform=i),this._textDivProperties.set(t,r),this._container.appendChild(t)},_render:function TextLayer_render(t){const r=(0,o.createPromiseCapability)();let i=Object.create(null);const a=this._document.createElement("canvas");if(a.mozOpaque=!0,this._layoutTextCtx=a.getContext("2d",{alpha:!1}),this._textContent){const t=this._textContent.items,i=this._textContent.styles;this._processItems(t,i),r.resolve()}else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const pump=()=>{this._reader.read().then((({value:t,done:o})=>{o?r.resolve():(Object.assign(i,t.styles),this._processItems(t.items,i),pump())}),r.reject)};this._reader=this._textContentStream.getReader(),pump()}}r.promise.then((()=>{i=null,t?this._renderTimer=setTimeout((()=>{render(this),this._renderTimer=null}),t):render(this)}),this._capability.reject)},expandTextDivs:function TextLayer_expandTextDivs(t){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(expand(this),this._bounds=null);const r=[],i=[];for(var o=0,a=this._textDivs.length;o<a;o++){const a=this._textDivs[o],l=this._textDivProperties.get(a);l.isWhitespace||(t?(r.length=0,i.length=0,l.originalTransform&&r.push(l.originalTransform),l.paddingTop>0?(i.push(`${l.paddingTop}px`),r.push(`translateY(${-l.paddingTop}px)`)):i.push(0),l.paddingRight>0?i.push(l.paddingRight/l.scale+"px"):i.push(0),l.paddingBottom>0?i.push(`${l.paddingBottom}px`):i.push(0),l.paddingLeft>0?(i.push(l.paddingLeft/l.scale+"px"),r.push(`translateX(${-l.paddingLeft/l.scale}px)`)):i.push(0),a.style.padding=i.join(" "),r.length&&(a.style.transform=r.join(" "))):(a.style.padding=null,a.style.transform=l.originalTransform))}}},function renderTextLayer(t){var r=new TextLayerRenderTask({textContent:t.textContent,textContentStream:t.textContentStream,container:t.container,viewport:t.viewport,textDivs:t.textDivs,textContentItemsStr:t.textContentItemsStr,enhanceTextSelection:t.enhanceTextSelection});return r._render(t.timeout),r}}();r.renderTextLayer=a},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SVGGraphics=void 0;var o=i(2),a=i(1),l=i(4);let SVGGraphics=function(){throw new Error("Not implemented: SVGGraphics")};r.SVGGraphics=SVGGraphics;{const t={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},i="http://www.w3.org/XML/1998/namespace",c="http://www.w3.org/1999/xlink",u=["butt","round","square"],h=["miter","round","bevel"],d=function(){const t=new Uint8Array([137,80,78,71,13,10,26,10]),r=new Int32Array(256);for(let t=0;t<256;t++){let i=t;for(let t=0;t<8;t++)i=1&i?3988292384^i>>1&2147483647:i>>1&2147483647;r[t]=i}function writePngChunk(t,i,o,a){let l=a;const c=i.length;o[l]=c>>24&255,o[l+1]=c>>16&255,o[l+2]=c>>8&255,o[l+3]=255&c,l+=4,o[l]=255&t.charCodeAt(0),o[l+1]=255&t.charCodeAt(1),o[l+2]=255&t.charCodeAt(2),o[l+3]=255&t.charCodeAt(3),l+=4,o.set(i,l),l+=i.length;const u=function crc32(t,i,o){let a=-1;for(let l=i;l<o;l++){const i=255&(a^t[l]);a=a>>>8^r[i]}return-1^a}(o,a+4,l);o[l]=u>>24&255,o[l+1]=u>>16&255,o[l+2]=u>>8&255,o[l+3]=255&u}function deflateSyncUncompressed(t){let r=t.length;const i=65535,o=Math.ceil(r/i),a=new Uint8Array(2+r+5*o+4);let l=0;a[l++]=120,a[l++]=156;let c=0;for(;r>i;)a[l++]=0,a[l++]=255,a[l++]=255,a[l++]=0,a[l++]=0,a.set(t.subarray(c,c+i),l),l+=i,c+=i,r-=i;a[l++]=1,a[l++]=255&r,a[l++]=r>>8&255,a[l++]=255&~r,a[l++]=(65535&~r)>>8&255,a.set(t.subarray(c),l),l+=t.length-c;const u=function adler32(t,r,i){let o=1,a=0;for(let l=r;l<i;++l)o=(o+(255&t[l]))%65521,a=(a+o)%65521;return a<<16|o}(t,0,t.length);return a[l++]=u>>24&255,a[l++]=u>>16&255,a[l++]=u>>8&255,a[l++]=255&u,a}function encode(r,i,a,c){const u=r.width,h=r.height;let d,p,g;const v=r.data;switch(i){case o.ImageKind.GRAYSCALE_1BPP:p=0,d=1,g=u+7>>3;break;case o.ImageKind.RGB_24BPP:p=2,d=8,g=3*u;break;case o.ImageKind.RGBA_32BPP:p=6,d=8,g=4*u;break;default:throw new Error("invalid format")}const y=new Uint8Array((1+g)*h);let _=0,m=0;for(let t=0;t<h;++t)y[_++]=0,y.set(v.subarray(m,m+g),_),m+=g,_+=g;if(i===o.ImageKind.GRAYSCALE_1BPP&&c){_=0;for(let t=0;t<h;t++){_++;for(let t=0;t<g;t++)y[_++]^=255}}const b=new Uint8Array([u>>24&255,u>>16&255,u>>8&255,255&u,h>>24&255,h>>16&255,h>>8&255,255&h,d,p,0,0,0]),A=function deflateSync(t){if(!l.isNodeJS)return deflateSyncUncompressed(t);try{let r;r=parseInt(process.versions.node)>=8?t:Buffer.from(t);const i=__webpack_require__(804).deflateSync(r,{level:9});return i instanceof Uint8Array?i:new Uint8Array(i)}catch(t){(0,o.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+t)}return deflateSyncUncompressed(t)}(y),S=t.length+36+b.length+A.length,w=new Uint8Array(S);let x=0;return w.set(t,x),x+=t.length,writePngChunk("IHDR",b,w,x),x+=12+b.length,writePngChunk("IDATA",A,w,x),x+=12+A.length,writePngChunk("IEND",new Uint8Array(0),w,x),(0,o.createObjectURL)(w,"image/png",a)}return function convertImgDataToPng(t,r,i){return encode(t,void 0===t.kind?o.ImageKind.GRAYSCALE_1BPP:t.kind,r,i)}}();class SVGExtraState{constructor(){this.fontSizeScale=1,this.fontWeight=t.fontWeight,this.fontSize=0,this.textMatrix=o.IDENTITY_MATRIX,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=o.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=t.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(t,r){this.x=t,this.y=r}}function pf(t){if(Number.isInteger(t))return t.toString();const r=t.toFixed(10);let i=r.length-1;if("0"!==r[i])return r;do{i--}while("0"===r[i]);return r.substring(0,"."===r[i]?i:i+1)}function pm(t){if(0===t[4]&&0===t[5]){if(0===t[1]&&0===t[2])return 1===t[0]&&1===t[3]?"":`scale(${pf(t[0])} ${pf(t[3])})`;if(t[0]===t[3]&&t[1]===-t[2]){return`rotate(${pf(180*Math.acos(t[0])/Math.PI)})`}}else if(1===t[0]&&0===t[1]&&0===t[2]&&1===t[3])return`translate(${pf(t[4])} ${pf(t[5])})`;return`matrix(${pf(t[0])} ${pf(t[1])} ${pf(t[2])} ${pf(t[3])} ${pf(t[4])} ${pf(t[5])})`}let p=0,g=0,v=0;r.SVGGraphics=SVGGraphics=class SVGGraphics{constructor(t,r,i=!1){this.svgFactory=new a.DOMSVGFactory,this.current=new SVGExtraState,this.transformMatrix=o.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=r,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!i,this._operatorIdMapping=[];for(const t in o.OPS)this._operatorIdMapping[o.OPS[t]]=t}save(){this.transformStack.push(this.transformMatrix);const t=this.current;this.extraStack.push(t),this.current=t.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(t){this.save(),this.executeOpTree(t),this.restore()}loadDependencies(t){const r=t.fnArray,i=t.argsArray;for(let t=0,a=r.length;t<a;t++)if(r[t]===o.OPS.dependency)for(const r of i[t]){const t=r.startsWith("g_")?this.commonObjs:this.objs,i=new Promise((i=>{t.get(r,i)}));this.current.dependencies.push(i)}return Promise.all(this.current.dependencies)}transform(t,r,i,a,l,c){const u=[t,r,i,a,l,c];this.transformMatrix=o.Util.transform(this.transformMatrix,u),this.tgrp=null}getSVG(t,r){this.viewport=r;const i=this._initialize(r);return this.loadDependencies(t).then((()=>(this.transformMatrix=o.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(t)),i)))}convertOpList(t){const r=this._operatorIdMapping,i=t.argsArray,o=t.fnArray,a=[];for(let t=0,l=o.length;t<l;t++){const l=o[t];a.push({fnId:l,fn:r[l],args:i[t]})}return function opListToTree(t){let r=[];const i=[];for(const o of t)"save"!==o.fn?"restore"===o.fn?r=i.pop():r.push(o):(r.push({fnId:92,fn:"group",items:[]}),i.push(r),r=r[r.length-1].items);return r}(a)}executeOpTree(t){for(const r of t){const t=r.fn,i=r.fnId,a=r.args;switch(0|i){case o.OPS.beginText:this.beginText();break;case o.OPS.dependency:break;case o.OPS.setLeading:this.setLeading(a);break;case o.OPS.setLeadingMoveText:this.setLeadingMoveText(a[0],a[1]);break;case o.OPS.setFont:this.setFont(a);break;case o.OPS.showText:case o.OPS.showSpacedText:this.showText(a[0]);break;case o.OPS.endText:this.endText();break;case o.OPS.moveText:this.moveText(a[0],a[1]);break;case o.OPS.setCharSpacing:this.setCharSpacing(a[0]);break;case o.OPS.setWordSpacing:this.setWordSpacing(a[0]);break;case o.OPS.setHScale:this.setHScale(a[0]);break;case o.OPS.setTextMatrix:this.setTextMatrix(a[0],a[1],a[2],a[3],a[4],a[5]);break;case o.OPS.setTextRise:this.setTextRise(a[0]);break;case o.OPS.setTextRenderingMode:this.setTextRenderingMode(a[0]);break;case o.OPS.setLineWidth:this.setLineWidth(a[0]);break;case o.OPS.setLineJoin:this.setLineJoin(a[0]);break;case o.OPS.setLineCap:this.setLineCap(a[0]);break;case o.OPS.setMiterLimit:this.setMiterLimit(a[0]);break;case o.OPS.setFillRGBColor:this.setFillRGBColor(a[0],a[1],a[2]);break;case o.OPS.setStrokeRGBColor:this.setStrokeRGBColor(a[0],a[1],a[2]);break;case o.OPS.setStrokeColorN:this.setStrokeColorN(a);break;case o.OPS.setFillColorN:this.setFillColorN(a);break;case o.OPS.shadingFill:this.shadingFill(a[0]);break;case o.OPS.setDash:this.setDash(a[0],a[1]);break;case o.OPS.setRenderingIntent:this.setRenderingIntent(a[0]);break;case o.OPS.setFlatness:this.setFlatness(a[0]);break;case o.OPS.setGState:this.setGState(a[0]);break;case o.OPS.fill:this.fill();break;case o.OPS.eoFill:this.eoFill();break;case o.OPS.stroke:this.stroke();break;case o.OPS.fillStroke:this.fillStroke();break;case o.OPS.eoFillStroke:this.eoFillStroke();break;case o.OPS.clip:this.clip("nonzero");break;case o.OPS.eoClip:this.clip("evenodd");break;case o.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case o.OPS.paintImageXObject:this.paintImageXObject(a[0]);break;case o.OPS.paintInlineImageXObject:this.paintInlineImageXObject(a[0]);break;case o.OPS.paintImageMaskXObject:this.paintImageMaskXObject(a[0]);break;case o.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(a[0],a[1]);break;case o.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case o.OPS.closePath:this.closePath();break;case o.OPS.closeStroke:this.closeStroke();break;case o.OPS.closeFillStroke:this.closeFillStroke();break;case o.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case o.OPS.nextLine:this.nextLine();break;case o.OPS.transform:this.transform(a[0],a[1],a[2],a[3],a[4],a[5]);break;case o.OPS.constructPath:this.constructPath(a[0],a[1]);break;case o.OPS.endPath:this.endPath();break;case 92:this.group(r.items);break;default:(0,o.warn)(`Unimplemented operator ${t}`)}}}setWordSpacing(t){this.current.wordSpacing=t}setCharSpacing(t){this.current.charSpacing=t}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(t,r,i,o,a,l){const c=this.current;c.textMatrix=c.lineMatrix=[t,r,i,o,a,l],c.textMatrixScale=Math.sqrt(t*t+r*r),c.x=c.lineX=0,c.y=c.lineY=0,c.xcoords=[],c.ycoords=[],c.tspan=this.svgFactory.createElement("svg:tspan"),c.tspan.setAttributeNS(null,"font-family",c.fontFamily),c.tspan.setAttributeNS(null,"font-size",`${pf(c.fontSize)}px`),c.tspan.setAttributeNS(null,"y",pf(-c.y)),c.txtElement=this.svgFactory.createElement("svg:text"),c.txtElement.appendChild(c.tspan)}beginText(){const t=this.current;t.x=t.lineX=0,t.y=t.lineY=0,t.textMatrix=o.IDENTITY_MATRIX,t.lineMatrix=o.IDENTITY_MATRIX,t.textMatrixScale=1,t.tspan=this.svgFactory.createElement("svg:tspan"),t.txtElement=this.svgFactory.createElement("svg:text"),t.txtgrp=this.svgFactory.createElement("svg:g"),t.xcoords=[],t.ycoords=[]}moveText(t,r){const i=this.current;i.x=i.lineX+=t,i.y=i.lineY+=r,i.xcoords=[],i.ycoords=[],i.tspan=this.svgFactory.createElement("svg:tspan"),i.tspan.setAttributeNS(null,"font-family",i.fontFamily),i.tspan.setAttributeNS(null,"font-size",`${pf(i.fontSize)}px`),i.tspan.setAttributeNS(null,"y",pf(-i.y))}showText(r){const a=this.current,l=a.font,c=a.fontSize;if(0===c)return;const u=a.fontSizeScale,h=a.charSpacing,d=a.wordSpacing,p=a.fontDirection,g=a.textHScale*p,v=l.vertical,y=v?1:-1,_=l.defaultVMetrics,m=c*a.fontMatrix[0];let b=0;for(const t of r){if(null===t){b+=p*d;continue}if((0,o.isNum)(t)){b+=y*t*c/1e3;continue}const r=(t.isSpace?d:0)+h,i=t.fontChar;let g,A,S,w=t.width;if(v){let r;const i=t.vmetric||_;r=t.vmetric?i[1]:.5*w,r=-r*m;const o=i[2]*m;w=i?-i[0]:w,g=r/u,A=(b+o)/u}else g=b/u,A=0;(t.isInFont||l.missingFile)&&(a.xcoords.push(a.x+g),v&&a.ycoords.push(-a.y+A),a.tspan.textContent+=i),S=v?w*m-r*p:w*m+r*p,b+=S}a.tspan.setAttributeNS(null,"x",a.xcoords.map(pf).join(" ")),v?a.tspan.setAttributeNS(null,"y",a.ycoords.map(pf).join(" ")):a.tspan.setAttributeNS(null,"y",pf(-a.y)),v?a.y-=b:a.x+=b*g,a.tspan.setAttributeNS(null,"font-family",a.fontFamily),a.tspan.setAttributeNS(null,"font-size",`${pf(a.fontSize)}px`),a.fontStyle!==t.fontStyle&&a.tspan.setAttributeNS(null,"font-style",a.fontStyle),a.fontWeight!==t.fontWeight&&a.tspan.setAttributeNS(null,"font-weight",a.fontWeight);const A=a.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;if(A===o.TextRenderingMode.FILL||A===o.TextRenderingMode.FILL_STROKE?(a.fillColor!==t.fillColor&&a.tspan.setAttributeNS(null,"fill",a.fillColor),a.fillAlpha<1&&a.tspan.setAttributeNS(null,"fill-opacity",a.fillAlpha)):a.textRenderingMode===o.TextRenderingMode.ADD_TO_PATH?a.tspan.setAttributeNS(null,"fill","transparent"):a.tspan.setAttributeNS(null,"fill","none"),A===o.TextRenderingMode.STROKE||A===o.TextRenderingMode.FILL_STROKE){const t=1/(a.textMatrixScale||1);this._setStrokeAttributes(a.tspan,t)}let S=a.textMatrix;0!==a.textRise&&(S=S.slice(),S[5]+=a.textRise),a.txtElement.setAttributeNS(null,"transform",`${pm(S)} scale(${pf(g)}, -1)`),a.txtElement.setAttributeNS(i,"xml:space","preserve"),a.txtElement.appendChild(a.tspan),a.txtgrp.appendChild(a.txtElement),this._ensureTransformGroup().appendChild(a.txtElement)}setLeadingMoveText(t,r){this.setLeading(-r),this.moveText(t,r)}addFontStyle(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const r=(0,o.createObjectURL)(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${t.loadedName}"; src: url(${r}); }\n`}setFont(t){const r=this.current,i=this.commonObjs.get(t[0]);let a=t[1];r.font=i,!this.embedFonts||i.missingFile||this.embeddedFonts[i.loadedName]||(this.addFontStyle(i),this.embeddedFonts[i.loadedName]=i),r.fontMatrix=i.fontMatrix?i.fontMatrix:o.FONT_IDENTITY_MATRIX;let l="normal";i.black?l="900":i.bold&&(l="bold");const c=i.italic?"italic":"normal";a<0?(a=-a,r.fontDirection=-1):r.fontDirection=1,r.fontSize=a,r.fontFamily=i.loadedName,r.fontWeight=l,r.fontStyle=c,r.tspan=this.svgFactory.createElement("svg:tspan"),r.tspan.setAttributeNS(null,"y",pf(-r.y)),r.xcoords=[],r.ycoords=[]}endText(){const t=this.current;t.textRenderingMode&o.TextRenderingMode.ADD_TO_PATH_FLAG&&t.txtElement&&t.txtElement.hasChildNodes()&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(t){t>0&&(this.current.lineWidth=t)}setLineCap(t){this.current.lineCap=u[t]}setLineJoin(t){this.current.lineJoin=h[t]}setMiterLimit(t){this.current.miterLimit=t}setStrokeAlpha(t){this.current.strokeAlpha=t}setStrokeRGBColor(t,r,i){this.current.strokeColor=o.Util.makeCssRgb(t,r,i)}setFillAlpha(t){this.current.fillAlpha=t}setFillRGBColor(t,r,i){this.current.fillColor=o.Util.makeCssRgb(t,r,i),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}shadingFill(t){const r=this.viewport.width,i=this.viewport.height,a=o.Util.inverseTransform(this.transformMatrix),l=o.Util.applyTransform([0,0],a),c=o.Util.applyTransform([0,i],a),u=o.Util.applyTransform([r,0],a),h=o.Util.applyTransform([r,i],a),d=Math.min(l[0],c[0],u[0],h[0]),p=Math.min(l[1],c[1],u[1],h[1]),g=Math.max(l[0],c[0],u[0],h[0]),v=Math.max(l[1],c[1],u[1],h[1]),y=this.svgFactory.createElement("svg:rect");y.setAttributeNS(null,"x",d),y.setAttributeNS(null,"y",p),y.setAttributeNS(null,"width",g-d),y.setAttributeNS(null,"height",v-p),y.setAttributeNS(null,"fill",this._makeShadingPattern(t)),this.current.fillAlpha<1&&y.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(y)}_makeColorN_Pattern(t){return"TilingPattern"===t[0]?this._makeTilingPattern(t):this._makeShadingPattern(t)}_makeTilingPattern(t){const r=t[1],i=t[2],a=t[3]||o.IDENTITY_MATRIX,[l,c,u,h]=t[4],d=t[5],p=t[6],g=t[7],y="shading"+v++,[_,m]=o.Util.applyTransform([l,c],a),[b,A]=o.Util.applyTransform([u,h],a),[S,w]=o.Util.singularValueDecompose2dScale(a),x=d*S,C=p*w,k=this.svgFactory.createElement("svg:pattern");k.setAttributeNS(null,"id",y),k.setAttributeNS(null,"patternUnits","userSpaceOnUse"),k.setAttributeNS(null,"width",x),k.setAttributeNS(null,"height",C),k.setAttributeNS(null,"x",`${_}`),k.setAttributeNS(null,"y",`${m}`);const P=this.svg,R=this.transformMatrix,T=this.current.fillColor,E=this.current.strokeColor,L=this.svgFactory.create(b-_,A-m);if(this.svg=L,this.transformMatrix=a,2===g){const t=o.Util.makeCssRgb(...r);this.current.fillColor=t,this.current.strokeColor=t}return this.executeOpTree(this.convertOpList(i)),this.svg=P,this.transformMatrix=R,this.current.fillColor=T,this.current.strokeColor=E,k.appendChild(L.childNodes[0]),this.defs.appendChild(k),`url(#${y})`}_makeShadingPattern(t){switch(t[0]){case"RadialAxial":const r="shading"+v++,i=t[3];let a;switch(t[1]){case"axial":const i=t[4],o=t[5];a=this.svgFactory.createElement("svg:linearGradient"),a.setAttributeNS(null,"id",r),a.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),a.setAttributeNS(null,"x1",i[0]),a.setAttributeNS(null,"y1",i[1]),a.setAttributeNS(null,"x2",o[0]),a.setAttributeNS(null,"y2",o[1]);break;case"radial":const l=t[4],c=t[5],u=t[6],h=t[7];a=this.svgFactory.createElement("svg:radialGradient"),a.setAttributeNS(null,"id",r),a.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),a.setAttributeNS(null,"cx",c[0]),a.setAttributeNS(null,"cy",c[1]),a.setAttributeNS(null,"r",h),a.setAttributeNS(null,"fx",l[0]),a.setAttributeNS(null,"fy",l[1]),a.setAttributeNS(null,"fr",u);break;default:throw new Error(`Unknown RadialAxial type: ${t[1]}`)}for(const t of i){const r=this.svgFactory.createElement("svg:stop");r.setAttributeNS(null,"offset",t[0]),r.setAttributeNS(null,"stop-color",t[1]),a.appendChild(r)}return this.defs.appendChild(a),`url(#${r})`;case"Mesh":return(0,o.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${t[0]}`)}}setDash(t,r){this.current.dashArray=t,this.current.dashPhase=r}constructPath(t,r){const i=this.current;let a=i.x,l=i.y,c=[],u=0;for(const i of t)switch(0|i){case o.OPS.rectangle:a=r[u++],l=r[u++];const t=a+r[u++],i=l+r[u++];c.push("M",pf(a),pf(l),"L",pf(t),pf(l),"L",pf(t),pf(i),"L",pf(a),pf(i),"Z");break;case o.OPS.moveTo:a=r[u++],l=r[u++],c.push("M",pf(a),pf(l));break;case o.OPS.lineTo:a=r[u++],l=r[u++],c.push("L",pf(a),pf(l));break;case o.OPS.curveTo:a=r[u+4],l=r[u+5],c.push("C",pf(r[u]),pf(r[u+1]),pf(r[u+2]),pf(r[u+3]),pf(a),pf(l)),u+=6;break;case o.OPS.curveTo2:c.push("C",pf(a),pf(l),pf(r[u]),pf(r[u+1]),pf(r[u+2]),pf(r[u+3])),a=r[u+2],l=r[u+3],u+=4;break;case o.OPS.curveTo3:a=r[u+2],l=r[u+3],c.push("C",pf(r[u]),pf(r[u+1]),pf(a),pf(l),pf(a),pf(l)),u+=4;break;case o.OPS.closePath:c.push("Z")}c=c.join(" "),i.path&&t.length>0&&t[0]!==o.OPS.rectangle&&t[0]!==o.OPS.moveTo?c=i.path.getAttributeNS(null,"d")+c:(i.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(i.path)),i.path.setAttributeNS(null,"d",c),i.path.setAttributeNS(null,"fill","none"),i.element=i.path,i.setCurrentPoint(a,l)}endPath(){const t=this.current;if(t.path=null,!this.pendingClip)return;if(!t.element)return void(this.pendingClip=null);const r="clippath"+p++,i=this.svgFactory.createElement("svg:clipPath");i.setAttributeNS(null,"id",r),i.setAttributeNS(null,"transform",pm(this.transformMatrix));const o=t.element.cloneNode(!0);"evenodd"===this.pendingClip?o.setAttributeNS(null,"clip-rule","evenodd"):o.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,i.appendChild(o),this.defs.appendChild(i),t.activeClipUrl&&(t.clipGroup=null,this.extraStack.forEach((function(t){t.clipGroup=null})),i.setAttributeNS(null,"clip-path",t.activeClipUrl)),t.activeClipUrl=`url(#${r})`,this.tgrp=null}clip(t){this.pendingClip=t}closePath(){const t=this.current;if(t.path){const r=`${t.path.getAttributeNS(null,"d")}Z`;t.path.setAttributeNS(null,"d",r)}}setLeading(t){this.current.leading=-t}setTextRise(t){this.current.textRise=t}setTextRenderingMode(t){this.current.textRenderingMode=t}setHScale(t){this.current.textHScale=t/100}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[r,i]of t)switch(r){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i);break;case"CA":this.setStrokeAlpha(i);break;case"ca":this.setFillAlpha(i);break;default:(0,o.warn)(`Unimplemented graphic state operator ${r}`)}}fill(){const t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())}stroke(){const t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(t,r=1){const i=this.current;let o=i.dashArray;1!==r&&o.length>0&&(o=o.map((function(t){return r*t}))),t.setAttributeNS(null,"stroke",i.strokeColor),t.setAttributeNS(null,"stroke-opacity",i.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",pf(i.miterLimit)),t.setAttributeNS(null,"stroke-linecap",i.lineCap),t.setAttributeNS(null,"stroke-linejoin",i.lineJoin),t.setAttributeNS(null,"stroke-width",pf(r*i.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",o.map(pf).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",pf(r*i.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(t)}paintImageXObject(t){const r=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);r?this.paintInlineImageXObject(r):(0,o.warn)(`Dependent image with object ID ${t} is not ready yet`)}paintInlineImageXObject(t,r){const i=t.width,o=t.height,a=d(t,this.forceDataSchema,!!r),l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y","0"),l.setAttributeNS(null,"width",pf(i)),l.setAttributeNS(null,"height",pf(o)),this.current.element=l,this.clip("nonzero");const u=this.svgFactory.createElement("svg:image");u.setAttributeNS(c,"xlink:href",a),u.setAttributeNS(null,"x","0"),u.setAttributeNS(null,"y",pf(-o)),u.setAttributeNS(null,"width",pf(i)+"px"),u.setAttributeNS(null,"height",pf(o)+"px"),u.setAttributeNS(null,"transform",`scale(${pf(1/i)} ${pf(-1/o)})`),r?r.appendChild(u):this._ensureTransformGroup().appendChild(u)}paintImageMaskXObject(t){const r=this.current,i=t.width,o=t.height,a=r.fillColor;r.maskId="mask"+g++;const l=this.svgFactory.createElement("svg:mask");l.setAttributeNS(null,"id",r.maskId);const c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x","0"),c.setAttributeNS(null,"y","0"),c.setAttributeNS(null,"width",pf(i)),c.setAttributeNS(null,"height",pf(o)),c.setAttributeNS(null,"fill",a),c.setAttributeNS(null,"mask",`url(#${r.maskId})`),this.defs.appendChild(l),this._ensureTransformGroup().appendChild(c),this.paintInlineImageXObject(t,l)}paintFormXObjectBegin(t,r){if(Array.isArray(t)&&6===t.length&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),r){const t=r[2]-r[0],i=r[3]-r[1],o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x",r[0]),o.setAttributeNS(null,"y",r[1]),o.setAttributeNS(null,"width",pf(t)),o.setAttributeNS(null,"height",pf(i)),this.current.element=o,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(t){const r=this.svgFactory.create(t.width,t.height),i=this.svgFactory.createElement("svg:defs");r.appendChild(i),this.defs=i;const o=this.svgFactory.createElement("svg:g");return o.setAttributeNS(null,"transform",pm(t.transform)),r.appendChild(o),this.svg=o,r}_ensureClipGroup(){if(!this.current.clipGroup){const t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(t),this.current.clipGroup=t}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",pm(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PDFNodeStream=void 0;var o=i(2),a=i(23);const l=__webpack_require__(993),c=__webpack_require__(618),u=__webpack_require__(120),h=__webpack_require__(355),d=/^file:\/\/\/[a-zA-Z]:\//;r.PDFNodeStream=class PDFNodeStream{constructor(t){this.source=t,this.url=function parseUrl(t){const r=h.parse(t);return"file:"===r.protocol||r.host?r:/^[a-z]:[/\\]/i.test(t)?h.parse(`file:///${t}`):(r.host||(r.protocol="file:"),r)}(t.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new PDFNodeStreamFsFullReader(this):new PDFNodeStreamFullReader(this),this._fullRequestReader}getRangeReader(t,r){if(r<=this._progressiveDataLength)return null;const i=this.isFsUrl?new PDFNodeStreamFsRangeReader(this,t,r):new PDFNodeStreamRangeReader(this,t,r);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);this._rangeRequestReaders.slice(0).forEach((function(r){r.cancel(t)}))}};class BaseFullReader{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const r=t.source;this._contentLength=r.length,this._loaded=0,this._filename=null,this._disableRange=r.disableRange||!1,this._rangeChunkSize=r.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!r.disableStream,this._isRangeSupported=!r.disableRange,this._readableStream=null,this._readCapability=(0,o.createPromiseCapability)(),this._headersCapability=(0,o.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=(0,o.createPromiseCapability)(),this.read();this._loaded+=t.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(t).buffer,done:!1}}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new o.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class BaseRangeReader{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,o.createPromiseCapability)();const r=t.source;this._isStreamingSupported=!r.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=(0,o.createPromiseCapability)(),this.read();this._loaded+=t.length,this.onProgress&&this.onProgress({loaded:this._loaded});return{value:new Uint8Array(t).buffer,done:!1}}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),this._storedError&&this._readableStream.destroy(this._storedError)}}function createRequestOptions(t,r){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:r}}class PDFNodeStreamFullReader extends BaseFullReader{constructor(t){super(t);const handleResponse=r=>{if(404===r.statusCode){const t=new o.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=t,void this._headersCapability.reject(t)}this._headersCapability.resolve(),this._setReadableStream(r);const getResponseHeader=t=>this._readableStream.headers[t.toLowerCase()],{allowRangeRequests:i,suggestedLength:l}=(0,a.validateRangeRequestCapabilities)({getResponseHeader,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=i,this._contentLength=l||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(getResponseHeader)};this._request=null,"http:"===this._url.protocol?this._request=c.request(createRequestOptions(this._url,t.httpHeaders),handleResponse):this._request=u.request(createRequestOptions(this._url,t.httpHeaders),handleResponse),this._request.on("error",(t=>{this._storedError=t,this._headersCapability.reject(t)})),this._request.end()}}class PDFNodeStreamRangeReader extends BaseRangeReader{constructor(t,r,i){super(t),this._httpHeaders={};for(const r in t.httpHeaders){const i=t.httpHeaders[r];void 0!==i&&(this._httpHeaders[r]=i)}this._httpHeaders.Range=`bytes=${r}-${i-1}`;const handleResponse=t=>{if(404!==t.statusCode)this._setReadableStream(t);else{const t=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=t}};this._request=null,"http:"===this._url.protocol?this._request=c.request(createRequestOptions(this._url,this._httpHeaders),handleResponse):this._request=u.request(createRequestOptions(this._url,this._httpHeaders),handleResponse),this._request.on("error",(t=>{this._storedError=t})),this._request.end()}}class PDFNodeStreamFsFullReader extends BaseFullReader{constructor(t){super(t);let r=decodeURIComponent(this._url.path);d.test(this._url.href)&&(r=r.replace(/^\//,"")),l.lstat(r,((t,i)=>{if(t)return"ENOENT"===t.code&&(t=new o.MissingPDFException(`Missing PDF "${r}".`)),this._storedError=t,void this._headersCapability.reject(t);this._contentLength=i.size,this._setReadableStream(l.createReadStream(r)),this._headersCapability.resolve()}))}}class PDFNodeStreamFsRangeReader extends BaseRangeReader{constructor(t,r,i){super(t);let o=decodeURIComponent(this._url.path);d.test(this._url.href)&&(o=o.replace(/^\//,"")),this._setReadableStream(l.createReadStream(o,{start:r,end:i-1}))}}},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createResponseStatusError=function createResponseStatusError(t,r){if(404===t||0===t&&r.startsWith("file:"))return new o.MissingPDFException('Missing PDF "'+r+'".');return new o.UnexpectedResponseException("Unexpected server response ("+t+') while retrieving PDF "'+r+'".',t)},r.extractFilenameFromHeader=function extractFilenameFromHeader(t){const r=t("Content-Disposition");if(r){let t=(0,a.getFilenameFromContentDispositionHeader)(r);if(t.includes("%"))try{t=decodeURIComponent(t)}catch(t){}if(/\.pdf$/i.test(t))return t}return null},r.validateRangeRequestCapabilities=function validateRangeRequestCapabilities({getResponseHeader:t,isHttp:r,rangeChunkSize:i,disableRange:a}){(0,o.assert)(i>0,"Range chunk size must be larger than zero");const l={allowRangeRequests:!1,suggestedLength:void 0},c=parseInt(t("Content-Length"),10);if(!Number.isInteger(c))return l;if(l.suggestedLength=c,c<=2*i)return l;if(a||!r)return l;if("bytes"!==t("Accept-Ranges"))return l;if("identity"!==(t("Content-Encoding")||"identity"))return l;return l.allowRangeRequests=!0,l},r.validateResponseStatus=function validateResponseStatus(t){return 200===t||206===t};var o=i(2),a=i(24)},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getFilenameFromContentDispositionHeader=function getFilenameFromContentDispositionHeader(t){let r=!0,i=toParamRegExp("filename\\*","i").exec(t);if(i){i=i[1];let t=rfc2616unquote(i);return t=unescape(t),t=rfc5987decode(t),t=rfc2047decode(t),fixupEncoding(t)}if(i=function rfc2231getparam(t){const r=[];let i;const o=toParamRegExp("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(i=o.exec(t));){let[,t,o,a]=i;if(t=parseInt(t,10),t in r){if(0===t)break}else r[t]=[o,a]}const a=[];for(let t=0;t<r.length&&t in r;++t){let[i,o]=r[t];o=rfc2616unquote(o),i&&(o=unescape(o),0===t&&(o=rfc5987decode(o))),a.push(o)}return a.join("")}(t),i){return fixupEncoding(rfc2047decode(i))}if(i=toParamRegExp("filename","i").exec(t),i){i=i[1];let t=rfc2616unquote(i);return t=rfc2047decode(t),fixupEncoding(t)}function toParamRegExp(t,r){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',r)}function textdecode(t,i){if(t){if(!/^[\x00-\xFF]+$/.test(i))return i;try{const o=new TextDecoder(t,{fatal:!0}),a=Array.from(i,(function(t){return 255&t.charCodeAt(0)}));i=o.decode(new Uint8Array(a)),r=!1}catch(o){if(/^utf-?8$/i.test(t))try{i=decodeURIComponent(escape(i)),r=!1}catch(t){}}}return i}function fixupEncoding(t){return r&&/[\x80-\xff]/.test(t)&&(t=textdecode("utf-8",t),r&&(t=textdecode("iso-8859-1",t))),t}function rfc2616unquote(t){if(t.startsWith('"')){const r=t.slice(1).split('\\"');for(let t=0;t<r.length;++t){const i=r[t].indexOf('"');-1!==i&&(r[t]=r[t].slice(0,i),r.length=t+1),r[t]=r[t].replace(/\\(.)/g,"$1")}t=r.join('"')}return t}function rfc5987decode(t){const r=t.indexOf("'");if(-1===r)return t;return textdecode(t.slice(0,r),t.slice(r+1).replace(/^[^']*'/,""))}function rfc2047decode(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(t,r,i,o){if("q"===i||"Q"===i)return textdecode(r,o=(o=o.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,(function(t,r){return String.fromCharCode(parseInt(r,16))})));try{o=atob(o)}catch(t){}return textdecode(r,o)}))}return""}},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PDFNetworkStream=void 0;var o=i(2),a=i(23);class NetworkManager{constructor(t,r){this.url=t,r=r||{},this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&r.httpHeaders||{},this.withCredentials=r.withCredentials||!1,this.getXhr=r.getXhr||function NetworkManager_getXhr(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,r,i){const o={begin:t,end:r};for(const t in i)o[t]=i[t];return this.request(o)}requestFull(t){return this.request(t)}request(t){const r=this.getXhr(),i=this.currXhrId++,o=this.pendingRequests[i]={xhr:r};r.open("GET",this.url),r.withCredentials=this.withCredentials;for(const t in this.httpHeaders){const i=this.httpHeaders[t];void 0!==i&&r.setRequestHeader(t,i)}return this.isHttp&&"begin"in t&&"end"in t?(r.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),o.expectedStatus=206):o.expectedStatus=200,r.responseType="arraybuffer",t.onError&&(r.onerror=function(i){t.onError(r.status)}),r.onreadystatechange=this.onStateChange.bind(this,i),r.onprogress=this.onProgress.bind(this,i),o.onHeadersReceived=t.onHeadersReceived,o.onDone=t.onDone,o.onError=t.onError,o.onProgress=t.onProgress,r.send(null),i}onProgress(t,r){const i=this.pendingRequests[t];i&&i.onProgress&&i.onProgress(r)}onStateChange(t,r){const i=this.pendingRequests[t];if(!i)return;const a=i.xhr;if(a.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),4!==a.readyState)return;if(!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],0===a.status&&this.isHttp)return void(i.onError&&i.onError(a.status));const l=a.status||200;if(!(200===l&&206===i.expectedStatus)&&l!==i.expectedStatus)return void(i.onError&&i.onError(a.status));const c=function getArrayBuffer(t){const r=t.response;return"string"!=typeof r?r:(0,o.stringToBytes)(r).buffer}(a);if(206===l){const t=a.getResponseHeader("Content-Range"),r=/bytes (\d+)-(\d+)\/(\d+)/.exec(t);i.onDone({begin:parseInt(r[1],10),chunk:c})}else c?i.onDone({begin:0,chunk:c}):i.onError&&i.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const r=this.pendingRequests[t].xhr;delete this.pendingRequests[t],r.abort()}}r.PDFNetworkStream=class PDFNetworkStream{constructor(t){this._source=t,this._manager=new NetworkManager(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const r=this._rangeRequestReaders.indexOf(t);r>=0&&this._rangeRequestReaders.splice(r,1)}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source),this._fullRequestReader}getRangeReader(t,r){const i=new PDFNetworkStreamRangeRequestReader(this._manager,t,r);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);this._rangeRequestReaders.slice(0).forEach((function(r){r.cancel(t)}))}};class PDFNetworkStreamFullRequestReader{constructor(t,r){this._manager=t;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=r.url,this._fullRequestId=t.requestFull(i),this._headersReceivedCapability=(0,o.createPromiseCapability)(),this._disableRange=r.disableRange||!1,this._contentLength=r.length,this._rangeChunkSize=r.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,r=this._manager.getRequestXhr(t),getResponseHeader=t=>r.getResponseHeader(t),{allowRangeRequests:i,suggestedLength:o}=(0,a.validateRangeRequestCapabilities)({getResponseHeader,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(getResponseHeader),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t)if(this._requests.length>0){this._requests.shift().resolve({value:t.chunk,done:!1})}else this._cachedChunks.push(t.chunk);this._done=!0,this._cachedChunks.length>0||(this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[])}_onError(t){const r=this._url,i=(0,a.createResponseStatusError)(t,r);this._storedError=i,this._headersReceivedCapability.reject(i),this._requests.forEach((function(t){t.reject(i)})),this._requests=[],this._cachedChunks=[]}_onProgress(t){this.onProgress&&this.onProgress({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0){return{value:this._cachedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const t=(0,o.createPromiseCapability)();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t),this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[],this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PDFNetworkStreamRangeRequestReader{constructor(t,r,i){this._manager=t;const o={onDone:this._onDone.bind(this),onProgress:this._onProgress.bind(this)};this._requestId=t.requestRange(r,i,o),this._requests=[],this._queuedChunk=null,this._done=!1,this.onProgress=null,this.onClosed=null}_close(){this.onClosed&&this.onClosed(this)}_onDone(t){const r=t.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:r,done:!1})}else this._queuedChunk=r;this._done=!0,this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[],this._close()}_onProgress(t){!this.isStreamingSupported&&this.onProgress&&this.onProgress({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(null!==this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=(0,o.createPromiseCapability)();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[],this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PDFFetchStream=void 0;var o=i(2),a=i(23);function createFetchOptions(t,r,i){return{method:"GET",headers:t,signal:i&&i.signal,mode:"cors",credentials:r?"include":"same-origin",redirect:"follow"}}function createHeaders(t){const r=new Headers;for(const i in t){const o=t[i];void 0!==o&&r.append(i,o)}return r}r.PDFFetchStream=class PDFFetchStream{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PDFFetchStreamReader(this),this._fullRequestReader}getRangeReader(t,r){if(r<=this._progressiveDataLength)return null;const i=new PDFFetchStreamRangeReader(this,t,r);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);this._rangeRequestReaders.slice(0).forEach((function(r){r.cancel(t)}))}};class PDFFetchStreamReader{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const r=t.source;this._withCredentials=r.withCredentials||!1,this._contentLength=r.length,this._headersCapability=(0,o.createPromiseCapability)(),this._disableRange=r.disableRange||!1,this._rangeChunkSize=r.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._isStreamingSupported=!r.disableStream,this._isRangeSupported=!r.disableRange,this._headers=createHeaders(this._stream.httpHeaders);const i=r.url;fetch(i,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!(0,a.validateResponseStatus)(t.status))throw(0,a.createResponseStatusError)(t.status,i);this._reader=t.body.getReader(),this._headersCapability.resolve();const getResponseHeader=r=>t.headers.get(r),{allowRangeRequests:r,suggestedLength:l}=(0,a.validateRangeRequestCapabilities)({getResponseHeader,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=l||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(getResponseHeader),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new o.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:r}=await this._reader.read();if(r)return{value:t,done:r};this._loaded+=t.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(t).buffer,done:!1}}cancel(t){this._reader&&this._reader.cancel(t),this._abortController&&this._abortController.abort()}}class PDFFetchStreamRangeReader{constructor(t,r,i){this._stream=t,this._reader=null,this._loaded=0;const l=t.source;this._withCredentials=l.withCredentials||!1,this._readCapability=(0,o.createPromiseCapability)(),this._isStreamingSupported=!l.disableStream,"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._headers=createHeaders(this._stream.httpHeaders),this._headers.append("Range",`bytes=${r}-${i-1}`);const c=l.url;fetch(c,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!(0,a.validateResponseStatus)(t.status))throw(0,a.createResponseStatusError)(t.status,c);this._readCapability.resolve(),this._reader=t.body.getReader()})).catch((t=>{if(!t||"AbortError"!==t.name)throw t})),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:r}=await this._reader.read();if(r)return{value:t,done:r};this._loaded+=t.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded});return{value:new Uint8Array(t).buffer,done:!1}}cancel(t){this._reader&&this._reader.cancel(t),this._abortController&&this._abortController.abort()}}}])}))},963:function(t,r,i){!function webpackUniversalModuleDefinition(r,i){t.exports=i()}(0,(function(){return function(t){var r={};function __w_pdfjs_require__(i){if(r[i])return r[i].exports;var o=r[i]={i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,__w_pdfjs_require__),o.l=!0,o.exports}return __w_pdfjs_require__.m=t,__w_pdfjs_require__.c=r,__w_pdfjs_require__.d=function(t,r,i){__w_pdfjs_require__.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:i})},__w_pdfjs_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__w_pdfjs_require__.t=function(t,r){if(1&r&&(t=__w_pdfjs_require__(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(__w_pdfjs_require__.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)__w_pdfjs_require__.d(i,o,function(r){return t[r]}.bind(null,o));return i},__w_pdfjs_require__.n=function(t){var r=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __w_pdfjs_require__.d(r,"a",r),r},__w_pdfjs_require__.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},__w_pdfjs_require__.p="",__w_pdfjs_require__(__w_pdfjs_require__.s=0)}([function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return o.AnnotationLayerBuilder}}),Object.defineProperty(r,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return o.DefaultAnnotationLayerFactory}}),Object.defineProperty(r,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return a.DefaultTextLayerFactory}}),Object.defineProperty(r,"TextLayerBuilder",{enumerable:!0,get:function(){return a.TextLayerBuilder}}),Object.defineProperty(r,"EventBus",{enumerable:!0,get:function(){return l.EventBus}}),Object.defineProperty(r,"NullL10n",{enumerable:!0,get:function(){return l.NullL10n}}),Object.defineProperty(r,"ProgressBar",{enumerable:!0,get:function(){return l.ProgressBar}}),Object.defineProperty(r,"PDFLinkService",{enumerable:!0,get:function(){return c.PDFLinkService}}),Object.defineProperty(r,"SimpleLinkService",{enumerable:!0,get:function(){return c.SimpleLinkService}}),Object.defineProperty(r,"DownloadManager",{enumerable:!0,get:function(){return u.DownloadManager}}),Object.defineProperty(r,"GenericL10n",{enumerable:!0,get:function(){return h.GenericL10n}}),Object.defineProperty(r,"PDFFindController",{enumerable:!0,get:function(){return d.PDFFindController}}),Object.defineProperty(r,"PDFHistory",{enumerable:!0,get:function(){return p.PDFHistory}}),Object.defineProperty(r,"PDFPageView",{enumerable:!0,get:function(){return g.PDFPageView}}),Object.defineProperty(r,"PDFSinglePageViewer",{enumerable:!0,get:function(){return v.PDFSinglePageViewer}}),Object.defineProperty(r,"PDFViewer",{enumerable:!0,get:function(){return y.PDFViewer}});var o=i(1),a=i(5),l=i(3),c=i(4),u=i(6),h=i(8),d=i(10),p=i(12),g=i(13),v=i(15),y=i(17)},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DefaultAnnotationLayerFactory=r.AnnotationLayerBuilder=void 0;var o=i(2),a=i(3),l=i(4);class AnnotationLayerBuilder{constructor({pageDiv:t,pdfPage:r,linkService:i,downloadManager:o,annotationStorage:l=null,imageResourcesPath:c="",renderInteractiveForms:u=!0,l10n:h=a.NullL10n}){this.pageDiv=t,this.pdfPage=r,this.linkService=i,this.downloadManager=o,this.imageResourcesPath=c,this.renderInteractiveForms=u,this.l10n=h,this.annotationStorage=l,this.div=null,this._cancelled=!1}render(t,r="display"){return this.pdfPage.getAnnotations({intent:r}).then((r=>{if(this._cancelled)return;if(0===r.length)return;const i={viewport:t.clone({dontFlip:!0}),div:this.div,annotations:r,page:this.pdfPage,imageResourcesPath:this.imageResourcesPath,renderInteractiveForms:this.renderInteractiveForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage};this.div?o.AnnotationLayer.update(i):(this.div=document.createElement("div"),this.div.className="annotationLayer",this.pageDiv.appendChild(this.div),i.div=this.div,o.AnnotationLayer.render(i),this.l10n.translate(this.div))}))}cancel(){this._cancelled=!0}hide(){this.div&&this.div.setAttribute("hidden","true")}}r.AnnotationLayerBuilder=AnnotationLayerBuilder;r.DefaultAnnotationLayerFactory=class DefaultAnnotationLayerFactory{createAnnotationLayerBuilder(t,r,i=null,o="",c=!0,u=a.NullL10n){return new AnnotationLayerBuilder({pageDiv:t,pdfPage:r,imageResourcesPath:o,renderInteractiveForms:c,linkService:new l.SimpleLinkService,l10n:u,annotationStorage:i})}}},function(t,r,o){"use strict";let a;a="undefined"!=typeof window&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:i(299),t.exports=a},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isValidRotation=function isValidRotation(t){return Number.isInteger(t)&&t%90==0},r.isValidScrollMode=function isValidScrollMode(t){return Number.isInteger(t)&&Object.values(o).includes(t)&&t!==o.UNKNOWN},r.isValidSpreadMode=function isValidSpreadMode(t){return Number.isInteger(t)&&Object.values(a).includes(t)&&t!==a.UNKNOWN},r.isPortraitOrientation=function isPortraitOrientation(t){return t.width<=t.height},r.clamp=clamp,r.getPDFFileNameFromURL=function getPDFFileNameFromURL(t,r="document.pdf"){if("string"!=typeof t)return r;if(function isDataSchema(t){let r=0;const i=t.length;for(;r<i&&""===t[r].trim();)r++;return"data:"===t.substring(r,r+5).toLowerCase()}(t))return console.warn('getPDFFileNameFromURL: ignoring "data:" URL for performance reasons.'),r;const i=/[^\/?#=]+\.pdf\b(?!.*\.pdf\b)/i,o=/^(?:(?:[^:]+:)?\/\/[^\/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(t);let a=i.exec(o[1])||i.exec(o[2])||i.exec(o[3]);if(a&&(a=a[0],a.includes("%")))try{a=i.exec(decodeURIComponent(a))[0]}catch(t){}return a||r},r.noContextMenuHandler=function noContextMenuHandler(t){t.preventDefault()},r.parseQueryString=function parseQueryString(t){const r=t.split("&"),i=Object.create(null);for(let t=0,o=r.length;t<o;++t){const o=r[t].split("="),a=o[0].toLowerCase(),l=o.length>1?o[1]:null;i[decodeURIComponent(a)]=decodeURIComponent(l)}return i},r.backtrackBeforeAllVisibleElements=backtrackBeforeAllVisibleElements,r.getVisibleElements=function getVisibleElements(t,r,i=!1,o=!1){const a=t.scrollTop,l=a+t.clientHeight,c=t.scrollLeft,u=c+t.clientWidth;const h=[],d=r.length;let p=0===d?0:binarySearchFirstItem(r,o?function isElementRightAfterViewLeft(t){const r=t.div;return r.offsetLeft+r.clientLeft+r.clientWidth>c}:function isElementBottomAfterViewTop(t){const r=t.div;return r.offsetTop+r.clientTop+r.clientHeight>a});p>0&&p<d&&!o&&(p=backtrackBeforeAllVisibleElements(p,r,a));let g=o?u:-1;for(let t=p;t<d;t++){const i=r[t],d=i.div,p=d.offsetLeft+d.clientLeft,v=d.offsetTop+d.clientTop,y=d.clientWidth,_=d.clientHeight,m=p+y,b=v+_;if(-1===g)b>=l&&(g=b);else if((o?p:v)>g)break;if(b<=a||v>=l||m<=c||p>=u)continue;const A=Math.max(0,a-v)+Math.max(0,b-l),S=Math.max(0,c-p)+Math.max(0,m-u),w=(_-A)*(y-S)*100/_/y|0;h.push({id:i.id,x:p,y:v,view:i,percent:w})}const v=h[0],y=h[h.length-1];i&&h.sort((function(t,r){const i=t.percent-r.percent;return Math.abs(i)>.001?-i:t.id-r.id}));return{first:v,last:y,views:h}},r.roundToDivide=function roundToDivide(t,r){const i=t%r;return 0===i?t:Math.round(t-i+r)},r.getPageSizeInches=function getPageSizeInches({view:t,userUnit:r,rotate:i}){const[o,a,l,c]=t,u=i%180!=0,h=(l-o)/72*r,d=(c-a)/72*r;return{width:u?d:h,height:u?h:d}},r.approximateFraction=function approximateFraction(t){if(Math.floor(t)===t)return[t,1];const r=1/t;if(r>8)return[1,8];if(Math.floor(r)===r)return[1,r];const i=t>1?r:t;let o,a=0,l=1,c=1,u=1;for(;;){const t=a+c,r=l+u;if(r>8)break;i<=t/r?(c=t,u=r):(a=t,l=r)}o=i-a/l<c/u-i?i===t?[a,l]:[l,a]:i===t?[c,u]:[u,c];return o},r.getOutputScale=function getOutputScale(t){const r=window.devicePixelRatio||1,i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,o=r/i;return{sx:o,sy:o,scaled:1!==o}},r.scrollIntoView=function scrollIntoView(t,r,i=!1){let o=t.offsetParent;if(!o)return void console.error("offsetParent is not set -- cannot scroll");let a=t.offsetTop+t.clientTop,l=t.offsetLeft+t.clientLeft;for(;o.clientHeight===o.scrollHeight&&o.clientWidth===o.scrollWidth||i&&"hidden"===getComputedStyle(o).overflow;)if(o.dataset._scaleY&&(a/=o.dataset._scaleY,l/=o.dataset._scaleX),a+=o.offsetTop,l+=o.offsetLeft,o=o.offsetParent,!o)return;r&&(void 0!==r.top&&(a+=r.top),void 0!==r.left&&(l+=r.left,o.scrollLeft=l));o.scrollTop=a},r.watchScroll=function watchScroll(t,r){const debounceScroll=function(a){o||(o=window.requestAnimationFrame((function viewAreaElementScrolled(){o=null;const a=t.scrollLeft,l=i.lastX;a!==l&&(i.right=a>l),i.lastX=a;const c=t.scrollTop,u=i.lastY;c!==u&&(i.down=c>u),i.lastY=c,r(i)})))},i={right:!0,down:!0,lastX:t.scrollLeft,lastY:t.scrollTop,_eventHandler:debounceScroll};let o=null;return t.addEventListener("scroll",debounceScroll,!0),i},r.binarySearchFirstItem=binarySearchFirstItem,r.normalizeWheelEventDirection=normalizeWheelEventDirection,r.normalizeWheelEventDelta=function normalizeWheelEventDelta(t){let r=normalizeWheelEventDirection(t);0===t.deltaMode?r/=900:1===t.deltaMode&&(r/=30);return r},r.waitOnEventOrTimeout=function waitOnEventOrTimeout({target:t,name:r,delay:i=0}){return new Promise((function(o,a){if("object"!=typeof t||!r||"string"!=typeof r||!(Number.isInteger(i)&&i>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function handler(i){t instanceof EventBus?t._off(r,l):t.removeEventListener(r,l),h&&clearTimeout(h),o(i)}const l=handler.bind(null,c.EVENT);t instanceof EventBus?t._on(r,l):t.addEventListener(r,l);const u=handler.bind(null,c.TIMEOUT),h=setTimeout(u,i)}))},r.moveToEndOfArray=function moveToEndOfArray(t,r){const i=[],o=t.length;let a=0;for(let l=0;l<o;++l)r(t[l])?i.push(t[l]):(t[a]=t[l],++a);for(let r=0;a<o;++r,++a)t[a]=i[r]},r.WaitOnType=r.animationStarted=r.ProgressBar=r.EventBus=r.NullL10n=r.SpreadMode=r.ScrollMode=r.TextLayerMode=r.RendererType=r.PresentationModeState=r.VERTICAL_PADDING=r.SCROLLBAR_PADDING=r.MAX_AUTO_SCALE=r.UNKNOWN_SCALE=r.MAX_SCALE=r.MIN_SCALE=r.DEFAULT_SCALE=r.DEFAULT_SCALE_VALUE=r.CSS_UNITS=r.AutoPrintRegExp=void 0;r.CSS_UNITS=96/72;r.DEFAULT_SCALE_VALUE="auto";r.DEFAULT_SCALE=1;r.MIN_SCALE=.1;r.MAX_SCALE=10;r.UNKNOWN_SCALE=0;r.MAX_AUTO_SCALE=1.25;r.SCROLLBAR_PADDING=40;r.VERTICAL_PADDING=5;r.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};r.RendererType={CANVAS:"canvas",SVG:"svg"};r.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const o={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2};r.ScrollMode=o;const a={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};r.SpreadMode=a;r.AutoPrintRegExp=/\bprint\s*\(/;const l={getLanguage:async()=>"en-us",getDirection:async()=>"ltr",get:async(t,r,i)=>function formatL10nValue(t,r){return r?t.replace(/\{\{\s*(\w+)\s*\}\}/g,((t,i)=>i in r?r[i]:"{{"+i+"}}")):t}(i,r),async translate(t){}};function binarySearchFirstItem(t,r){let i=0,o=t.length-1;if(o<0||!r(t[o]))return t.length;if(r(t[i]))return i;for(;i<o;){const a=i+o>>1;r(t[a])?o=a:i=a+1}return i}function backtrackBeforeAllVisibleElements(t,r,i){if(t<2)return t;let o=r[t].div,a=o.offsetTop+o.clientTop;a>=i&&(o=r[t-1].div,a=o.offsetTop+o.clientTop);for(let i=t-2;i>=0&&(o=r[i].div,!(o.offsetTop+o.clientTop+o.clientHeight<=a));--i)t=i;return t}function normalizeWheelEventDirection(t){let r=Math.sqrt(t.deltaX*t.deltaX+t.deltaY*t.deltaY);const i=Math.atan2(t.deltaY,t.deltaX);return-.25*Math.PI<i&&i<.75*Math.PI&&(r=-r),r}r.NullL10n=l;const c={EVENT:"event",TIMEOUT:"timeout"};r.WaitOnType=c;const u=new Promise((function(t){window.requestAnimationFrame(t)}));r.animationStarted=u;class EventBus{constructor(t){this._listeners=Object.create(null)}on(t,r){this._on(t,r,{external:!0})}off(t,r){this._off(t,r,{external:!0})}dispatch(t){const r=this._listeners[t];if(!r||0===r.length)return;const i=Array.prototype.slice.call(arguments,1);let o;r.slice(0).forEach((function({listener:t,external:r}){if(r)return o||(o=[]),void o.push(t);t.apply(null,i)})),o&&(o.forEach((function(t){t.apply(null,i)})),o=null)}_on(t,r,i=null){let o=this._listeners[t];o||(this._listeners[t]=o=[]),o.push({listener:r,external:!0===(i&&i.external)})}_off(t,r,i=null){const o=this._listeners[t];if(o)for(let t=0,i=o.length;t<i;t++)if(o[t].listener===r)return void o.splice(t,1)}}function clamp(t,r,i){return Math.min(Math.max(t,r),i)}r.EventBus=EventBus;r.ProgressBar=class ProgressBar{constructor(t,{height:r,width:i,units:o}={}){this.visible=!0,this.div=document.querySelector(t+" .progress"),this.bar=this.div.parentNode,this.height=r||100,this.width=i||100,this.units=o||"%",this.div.style.height=this.height+this.units,this.percent=0}_updateBar(){if(this._indeterminate)return this.div.classList.add("indeterminate"),void(this.div.style.width=this.width+this.units);this.div.classList.remove("indeterminate");const t=this.width*this._percent/100;this.div.style.width=t+this.units}get percent(){return this._percent}set percent(t){this._indeterminate=isNaN(t),this._percent=clamp(t,0,100),this._updateBar()}setWidth(t){if(!t)return;const r=t.parentNode.offsetWidth-t.offsetWidth;r>0&&(this.bar.style.width=`calc(100% - ${r}px)`)}hide(){this.visible&&(this.visible=!1,this.bar.classList.add("hidden"),document.body.classList.remove("loadingInProgress"))}show(){this.visible||(this.visible=!0,document.body.classList.add("loadingInProgress"),this.bar.classList.remove("hidden"))}}},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SimpleLinkService=r.PDFLinkService=void 0;var o=i(3);r.PDFLinkService=class PDFLinkService{constructor({eventBus:t,externalLinkTarget:r=null,externalLinkRel:i=null,externalLinkEnabled:o=!0,ignoreDestinationZoom:a=!1}={}){this.eventBus=t,this.externalLinkTarget=r,this.externalLinkRel=i,this.externalLinkEnabled=o,this._ignoreDestinationZoom=a,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null,this._pagesRefCache=null}setDocument(t,r=null){this.baseUrl=r,this.pdfDocument=t,this._pagesRefCache=Object.create(null)}setViewer(t){this.pdfViewer=t}setHistory(t){this.pdfHistory=t}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(t){this.pdfViewer.currentPageNumber=t}get rotation(){return this.pdfViewer.pagesRotation}set rotation(t){this.pdfViewer.pagesRotation=t}navigateTo(t){const goToDestination=({namedDest:r,explicitDest:i})=>{const o=i[0];let a;if(o instanceof Object){if(a=this._cachedPageNumber(o),null===a)return void this.pdfDocument.getPageIndex(o).then((t=>{this.cachePageRef(t+1,o),goToDestination({namedDest:r,explicitDest:i})})).catch((()=>{console.error(`PDFLinkService.navigateTo: "${o}" is not a valid page reference, for dest="${t}".`)}))}else{if(!Number.isInteger(o))return void console.error(`PDFLinkService.navigateTo: "${o}" is not a valid destination reference, for dest="${t}".`);a=o+1}!a||a<1||a>this.pagesCount?console.error(`PDFLinkService.navigateTo: "${a}" is not a valid page number, for dest="${t}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:r,explicitDest:i,pageNumber:a})),this.pdfViewer.scrollPageIntoView({pageNumber:a,destArray:i,ignoreDestinationZoom:this._ignoreDestinationZoom}))};new Promise(((r,i)=>{"string"!=typeof t?r({namedDest:"",explicitDest:t}):this.pdfDocument.getDestination(t).then((i=>{r({namedDest:t,explicitDest:i})}))})).then((r=>{Array.isArray(r.explicitDest)?goToDestination(r):console.error(`PDFLinkService.navigateTo: "${r.explicitDest}" is not a valid destination array, for dest="${t}".`)}))}getDestinationHash(t){if("string"==typeof t)return this.getAnchorUrl("#"+escape(t));if(Array.isArray(t)){const r=JSON.stringify(t);return this.getAnchorUrl("#"+escape(r))}return this.getAnchorUrl("")}getAnchorUrl(t){return(this.baseUrl||"")+t}setHash(t){let r,i;if(t.includes("=")){const a=(0,o.parseQueryString)(t);if("search"in a&&this.eventBus.dispatch("findfromurlhash",{source:this,query:a.search.replace(/"/g,""),phraseSearch:"true"===a.phrase}),"page"in a&&(r=0|a.page||1),"zoom"in a){const t=a.zoom.split(","),r=t[0],o=parseFloat(r);r.includes("Fit")?"Fit"===r||"FitB"===r?i=[null,{name:r}]:"FitH"===r||"FitBH"===r||"FitV"===r||"FitBV"===r?i=[null,{name:r},t.length>1?0|t[1]:null]:"FitR"===r?5!==t.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):i=[null,{name:r},0|t[1],0|t[2],0|t[3],0|t[4]]:console.error(`PDFLinkService.setHash: "${r}" is not a valid zoom value.`):i=[null,{name:"XYZ"},t.length>1?0|t[1]:null,t.length>2?0|t[2]:null,o?o/100:r]}i?this.pdfViewer.scrollPageIntoView({pageNumber:r||this.page,destArray:i,allowNegativeOffset:!0}):r&&(this.page=r),"pagemode"in a&&this.eventBus.dispatch("pagemode",{source:this,mode:a.pagemode}),"nameddest"in a&&this.navigateTo(a.nameddest)}else{i=unescape(t);try{i=JSON.parse(i),Array.isArray(i)||(i=i.toString())}catch(t){}if("string"==typeof i||function isValidExplicitDestination(t){if(!Array.isArray(t))return!1;const r=t.length;if(r<2)return!1;const i=t[0];if(!("object"==typeof i&&Number.isInteger(i.num)&&Number.isInteger(i.gen)||Number.isInteger(i)&&i>=0))return!1;const o=t[1];if("object"!=typeof o||"string"!=typeof o.name)return!1;let a=!0;switch(o.name){case"XYZ":if(5!==r)return!1;break;case"Fit":case"FitB":return 2===r;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==r)return!1;break;case"FitR":if(6!==r)return!1;a=!1;break;default:return!1}for(let i=2;i<r;i++){const r=t[i];if(!("number"==typeof r||a&&null===r))return!1}return!0}(i))return void this.navigateTo(i);console.error(`PDFLinkService.setHash: "${unescape(t)}" is not a valid destination.`)}}executeNamedAction(t){switch(t){case"GoBack":this.pdfHistory&&this.pdfHistory.back();break;case"GoForward":this.pdfHistory&&this.pdfHistory.forward();break;case"NextPage":this.page<this.pagesCount&&this.page++;break;case"PrevPage":this.page>1&&this.page--;break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:t})}cachePageRef(t,r){if(!r)return;const i=0===r.gen?`${r.num}R`:`${r.num}R${r.gen}`;this._pagesRefCache[i]=t}_cachedPageNumber(t){const r=0===t.gen?`${t.num}R`:`${t.num}R${t.gen}`;return this._pagesRefCache&&this._pagesRefCache[r]||null}isPageVisible(t){return this.pdfViewer.isPageVisible(t)}};r.SimpleLinkService=class SimpleLinkService{constructor(){this.externalLinkTarget=null,this.externalLinkRel=null,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=!1}get pagesCount(){return 0}get page(){return 0}set page(t){}get rotation(){return 0}set rotation(t){}navigateTo(t){}getDestinationHash(t){return"#"}getAnchorUrl(t){return"#"}setHash(t){}executeNamedAction(t){}cachePageRef(t,r){}isPageVisible(t){return!0}}},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DefaultTextLayerFactory=r.TextLayerBuilder=void 0;var o=i(2);class TextLayerBuilder{constructor({textLayerDiv:t,eventBus:r,pageIndex:i,viewport:o,findController:a=null,enhanceTextSelection:l=!1}){this.textLayerDiv=t,this.eventBus=r,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageIdx=i,this.pageNumber=this.pageIdx+1,this.matches=[],this.viewport=o,this.textDivs=[],this.findController=a,this.textLayerRenderTask=null,this.enhanceTextSelection=l,this._onUpdateTextLayerMatches=null,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){const t=document.createElement("div");t.className="endOfContent",this.textLayerDiv.appendChild(t)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(t=0){if(!this.textContent&&!this.textContentStream||this.renderingDone)return;this.cancel(),this.textDivs=[];const r=document.createDocumentFragment();this.textLayerRenderTask=(0,o.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:r,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:t,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then((()=>{this.textLayerDiv.appendChild(r),this._finishRendering(),this._updateMatches()}),(function(t){})),this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=t=>{t.pageIndex!==this.pageIdx&&-1!==t.pageIndex||this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches))}cancel(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null)}setTextContentStream(t){this.cancel(),this.textContentStream=t}setTextContent(t){this.cancel(),this.textContent=t}_convertMatches(t,r){if(!t)return[];const{findController:i,textContentItemsStr:o}=this;let a=0,l=0;const c=o.length-1,u=i.state.query.length,h=[];for(let i=0,d=t.length;i<d;i++){let d=t[i];for(;a!==c&&d>=l+o[a].length;)l+=o[a].length,a++;a===o.length&&console.error("Could not find a matching mapping");const p={begin:{divIdx:a,offset:d-l}};for(d+=r?r[i]:u;a!==c&&d>l+o[a].length;)l+=o[a].length,a++;p.end={divIdx:a,offset:d-l},h.push(p)}return h}_renderMatches(t){if(0===t.length)return;const{findController:r,pageIdx:i,textContentItemsStr:o,textDivs:a}=this,l=i===r.selected.pageIdx,c=r.selected.matchIdx;let u=null;const h={divIdx:-1,offset:void 0};function beginText(t,r){const i=t.divIdx;a[i].textContent="",appendTextToDiv(i,0,t.offset,r)}function appendTextToDiv(t,r,i,l){const c=a[t],u=o[t].substring(r,i),h=document.createTextNode(u);if(l){const t=document.createElement("span");return t.className=l,t.appendChild(h),void c.appendChild(t)}c.appendChild(h)}let d=c,p=d+1;if(r.state.highlightAll)d=0,p=t.length;else if(!l)return;for(let o=d;o<p;o++){const d=t[o],p=d.begin,g=d.end,v=l&&o===c,y=v?" selected":"";if(v&&r.scrollMatchIntoView({element:a[p.divIdx],pageIndex:i,matchIndex:c}),u&&p.divIdx===u.divIdx?appendTextToDiv(u.divIdx,u.offset,p.offset):(null!==u&&appendTextToDiv(u.divIdx,u.offset,h.offset),beginText(p)),p.divIdx===g.divIdx)appendTextToDiv(p.divIdx,p.offset,g.offset,"highlight"+y);else{appendTextToDiv(p.divIdx,p.offset,h.offset,"highlight begin"+y);for(let t=p.divIdx+1,r=g.divIdx;t<r;t++)a[t].className="highlight middle"+y;beginText(g,"highlight end"+y)}u=g}u&&appendTextToDiv(u.divIdx,u.offset,h.offset)}_updateMatches(){if(!this.renderingDone)return;const{findController:t,matches:r,pageIdx:i,textContentItemsStr:o,textDivs:a}=this;let l=-1;for(let t=0,i=r.length;t<i;t++){const i=r[t];for(let t=Math.max(l,i.begin.divIdx),r=i.end.divIdx;t<=r;t++){const r=a[t];r.textContent=o[t],r.className=""}l=i.end.divIdx+1}if(!t||!t.highlightMatches)return;const c=t.pageMatches[i]||null,u=t.pageMatchesLength[i]||null;this.matches=this._convertMatches(c,u),this._renderMatches(this.matches)}_bindMouse(){const t=this.textLayerDiv;let r=null;t.addEventListener("mousedown",(i=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return this.textLayerRenderTask.expandTextDivs(!0),void(r&&(clearTimeout(r),r=null));const o=t.querySelector(".endOfContent");if(!o)return;let a=i.target!==t;if(a=a&&"none"!==window.getComputedStyle(o).getPropertyValue("-moz-user-select"),a){const r=t.getBoundingClientRect(),a=Math.max(0,(i.pageY-r.top)/r.height);o.style.top=(100*a).toFixed(2)+"%"}o.classList.add("active")})),t.addEventListener("mouseup",(()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return void(r=setTimeout((()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),r=null}),300));const i=t.querySelector(".endOfContent");i&&(i.style.top="",i.classList.remove("active"))}))}}r.TextLayerBuilder=TextLayerBuilder;r.DefaultTextLayerFactory=class DefaultTextLayerFactory{createTextLayerBuilder(t,r,i,o=!1,a){return new TextLayerBuilder({textLayerDiv:t,pageIndex:r,viewport:i,enhanceTextSelection:o,eventBus:a})}}},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DownloadManager=void 0;var o=i(2),a=i(7);function download(t,r){const i=document.createElement("a");if(!i.click)throw new Error('DownloadManager: "a.click()" is not supported.');i.href=t,i.target="_parent","download"in i&&(i.download=r),(document.body||document.documentElement).appendChild(i),i.click(),i.remove()}r.DownloadManager=class DownloadManager{downloadUrl(t,r){(0,o.createValidAbsoluteUrl)(t,"http://example.com")&&download(t+"#pdfjs.action=download",r)}downloadData(t,r,i){if(navigator.msSaveBlob)return void navigator.msSaveBlob(new Blob([t],{type:i}),r);download((0,o.createObjectURL)(t,i,a.viewerCompatibilityParams.disableCreateObjectURL),r)}download(t,r,i,o="download"){if(navigator.msSaveBlob)return void(navigator.msSaveBlob(t,i)||this.downloadUrl(r,i));if(a.viewerCompatibilityParams.disableCreateObjectURL)return void this.downloadUrl(r,i);download(URL.createObjectURL(t),i)}}},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.viewerCompatibilityParams=void 0;const o=Object.create(null);{const t="undefined"!=typeof navigator&&navigator.userAgent||"",r="undefined"!=typeof navigator&&navigator.platform||"",i="undefined"!=typeof navigator&&navigator.maxTouchPoints||1,a=/Android/.test(t),l=/Trident/.test(t),c=/\b(iPad|iPhone|iPod)(?=;)/.test(t)||"MacIntel"===r&&i>1,u=/CriOS/.test(t);!function checkOnBlobSupport(){(l||u)&&(o.disableCreateObjectURL=!0)}(),function checkCanvasSizeLimitation(){(c||a)&&(o.maxCanvasPixels=5242880)}()}const a=Object.freeze(o);r.viewerCompatibilityParams=a},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GenericL10n=void 0,i(9);const o=document.webL10n;r.GenericL10n=class GenericL10n{constructor(t){this._lang=t,this._ready=new Promise(((r,i)=>{o.setLanguage(t,(()=>{r(o)}))}))}async getLanguage(){return(await this._ready).getLanguage()}async getDirection(){return(await this._ready).getDirection()}async get(t,r,i){return(await this._ready).get(t,r,i)}async translate(t){return(await this._ready).translate(t)}}},function(t,r,i){"use strict";document.webL10n=function(t,r,i){var o={},a="",l="textContent",c="",u={},h="loading";function xhrLoadText(t,r,i){r=r||function _onSuccess(t){},i=i||function _onFailure(){};var o=new XMLHttpRequest;o.open("GET",t,true),o.overrideMimeType&&o.overrideMimeType("text/plain; charset=utf-8"),o.onreadystatechange=function(){4==o.readyState&&(200==o.status||0===o.status?r(o.responseText):i())},o.onerror=i,o.ontimeout=i;try{o.send(null)}catch(t){i()}}function parseResource(t,r,i,c){var u=t.replace(/[^\/]*$/,"")||"./";function evalString(t){return t.lastIndexOf("\\")<0?t:t.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}xhrLoadText(t,(function(t){a+=t,function parseProperties(t,i){var o={},a=/^\s*|\s*$/,l=/^\s*#|^\s*$/,c=/^\s*\[(.*)\]\s*$/,h=/^\s*@import\s+url\((.*)\)\s*$/i,d=/^([^=\s]*)\s*=\s*(.+)$/;function parseRawLines(t,i,p){var g=t.replace(a,"").split(/[\r\n]+/),v="*",y=r.split("-",1)[0],_=!1,m="";!function nextEntry(){for(;;){if(!g.length)return void p();var t=g.shift();if(!l.test(t)){if(i){if(m=c.exec(t)){v=m[1].toLowerCase(),_="*"!==v&&v!==r&&v!==y;continue}if(_)continue;if(m=h.exec(t))return void loadImport(u+m[1],nextEntry)}var a=t.match(d);a&&3==a.length&&(o[a[1]]=evalString(a[2]))}}}()}function loadImport(t,r){xhrLoadText(t,(function(t){parseRawLines(t,!1,r)}),(function(){console.warn(t+" not found."),r()}))}parseRawLines(t,!0,(function(){i(o)}))}(t,(function(t){for(var r in t){var a,c,u=r.lastIndexOf(".");u>0?(a=r.substring(0,u),c=r.substring(u+1)):(a=r,c=l),o[a]||(o[a]={}),o[a][c]=t[r]}i&&i()}))}),c)}function loadLocale(t,i){t&&(t=t.toLowerCase()),i=i||function _callback(){},function clear(){o={},a="",c=""}(),c=t;var l=function getL10nResourceLinks(){return r.querySelectorAll('link[type="application/l10n"]')}(),u=l.length;if(0!==u){var d,p=0;d=function(){++p>=u&&(i(),h="complete")};for(var g=0;g<u;g++){new L10nResourceLink(l[g]).load(t,d)}}else{var v=function getL10nDictionary(){var t=r.querySelector('script[type="application/l10n"]');return t?JSON.parse(t.innerHTML):null}();if(v&&v.locales&&v.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(o=v.locales[t])){var y=v.default_locale.toLowerCase();for(var _ in v.locales){if((_=_.toLowerCase())===t){o=v.locales[t];break}_===y&&(o=v.locales[y])}}i()}else console.log("no resource to load, early way out");h="complete"}function L10nResourceLink(t){var r=t.href;this.load=function(t,i){parseResource(r,t,i,(function(){console.warn(r+" not found."),console.warn('"'+t+'" resource not found'),c="",i()}))}}}function getL10nData(t,r,i){var a=o[t];if(!a){if(console.warn("#"+t+" is undefined."),!i)return null;a=i}var l={};for(var c in a){var u=a[c];u=substArguments(u=substIndexes(u,r,t,c),r,t),l[c]=u}return l}function substIndexes(t,r,i,a){var l=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(t);if(!l||!l.length)return t;var c,h=l[1],d=l[2];(r&&d in r?c=r[d]:d in o&&(c=o[d]),h in u)&&(t=(0,u[h])(t,c,i,a));return t}function substArguments(t,r,i){return t.replace(/\{\{\s*(.+?)\s*\}\}/g,(function(t,a){return r&&a in r?r[a]:a in o?o[a]:(console.log("argument {{"+a+"}} for #"+i+" is undefined."),t)}))}function translateElement(t){var i=function getL10nAttributes(t){if(!t)return{};var r=t.getAttribute("data-l10n-id"),i=t.getAttribute("data-l10n-args"),o={};if(i)try{o=JSON.parse(i)}catch(t){console.warn("could not parse arguments for #"+r)}return{id:r,args:o}}(t);if(i.id){var o=getL10nData(i.id,i.args);if(o){if(o[l]){if(0===function getChildElementCount(t){if(t.children)return t.children.length;if(void 0!==t.childElementCount)return t.childElementCount;for(var r=0,i=0;i<t.childNodes.length;i++)r+=1===t.nodeType?1:0;return r}(t))t[l]=o[l];else{for(var a=t.childNodes,c=!1,u=0,h=a.length;u<h;u++)3===a[u].nodeType&&/\S/.test(a[u].nodeValue)&&(c?a[u].nodeValue="":(a[u].nodeValue=o[l],c=!0));if(!c){var d=r.createTextNode(o[l]);t.insertBefore(d,t.firstChild)}}delete o[l]}for(var p in o)t[p]=o[p]}else console.warn("#"+i.id+" is undefined.")}}return u.plural=function(t,r,i,a){var h=parseFloat(r);if(isNaN(h))return t;if(a!=l)return t;u._pluralRules||(u._pluralRules=function getPluralRules(t){function isIn(t,r){return-1!==r.indexOf(t)}function isBetween(t,r,i){return r<=t&&t<=i}var r={0:function(t){return"other"},1:function(t){return isBetween(t%100,3,10)?"few":0===t?"zero":isBetween(t%100,11,99)?"many":2==t?"two":1==t?"one":"other"},2:function(t){return 0!==t&&t%10==0?"many":2==t?"two":1==t?"one":"other"},3:function(t){return 1==t?"one":"other"},4:function(t){return isBetween(t,0,1)?"one":"other"},5:function(t){return isBetween(t,0,2)&&2!=t?"one":"other"},6:function(t){return 0===t?"zero":t%10==1&&t%100!=11?"one":"other"},7:function(t){return 2==t?"two":1==t?"one":"other"},8:function(t){return isBetween(t,3,6)?"few":isBetween(t,7,10)?"many":2==t?"two":1==t?"one":"other"},9:function(t){return 0===t||1!=t&&isBetween(t%100,1,19)?"few":1==t?"one":"other"},10:function(t){return isBetween(t%10,2,9)&&!isBetween(t%100,11,19)?"few":t%10!=1||isBetween(t%100,11,19)?"other":"one"},11:function(t){return isBetween(t%10,2,4)&&!isBetween(t%100,12,14)?"few":t%10==0||isBetween(t%10,5,9)||isBetween(t%100,11,14)?"many":t%10==1&&t%100!=11?"one":"other"},12:function(t){return isBetween(t,2,4)?"few":1==t?"one":"other"},13:function(t){return isBetween(t%10,2,4)&&!isBetween(t%100,12,14)?"few":1!=t&&isBetween(t%10,0,1)||isBetween(t%10,5,9)||isBetween(t%100,12,14)?"many":1==t?"one":"other"},14:function(t){return isBetween(t%100,3,4)?"few":t%100==2?"two":t%100==1?"one":"other"},15:function(t){return 0===t||isBetween(t%100,2,10)?"few":isBetween(t%100,11,19)?"many":1==t?"one":"other"},16:function(t){return t%10==1&&11!=t?"one":"other"},17:function(t){return 3==t?"few":0===t?"zero":6==t?"many":2==t?"two":1==t?"one":"other"},18:function(t){return 0===t?"zero":isBetween(t,0,2)&&0!==t&&2!=t?"one":"other"},19:function(t){return isBetween(t,2,10)?"few":isBetween(t,0,1)?"one":"other"},20:function(t){return!isBetween(t%10,3,4)&&t%10!=9||isBetween(t%100,10,19)||isBetween(t%100,70,79)||isBetween(t%100,90,99)?t%1e6==0&&0!==t?"many":t%10!=2||isIn(t%100,[12,72,92])?t%10!=1||isIn(t%100,[11,71,91])?"other":"one":"two":"few"},21:function(t){return 0===t?"zero":1==t?"one":"other"},22:function(t){return isBetween(t,0,1)||isBetween(t,11,99)?"one":"other"},23:function(t){return isBetween(t%10,1,2)||t%20==0?"one":"other"},24:function(t){return isBetween(t,3,10)||isBetween(t,13,19)?"few":isIn(t,[2,12])?"two":isIn(t,[1,11])?"one":"other"}},i={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[t.replace(/-.*$/,"")];return i in r?r[i]:(console.warn("plural form unknown for ["+t+"]"),function(){return"other"})}(c));var d="["+u._pluralRules(h)+"]";return 0===h&&i+"[zero]"in o?t=o[i+"[zero]"][a]:1==h&&i+"[one]"in o?t=o[i+"[one]"][a]:2==h&&i+"[two]"in o?t=o[i+"[two]"][a]:i+d in o?t=o[i+d][a]:i+"[other]"in o&&(t=o[i+"[other]"][a]),t},{get:function(t,r,i){var o,a=t.lastIndexOf("."),c=l;a>0&&(c=t.substring(a+1),t=t.substring(0,a)),i&&((o={})[c]=i);var u=getL10nData(t,r,o);return u&&c in u?u[c]:"{{"+t+"}}"},getData:function(){return o},getText:function(){return a},getLanguage:function(){return c},setLanguage:function(t,r){loadLocale(t,(function(){r&&r()}))},getDirection:function(){var t=c.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(t)>=0?"rtl":"ltr"},translate:function translateFragment(t){for(var i=function getTranslatableChildren(t){return t?t.querySelectorAll("*[data-l10n-id]"):[]}(t=t||r.documentElement),o=i.length,a=0;a<o;a++)translateElement(i[a]);translateElement(t)},getReadyState:function(){return h},ready:function(i){i&&("complete"==h||"interactive"==h?t.setTimeout((function(){i()})):r.addEventListener&&r.addEventListener("localized",(function once(){r.removeEventListener("localized",once),i()})))}}}(window,document)},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PDFFindController=r.FindState=void 0;var o=i(2),a=i(11),l=i(3);const c={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};r.FindState=c;const u={"‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"};let h=null;function normalize(t){if(!h){const t=Object.keys(u).join("");h=new RegExp(`[${t}]`,"g")}return t.replace(h,(function(t){return u[t]}))}r.PDFFindController=class PDFFindController{constructor({linkService:t,eventBus:r}){this._linkService=t,this._eventBus=r,this._reset(),r._on("findbarclose",this._onFindBarClose.bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(t){this._pdfDocument&&this._reset(),t&&(this._pdfDocument=t,this._firstPageCapability.resolve())}executeCommand(t,r){if(!r)return;const i=this._pdfDocument;(null===this._state||this._shouldDirtyMatch(t,r))&&(this._dirtyMatch=!0),this._state=r,"findhighlightallchange"!==t&&this._updateUIState(c.PENDING),this._firstPageCapability.promise.then((()=>{if(!this._pdfDocument||i&&this._pdfDocument!==i)return;this._extractText();const r=!this._highlightMatches,o=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),"find"===t?this._findTimeout=setTimeout((()=>{this._nextMatch(),this._findTimeout=null}),250):this._dirtyMatch?this._nextMatch():"findagain"===t?(this._nextMatch(),r&&this._state.highlightAll&&this._updateAllPages()):"findhighlightallchange"===t?(o?this._nextMatch():this._highlightMatches=!0,this._updateAllPages()):this._nextMatch()}))}scrollMatchIntoView({element:t=null,pageIndex:r=-1,matchIndex:i=-1}){if(!this._scrollMatches||!t)return;if(-1===i||i!==this._selected.matchIdx)return;if(-1===r||r!==this._selected.pageIdx)return;this._scrollMatches=!1;const o={top:-50,left:-400};(0,l.scrollIntoView)(t,o,!0)}_reset(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=Object.create(null),this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,o.createPromiseCapability)()}get _query(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,this._normalizedQuery=normalize(this._state.query)),this._normalizedQuery}_shouldDirtyMatch(t,r){if(r.query!==this._state.query)return!0;switch(t){case"findagain":const t=this._selected.pageIdx+1,r=this._linkService;return t>=1&&t<=r.pagesCount&&t!==r.page&&!r.isPageVisible(t);case"findhighlightallchange":return!1}return!0}_prepareMatches(t,r,i){function isSubTerm(r){const i=t[r],o=t[r+1];if(r<t.length-1&&i.match===o.match)return i.skipped=!0,!0;for(let o=r-1;o>=0;o--){const r=t[o];if(!r.skipped){if(r.match+r.matchLength<i.match)break;if(r.match+r.matchLength>=i.match+i.matchLength)return i.skipped=!0,!0}}return!1}t.sort((function(t,r){return t.match===r.match?t.matchLength-r.matchLength:t.match-r.match}));for(let o=0,a=t.length;o<a;o++)isSubTerm(o)||(r.push(t[o].match),i.push(t[o].matchLength))}_isEntireWord(t,r,i){if(r>0){const i=t.charCodeAt(r),o=t.charCodeAt(r-1);if((0,a.getCharacterType)(i)===(0,a.getCharacterType)(o))return!1}const o=r+i-1;if(o<t.length-1){const r=t.charCodeAt(o),i=t.charCodeAt(o+1);if((0,a.getCharacterType)(r)===(0,a.getCharacterType)(i))return!1}return!0}_calculatePhraseMatch(t,r,i,o){const a=[],l=t.length;let c=-l;for(;c=i.indexOf(t,c+l),-1!==c;)o&&!this._isEntireWord(i,c,l)||a.push(c);this._pageMatches[r]=a}_calculateWordMatch(t,r,i,o){const a=[],l=t.match(/\S+/g);for(let t=0,r=l.length;t<r;t++){const r=l[t],c=r.length;let u=-c;for(;u=i.indexOf(r,u+c),-1!==u;)o&&!this._isEntireWord(i,u,c)||a.push({match:u,matchLength:c,skipped:!1})}this._pageMatchesLength[r]=[],this._pageMatches[r]=[],this._prepareMatches(a,this._pageMatches[r],this._pageMatchesLength[r])}_calculateMatch(t){let r=this._pageContents[t],i=this._query;const{caseSensitive:o,entireWord:a,phraseSearch:l}=this._state;if(0===i.length)return;o||(r=r.toLowerCase(),i=i.toLowerCase()),l?this._calculatePhraseMatch(i,t,r,a):this._calculateWordMatch(i,t,r,a),this._state.highlightAll&&this._updatePage(t),this._resumePageIdx===t&&(this._resumePageIdx=null,this._nextPageMatch());const c=this._pageMatches[t].length;c>0&&(this._matchesCountTotal+=c,this._updateUIResultsCount())}_extractText(){if(this._extractTextPromises.length>0)return;let t=Promise.resolve();for(let r=0,i=this._linkService.pagesCount;r<i;r++){const i=(0,o.createPromiseCapability)();this._extractTextPromises[r]=i.promise,t=t.then((()=>this._pdfDocument.getPage(r+1).then((t=>t.getTextContent({normalizeWhitespace:!0}))).then((t=>{const o=t.items,a=[];for(let t=0,r=o.length;t<r;t++)a.push(o[t].str);this._pageContents[r]=normalize(a.join("")),i.resolve(r)}),(t=>{console.error(`Unable to get text content for page ${r+1}`,t),this._pageContents[r]="",i.resolve(r)}))))}}_updatePage(t){this._scrollMatches&&this._selected.pageIdx===t&&(this._linkService.page=t+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:t})}_updateAllPages(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}_nextMatch(){const t=this._state.findPrevious,r=this._linkService.page-1,i=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=r,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,this._updateAllPages();for(let t=0;t<i;t++)!0!==this._pendingFindMatches[t]&&(this._pendingFindMatches[t]=!0,this._extractTextPromises[t].then((t=>{delete this._pendingFindMatches[t],this._calculateMatch(t)})))}if(""===this._query)return void this._updateUIState(c.FOUND);if(this._resumePageIdx)return;const o=this._offset;if(this._pagesToSearch=i,null!==o.matchIdx){const r=this._pageMatches[o.pageIdx].length;if(!t&&o.matchIdx+1<r||t&&o.matchIdx>0)return o.matchIdx=t?o.matchIdx-1:o.matchIdx+1,void this._updateMatch(!0);this._advanceOffsetPage(t)}this._nextPageMatch()}_matchesReady(t){const r=this._offset,i=t.length,o=this._state.findPrevious;return i?(r.matchIdx=o?i-1:0,this._updateMatch(!0),!0):(this._advanceOffsetPage(o),!!(r.wrapped&&(r.matchIdx=null,this._pagesToSearch<0))&&(this._updateMatch(!1),!0))}_nextPageMatch(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let t=null;do{const r=this._offset.pageIdx;if(t=this._pageMatches[r],!t){this._resumePageIdx=r;break}}while(!this._matchesReady(t))}_advanceOffsetPage(t){const r=this._offset,i=this._linkService.pagesCount;r.pageIdx=t?r.pageIdx-1:r.pageIdx+1,r.matchIdx=null,this._pagesToSearch--,(r.pageIdx>=i||r.pageIdx<0)&&(r.pageIdx=t?i-1:0,r.wrapped=!0)}_updateMatch(t=!1){let r=c.NOT_FOUND;const i=this._offset.wrapped;if(this._offset.wrapped=!1,t){const t=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,r=i?c.WRAPPED:c.FOUND,-1!==t&&t!==this._selected.pageIdx&&this._updatePage(t)}this._updateUIState(r,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,this._updatePage(this._selected.pageIdx))}_onFindBarClose(t){const r=this._pdfDocument;this._firstPageCapability.promise.then((()=>{!this._pdfDocument||r&&this._pdfDocument!==r||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this._updateUIState(c.FOUND),this._highlightMatches=!1,this._updateAllPages())}))}_requestMatchesCount(){const{pageIdx:t,matchIdx:r}=this._selected;let i=0,o=this._matchesCountTotal;if(-1!==r){for(let r=0;r<t;r++)i+=this._pageMatches[r]&&this._pageMatches[r].length||0;i+=r+1}return(i<1||i>o)&&(i=o=0),{current:i,total:o}}_updateUIResultsCount(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this._requestMatchesCount()})}_updateUIState(t,r){this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:t,previous:r,matchesCount:this._requestMatchesCount(),rawQuery:this._state?this._state.query:null})}}},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getCharacterType=function getCharacterType(t){if(function isAlphabeticalScript(t){return t<11904}(t))return function isAscii(t){return 0==(65408&t)}(t)?function isAsciiSpace(t){return 32===t||9===t||13===t||10===t}(t)?o.SPACE:function isAsciiAlpha(t){return t>=97&&t<=122||t>=65&&t<=90}(t)||function isAsciiDigit(t){return t>=48&&t<=57}(t)||95===t?o.ALPHA_LETTER:o.PUNCT:function isThai(t){return 3584==(65408&t)}(t)?o.THAI_LETTER:160===t?o.SPACE:o.ALPHA_LETTER;if(function isHan(t){return t>=13312&&t<=40959||t>=63744&&t<=64255}(t))return o.HAN_LETTER;if(function isKatakana(t){return t>=12448&&t<=12543}(t))return o.KATAKANA_LETTER;if(function isHiragana(t){return t>=12352&&t<=12447}(t))return o.HIRAGANA_LETTER;if(function isHalfwidthKatakana(t){return t>=65376&&t<=65439}(t))return o.HALFWIDTH_KATAKANA_LETTER;return o.ALPHA_LETTER},r.CharacterType=void 0;const o={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};r.CharacterType=o},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isDestHashesEqual=isDestHashesEqual,r.isDestArraysEqual=isDestArraysEqual,r.PDFHistory=void 0;var o=i(3);function getCurrentHash(){return document.location.hash}function isDestHashesEqual(t,r){if("string"!=typeof t||"string"!=typeof r)return!1;if(t===r)return!0;const{nameddest:i}=(0,o.parseQueryString)(t);return i===r}function isDestArraysEqual(t,r){function isEntryEqual(t,r){if(typeof t!=typeof r)return!1;if(Array.isArray(t)||Array.isArray(r))return!1;if(null!==t&&"object"==typeof t&&null!==r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const i in t)if(!isEntryEqual(t[i],r[i]))return!1;return!0}return t===r||Number.isNaN(t)&&Number.isNaN(r)}if(!Array.isArray(t)||!Array.isArray(r))return!1;if(t.length!==r.length)return!1;for(let i=0,o=t.length;i<o;i++)if(!isEntryEqual(t[i],r[i]))return!1;return!0}r.PDFHistory=class PDFHistory{constructor({linkService:t,eventBus:r}){this.linkService=t,this.eventBus=r,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this._isViewerInPresentationMode=!1,this.eventBus._on("presentationmodechanged",(t=>{this._isViewerInPresentationMode=t.active||t.switchInProgress})),this.eventBus._on("pagesinit",(()=>{this._isPagesLoaded=!1;const onPagesLoaded=t=>{this.eventBus._off("pagesloaded",onPagesLoaded),this._isPagesLoaded=!!t.pagesCount};this.eventBus._on("pagesloaded",onPagesLoaded)}))}initialize({fingerprint:t,resetHistory:r=!1,updateUrl:i=!1}){if(!t||"string"!=typeof t)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const o=""!==this._fingerprint&&this._fingerprint!==t;this._fingerprint=t,this._updateUrl=!0===i,this._initialized=!0,this._bindEvents();const a=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=getCurrentHash(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(a,!0)||r){const{hash:t,page:i,rotation:a}=this._parseCurrentHash(!0);return!t||o||r?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:t,page:i,rotation:a},!0)}const l=a.destination;this._updateInternalState(l,a.uid,!0),this._uid>this._maxUid&&(this._maxUid=this._uid),void 0!==l.rotation&&(this._initialRotation=l.rotation),l.dest?(this._initialBookmark=JSON.stringify(l.dest),this._destination.page=null):l.hash?this._initialBookmark=l.hash:l.page&&(this._initialBookmark=`page=${l.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:t=null,explicitDest:r,pageNumber:i}){if(!this._initialized)return;if(t&&"string"!=typeof t)return void console.error(`PDFHistory.push: "${t}" is not a valid namedDest parameter.`);if(!Array.isArray(r))return void console.error(`PDFHistory.push: "${r}" is not a valid explicitDest parameter.`);if(!(Number.isInteger(i)&&i>0&&i<=this.linkService.pagesCount)&&(null!==i||this._destination))return void console.error(`PDFHistory.push: "${i}" is not a valid pageNumber parameter.`);const o=t||JSON.stringify(r);if(!o)return;let a=!1;if(this._destination&&(isDestHashesEqual(this._destination.hash,o)||isDestArraysEqual(this._destination.dest,r))){if(this._destination.page)return;a=!0}this._popStateInProgress&&!a||(this._pushOrReplaceState({dest:r,hash:o,page:i,rotation:this.linkService.rotation},a),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then((()=>{this._popStateInProgress=!1}))))}pushCurrentPosition(){this._initialized&&!this._popStateInProgress&&this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const t=window.history.state;this._isValidState(t)&&t.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const t=window.history.state;this._isValidState(t)&&t.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(t,r=!1){const i=r||!this._destination,o={fingerprint:this._fingerprint,uid:i?this._uid:this._uid+1,destination:t};let a;if(this._updateInternalState(t,o.uid),this._updateUrl&&t&&t.hash){const r=document.location.href.split("#")[0];r.startsWith("file://")||(a=`${r}#${t.hash}`)}i?window.history.replaceState(o,"",a):(this._maxUid=this._uid,window.history.pushState(o,"",a))}_tryPushCurrentPosition(t=!1){if(!this._position)return;let r=this._position;if(t&&(r=Object.assign(Object.create(null),this._position),r.temporary=!0),!this._destination)return void this._pushOrReplaceState(r);if(this._destination.temporary)return void this._pushOrReplaceState(r,!0);if(this._destination.hash===r.hash)return;if(!this._destination.page&&this._numPositionUpdates<=50)return;let i=!1;if(this._destination.page>=r.first&&this._destination.page<=r.page){if(this._destination.dest||!this._destination.first)return;i=!0}this._pushOrReplaceState(r,i)}_isValidState(t,r=!1){if(!t)return!1;if(t.fingerprint!==this._fingerprint){if(!r)return!1;{if("string"!=typeof t.fingerprint||t.fingerprint.length!==this._fingerprint.length)return!1;const[r]=performance.getEntriesByType("navigation");if(!r||"reload"!==r.type)return!1}}return!(!Number.isInteger(t.uid)||t.uid<0)&&(null!==t.destination&&"object"==typeof t.destination)}_updateInternalState(t,r,i=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),i&&t&&t.temporary&&delete t.temporary,this._destination=t,this._uid=r,this._numPositionUpdates=0}_parseCurrentHash(t=!1){const r=unescape(getCurrentHash()).substring(1),i=(0,o.parseQueryString)(r),a=i.nameddest||"";let l=0|i.page;return Number.isInteger(l)&&l>0&&l<=this.linkService.pagesCount&&!(t&&a.length>0)||(l=null),{hash:r,page:l,rotation:this.linkService.rotation}}_updateViewarea({location:t}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:this._isViewerInPresentationMode?`page=${t.pageNumber}`:t.pdfOpenParams.substring(1),page:this.linkService.page,first:t.pageNumber,rotation:t.rotation},this._popStateInProgress||(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout((()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null}),1e3))}_popState({state:t}){const r=getCurrentHash(),i=this._currentHash!==r;if(this._currentHash=r,!t){this._uid++;const{hash:t,page:r,rotation:i}=this._parseCurrentHash();return void this._pushOrReplaceState({hash:t,page:r,rotation:i},!0)}if(!this._isValidState(t))return;this._popStateInProgress=!0,i&&(this._blockHashChange++,(0,o.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then((()=>{this._blockHashChange--})));const a=t.destination;this._updateInternalState(a,t.uid,!0),this._uid>this._maxUid&&(this._maxUid=this._uid),(0,o.isValidRotation)(a.rotation)&&(this.linkService.rotation=a.rotation),a.dest?this.linkService.navigateTo(a.dest):a.hash?this.linkService.setHash(a.hash):a.page&&(this.linkService.page=a.page),Promise.resolve().then((()=>{this._popStateInProgress=!1}))}_pageHide(){this._destination&&!this._destination.temporary||this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PDFPageView=void 0;var o=i(3),a=i(2),l=i(14);const c=i(7).viewerCompatibilityParams.maxCanvasPixels||16777216;r.PDFPageView=class PDFPageView{constructor(t){const r=t.container,i=t.defaultViewport;this.id=t.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=t.scale||o.DEFAULT_SCALE,this.viewport=i,this.pdfPageRotate=i.rotation,this._annotationStorage=t.annotationStorage||null,this._optionalContentConfigPromise=t.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=Number.isInteger(t.textLayerMode)?t.textLayerMode:o.TextLayerMode.ENABLE,this.imageResourcesPath=t.imageResourcesPath||"",this.renderInteractiveForms="boolean"!=typeof t.renderInteractiveForms||t.renderInteractiveForms,this.useOnlyCssZoom=t.useOnlyCssZoom||!1,this.maxCanvasPixels=t.maxCanvasPixels||c,this.eventBus=t.eventBus,this.renderingQueue=t.renderingQueue,this.textLayerFactory=t.textLayerFactory,this.annotationLayerFactory=t.annotationLayerFactory,this.renderer=t.renderer||o.RendererType.CANVAS,this.enableWebGL=t.enableWebGL||!1,this.l10n=t.l10n||o.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=l.RenderingStates.INITIAL,this.resume=null,this.error=null,this.annotationLayer=null,this.textLayer=null,this.zoomLayer=null;const a=document.createElement("div");a.className="page",a.style.width=Math.floor(this.viewport.width)+"px",a.style.height=Math.floor(this.viewport.height)+"px",a.setAttribute("data-page-number",this.id),this.div=a,r.appendChild(a)}setPdfPage(t){this.pdfPage=t,this.pdfPageRotate=t.rotate;const r=(this.rotation+this.pdfPageRotate)%360;this.viewport=t.getViewport({scale:this.scale*o.CSS_UNITS,rotation:r}),this.stats=t.stats,this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}async _renderAnnotationLayer(){let t=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(r){t=r}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:t})}}_resetZoomLayer(t=!1){if(!this.zoomLayer)return;const r=this.zoomLayer.firstChild;this.paintedViewportMap.delete(r),r.width=0,r.height=0,t&&this.zoomLayer.remove(),this.zoomLayer=null}reset(t=!1,r=!1){this.cancelRendering(r),this.renderingState=l.RenderingStates.INITIAL;const i=this.div;i.style.width=Math.floor(this.viewport.width)+"px",i.style.height=Math.floor(this.viewport.height)+"px";const o=i.childNodes,a=t&&this.zoomLayer||null,c=r&&this.annotationLayer&&this.annotationLayer.div||null;for(let t=o.length-1;t>=0;t--){const r=o[t];a!==r&&c!==r&&i.removeChild(r)}i.removeAttribute("data-loaded"),c?this.annotationLayer.hide():this.annotationLayer&&(this.annotationLayer.cancel(),this.annotationLayer=null),a||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon",i.appendChild(this.loadingIconDiv)}update(t,r,i=null){this.scale=t||this.scale,void 0!==r&&(this.rotation=r),i instanceof Promise&&(this._optionalContentConfigPromise=i);const a=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*o.CSS_UNITS,rotation:a}),this.svg)return this.cssTransform(this.svg,!0),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now()});let l=!1;if(this.canvas&&this.maxCanvasPixels>0){const t=this.outputScale;(Math.floor(this.viewport.width)*t.sx|0)*(Math.floor(this.viewport.height)*t.sy|0)>this.maxCanvasPixels&&(l=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&l)return this.cssTransform(this.canvas,!0),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now()});this.zoomLayer||this.canvas.hasAttribute("hidden")||(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform(this.zoomLayer.firstChild),this.reset(!0,!0)}cancelRendering(t=!1){this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),!t&&this.annotationLayer&&(this.annotationLayer.cancel(),this.annotationLayer=null)}cssTransform(t,r=!1){const i=this.viewport.width,o=this.viewport.height,a=this.div;t.style.width=t.parentNode.style.width=a.style.width=Math.floor(i)+"px",t.style.height=t.parentNode.style.height=a.style.height=Math.floor(o)+"px";const l=this.viewport.rotation-this.paintedViewportMap.get(t).rotation,c=Math.abs(l);let u=1,h=1;90!==c&&270!==c||(u=o/i,h=i/o);const d="rotate("+l+"deg) scale("+u+","+h+")";if(t.style.transform=d,this.textLayer){const t=this.textLayer.viewport,r=this.viewport.rotation-t.rotation,o=Math.abs(r);let a=i/t.width;90!==o&&270!==o||(a=i/t.height);const l=this.textLayer.textLayerDiv;let c,u;switch(o){case 0:c=u=0;break;case 90:c=0,u="-"+l.style.height;break;case 180:c="-"+l.style.width,u="-"+l.style.height;break;case 270:c="-"+l.style.width,u=0;break;default:console.error("Bad rotation value.")}l.style.transform="rotate("+o+"deg) scale("+a+", "+a+") translate("+c+", "+u+")",l.style.transformOrigin="0% 0%"}r&&this.annotationLayer&&this._renderAnnotationLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(t,r){return this.viewport.convertToPdfPoint(t,r)}draw(){this.renderingState!==l.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:t,pdfPage:r}=this;if(!r)return this.renderingState=l.RenderingStates.FINISHED,this.loadingIconDiv&&(t.removeChild(this.loadingIconDiv),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=l.RenderingStates.RUNNING;const i=document.createElement("div");i.style.width=t.style.width,i.style.height=t.style.height,i.classList.add("canvasWrapper"),this.annotationLayer&&this.annotationLayer.div?t.insertBefore(i,this.annotationLayer.div):t.appendChild(i);let c=null;if(this.textLayerMode!==o.TextLayerMode.DISABLE&&this.textLayerFactory){const r=document.createElement("div");r.className="textLayer",r.style.width=i.style.width,r.style.height=i.style.height,this.annotationLayer&&this.annotationLayer.div?t.insertBefore(r,this.annotationLayer.div):t.appendChild(r),c=this.textLayerFactory.createTextLayerBuilder(r,this.id-1,this.viewport,this.textLayerMode===o.TextLayerMode.ENABLE_ENHANCE,this.eventBus)}this.textLayer=c;let u=null;this.renderingQueue&&(u=t=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=l.RenderingStates.PAUSED,void(this.resume=()=>{this.renderingState=l.RenderingStates.RUNNING,t()});t()});const finishPaintTask=async i=>{if(h===this.paintTask&&(this.paintTask=null),i instanceof a.RenderingCancelledException)this.error=null;else if(this.renderingState=l.RenderingStates.FINISHED,this.loadingIconDiv&&(t.removeChild(this.loadingIconDiv),delete this.loadingIconDiv),this._resetZoomLayer(!0),this.error=i,this.stats=r.stats,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now()}),i)throw i},h=this.renderer===o.RendererType.SVG?this.paintOnSvg(i):this.paintOnCanvas(i);h.onRenderContinue=u,this.paintTask=h;const d=h.promise.then((function(){return finishPaintTask(null).then((function(){if(c){const t=r.streamTextContent({normalizeWhitespace:!0});c.setTextContentStream(t),c.render()}}))}),(function(t){return finishPaintTask(t)}));return this.annotationLayerFactory&&(this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder(t,r,this._annotationStorage,this.imageResourcesPath,this.renderInteractiveForms,this.l10n)),this._renderAnnotationLayer()),t.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),d}paintOnCanvas(t){const r=(0,a.createPromiseCapability)(),i={promise:r.promise,onRenderContinue(t){t()},cancel(){y.cancel()}},l=this.viewport,c=document.createElement("canvas");this.l10n.get("page_canvas",{page:this.id},"Page {{page}}").then((t=>{c.setAttribute("aria-label",t)})),c.setAttribute("hidden","hidden");let u=!0;const showCanvas=function(){u&&(c.removeAttribute("hidden"),u=!1)};t.appendChild(c),this.canvas=c,c.mozOpaque=!0;const h=c.getContext("2d",{alpha:!1}),d=(0,o.getOutputScale)(h);if(this.outputScale=d,this.useOnlyCssZoom){const t=l.clone({scale:o.CSS_UNITS});d.sx*=t.width/l.width,d.sy*=t.height/l.height,d.scaled=!0}if(this.maxCanvasPixels>0){const t=l.width*l.height,r=Math.sqrt(this.maxCanvasPixels/t);d.sx>r||d.sy>r?(d.sx=r,d.sy=r,d.scaled=!0,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const p=(0,o.approximateFraction)(d.sx),g=(0,o.approximateFraction)(d.sy);c.width=(0,o.roundToDivide)(l.width*d.sx,p[0]),c.height=(0,o.roundToDivide)(l.height*d.sy,g[0]),c.style.width=(0,o.roundToDivide)(l.width,p[1])+"px",c.style.height=(0,o.roundToDivide)(l.height,g[1])+"px",this.paintedViewportMap.set(c,l);const v={canvasContext:h,transform:d.scaled?[d.sx,0,0,d.sy,0,0]:null,viewport:this.viewport,enableWebGL:this.enableWebGL,renderInteractiveForms:this.renderInteractiveForms,optionalContentConfigPromise:this._optionalContentConfigPromise},y=this.pdfPage.render(v);return y.onContinue=function(t){showCanvas(),i.onRenderContinue?i.onRenderContinue(t):t()},y.promise.then((function(){showCanvas(),r.resolve(void 0)}),(function(t){showCanvas(),r.reject(t)})),i}paintOnSvg(t){let r=!1;const ensureNotCancelled=()=>{if(r)throw new a.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},i=this.pdfPage,c=this.viewport.clone({scale:o.CSS_UNITS});return{promise:i.getOperatorList().then((r=>{ensureNotCancelled();return new a.SVGGraphics(i.commonObjs,i.objs).getSVG(r,c).then((r=>{ensureNotCancelled(),this.svg=r,this.paintedViewportMap.set(r,c),r.style.width=t.style.width,r.style.height=t.style.height,this.renderingState=l.RenderingStates.FINISHED,t.appendChild(r)}))})),onRenderContinue(t){t()},cancel(){r=!0}}}setPageLabel(t){this.pageLabel="string"==typeof t?t:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}}},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PDFRenderingQueue=r.RenderingStates=void 0;const o={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};r.RenderingStates=o;r.PDFRenderingQueue=class PDFRenderingQueue{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(t){this.pdfViewer=t}setThumbnailViewer(t){this.pdfThumbnailViewer=t}isHighestPriority(t){return this.highestPriorityPage===t.renderingId}renderHighestPriority(t){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.pdfViewer.forceRendering(t)||this.pdfThumbnailViewer&&this.isThumbnailViewEnabled&&this.pdfThumbnailViewer.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4))}getHighestPriority(t,r,i){const o=t.views,a=o.length;if(0===a)return null;for(let t=0;t<a;++t){const r=o[t].view;if(!this.isViewFinished(r))return r}if(i){const i=t.last.id;if(r[i]&&!this.isViewFinished(r[i]))return r[i]}else{const i=t.first.id-2;if(r[i]&&!this.isViewFinished(r[i]))return r[i]}return null}isViewFinished(t){return t.renderingState===o.FINISHED}renderView(t){switch(t.renderingState){case o.FINISHED:return!1;case o.PAUSED:this.highestPriorityPage=t.renderingId,t.resume();break;case o.RUNNING:this.highestPriorityPage=t.renderingId;break;case o.INITIAL:this.highestPriorityPage=t.renderingId,t.draw().finally((()=>{this.renderHighestPriority()})).catch((t=>{console.error(`renderView: "${t}"`)}))}return!0}}},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PDFSinglePageViewer=void 0;var o=i(16),a=i(2);class PDFSinglePageViewer extends o.BaseViewer{constructor(t){super(t),this.eventBus._on("pagesinit",(t=>{this._ensurePageViewVisible()}))}get _viewerElement(){return(0,a.shadow)(this,"_viewerElement",this._shadowViewer)}_resetView(){super._resetView(),this._previousPageNumber=1,this._shadowViewer=document.createDocumentFragment(),this._updateScrollDown=null}_ensurePageViewVisible(){const t=this._pages[this._currentPageNumber-1],r=this._pages[this._previousPageNumber-1],i=this.viewer.childNodes;switch(i.length){case 0:this.viewer.appendChild(t.div);break;case 1:if(i[0]!==r.div)throw new Error("_ensurePageViewVisible: Unexpected previously visible page.");if(t===r)break;this._shadowViewer.appendChild(r.div),this.viewer.appendChild(t.div),this.container.scrollTop=0;break;default:throw new Error("_ensurePageViewVisible: Only one page should be visible at a time.")}this._previousPageNumber=this._currentPageNumber}_scrollUpdate(){this._updateScrollDown&&this._updateScrollDown(),super._scrollUpdate()}_scrollIntoView({pageDiv:t,pageSpot:r=null,pageNumber:i=null}){i&&this._setCurrentPageNumber(i);const o=this._currentPageNumber>=this._previousPageNumber;this._ensurePageViewVisible(),this.update(),super._scrollIntoView({pageDiv:t,pageSpot:r,pageNumber:i}),this._updateScrollDown=()=>{this.scroll.down=o,this._updateScrollDown=null}}_getVisiblePages(){return this._getCurrentVisiblePage()}_updateHelper(t){}get _isScrollModeHorizontal(){return(0,a.shadow)(this,"_isScrollModeHorizontal",!1)}_updateScrollMode(){}_updateSpreadMode(){}}r.PDFSinglePageViewer=PDFSinglePageViewer},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BaseViewer=void 0;var o=i(3),a=i(14),l=i(1),c=i(2),u=i(13),h=i(4),d=i(5);function PDFPageViewBuffer(t){const r=[];this.push=function(i){const o=r.indexOf(i);o>=0&&r.splice(o,1),r.push(i),r.length>t&&r.shift().destroy()},this.resize=function(i,a){if(t=i,a){const t=new Set;for(let r=0,i=a.length;r<i;++r)t.add(a[r].id);(0,o.moveToEndOfArray)(r,(function(r){return t.has(r.id)}))}for(;r.length>t;)r.shift().destroy()}}class BaseViewer{constructor(t){if(this.constructor===BaseViewer)throw new Error("Cannot initialize BaseViewer.");if(this._name=this.constructor.name,this.container=t.container,this.viewer=t.viewer||t.container.firstElementChild,!(this.container instanceof HTMLDivElement&&this.viewer instanceof HTMLDivElement))throw new Error("Invalid `container` and/or `viewer` option.");this.eventBus=t.eventBus,this.linkService=t.linkService||new h.SimpleLinkService,this.downloadManager=t.downloadManager||null,this.findController=t.findController||null,this.removePageBorders=t.removePageBorders||!1,this.textLayerMode=Number.isInteger(t.textLayerMode)?t.textLayerMode:o.TextLayerMode.ENABLE,this.imageResourcesPath=t.imageResourcesPath||"",this.renderInteractiveForms="boolean"!=typeof t.renderInteractiveForms||t.renderInteractiveForms,this.enablePrintAutoRotate=t.enablePrintAutoRotate||!1,this.renderer=t.renderer||o.RendererType.CANVAS,this.enableWebGL=t.enableWebGL||!1,this.useOnlyCssZoom=t.useOnlyCssZoom||!1,this.maxCanvasPixels=t.maxCanvasPixels,this.l10n=t.l10n||o.NullL10n,this.defaultRenderingQueue=!t.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new a.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=t.renderingQueue,this.scroll=(0,o.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=o.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),Promise.resolve().then((()=>{this.eventBus.dispatch("baseviewerinit",{source:this})}))}get pagesCount(){return this._pages.length}getPageView(t){return this._pages[t]}get pageViewsReady(){return!!this._pagesCapability.settled&&this._pages.every((function(t){return t&&t.pdfPage}))}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(t){if(!Number.isInteger(t))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(t,!0)||console.error(`${this._name}.currentPageNumber: "${t}" is not a valid page.`))}_setCurrentPageNumber(t,r=!1){return this._currentPageNumber===t?(r&&this._resetCurrentPageView(),!0):0<t&&t<=this.pagesCount&&(this._currentPageNumber=t,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:t,pageLabel:this._pageLabels&&this._pageLabels[t-1]}),r&&this._resetCurrentPageView(),!0)}get currentPageLabel(){return this._pageLabels&&this._pageLabels[this._currentPageNumber-1]}set currentPageLabel(t){if(!this.pdfDocument)return;let r=0|t;if(this._pageLabels){const i=this._pageLabels.indexOf(t);i>=0&&(r=i+1)}this._setCurrentPageNumber(r,!0)||console.error(`${this._name}.currentPageLabel: "${t}" is not a valid page.`)}get currentScale(){return this._currentScale!==o.UNKNOWN_SCALE?this._currentScale:o.DEFAULT_SCALE}set currentScale(t){if(isNaN(t))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(t,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(t){this.pdfDocument&&this._setScale(t,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(t){if(!(0,o.isValidRotation)(t))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument)return;if(this._pagesRotation===t)return;this._pagesRotation=t;const r=this._currentPageNumber;for(let r=0,i=this._pages.length;r<i;r++){const i=this._pages[r];i.update(i.scale,t)}this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:t,pageNumber:r}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}get _viewerElement(){throw new Error("Not implemented: _viewerElement")}_onePageRenderedOrForceFetch(){return this.container.offsetParent&&0!==this._getVisiblePages().views.length?this._onePageRenderedCapability.promise:Promise.resolve()}setDocument(t){if(this.pdfDocument&&(this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null)),this.pdfDocument=t,!t)return;const r=t.numPages,i=t.getPage(1),a=t.annotationStorage,l=t.getOptionalContentConfig();this._pagesCapability.promise.then((()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:r})})),this._onBeforeDraw=t=>{const r=this._pages[t.pageNumber-1];r&&this._buffer.push(r)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=t=>{t.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve(),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null)},this.eventBus._on("pagerendered",this._onAfterDraw),i.then((i=>{this._firstPageCapability.resolve(i),this._optionalContentConfigPromise=l;const c=this.currentScale,h=i.getViewport({scale:c*o.CSS_UNITS}),d=this.textLayerMode!==o.TextLayerMode.DISABLE?this:null;for(let t=1;t<=r;++t){const r=new u.PDFPageView({container:this._viewerElement,eventBus:this.eventBus,id:t,scale:c,defaultViewport:h.clone(),annotationStorage:a,optionalContentConfigPromise:l,renderingQueue:this.renderingQueue,textLayerFactory:d,textLayerMode:this.textLayerMode,annotationLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderInteractiveForms:this.renderInteractiveForms,renderer:this.renderer,enableWebGL:this.enableWebGL,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,l10n:this.l10n});this._pages.push(r)}const p=this._pages[0];p&&(p.setPdfPage(i),this.linkService.cachePageRef(1,i.ref)),this._spreadMode!==o.SpreadMode.NONE&&this._updateSpreadMode(),this._onePageRenderedOrForceFetch().then((()=>{if(this.findController&&this.findController.setDocument(t),t.loadingParams.disableAutoFetch||r>7500)return void this._pagesCapability.resolve();let i=r-1;if(i<=0)this._pagesCapability.resolve();else for(let o=2;o<=r;++o)t.getPage(o).then((t=>{const r=this._pages[o-1];r.pdfPage||r.setPdfPage(t),this.linkService.cachePageRef(o,t.ref),0==--i&&this._pagesCapability.resolve()}),(t=>{console.error(`Unable to get page ${o} to initialize viewer`,t),0==--i&&this._pagesCapability.resolve()}))})),this.eventBus.dispatch("pagesinit",{source:this}),this.defaultRenderingQueue&&this.update()})).catch((t=>{console.error("Unable to initialize viewer",t)}))}setPageLabels(t){if(this.pdfDocument){t?Array.isArray(t)&&this.pdfDocument.numPages===t.length?this._pageLabels=t:(this._pageLabels=null,console.error(`${this._name}.setPageLabels: Invalid page labels.`)):this._pageLabels=null;for(let t=0,r=this._pages.length;t<r;t++){const r=this._pages[t],i=this._pageLabels&&this._pageLabels[t];r.setPageLabel(i)}}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=o.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,this._buffer=new PDFPageViewBuffer(10),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._pagesRequests=new WeakMap,this._firstPageCapability=(0,c.createPromiseCapability)(),this._onePageRenderedCapability=(0,c.createPromiseCapability)(),this._pagesCapability=(0,c.createPromiseCapability)(),this._scrollMode=o.ScrollMode.VERTICAL,this._spreadMode=o.SpreadMode.NONE,this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),this.viewer.textContent="",this._updateScrollMode()}_scrollUpdate(){0!==this.pagesCount&&this.update()}_scrollIntoView({pageDiv:t,pageSpot:r=null,pageNumber:i=null}){(0,o.scrollIntoView)(t,r)}_setScaleUpdatePages(t,r,i=!1,o=!1){if(this._currentScaleValue=r.toString(),function isSameScale(t,r){return r===t||Math.abs(r-t)<1e-15}(this._currentScale,t))o&&this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:r});else{for(let r=0,i=this._pages.length;r<i;r++)this._pages[r].update(t);if(this._currentScale=t,!i){let t,r=this._currentPageNumber;!this._location||this.isInPresentationMode||this.isChangingPresentationMode||(r=this._location.pageNumber,t=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:r,destArray:t,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:o?r:void 0}),this.defaultRenderingQueue&&this.update()}}_setScale(t,r=!1){let i=parseFloat(t);if(i>0)this._setScaleUpdatePages(i,t,r,!1);else{const a=this._pages[this._currentPageNumber-1];if(!a)return;const l=this.isInPresentationMode||this.removePageBorders;let c=l?0:o.SCROLLBAR_PADDING,u=l?0:o.VERTICAL_PADDING;!l&&this._isScrollModeHorizontal&&([c,u]=[u,c]);const h=(this.container.clientWidth-c)/a.width*a.scale,d=(this.container.clientHeight-u)/a.height*a.scale;switch(t){case"page-actual":i=1;break;case"page-width":i=h;break;case"page-height":i=d;break;case"page-fit":i=Math.min(h,d);break;case"auto":const r=(0,o.isPortraitOrientation)(a)?h:Math.min(d,h);i=Math.min(o.MAX_AUTO_SCALE,r);break;default:return void console.error(`${this._name}._setScale: "${t}" is an unknown zoom value.`)}this._setScaleUpdatePages(i,t,r,!0)}}_resetCurrentPageView(){this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0);const t=this._pages[this._currentPageNumber-1];this._scrollIntoView({pageDiv:t.div})}scrollPageIntoView({pageNumber:t,destArray:r=null,allowNegativeOffset:i=!1,ignoreDestinationZoom:a=!1}){if(!this.pdfDocument)return;const l=Number.isInteger(t)&&this._pages[t-1];if(!l)return void console.error(`${this._name}.scrollPageIntoView: "${t}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!r)return void this._setCurrentPageNumber(t,!0);let c,u,h=0,d=0,p=0,g=0;const v=l.rotation%180!=0,y=(v?l.height:l.width)/l.scale/o.CSS_UNITS,_=(v?l.width:l.height)/l.scale/o.CSS_UNITS;let m=0;switch(r[1].name){case"XYZ":h=r[2],d=r[3],m=r[4],h=null!==h?h:0,d=null!==d?d:_;break;case"Fit":case"FitB":m="page-fit";break;case"FitH":case"FitBH":d=r[2],m="page-width",null===d&&this._location&&(h=this._location.left,d=this._location.top);break;case"FitV":case"FitBV":h=r[2],p=y,g=_,m="page-height";break;case"FitR":h=r[2],d=r[3],p=r[4]-h,g=r[5]-d;const t=this.removePageBorders?0:o.SCROLLBAR_PADDING,i=this.removePageBorders?0:o.VERTICAL_PADDING;c=(this.container.clientWidth-t)/p/o.CSS_UNITS,u=(this.container.clientHeight-i)/g/o.CSS_UNITS,m=Math.min(Math.abs(c),Math.abs(u));break;default:return void console.error(`${this._name}.scrollPageIntoView: "${r[1].name}" is not a valid destination type.`)}if(a||(m&&m!==this._currentScale?this.currentScaleValue=m:this._currentScale===o.UNKNOWN_SCALE&&(this.currentScaleValue=o.DEFAULT_SCALE_VALUE)),"page-fit"===m&&!r[4])return void this._scrollIntoView({pageDiv:l.div,pageNumber:t});const b=[l.viewport.convertToViewportPoint(h,d),l.viewport.convertToViewportPoint(h+p,d+g)];let A=Math.min(b[0][0],b[1][0]),S=Math.min(b[0][1],b[1][1]);i||(A=Math.max(A,0),S=Math.max(S,0)),this._scrollIntoView({pageDiv:l.div,pageSpot:{left:A,top:S},pageNumber:t})}_updateLocation(t){const r=this._currentScale,i=this._currentScaleValue,o=parseFloat(i)===r?Math.round(1e4*r)/100:i,a=t.id;let l="#page="+a;l+="&zoom="+o;const c=this._pages[a-1],u=this.container,h=c.getPagePoint(u.scrollLeft-t.x,u.scrollTop-t.y),d=Math.round(h[0]),p=Math.round(h[1]);l+=","+d+","+p,this._location={pageNumber:a,scale:o,top:p,left:d,rotation:this._pagesRotation,pdfOpenParams:l}}_updateHelper(t){throw new Error("Not implemented: _updateHelper")}update(){const t=this._getVisiblePages(),r=t.views,i=r.length;if(0===i)return;const o=Math.max(10,2*i+1);this._buffer.resize(o,r),this.renderingQueue.renderHighestPriority(t),this._updateHelper(r),this._updateLocation(t.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(t){return this.container.contains(t)}focus(){this.container.focus()}get _isScrollModeHorizontal(){return!this.isInPresentationMode&&this._scrollMode===o.ScrollMode.HORIZONTAL}get isInPresentationMode(){return this.presentationModeState===o.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===o.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getCurrentVisiblePage(){if(!this.pagesCount)return{views:[]};const t=this._pages[this._currentPageNumber-1],r=t.div,i={id:t.id,x:r.offsetLeft+r.clientLeft,y:r.offsetTop+r.clientTop,view:t};return{first:i,last:i,views:[i]}}_getVisiblePages(){return(0,o.getVisibleElements)(this.container,this._pages,!0,this._isScrollModeHorizontal)}isPageVisible(t){return!!this.pdfDocument&&(t<1||t>this.pagesCount?(console.error(`${this._name}.isPageVisible: "${t}" is out of bounds.`),!1):this._getVisiblePages().views.some((function(r){return r.id===t})))}cleanup(){for(let t=0,r=this._pages.length;t<r;t++)this._pages[t]&&this._pages[t].renderingState!==a.RenderingStates.FINISHED&&this._pages[t].reset()}_cancelRendering(){for(let t=0,r=this._pages.length;t<r;t++)this._pages[t]&&this._pages[t].cancelRendering()}_ensurePdfPageLoaded(t){if(t.pdfPage)return Promise.resolve(t.pdfPage);if(this._pagesRequests.has(t))return this._pagesRequests.get(t);const r=this.pdfDocument.getPage(t.id).then((r=>(t.pdfPage||t.setPdfPage(r),this._pagesRequests.delete(t),r))).catch((r=>{console.error("Unable to get page for page view",r),this._pagesRequests.delete(t)}));return this._pagesRequests.set(t,r),r}forceRendering(t){const r=t||this._getVisiblePages(),i=this._isScrollModeHorizontal?this.scroll.right:this.scroll.down,o=this.renderingQueue.getHighestPriority(r,this._pages,i);return!!o&&(this._ensurePdfPageLoaded(o).then((()=>{this.renderingQueue.renderView(o)})),!0)}createTextLayerBuilder(t,r,i,o=!1,a){return new d.TextLayerBuilder({textLayerDiv:t,eventBus:a,pageIndex:r,viewport:i,findController:this.isInPresentationMode?null:this.findController,enhanceTextSelection:!this.isInPresentationMode&&o})}createAnnotationLayerBuilder(t,r,i=null,a="",c=!1,u=o.NullL10n){return new l.AnnotationLayerBuilder({pageDiv:t,pdfPage:r,annotationStorage:i,imageResourcesPath:a,renderInteractiveForms:c,linkService:this.linkService,downloadManager:this.downloadManager,l10n:u})}get hasEqualPageSizes(){const t=this._pages[0];for(let r=1,i=this._pages.length;r<i;++r){const i=this._pages[r];if(i.width!==t.width||i.height!==t.height)return!1}return!0}getPagesOverview(){const t=this._pages.map((function(t){const r=t.pdfPage.getViewport({scale:1});return{width:r.width,height:r.height,rotation:r.rotation}}));return this.enablePrintAutoRotate?t.map((function(t){return(0,o.isPortraitOrientation)(t)?t:{width:t.height,height:t.width,rotation:(t.rotation+90)%360}})):t}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:this.pdfDocument.getOptionalContentConfig():Promise.resolve(null)}set optionalContentConfigPromise(t){if(!(t instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${t}`);if(this.pdfDocument&&this._optionalContentConfigPromise){this._optionalContentConfigPromise=t;for(const r of this._pages)r.update(r.scale,r.rotation,t);this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:t})}}get scrollMode(){return this._scrollMode}set scrollMode(t){if(this._scrollMode!==t){if(!(0,o.isValidScrollMode)(t))throw new Error(`Invalid scroll mode: ${t}`);this._scrollMode=t,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:t}),this._updateScrollMode(this._currentPageNumber)}}_updateScrollMode(t=null){const r=this._scrollMode,i=this.viewer;i.classList.toggle("scrollHorizontal",r===o.ScrollMode.HORIZONTAL),i.classList.toggle("scrollWrapped",r===o.ScrollMode.WRAPPED),this.pdfDocument&&t&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(t,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(t){if(this._spreadMode!==t){if(!(0,o.isValidSpreadMode)(t))throw new Error(`Invalid spread mode: ${t}`);this._spreadMode=t,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:t}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(t=null){if(!this.pdfDocument)return;const r=this.viewer,i=this._pages;if(r.textContent="",this._spreadMode===o.SpreadMode.NONE)for(let t=0,o=i.length;t<o;++t)r.appendChild(i[t].div);else{const t=this._spreadMode-1;let o=null;for(let a=0,l=i.length;a<l;++a)null===o?(o=document.createElement("div"),o.className="spread",r.appendChild(o)):a%2===t&&(o=o.cloneNode(!1),r.appendChild(o)),o.appendChild(i[a].div)}t&&(this._setCurrentPageNumber(t,!0),this.update())}}r.BaseViewer=BaseViewer},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PDFViewer=void 0;var o=i(16),a=i(2);class PDFViewer extends o.BaseViewer{get _viewerElement(){return(0,a.shadow)(this,"_viewerElement",this.viewer)}_scrollIntoView({pageDiv:t,pageSpot:r=null,pageNumber:i=null}){if(!r&&!this.isInPresentationMode){const i=t.offsetLeft+t.clientLeft,o=i+t.clientWidth,{scrollLeft:a,clientWidth:l}=this.container;(this._isScrollModeHorizontal||i<a||o>a+l)&&(r={left:0,top:0})}super._scrollIntoView({pageDiv:t,pageSpot:r,pageNumber:i})}_getVisiblePages(){return this.isInPresentationMode?this._getCurrentVisiblePage():super._getVisiblePages()}_updateHelper(t){if(this.isInPresentationMode)return;let r=this._currentPageNumber,i=!1;for(const o of t){if(o.percent<100)break;if(o.id===r){i=!0;break}}i||(r=t[0].id),this._setCurrentPageNumber(r)}}r.PDFViewer=PDFViewer}])}))},666:t=>{var r=function(t){"use strict";var r,i=Object.prototype,o=i.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var a=r&&r.prototype instanceof Generator?r:Generator,l=Object.create(a.prototype),c=new Context(o||[]);return l._invoke=function makeInvokeMethod(t,r,i){var o=h;return function invoke(a,l){if(o===p)throw new Error("Generator is already running");if(o===g){if("throw"===a)throw l;return doneResult()}for(i.method=a,i.arg=l;;){var c=i.delegate;if(c){var u=maybeInvokeDelegate(c,i);if(u){if(u===v)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(o===h)throw o=g,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o=p;var y=tryCatch(t,r,i);if("normal"===y.type){if(o=i.done?g:d,y.arg===v)continue;return{value:y.arg,done:i.done}}"throw"===y.type&&(o=g,i.method="throw",i.arg=y.arg)}}}(t,i,c),l}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var h="suspendedStart",d="suspendedYield",p="executing",g="completed",v={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var y={};y[l]=function(){return this};var _=Object.getPrototypeOf,m=_&&_(_(values([])));m&&m!==i&&o.call(m,l)&&(y=m);var b=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(y);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(i,a,l,c){var u=tryCatch(t[i],t,a);if("throw"!==u.type){var h=u.arg,d=h.value;return d&&"object"==typeof d&&o.call(d,"__await")?r.resolve(d.__await).then((function(t){invoke("next",t,l,c)}),(function(t){invoke("throw",t,l,c)})):r.resolve(d).then((function(t){h.value=t,l(h)}),(function(t){return invoke("throw",t,l,c)}))}c(u.arg)}var i;this._invoke=function enqueue(t,o){function callInvokeWithMethodAndArg(){return new r((function(r,i){invoke(t,o,r,i)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,i){var o=t.iterator[i.method];if(o===r){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=r,maybeInvokeDelegate(t,i),"throw"===i.method))return v;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var a=tryCatch(o,t.iterator,i.arg);if("throw"===a.type)return i.method="throw",i.arg=a.arg,i.delegate=null,v;var l=a.arg;return l?l.done?(i[t.resultName]=l.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=r),i.delegate=null,v):l:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,v)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var i=t[l];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,c=function next(){for(;++a<t.length;)if(o.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=r,next.done=!0,next};return c.next=c}}return{next:doneResult}}function doneResult(){return{value:r,done:!0}}return GeneratorFunction.prototype=b.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[c]=function(){return this},t.AsyncIterator=AsyncIterator,t.async=function(r,i,o,a,l){void 0===l&&(l=Promise);var c=new AsyncIterator(wrap(r,i,o,a),l);return t.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(b),define(b,u,"Generator"),b[l]=function(){return this},b.toString=function(){return"[object Generator]"},t.keys=function(t){var r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var i=r.pop();if(i in t)return next.value=i,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(resetTryEntry),!t)for(var i in this)"t"===i.charAt(0)&&o.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function handle(o,a){return c.type="throw",c.arg=t,i.next=o,a&&(i.method="next",i.arg=r),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],c=l.completion;if("root"===l.tryLoc)return handle("end");if(l.tryLoc<=this.prev){var u=o.call(l,"catchLoc"),h=o.call(l,"finallyLoc");if(u&&h){if(this.prev<l.catchLoc)return handle(l.catchLoc,!0);if(this.prev<l.finallyLoc)return handle(l.finallyLoc)}else if(u){if(this.prev<l.catchLoc)return handle(l.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return handle(l.finallyLoc)}}}},abrupt:function(t,r){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc<=this.prev&&o.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var l=a;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=t,c.arg=r,l?(this.method="next",this.next=l.finallyLoc,v):this.complete(c)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),v},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),v}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var o=i.completion;if("throw"===o.type){var a=o.arg;resetTryEntry(i)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,o){return this.delegate={iterator:values(t),resultName:i,nextLoc:o},"next"===this.method&&(this.arg=r),v}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},379:(t,r,i)=>{"use strict";var o=function isOldIE(){var t;return function memorize(){return void 0===t&&(t=Boolean(window&&document&&document.all&&!window.atob)),t}}(),a=function getTarget(){var t={};return function memorize(r){if(void 0===t[r]){var i=document.querySelector(r);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}t[r]=i}return t[r]}}(),l=[];function getIndexByIdentifier(t){for(var r=-1,i=0;i<l.length;i++)if(l[i].identifier===t){r=i;break}return r}function modulesToDom(t,r){for(var i={},o=[],a=0;a<t.length;a++){var c=t[a],u=r.base?c[0]+r.base:c[0],h=i[u]||0,d="".concat(u," ").concat(h);i[u]=h+1;var p=getIndexByIdentifier(d),g={css:c[1],media:c[2],sourceMap:c[3]};-1!==p?(l[p].references++,l[p].updater(g)):l.push({identifier:d,updater:addStyle(g,r),references:1}),o.push(d)}return o}function insertStyleElement(t){var r=document.createElement("style"),o=t.attributes||{};if(void 0===o.nonce){var l=i.nc;l&&(o.nonce=l)}if(Object.keys(o).forEach((function(t){r.setAttribute(t,o[t])})),"function"==typeof t.insert)t.insert(r);else{var c=a(t.insert||"head");if(!c)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");c.appendChild(r)}return r}var c=function replaceText(){var t=[];return function replace(r,i){return t[r]=i,t.filter(Boolean).join("\n")}}();function applyToSingletonTag(t,r,i,o){var a=i?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(t.styleSheet)t.styleSheet.cssText=c(r,a);else{var l=document.createTextNode(a),u=t.childNodes;u[r]&&t.removeChild(u[r]),u.length?t.insertBefore(l,u[r]):t.appendChild(l)}}function applyToTag(t,r,i){var o=i.css,a=i.media,l=i.sourceMap;if(a?t.setAttribute("media",a):t.removeAttribute("media"),l&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(l))))," */")),t.styleSheet)t.styleSheet.cssText=o;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(o))}}var u=null,h=0;function addStyle(t,r){var i,o,a;if(r.singleton){var l=h++;i=u||(u=insertStyleElement(r)),o=applyToSingletonTag.bind(null,i,l,!1),a=applyToSingletonTag.bind(null,i,l,!0)}else i=insertStyleElement(r),o=applyToTag.bind(null,i,r),a=function remove(){!function removeStyleElement(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(i)};return o(t),function updateStyle(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;o(t=r)}else a()}}t.exports=function(t,r){(r=r||{}).singleton||"boolean"==typeof r.singleton||(r.singleton=o());var i=modulesToDom(t=t||[],r);return function update(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var o=0;o<i.length;o++){var a=getIndexByIdentifier(i[o]);l[a].references--}for(var c=modulesToDom(t,r),u=0;u<i.length;u++){var h=getIndexByIdentifier(i[u]);0===l[h].references&&(l[h].updater(),l.splice(h,1))}i=c}}}},264:t=>{"use strict";t.exports=".media-controls {\n\tbackground-color: rgba(60, 70, 75, 0.9);\n\tpadding: 0;\n\tmargin: 0;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n}\n\n.control-bar {\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tpadding: 0;\n\tmargin: 0;\n}\n.control-bar .time {\n\tcolor: #f2f4f4;\n\tpadding: 0 10px 0 10px;\n\tfont-size: small;\n}\n.control-bar .col {\n\tflex: 1;\n\tdisplay: flex;\n\talign-items: center;\n}\n.control-bar .nav-left {\n\tflex: 1;\n\tjustify-content: flex-start;\n}\n.control-bar .nav-center {\n\tflex: 1;\n\tjustify-content: center;\n}\n.control-bar .nav-right {\n\tflex: 1;\n\tjustify-content: flex-end;\n}\n.control-bar .icon {\n\tcolor: #f2f4f4;\n\tfont-size: 18px;\n\tcursor: pointer;\n}\n.control-bar .icon:hover {\n\tcolor: #fff;\n\tbackground-color: rgba(98, 112, 119, 0.7);\n}\n\n.control-bar .control-button {\n\tpadding: 8px;\n}\n\n.control-bar .time-slider {\n\twidth: 100%;\n}\n\n.control-bar .volume-indicator {\n\tpadding: 5px;\n}\n.control-bar .volume-slider {\n\twidth: 120px;\n}\n\n.control-bar .nav-center > div,\n.control-bar .nav-right > div {\n\tdisplay: inherit;\n\ttext-align: center;\n\tvertical-align: middle;\n\talign-items: center;\n}\n\n.play-pause {\n\tmargin: 0 15px 0 15px;\n\tpadding: 6px 0 4px 0;\n\tdisplay: flex;\n\tflex-flow: row nowrap;\n}\n.play-pause .background,\n.play-pause .foreground {\n\twidth: 100%;\n\tflex: none;\n}\n.play-pause .foreground {\n\tmargin-left: -100%;\n}\n.play-pause .icon {\n\tfont-size: 24px;\n\tpadding: 6px;\n}\n\n.media-controls .playback-rate {\n\tposition: relative;\n\tdisplay: inline-block;\n}\n.media-controls .rate-button {\n\tborder: none;\n\tcursor: pointer;\n\tpadding: 8px;\n}\n.media-controls .rate-content {\n\tdisplay: none;\n\tfont-size: 80%;\n\tfont-weight: bold;\n\tbottom: 100%;\n\tright: 0;\n\tpadding: 10px 0;\n\ttext-align: left;\n\tposition: absolute;\n\tbackground-color: hsl(0, 0%, 20%);\n\tcolor: #eee;\n\tmin-width: 300px;\n\tbox-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n\tz-index: 1;\n}\n.media-controls .playback-rate:hover .rate-content {\n\tdisplay: block;\n}\n.media-controls .playback-rate .rate-label {\n\tpadding: 10px;\n}\n\n.rate-steps {\n\tpadding: 10px 0 0 0;\n\tmargin: 0;\n}\n.rate-steps li {\n\tlist-style-type: none;\n\tfloat: left;\n\twidth: 20%;\n\tposition: relative;\n\ttext-align: center;\n\tcursor: pointer;\n}\n.rate-steps li:before {\n\tbackground-color: white;\n\tcontent: '';\n\twidth: 10px;\n\theight: 10px;\n\tline-height: 10px;\n\tborder: 1px solid #ddd;\n\tborder-radius: 50%;\n\tdisplay: block;\n\ttext-align: center;\n\tmargin: 0 auto 10px auto;\n}\n.rate-steps li:after {\n\tbackground-color: #ddd;\n\tcontent: '';\n\tposition: absolute;\n\twidth: 100%;\n\theight: 1px;\n\ttop: 5px;\n\tleft: -50%;\n\tz-index: -1;\n}\n.rate-steps li:first-child:after {\n\tcontent: none;\n}\n.rate-steps li:hover:before {\n\tbackground-color: #1ABC9C;\n}\n.rate-steps li.active {\n\tcolor: #1ABC9C;\n\tfont-weight: bold;\n}\n.rate-steps li.active:before {\n\tbackground-color: #1ABC9C;\n\tborder-color: #1ABC9C;\n}\n\nweb-media-controls[visible] {\n\tanimation: show-media-controls 0.15s forwards;\n}\nweb-media-controls:not([visible]) {\n\tanimation: hide-media-controls 0.15s forwards;\n}\n\n@keyframes hide-media-controls {\n\t0% { opacity: 1; visibility: inherit; }\n    100% { opacity: 0; }\n}\n\n@keyframes show-media-controls {\n    0% { opacity: 0; }\n    100% { opacity: 1; visibility: inherit; }\n}"},171:t=>{"use strict";t.exports='<div class="media-controls">\n\t<audio id="audio">\n\t\tYour browser does not support the audio element.\n\t</audio>\n\t<div class="control-bar">\n\t\t<span class="time current-time" id="currentTimeText">0:00</span>\n\t\t<web-slider class="time-slider" id="timeSlider" min="0" max="1" value="0" step="0.001" bubble progress></web-slider>\n\t\t<span class="time duration" id="durationText">0:00</span>\n\t</div>\n\t<div class="control-bar">\n\t\t<div class="col nav-left"></div>\n\t\t<div class="col nav-center">\n\t\t\t<div tooltip="Previous slide">\n\t\t\t\t<span class="icon icon-previous control-button" id="prevButton"></span>\n\t\t\t</div>\n\t\t\t<div class="play-pause">\n\t\t\t\t<div class="background">\n\t\t\t\t\t<div tooltip="Pause" class="pause-button" id="pauseButton">\n\t\t\t\t\t\t<span class="icon icon-pause"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="foreground">\n\t\t\t\t\t<div tooltip="Play" class="play-button" id="playButton">\n\t\t\t\t\t\t<span class="icon icon-play"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div tooltip="Next slide">\n\t\t\t\t<span class="icon icon-next control-button" id="nextButton"></span>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col nav-right">\n\t\t\t<div>\n\t\t\t\t<div tooltip="Mute">\n\t\t\t\t\t<span class="icon volume-indicator" id="volumeIndicator"></span>\n\t\t\t\t</div>\n\t\t\t\t<web-slider class="volume-slider" id="volumeSlider" min="0" max="100" value="100" step="1" bubble progress></web-slider>\n\t\t\t</div>\n\t\t\t<div class="playback-rate">\n\t\t\t\t<span class="icon icon-playback-rate control-button"></span>\n\t\t\t\t<div class="rate-content">\n\t\t\t\t\t<span class="rate-label">Playback Speed</span>\n\t\t\t\t\t<ul class="rate-steps">\n\t\t\t\t\t\t<li data-value="0.5">0.5x</li>\n\t\t\t\t\t\t<li data-value="0.75">0.75x</li>\n\t\t\t\t\t\t<li data-value="1" class="active">Normal</li>\n\t\t\t\t\t\t<li data-value="1.25">1.25x</li>\n\t\t\t\t\t\t<li data-value="1.5">1.5x</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div tooltip="Fullscreen">\n\t\t\t\t<span class="icon icon-expand control-button" id="fullscreenButton"></span>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},426:t=>{"use strict";t.exports="web-search {\n\tdisplay: flex;\n\tflex-direction: row;\n}\nweb-search div {\n\tdisplay: flex;\n\talign-items: center;\n}\n\nweb-search #searchResult {\n\tdisplay: flex;\n\tbackground: #535e64;\n\tfill: #f2f4f4;\n\tcolor: #f2f4f4;\n\tposition: absolute;\n\tvisibility: hidden;\n\theight: 32px;\n\tz-index: 0;\n}\nweb-search #searchResult #searchResultText {\n\tpadding: 0 10px 0 10px;\n}\nweb-search #searchResult .icon {\n\tcursor: pointer;\n\tfont-size: 22px;\n\tpadding: 0 3px 0 3px;\n}\nweb-search #searchResult .icon:hover {\n\tcolor: #ff465a;\n}\n\nweb-search #searchBox {\n\tposition: relative;\n\tz-index: 1;\n}\nweb-search #searchBox #searchField {\n\tborder: 0;\n\tfont-size: 80%;\n\tpadding: 8px;\n\tmargin: 0;\n\theight: 32px;\n\tbackground: #627077;\n\tcolor: #f2f4f4;\n\toutline: none;\n\n\t-webkit-appearance: none;\n\t-webkit-border-radius: 0;\n\t-moz-border-radius: 0;\n\tborder-radius: 0;\n}\nweb-search #searchBox #searchField {\n\tcolor: #f2f4f4;\n}\nweb-search #searchBox #searchField::placeholder {\n\tcolor: #aec0ca;\n}\nweb-search #searchBox #searchButton {\n\tbackground: #535e64;\n\tcolor: #f2f4f4;\n\tpadding: 0 8px 0 8px;\n\theight: 100%;\n}\nweb-search #searchBox #searchButton:hover {\n\tbackground: #627077;\n}\n\n.slide-in {\n    animation: slide-in 0.5s forwards;\n    -webkit-animation: slide-in 0.5s forwards;\n}\n\n.slide-out {\n    animation: slide-out 0.5s forwards;\n    -webkit-animation: slide-out 0.5s forwards;\n}\n\n@keyframes slide-out {\n\t0% { transform: translateX(-100%); visibility: inherit; }\n    100% { transform: translateX(0%); }\n}\n\n@-webkit-keyframes slide-out {\n\t0% { transform: translateX(-100%); visibility: inherit; }\n    100% { -webkit-transform: translateX(0%); }\n}\n\n@keyframes slide-in {\n    0% { transform: translateX(0%); }\n    100% { transform: translateX(-100%); visibility: inherit; }\n}\n\n@-webkit-keyframes slide-in {\n    0% { -webkit-transform: translateX(0%); }\n    100% { -webkit-transform: translateX(-100%); visibility: inherit; }\n}"},198:t=>{"use strict";t.exports='<div id="searchResult">\n\t<span class="icon icon-close-circle-outline" id="searchClearButton"></span>\n\t<span class="icon icon-arrow-dropup" id="searchBackwardButton"></span>\n\t<span class="icon icon-arrow-dropdown" id="searchForwardButton"></span>\n\t<span id="searchResultText">0 of 0</span>\n</div>\n<div id="searchBox">\n\t<input type="search" name="search" id="searchField" placeholder="Search pages...">\n\t<div class="icon icon-search" id="searchButton"></div>\n</div>'},890:t=>{"use strict";t.exports="web-select {\n\tposition: relative;\n\tdisplay: inline-block;\n\tfont-size: 90%;\n}\nweb-select > web-select-cell {\n\tbackground-color: #535e64;\n}\nweb-select:hover > web-select-cell {\n\tbackground-color: #627077;\n}\nweb-select #cellList {\n\tdisplay: none;\n\tposition: absolute;\n\tbackground-color: #f1f1f1;\n\tbox-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\n\tz-index: 1;\n}\nweb-select #cellList web-select-cell:hover {\n\tbackground-color: #ccc;\n}\nweb-select #cellList.web-select-list-show {\n\tdisplay: block;\n}\n\nweb-select-cell {\n\tcolor: black;\n\tpadding: 8px;\n\ttext-decoration: none;\n\tdisplay: flex;\n\tflex-direction: row;\n\tcursor: pointer;\n}"},588:t=>{"use strict";t.exports='<web-select-cell id="selectedCell"></web-select-cell>\n<div id="cellList">\n</div>'},574:t=>{"use strict";t.exports="web-slider {\n\tposition: relative;\n\topacity: 0.7;\n\t-webkit-transition: .2s;\n\ttransition: opacity .2s;\n\tmargin: 4px;\n\tpadding: 0;\n\theight: 15px;\n}\n\nweb-slider > .progress {\n\tpointer-events: none;\n\tposition: absolute;\n\tleft: 0;\n\theight: 3px;\n\tborder-radius: 2px;\n\tbackground-color: #1ABC9C;\n\tmargin: 0;\n\tmargin-top: 6px;\n\tz-index: 1;\n}\n\nweb-slider > .thumb {\n\tposition: absolute;\n\tpointer-events: none;\n\t-webkit-appearance: none;\n\tappearance: none;\n\twidth: 15px;\n\theight: 15px;\n\tborder: 3px solid #f2f4f4;\n\tborder-radius: 50%; \n\tbackground: #3c464b;\n\tcursor: pointer;\n\tz-index: 2;\n}\n\nweb-slider > input[type=range] {\n\tdisplay: block;\n\tposition: absolute;\n\tpointer-events: all;\n\t-webkit-appearance: none;\n\twidth: 100%;\n\theight: 15px;\n\tbackground: transparent;\n\toutline: none;\n\tmargin: 0;\n\tpadding: 0;\n\tz-index: 0;\n}\n\nweb-slider > input[type=range]::-ms-track {\n\theight: 3px;\n\tbackground: #a0a0a0;\n\tborder: transparent;\n}\n\nweb-slider > input[type=range]::-moz-range-track {\n\theight: 3px;\n\tbackground: #a0a0a0;\n\tborder: transparent;\n}\n\nweb-slider > input[type=range]::-webkit-slider-runnable-track {\n\theight: 3px;\n\tbackground: #a0a0a0;\n\tborder: transparent;\n}\n\nweb-slider > input[type=range]:focus {\n\toutline: none;\n}\n\nweb-slider > input[type=range]::-ms-thumb {\n\tbackground: transparent;\n\tborder: transparent;\n}\n\nweb-slider > input[type=range]::-moz-range-thumb {\n\tbackground: transparent;\n\tborder: transparent;\n}\n\nweb-slider > input[type=range]::-webkit-slider-thumb {\n\tpointer-events: all;\n\t-webkit-appearance: none;\n\twidth: 15px;\n\theight: 15px;\n\tborder: 0;\n\tcolor: transparent;\n\tbackground: transparent;\n}\n\nweb-slider > input[type=range]::-ms-fill-lower {\n\tbackground: transparent;\n\tborder: 0 none;\n}\n\nweb-slider > input[type=range]::-ms-fill-upper {\n\tbackground: transparent;\n\tborder: 0 none;\n}\n\nweb-slider > input[type=range]::-ms-tooltip {\n\tdisplay: none;\n}\n\nweb-slider > .bubble {\n\tdisplay: none;\n\tposition: absolute;\n\ttop: -35px;\n\tz-index: 3;\n\tbackground-color: #1ABC9C;\n\tcolor: #fff;\n\tpadding: 5px;\n\tmin-width: 24px;\n\talign-items: center;\n\t-webkit-justify-content: center;\n\tjustify-content: center;\n\ttext-align: center;\n\tfont-size: 12px;\n\tfont-weight: 700;\n\ttransform: translateX(-50%);\n}\n\nweb-slider:active,\nweb-slider:hover {\n\topacity: 1;\n}\nweb-slider:active > .bubble {\n\tdisplay: block;\n}\n\nweb-slider:active > .thumb {\n\tbackground: #f2f4f4;\n}"},729:t=>{"use strict";t.exports='<input type="range" id="slider" />'},776:t=>{"use strict";t.exports="web-snackbar {\n\ttransition: all 500ms ease;\n\ttransition-property: top, right, bottom, left, opacity;\n\tbackground-color: #070b0e;\n\tcolor: white;\n\tposition: fixed;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tline-height: 22px;\n\tpadding: 14px 20px;\n\tbottom: -100px;\n\ttop: -100px;\n\topacity: 0;\n\tz-index: 9999;\n}\n\nweb-snackbar svg {\n\tdisplay: inline-block;\n\tborder: none;\n\tborder-radius: 50%;\n\tbackground: #181818;\n\tfill: #ccc;\n\tcursor: pointer;\n\tmin-width: 30px;\n\tmin-height: 30px;\n\twidth: 30px;\n\theight: 30px;\n\tmargin-left: 14px;\n}\nweb-snackbar svg:hover {\n\tbackground: #303030;\n}\nweb-snackbar svg:active {\n\tbackground: #474747;\n}\n\nweb-snackbar.bottom-center {\n\ttop: auto !important;\n\tbottom: 0;\n\tleft: 50%;\n\ttransform: translate(-50%, 0);\n}\n\nweb-snackbar.bottom-left {\n\ttop: auto !important;\n\tbottom: 0;\n\tleft: 0;\n}\n\nweb-snackbar.bottom-right {\n\ttop: auto !important;\n\tbottom: 0;\n\tright: 0;\n}\n\nweb-snackbar.top-left {\n\tbottom: auto !important;\n\ttop: 0;\n\tleft: 0;\n}\n\nweb-snackbar.top-center {\n\tbottom: auto !important;\n\ttop: 0;\n\tleft: 50%;\n\ttransform: translate(-50%, 0);\n}\n\nweb-snackbar.top-right {\n\tbottom: auto !important;\n\ttop: 0;\n\tright: 0;\n}\n\n@media (min-width: 640px) {\n\tweb-snackbar {\n\t\tmin-width: 320px;\n\t\tmax-width: 640px;\n\t\tdisplay: inline-flex;\n\t\tborder-radius: 2px;\n\t\tmargin: 24px;\n\t}\n}\n@media (max-width: 640px) {\n\tweb-snackbar {\n\t\tleft: 0;\n\t\tright: 0;\n\t}\n\tweb-snackbar.bottom-center, web-snackbar.top-center {\n\t\tleft: 0;\n\t\ttransform: none;\n\t}\n}"},222:t=>{"use strict";t.exports='<span></span>\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\n\t<path d="M278.6 256l68.2-68.2c6.2-6.2 6.2-16.4 0-22.6-6.2-6.2-16.4-6.2-22.6 0L256 233.4l-68.2-68.2c-6.2-6.2-16.4-6.2-22.6 0-3.1 3.1-4.7 7.2-4.7 11.3 0 4.1 1.6 8.2 4.7 11.3l68.2 68.2-68.2 68.2c-3.1 3.1-4.7 7.2-4.7 11.3 0 4.1 1.6 8.2 4.7 11.3 6.2 6.2 16.4 6.2 22.6 0l68.2-68.2 68.2 68.2c6.2 6.2 16.4 6.2 22.6 0 6.2-6.2 6.2-16.4 0-22.6L278.6 256z"/>\n</svg>'},809:t=>{"use strict";t.exports="data:font/ttf;base64,AAEAAAALAIAAAwAwT1MvMg8SDCIAAAC8AAAAYGNtYXCkzqBtAAABHAAAAJxnYXNwAAAAEAAAAbgAAAAIZ2x5ZidmXZ0AAAHAAAAPbGhlYWQb4iunAAARLAAAADZoaGVhB8ID2gAAEWQAAAAkaG10eFoAB1AAABGIAAAAZGxvY2ErdjCEAAAR7AAAADRtYXhwADoAywAAEiAAAAAgbmFtZUEbxNgAABJAAAABwnBvc3QAAwAAAAAUBAAAACAAAwPpAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADvDwPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAgAAAABwAEAADAAwAAQAg6Qjs+e0W7UPtT+1s7XLtf+477w///f//AAAAAAAg6QDs+e0W7UPtT+1s7XLtf+477wz//f//AAH/4xcEExQS+BLMEsESpRKgEpQR2REJAAMAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAAbAAD/qwQAA6sAAwAHAAsADwATABcAGwAfACMAJwArAC8AMwA3ADsAPwBDAEcASwBPAFMAVwBbAF8AYwBnAGsAABMhESEhMzUjBTM1IwczNSMHMzUjFzM1IwUzNSMRMzUjETM1IxEzNSM1MzUjETM1IxUzNSMVMzUjERUzNQczNSMHMzUjBzM1IwczNSMHMzUjETM1IzUzNSMRMzUjETM1IxEzNSM1MzUjETM1IwABLf7TAaY8PAGzNTVrNTXXNjZsNTUBQTw8PDw8PDw8PDw8PDw8PDw8pzU1azU1azU1bDY2cTw8PDw8PDw8PDw8PDw8PDwDq/wAPDw8PDw8PDw8PDwDDzz88TwBpjw8Pf7TPLU8tDwC0z09PT09PT09PT09Pfx4PD08AS08/tM8AS09PDz+WzwAAAAgAAD/qwQAA6sAAwAHAAsADwAUABgAHQAiACYAKgAuADIANgA6AD4AQgBGAEsAUABUAFgAXABgAGUAaQBtAHEAdQB5AH0AgQCFAAAXMxUjITM1IwczNSMHMzUjBzM1IxUjMzUjBzM1IxU7ATUjFSEzNSMRMzUjFTM1IxEzNSMRMzUjNTM1IzUzNSMRMzUjERUzNQUzNSMVIzM1IxUhMzUjBzM1IwczNSMFMzUjBTM1IxUhMzUjETM1IxUzNSM1MzUjETM1IxEzNSMRMzUjETM1IwA8PANLPT14PDx5PT14PDx5PT3xPT15PDwC0zw8PDw8PDw8PDw8PDw8PDw8/PE8PHk9PQJbPDx5PT3xPT0B4j09/pc8PP4ePDw8PDw8PDw8PDw8PDw8PBk8PDw8PDw8PDw8PDw8PDw8AS08tDwBpT3+0zw8PLU8/PE8A0w9PT09PT09PT09PT09PT09PT388Ty1PLU8AS09/tM8AS08/tM8AAAbAAD/qwQAA6sAAwAHAAsAEAAUABgAHAAgACQAKAAsADAANAA4ADwAQABEAEkATgBSAFYAWgBeAGIAZgBqAG4AAAERIREDMzUjBzM1IwUzNSMVOwE1IxczNSMFMzUjETM1IxEzNSMRMzUjNTM1IxEzNSMVMzUjETM1IzUzNSMhIxUzJyMVMycjFTM1MyMVMzUFMzUjETM1IzUzNSM1MzUjFTM1IxEzNSMVMzUjNTM1IwQA/tO1PDxrNjb+vzU1azU1azY2/rg8PDw8PDw8PDw8PDw8PDw8PDwB6TY2bDU11jU1azU1AQw8PDw8PDw8PDw8PDw8PDw8A6v8AAQA/AA8PDw8PDw8PDw8PAGmPAEtPP3iPLU8/ls8tTwCHj20PT09PT09PT09PT38eDw9PLU8tTwBLT21PLU8AAAAAQDiAQ0DHgJJABMAABMBFjI3ATY0JyYiDwEnJiIHBhQX4gEADCQMAQANDQwkDOLiDCQMDQ0CDf8ADQ0BAAwjDQwM4uIMDA0jDAAAAAEA4gENAx4CSQATAAAJASYiBwEGFBcWMj8BFxYyNzY0JwMe/wAMJAz/AA0NDCQM4uIMJAwNDQFJAQAMDP8ADSMMDQ3h4Q0NDCMNAAAEAFUAAAOrA1UAHAA4AFQAcQAAASMiBgcOAR0BFBYzMjY9ATQ2Nz4BOwEyNjU0JiMBNTQmJy4BKwEiBhUUFjsBMhYXHgEdARQWMzI2ATMyNjc+AT0BNCYjIgYdARQGBw4BKwEiBhUUFgEVFBYXHgE7ATI2NTQmKwEiJicuAT0BNCYjIgYVAVWAGi8RERUZEhIZBgYGEAiAEhkZEgJWFBIRLxqAEhkZEoAIEAYGBhkSEhn/AIAaLxERFRkSEhkGBgYQCIASGRn9vBQSES8agBIZGRKACBAGBgYZEhIZA1UUERIuG4ARGRkRgAkQBQYHGRIRGf8AgBsvEREUGRESGQcGBRAJgBEZGf28FBIRLxqAEhkZEoAJDwYGBxkREhkBAIAaLxESFBkSERkHBgYPCYASGRkSAAQAVQAAA6sDVQAcADkAVQBxAAABFRQGBw4BKwEiBhUUFjsBMjY3PgE9ATQmIyIGFQUjIiYnLgE9ATQmIyIGHQEUFhceATsBMjY1NCYjAzU0Njc+ATsBMjY1NCYrASIGBw4BHQEUFjMyNiUzMhYXHgEdARQWMzI2PQE0JicuASsBIgYVFBYBKwcGBg8JgBIZGRKAGi8REhQZEhEZAlWACQ8GBgcZERIZFBIRLxqAEhkZEqsHBgYPCYASGRkSgBovERIUGRIRGf2rgAkPBgYHGRESGRQSES8agBIZGQMrgAkQBQYHGRIRGRQREi4bgBEZGRGrBwYFEAmAERkZEYAbLxERFBkREhn9q4AIEAYGBhkSEhkUEhEvGoASGRm8BgYGEAiAEhkZEoAaLxERFRkSEhkAAAAAAQDiAI0DHgLJACAAABMXBwYUFxYyPwEXFjI3NjQvATc2NCcmIg8BJyYiBwYUF+Li4g0NDCQM4uIMJAwNDeLiDQ0MJAzi4gwkDA0NAo3i4g0jDA0N4eENDQwjDeLiDCMNDAzi4gwMDSMMAAAAAgCAACsDdwMrACYAPwAAJSc+ATU0Jy4BJyYjIgcOAQcGFRQXHgEXFjMyNjcXHgEzMjY3NjQnJSImJy4BNTQ2Nz4BMzIWFx4BFRQGBw4BIwN31iAjGBhTODdAPzg4UxgYGBhTODg/N2Mn1AUNBgYMBQoJ/jswWCIiJCQiIlgwMFgiIiUlIiJYMGLYJ2I2Pzg4UxgYGBhTODg/QDc4UxgYJCDWBQUEBQkbCqYlIiJYMDBYISMkJCMiVzAwWCIiJQAAAwAAACsDdwMrAAcADQAZAAABMxEjJyMRMzcHIxEzFwEXBycHJzcnNxc3FwFSLi3Ak5Kukm5tkwGtiSyKiS2IiCyKiS0DK/0AwAGAUpL/AJMBE4otiYktioktiYktAAAAAwCAACsDgAMrAAMABgAJAAABMxEjIREBAREBA0BAQP1AAiD+IAFxAyv9AAMA/oABBP33AQUAAAACAED/qwOAA6sAAgAIAAABIzUBESERIREDbe0BAPzAAgACq+3+0/1ABAD+wAAAAAACAUAAKwLAAysAAwAHAAABMxEjAREjEQFAQEABgEADK/0AAwD9AAMAAAAAAAIBAP/rA4ADawACAAUAAAkBERMJAQOA/YBAAdD+MAGr/kADgPz7AUUBRQAAAwAA/6sEAAOrAFoAXQBgAAABFAcGBwYHBgczFSERMxU2NzY3Njc2NTQnJicmJyYnJicmIyIHBgcGBwYHBgcGFRQXFhcWFxYXByYnJicmJyYnJicmNTQ3Njc2NzY3Njc2MzIXFhcWFxYXFhcWDQEREzcnBAASEyIjMTE9if8AQDowLyEhExIQEB0dKSkyMjk5Pj06OTIxKSkeHRAQGBgrLDw9SBA3MjEqKSIhGBcMDRISIiEvLzk4QkFHRkJBOTkvLiIhExL/AP6AQMDAAatGQkI6OjEwIUABAJMbKis0NTw9QT05OjEyKSkdHhAQEBAeHSkpMjE6OT1LRkU5OSoqFD0PGxokIywsMjE3NjpGQkE5OS4vIiESExMSISIvLjk5QUJG3gG7/rRvbwAAAwCAACsDgAMrAAMABgAJAAA3ETMREwERJxEBgECgAiBA/o8rAwD9AAGAAYD9AHsCCf78AAYAAP/rA8ADqwAvAF8AgACQAKAAyAAAATIXFhcWFxYXFhcWFRQHBgcGBwYHBgcGIyInJicmJyYnJicmNTQ3Njc2NzY3Njc2EzI3Njc2NzY3Njc2NTQnJicmJyYnJicmIyIHBgcGBwYHBgcGFRQXFhcWFxYXFhcWExYVFAcGBwYHBiMiJyYnJicmNTQ3Njc2NzYzMhcxNxcHBzI3NjU0JyYjIgcGFRQXFiUWFxYVFAcGByc2NzY1NCcnJiMiBwYHBgcGBwYHBhUUFxYXByYnJjU0NzY3Njc2NzY3NjMyFxYXAeBCPT02NSwsHx8SERERIB8sKzY1Pj1CQj09NjUsLB8fEhERESAfLCs2NT49Qjk1NS8uJiYbGw8PDw8bGyYmLi41NTo5NTUvLiYmGxsPDw8PGxsmJi4uNTWQCgcIDQ0REhQUERINDQcIBwgNDRESFBYUty23Vw0JCgkKDQ0JCgkKAU0PCAgaGjItKBYWGpA5PigkJSAgGhoTEgsKFhYoLTIaGwwNFxcgICcnLS0xJSUkIgOrEhEfHywsNTY9PUJCPj01NiwrIB8RERERHyArLDY1PT5CQj09NjUsLB8fERL8gA8PGxsmJi4uNTU6OTU1Li8mJhsbDw8PDxsbJiYvLjU1OTo1NS4uJiYbGw8PAcoUFhQSEQ0NCAcHCA0NERIUFBESDQ0HCAq4LbhJCQoNDQkKCgkNDQoJsCIlJCVGQUExLSk0NDk+OpAaCwoTExoaICAlJSc6NTQpLTJAQEcwLS0nJyAgFxcMDQgIDwAAAAACAAAAKwGAAysABwANAAABMxEjJyMRMxMRByMRMwFSLi3Ak5Kukm5tAyv9AMABgP4tAiWS/wAAAAMAAAArAoADKwARABkAHwAAARYXFhUUBwYHJzY3NjU0JyYnJzMRIycjETM3ByMRMxcCNSQUExMTJS0bDg8ODxu1LS3Ak5Kukm5tkwJgJS4vMzQuLyQtGyMjJyYjJBv4/QDAAYBSkv8AkwAAAAQAAAArA0ADKwARACMAKwAxAAABFhcWFRQHBgcnNjc2NTQnJicHFhcWFRQHBgcnNjc2NTQnJicnMxEjJyMRMzcHIxEzFwK9PyIiIiI/LTYdHR0dNlskFBMTEyUtGw4PDg8btS0twJOSrpJubZMC6EBSUVpaUlFALTdGRk1NRkY2WiUuLzM0Li8kLRsjIycmIyQb+P0AwAGAUpL/AJMAAAAFAAD/5gQAA28AIQAzAEUATQBTAAABFhcWFxYXFhUUBwYHBgcGByc2NzY3Njc2NTQnJicmJyYnExQHBgcnNjc2NTQnJic3FhcWJRYXFhUUBwYHJzY3NjU0JyYnJzMRIycjETM3ByMRMxcDRC0jIxgYDA0MDRgXIyMtLiggHxYVCwsKCxYVIB8pKSIiPy02HR0dHTYtPyIi/vUkFBMTEyUtGw4PDg8btS0twJOSrpJubZMDby00NTk6Pj4/QD4+OTo0NS0uKC8wMzQ4Nzo5ODc0NC8vKf5pWlJRQC03RkZNTUZGNi5AUlFbJS4vMzQuLyQtGyMjJyYjJBv4/QDAAYBSkv8AkwAAAAABAAAAAQAAssE0J18PPPUACwQAAAAAANxhc6oAAAAA3GFzqgAA/6sEAAOrAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAQAAAEAAAAAAAAAAAAAAAAAAAAZBAAAAAAAAAAAAAAAAgAAAAQAAAAEAAAABAAAAAQAAOIEAADiBAAAVQQAAFUEAADiBAAAgAQAAAAEAACABAAAQAQAAUAEAAEABAAAAAQAAIAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAACgAUAB4AugF0AhICOAJeAvgDkgPIBCgEWAR0BIwEogS4BU4FaAaQBqwG4gcyB7YAAQAAABkAyQAgAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAwAAAABAAAAAAACAAcAjQABAAAAAAADAAwARQABAAAAAAAEAAwAogABAAAAAAAFAAsAJAABAAAAAAAGAAwAaQABAAAAAAAKABoAxgADAAEECQABABgADAADAAEECQACAA4AlAADAAEECQADABgAUQADAAEECQAEABgArgADAAEECQAFABYALwADAAEECQAGABgAdQADAAEECQAKADQA4HBsYXllci1pY29ucwBwAGwAYQB5AGUAcgAtAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMHBsYXllci1pY29ucwBwAGwAYQB5AGUAcgAtAGkAYwBvAG4Ac3BsYXllci1pY29ucwBwAGwAYQB5AGUAcgAtAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcnBsYXllci1pY29ucwBwAGwAYQB5AGUAcgAtAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA="},409:t=>{"use strict";t.exports=".border-layout {\n\tdisplay: flex;\n\tflex-direction: column;\n\twidth: 100%;\n\theight: 100%;\n}\n\n.border-layout-content {\n\tflex: 1;\n\tdisplay: flex;\n\tflex-direction: row;\n}\n\nheader {\n\tbackground: #3c464b;\n}\n\narticle {\n\tflex: 5;\n\tbackground: #373c41;\n}\n\nnav,\naside {\n\tbackground: #2d3237;\n}\n\nsidebar-view {\n\tdisplay: block;\n\twidth: 200px;\n\theight: 100%;\n}\n\n@media (max-width: 400px) {\n\tnav,\n\taside {\n\t\tdisplay: none;\n\t}\n}"},801:t=>{"use strict";t.exports='<div class="border-layout">\n\t<header>\n\t\t<toolbar-view id="toolbar"></toolbar-view>\n\t</header>\n\t<div class="border-layout-content">\n\t\t<nav id="sidebarLeft">\n\t\t</nav>\n\t\t<article>\n\t\t\t<player-view id="player"></player-view>\n\t\t</article>\n\t\t<aside id="sidebarRight">\n\t\t\t<sidebar-view id="sidebar"></sidebar-view>\n\t\t</aside>\n\t</div>\n</div>'},621:t=>{"use strict";t.exports=".player-view {\n\tdisplay: flex;\n\tflex-flow: row nowrap;\n\twidth: 100%;\n\theight: 100%;\n}\n.player-view slide-view,\n.player-view web-media-controls {\n\tbox-sizing: border-box;\n\twidth: 100%;\n\tflex: none;\n}\n.player-view slide-view {\n\theight: 100%;\n}\n.player-view web-media-controls {\n\talign-self: flex-end;\n\tmargin-left: -100%;\n\topacity: 0.9;\n\tz-index: 10;\n}"},940:t=>{"use strict";t.exports='<div class="player-view">\n\t<slide-view id="slideView"></slide-view>\n\t<web-media-controls id="mediaControls"></web-media-controls>\n</div>'},420:t=>{"use strict";t.exports="virtual-scroller {\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: block;\n\tposition: relative;\n\toverflow: auto;\n\tbox-sizing: border-box;\n}"},103:t=>{"use strict";t.exports='<virtual-scroller id="previewScroller"></virtual-scroller>'},290:t=>{"use strict";t.exports=":host {\n\tcursor: pointer;\n\tpadding: 0;\n\tmargin: 4px 4px 0 4px;\n}\n:host([hidden]) {\n\tdisplay: none;\n}\n:host(.selected) {\n\toutline: 3px solid #ff465a;\n}\n\n/* Edge compatibility */\nslide-preview {\n\tcursor: pointer;\n\tpadding: 0;\n\tmargin: 4px 4px 0 4px;\n}\nslide-preview.selected {\n\toutline: 3px solid #ff465a;\n}"},935:t=>{"use strict";t.exports='<canvas class="slide-canvas"></canvas>'},322:t=>{"use strict";t.exports=".slide-view {\n\twidth: 100%;\n\theight: 100%;\n\tpadding: 0;\n\tmargin: 0;\n\toverflow: hidden;\n\tposition: relative;\n\ttext-align: center;\n}\n.slide-view > canvas {\n\tposition: absolute;\n\ttransform: translate(-50%, 0);\n\tleft: 50%;\n}\n.slide-view .slide-canvas {\n\tvisibility: hidden;\n\tz-index: 0;\n}\n.slide-view .action-canvas {\n\tz-index: 1;\n}\n.slide-view .volatile-canvas {\n\tz-index: 2;\n}\n\n.text-layer {\n\tposition: absolute;\n\tleft: 0;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\toverflow: hidden;\n\topacity: 0.2;\n\tline-height: 1;\n\tmargin: 0 auto;\n\tz-index: 3;\n}\n.text-layer > span {\n\tcolor: transparent;\n\tposition: absolute;\n\twhite-space: pre;\n\tcursor: text;\n\ttransform-origin: 0% 0%;\n}\n.text-layer .highlight {\n\tmargin: -1px;\n\tpadding: 1px;\n\tbackground-color: rgba(180, 0, 170, 1);\n\tborder-radius: 4px;\n}\n.text-layer .highlight.begin {\n\tborder-radius: 4px 0 0 4px;\n}\n.text-layer .highlight.end {\n\tborder-radius: 0 4px 4px 0;\n}\n.text-layer .highlight.middle {\n\tborder-radius: 0;\n}\n.text-layer .highlight.selected {\n\tbackground-color: rgba(0, 100, 0, 1);\n}\n.text-layer ::-moz-selection {\n\tbackground: rgba(0, 0, 255, 1);\n}\n.text-layer ::selection {\n\tbackground: rgba(0, 0, 255, 1);\n}\n.text-layer .endOfContent {\n\tdisplay: block;\n\tposition: absolute;\n\tleft: 0;\n\ttop: 100%;\n\tright: 0;\n\tbottom: 0;\n\tz-index: -1;\n\tcursor: default;\n\t-webkit-user-select: none;\n\t   -moz-user-select: none;\n\t\t-ms-user-select: none;\n\t\t\tuser-select: none;\n}\n.text-layer .endOfContent.active {\n\ttop: 0;\n}\n\n.annotationLayer section {\n\tposition: absolute;\n\tz-index: 4;\n}\n.annotationLayer .linkAnnotation > a {\n\tposition: absolute;\n\tfont-size: 1em;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tcursor: pointer;\n}\n.annotationLayer .linkAnnotation > a:hover {\n\tbackground: #ff0;\n}"},547:t=>{"use strict";t.exports='<div class="slide-view">\n\t<canvas class="slide-canvas"></canvas>\n\t<canvas class="action-canvas" scale="full"></canvas>\n\t<canvas class="volatile-canvas" scale="full"></canvas>\n\t<div class="text-layer"></div>\n</div>'},803:t=>{"use strict";t.exports="start-view > .content {\n\tbackground: #373c41;\n\twidth: 100%;\n\theight: 100vh;\n\n\tbackground-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1440' height='900'%3E%3Cpath d='M678,396L1137,499L827,210Z' fill='%23454d52' stroke='%23454d52' stroke-width='1.51'/%3E%3Cpath d='M678,396L855,703L1137,499Z' fill='%23475055' stroke='%23475055' stroke-width='1.51'/%3E%3Cpath d='M827,210L311,123L678,396Z' fill='%2340474c' stroke='%2340474c' stroke-width='1.51'/%3E%3Cpath d='M1242,113L896,53L827,210Z' fill='%23424a4f' stroke='%23424a4f' stroke-width='1.51'/%3E%3Cpath d='M678,396L503,574L855,703Z' fill='%23464e53' stroke='%23464e53' stroke-width='1.51'/%3E%3Cpath d='M311,123L503,574L678,396Z' fill='%2341484e' stroke='%2341484e' stroke-width='1.51'/%3E%3Cpath d='M1137,499L1242,113L827,210Z' fill='%23454d53' stroke='%23454d53' stroke-width='1.51'/%3E%3Cpath d='M1137,499L1371,430L1242,113Z' fill='%23485156' stroke='%23485156' stroke-width='1.51'/%3E%3Cpath d='M1571,653L1371,430L1511,798Z' fill='%234e585e' stroke='%234e585e' stroke-width='1.51'/%3E%3Cpath d='M1371,430L1441,329L1242,113Z' fill='%23485157' stroke='%23485157' stroke-width='1.51'/%3E%3Cpath d='M855,703L1201,1031L1137,499Z' fill='%234d565c' stroke='%234d565c' stroke-width='1.51'/%3E%3Cpath d='M439,1105L914,982L855,703Z' fill='%234c555b' stroke='%234c555b' stroke-width='1.51'/%3E%3Cpath d='M914,982L1201,1031L855,703Z' fill='%234e585e' stroke='%234e585e' stroke-width='1.51'/%3E%3Cpath d='M1371,430L1571,653L1441,329Z' fill='%234c555b' stroke='%234c555b' stroke-width='1.51'/%3E%3Cpath d='M896,53L689,-205L827,210Z' fill='%233f464b' stroke='%233f464b' stroke-width='1.51'/%3E%3Cpath d='M1043,-320L689,-205L896,53Z' fill='%233f464b' stroke='%233f464b' stroke-width='1.51'/%3E%3Cpath d='M689,-205L311,123L827,210Z' fill='%233d4449' stroke='%233d4449' stroke-width='1.51'/%3E%3Cpath d='M1511,798L1371,430L1137,499Z' fill='%234d565c' stroke='%234d565c' stroke-width='1.51'/%3E%3Cpath d='M1201,1031L1511,798L1137,499Z' fill='%234f595f' stroke='%234f595f' stroke-width='1.51'/%3E%3Cpath d='M503,574L439,1105L855,703Z' fill='%23495257' stroke='%23495257' stroke-width='1.51'/%3E%3Cpath d='M311,123L208,570L503,574Z' fill='%2340484d' stroke='%2340484d' stroke-width='1.51'/%3E%3Cpath d='M914,982L1008,1152L1201,1031Z' fill='%234f595f' stroke='%234f595f' stroke-width='1.51'/%3E%3Cpath d='M439,1105L1008,1152L914,982Z' fill='%234c565c' stroke='%234c565c' stroke-width='1.51'/%3E%3Cpath d='M1242,113L1043,-320L896,53Z' fill='%2341484e' stroke='%2341484e' stroke-width='1.51'/%3E%3Cpath d='M1459,-172L1043,-320L1242,113Z' fill='%23434a50' stroke='%23434a50' stroke-width='1.51'/%3E%3Cpath d='M1750,-141L1459,-172L1441,329Z' fill='%23454d52' stroke='%23454d52' stroke-width='1.51'/%3E%3Cpath d='M1441,329L1459,-172L1242,113Z' fill='%23464e53' stroke='%23464e53' stroke-width='1.51'/%3E%3Cpath d='M208,570L439,1105L503,574Z' fill='%23464e54' stroke='%23464e54' stroke-width='1.51'/%3E%3Cpath d='M311,123L0,205L208,570Z' fill='%233d4348' stroke='%233d4348' stroke-width='1.51'/%3E%3Cpath d='M147,-278L125,79L311,123Z' fill='%23393e43' stroke='%23393e43' stroke-width='1.51'/%3E%3Cpath d='M1459,-172L1065,-437L1043,-320Z' fill='%23424a4f' stroke='%23424a4f' stroke-width='1.51'/%3E%3Cpath d='M1043,-320L1065,-437L689,-205Z' fill='%2340474c' stroke='%2340474c' stroke-width='1.51'/%3E%3Cpath d='M689,-205L560,-379L311,123Z' fill='%233c4247' stroke='%233c4247' stroke-width='1.51'/%3E%3Cpath d='M1065,-437L560,-379L689,-205Z' fill='%233e454a' stroke='%233e454a' stroke-width='1.51'/%3E%3Cpath d='M1571,653L1803,445L1441,329Z' fill='%234c565b' stroke='%234c565b' stroke-width='1.51'/%3E%3Cpath d='M1862,590L1803,445L1571,653Z' fill='%234d575d' stroke='%234d575d' stroke-width='1.51'/%3E%3Cpath d='M125,79L0,205L311,123Z' fill='%233b4045' stroke='%233b4045' stroke-width='1.51'/%3E%3Cpath d='M208,570L160,1089L439,1105Z' fill='%23475055' stroke='%23475055' stroke-width='1.51'/%3E%3Cpath d='M13,-117L0,205L125,79Z' fill='%23383d42' stroke='%23383d42' stroke-width='1.51'/%3E%3Cpath d='M1817,822L1571,653L1511,798Z' fill='%23505b61' stroke='%23505b61' stroke-width='1.51'/%3E%3Cpath d='M1817,822L1862,590L1571,653Z' fill='%234f5a60' stroke='%234f5a60' stroke-width='1.51'/%3E%3Cpath d='M1684,1185L1817,822L1511,798Z' fill='%23535e64' stroke='%23535e64' stroke-width='1.51'/%3E%3Cpath d='M1684,1185L1511,798L1201,1031Z' fill='%23535e64' stroke='%23535e64' stroke-width='1.51'/%3E%3Cpath d='M0,205L-80,503L208,570Z' fill='%233e4449' stroke='%233e4449' stroke-width='1.51'/%3E%3Cpath d='M445,1319L1343,1326L1008,1152Z' fill='%234e585d' stroke='%234e585d' stroke-width='1.51'/%3E%3Cpath d='M1008,1152L1343,1326L1201,1031Z' fill='%23505b61' stroke='%23505b61' stroke-width='1.51'/%3E%3Cpath d='M-109,832L160,1089L208,570Z' fill='%23454c52' stroke='%23454c52' stroke-width='1.51'/%3E%3Cpath d='M439,1105L445,1319L1008,1152Z' fill='%234b545a' stroke='%234b545a' stroke-width='1.51'/%3E%3Cpath d='M310,1328L445,1319L439,1105Z' fill='%23495157' stroke='%23495157' stroke-width='1.51'/%3E%3Cpath d='M1825,-236L1750,-141L1803,445Z' fill='%23454d53' stroke='%23454d53' stroke-width='1.51'/%3E%3Cpath d='M1803,445L1750,-141L1441,329Z' fill='%23485156' stroke='%23485156' stroke-width='1.51'/%3E%3Cpath d='M1459,-172L1691,-371L1065,-437Z' fill='%23444c52' stroke='%23444c52' stroke-width='1.51'/%3E%3Cpath d='M560,-379L147,-278L311,123Z' fill='%233a4045' stroke='%233a4045' stroke-width='1.51'/%3E%3Cpath d='M147,-278L13,-117L125,79Z' fill='%23383d42' stroke='%23383d42' stroke-width='1.51'/%3E%3Cpath d='M0,205L-483,154L-80,503Z' fill='%233b4146' stroke='%233b4146' stroke-width='1.51'/%3E%3Cpath d='M1343,1326L1684,1185L1201,1031Z' fill='%23525d63' stroke='%23525d63' stroke-width='1.51'/%3E%3Cpath d='M445,1319L310,1328L1343,1326Z' fill='%234b555b' stroke='%234b555b' stroke-width='1.51'/%3E%3Cpath d='M160,1089L310,1328L439,1105Z' fill='%23485056' stroke='%23485056' stroke-width='1.51'/%3E%3Cpath d='M160,1089L-82,1207L310,1328Z' fill='%23464e54' stroke='%23464e54' stroke-width='1.51'/%3E%3Cpath d='M-80,503L-109,832L208,570Z' fill='%2341484d' stroke='%2341484d' stroke-width='1.51'/%3E%3Cpath d='M1750,-141L1691,-371L1459,-172Z' fill='%23454d52' stroke='%23454d52' stroke-width='1.51'/%3E%3Cpath d='M1750,-141L1825,-236L1691,-371Z' fill='%23454d52' stroke='%23454d52' stroke-width='1.51'/%3E%3Cpath d='M1862,590L1825,-236L1803,445Z' fill='%23495257' stroke='%23495257' stroke-width='1.51'/%3E%3Cpath d='M-109,832L-82,1207L160,1089Z' fill='%23454d52' stroke='%23454d52' stroke-width='1.51'/%3E%3Cpath d='M1343,1326L2043,1182L1684,1185Z' fill='%23535e64' stroke='%23535e64' stroke-width='1.51'/%3E%3Cpath d='M1684,1185L2043,1182L1817,822Z' fill='%23535e64' stroke='%23535e64' stroke-width='1.51'/%3E%3Cpath d='M1817,822L2043,1182L1862,590Z' fill='%23525d63' stroke='%23525d63' stroke-width='1.51'/%3E%3Cpath d='M1862,590L2043,1182L1825,-236Z' fill='%234d565c' stroke='%234d565c' stroke-width='1.51'/%3E%3Cpath d='M147,-278L-76,-529L13,-117Z' fill='%23373c41' stroke='%23373c41' stroke-width='1.51'/%3E%3Cpath d='M-453,-26L-483,154L0,205Z' fill='%23383e43' stroke='%23383e43' stroke-width='1.51'/%3E%3Cpath d='M-537,659L-422,927L-109,832Z' fill='%23434b50' stroke='%23434b50' stroke-width='1.51'/%3E%3Cpath d='M560,-379L-76,-529L147,-278Z' fill='%23393e43' stroke='%23393e43' stroke-width='1.51'/%3E%3Cpath d='M1065,-437L-76,-529L560,-379Z' fill='%233c4247' stroke='%233c4247' stroke-width='1.51'/%3E%3Cpath d='M-453,-26L0,205L13,-117Z' fill='%23373c41' stroke='%23373c41' stroke-width='1.51'/%3E%3Cpath d='M-109,832L-422,927L-82,1207Z' fill='%23454d52' stroke='%23454d52' stroke-width='1.51'/%3E%3Cpath d='M-537,659L-109,832L-80,503Z' fill='%2341484e' stroke='%2341484e' stroke-width='1.51'/%3E%3Cpath d='M-391,-414L-453,-26L13,-117Z' fill='%23373c41' stroke='%23373c41' stroke-width='1.51'/%3E%3Cpath d='M-483,154L-537,659L-80,503Z' fill='%233d4449' stroke='%233d4449' stroke-width='1.51'/%3E%3Cpath d='M-76,-529L-391,-414L13,-117Z' fill='%23373c41' stroke='%23373c41' stroke-width='1.51'/%3E%3Cpath d='M-453,-26L-391,-414L-483,154Z' fill='%23373c41' stroke='%23373c41' stroke-width='1.51'/%3E%3Cpath d='M-537,659L-350,1408L-422,927Z' fill='%23454d52' stroke='%23454d52' stroke-width='1.51'/%3E%3Cpath d='M-422,927L-350,1408L-82,1207Z' fill='%23454d52' stroke='%23454d52' stroke-width='1.51'/%3E%3Cpath d='M-82,1207L-350,1408L310,1328Z' fill='%23454d52' stroke='%23454d52' stroke-width='1.51'/%3E%3Cpath d='M310,1328L-350,1408L1343,1326Z' fill='%23495257' stroke='%23495257' stroke-width='1.51'/%3E%3C/svg%3E\");\n\tbackground-attachment: fixed;\n\tbackground-size: cover;\n}\nstart-view .content-container {\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n\theight: 100%;\n\twidth: 100%;\n}\nstart-view .button-container {\n\tdisplay: flex;\n}\nstart-view .button-container > div {\n\twidth: 150px;\n}\nstart-view .classroom-list {\n\tbox-sizing: border-box;\n\tjustify-content: center;\n\tlist-style-type: none;\n\tmargin: 0;\n\tpadding: 5px;\n\twidth: 340px;\n\toverflow-y: auto;\n}\nstart-view .classroom-list > li {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tbackground: #535e64;\n\tcolor: #f2f4f4;\n\tcursor: pointer;\n\tpadding: 8px 12px;\n\tmargin-bottom: 1px;\n}\nstart-view .classroom-list > li:hover {\n\tbackground: #627077;\n}\nstart-view .classroom-list > li:active {\n\tbackground: #808b96;\n}\nstart-view .button {\n\tbox-sizing: border-box;\n\tbackground-color: #535e64;\n\tborder: none;\n\tcolor: #f2f4f4;\n\tpadding: 15px 20px;\n\tmargin: 5px;\n\tfont-size: 14px;\n\tcursor: pointer;\n\ttext-align: center;\n}\nstart-view .button:hover {\n\tbackground-color: #627077;\n}\nstart-view .button .icon {\n\tfont-size: 30px;\n}\nstart-view .button div {\n\tpadding-top: 5px;\n}\n\nstart-view #openRecordingButton {\n\tpadding: 0;\n}\n\nstart-view input[type=\"file\"] {\n\twidth: 0.1px;\n\theight: 0.1px;\n\topacity: 0;\n\toverflow: hidden;\n\tposition: absolute;\n\tz-index: -1;\n}\nstart-view input[type=\"file\"] + label {\n\tdisplay: inline-block;\n\tpadding: 15px 20px;\n\tcursor: pointer;\n}\n\n@media (max-width: 380px) {\n\tstart-view .classroom-list {\n\t\twidth: 100%;\n\t}\n}"},239:t=>{"use strict";t.exports='<div class="content">\n\t<div class="content-container">\n\t\t<div class="button-container">\n\t\t\t<div class="button" id="openRecordingButton">\n\t\t\t\t<input type="file" name="file" id="file" accept=".plr, .presenter" />\n\t\t\t\t<label for="file">\n\t\t\t\t\t<span class="icon icon-document"></span>\n\t\t\t\t\t<div>Open Recording</div>\n\t\t\t\t</label>\n\t\t\t</div>\n\x3c!--\n\t\t\t<div class="button" id="openStreamButton">\n\t\t\t\t<span class="icon icon-connect"></span>\n\t\t\t\t<div>Open Stream</div>\n\t\t\t</div>\n--\x3e\n\t\t</div>\n\x3c!--\n\t\t<ul class="classroom-list">\n\t\t\t{{#classrooms}}\n\t\t\t<li class="classroom-item">\n\t\t\t\t<span class="classroom-name">{{name}}</span>\n\t\t\t\t<span class="classroom-time">\n\t\t\t\t\t{{#formatClassroomDate}} {{createdTimestamp}} {{/formatClassroomDate}}\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t\t{{/classrooms}}\n\t\t</ul>\n--\x3e\n\t</div>\n</div>'},382:t=>{"use strict";t.exports=".border-layout {\n\tdisplay: flex;\n\tflex-direction: column;\n\twidth: 100%;\n\theight: 100%;\n}\n\n.border-layout-content {\n\tflex: 1;\n\tdisplay: flex;\n\tflex-direction: row;\n}\n\nheader {\n\tbackground: #3c464b;\n}\n\narticle {\n\tflex: 5;\n\tbackground: #373c41;\n}\n\nnav,\naside {\n\tbackground: #2d3237;\n}\n\nsidebar-view {\n\tdisplay: block;\n\twidth: 200px;\n\theight: 100%;\n}\n\n@media (max-width: 400px) {\n\tnav,\n\taside {\n\t\tdisplay: none;\n\t}\n}"},861:t=>{"use strict";t.exports='<div class="border-layout">\n\t<header>\n\t\t\n\t</header>\n\t<div class="border-layout-content">\n\t\t<article>\n\t\t\t<player-view id="player"></player-view>\n\t\t</article>\n\t</div>\n</div>'},601:t=>{"use strict";t.exports=".toolbar-view {\n\tbackground: #3c464b;\n\tvertical-align: middle;\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\talign-items: center;\n\tjustify-content: center;\n\tposition: relative;\n\tz-index: 10;\n\tpadding: 10px;\n}\n.toolbar-view .col {\n\tflex: 1;\n\tdisplay: flex;\n}\n.toolbar-view .nav-left {\n\tflex: 1;\n\tjustify-content: flex-start;\n}\n.toolbar-view .nav-center {\n\tflex: 1;\n\tjustify-content: center;\n}\n.toolbar-view .nav-right {\n\tflex: 1;\n\tjustify-content: flex-end;\n}\n.toolbar-view .desc-label {\n\tcolor: #f0f0f0;\n\tfont-size: 70%;\n\tletter-spacing: 1px;\n\tmargin-top: 2px;\n}\n.toolbar-view .icon {\n\tcolor: #f2f4f4;\n\tfont-size: 18px;\n\tcursor: pointer;\n}\n\n.toolbar-view #openRecordingButton {\n\tpadding: 0;\n\tmargin-top: 7px;\n}\n.toolbar-view #openRecordingButton input {\n\tdisplay: none;\n}\n.toolbar-view #openRecordingButton .desc-label {\n\tpadding-top: 3px;\n}\n.toolbar-view #openRecordingButton .icon {\n\tbackground-color: #535e64;\n\tpadding: 8px;\n}\n.toolbar-view #openRecordingButton .icon:focus,\n.toolbar-view #openRecordingButton .icon:hover {\n\tbackground-color: #627077;\n}\n\n.toolbar-view .flex-column {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n}\n\n.toolbar-view web-select > web-select-cell span {\n\tdisplay: none;\n}\n.toolbar-view web-select > web-select-cell .icon::before {\n\tcolor: #f2f4f4;\n}\n.toolbar-view web-select-cell .icon::before {\n\tcolor: black;\n}\n.toolbar-view web-select-cell span {\n\tpadding-left: 0.5em;\n}"},924:t=>{"use strict";t.exports='<div class="toolbar-view">\n\t<div class="col nav-left">\n\t\t\x3c!--\n\t\t<div class="button" id="openRecordingButton">\n\t\t\t<div class="flex-column">\n\t\t\t\t<label for="file">\n\t\t\t\t\t<span class="icon icon-document"></span>\n\t\t\t\t</label>\n\t\t\t\t<input type="file" name="file" id="file" accept=".plr, .presenter" />\n\t\t\t\t<span class="desc-label">Open</span>\n\t\t\t</div>\n\t\t</div>\n\t\t--\x3e\n\t</div>\n\t<div class="col nav-center">\n\t\t<div class="flex-column">\n\t\t\t<web-select id="sidebarPosSelect">\n\t\t\t\t<web-select-cell value="none">\n\t\t\t\t\t<div class="icon icon-sidebar-none"></div>\n\t\t\t\t\t<span>None</span>\n\t\t\t\t</web-select-cell>\n\t\t\t\t<web-select-cell value="left">\n\t\t\t\t\t<div class="icon icon-sidebar-left"></div>\n\t\t\t\t\t<span>Left</span>\n\t\t\t\t</web-select-cell>\n\t\t\t\t<web-select-cell value="right" selected>\n\t\t\t\t\t<div class="icon icon-sidebar-right"></div>\n\t\t\t\t\t<span>Right</span>\n\t\t\t\t</web-select-cell>\n\t\t\t</web-select>\n\t\t\t<span class="desc-label">Sidebar</span>\n\t\t</div>\n\t</div>\n\t<div class="col nav-right">\n\t\t<web-search id="search"></web-search>\n\t</div>\n</div>'},377:()=>{},993:()=>{},618:()=>{},120:()=>{},355:()=>{},804:()=>{}},__webpack_module_cache__={};function __webpack_require__(t){if(__webpack_module_cache__[t])return __webpack_module_cache__[t].exports;var r=__webpack_module_cache__[t]={id:t,exports:{}};return __webpack_modules__[t].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(r,{a:r}),r},__webpack_require__.d=(t,r)=>{for(var i in r)__webpack_require__.o(r,i)&&!__webpack_require__.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:r[i]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r);var __webpack_exports__={};(()=>{"use strict";var t=__webpack_require__(379),r=__webpack_require__.n(t),i=__webpack_require__(626),o={insert:"head",singleton:!1};r()(i.Z,o);i.Z.locals;function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var o=r[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),t}Array.prototype.equals&&console.warn("Overriding existing Array.prototype.equals."),Array.prototype.equals=function(t){if(!t)return!1;if(this===t)return!0;if(this.length!=t.length)return!1;for(var r=0,i=this.length;r<i;r++)if(this[r]instanceof Array&&t[r]instanceof Array){if(!this[r].equals(t[r]))return!1}else if(this[r]!=t[r])return!1;return!0},Object.defineProperty(Array.prototype,"equals",{enumerable:!1});var a=function(){function Point(t,r){_classCallCheck(this,Point),this.x=void 0,this.y=void 0,this.x=t,this.y=r}return _createClass(Point,[{key:"set",value:function set(t,r){return this.x=t,this.y=r,this}},{key:"distance",value:function distance(t){var r=t.x-this.x,i=t.y-this.y;return Math.sqrt(r*r+i*i)}},{key:"add",value:function add(t){return this.x+=t.x,this.y+=t.y,this}},{key:"subtract",value:function subtract(t){return this.x-=t.x,this.y-=t.y,this}},{key:"multiply",value:function multiply(t){return this.x*=t,this.y*=t,this}},{key:"normalize",value:function normalize(){var t=Math.sqrt(this.x*this.x+this.y*this.y);return this.x/=t,this.y/=t,this}},{key:"equals",value:function equals(t){return!!t&&(this.x===t.x&&this.y===t.y)}}]),Point}(),l=function(){function Transform(t){_classCallCheck(this,Transform),this.m=void 0,this.m=t?t.slice(0,6):[1,0,0,1,0,0]}return _createClass(Transform,[{key:"getScaleX",value:function getScaleX(){return this.m[0]}},{key:"getScaleY",value:function getScaleY(){return this.m[3]}},{key:"getShearX",value:function getShearX(){return this.m[1]}},{key:"getShearY",value:function getShearY(){return this.m[2]}},{key:"getTranslateX",value:function getTranslateX(){return this.m[4]}},{key:"getTranslateY",value:function getTranslateY(){return this.m[5]}},{key:"clone",value:function clone(){return new Transform(this.m)}},{key:"reset",value:function reset(){this.setValues(1,0,0,1,0,0)}},{key:"setTransform",value:function setTransform(t){this.m[0]=t.getScaleX(),this.m[1]=t.getShearX(),this.m[2]=t.getShearY(),this.m[3]=t.getScaleY(),this.m[4]=t.getTranslateX(),this.m[5]=t.getTranslateY()}},{key:"setValues",value:function setValues(t,r,i,o,a,l){this.m[0]=t,this.m[1]=r,this.m[2]=i,this.m[3]=o,this.m[4]=a,this.m[5]=l}},{key:"invert",value:function invert(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]);this.m[0]=this.m[3]*t,this.m[1]=-this.m[1]*t,this.m[2]=-this.m[2]*t,this.m[3]=this.m[0]*t,this.m[4]=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),this.m[5]=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5])}},{key:"multiply",value:function multiply(t){this.m[0]=this.m[0]*t.m[0]+this.m[2]*t.m[1],this.m[1]=this.m[1]*t.m[0]+this.m[3]*t.m[1],this.m[2]=this.m[0]*t.m[2]+this.m[2]*t.m[3],this.m[3]=this.m[1]*t.m[2]+this.m[3]*t.m[3],this.m[4]=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],this.m[5]=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5]}},{key:"rotate",value:function rotate(t){var r=Math.cos(t),i=Math.sin(t);this.m[0]=this.m[0]*r+this.m[1]*i,this.m[1]=this.m[0]*-i+this.m[1]*r,this.m[2]=this.m[2]*r+this.m[3]*i,this.m[3]=this.m[2]*-i+this.m[3]*r}},{key:"scale",value:function scale(t,r){this.m[0]*=t,this.m[1]*=t,this.m[2]*=r,this.m[3]*=r}},{key:"translate",value:function translate(t,r){this.m[4]+=this.m[0]*t+this.m[2]*r,this.m[5]+=this.m[1]*t+this.m[3]*r}},{key:"transformPoint",value:function transformPoint(t,r){var i=t,o=r;return t=i*this.m[0]+o*this.m[2]+this.m[4],r=i*this.m[1]+o*this.m[3]+this.m[5],new a(t,r)}},{key:"equals",value:function equals(t){return!!t&&this.m.equals(t.m)}},{key:"toString",value:function toString(){return"["+this.m.join(", ")+"]"}}]),Transform}(),c=CanvasRenderingContext2D.prototype.getTransform;if(CanvasRenderingContext2D.prototype.getTransformExt=function(){if(c){var t=c.apply(this,Array.from(arguments));this._transform_ext||(this._transform_ext=new l),this._transform_ext.setValues(t.a,t.b,t.c,t.d,t.e,t.f)}return this._transform_ext},!c){var u=CanvasRenderingContext2D.prototype.resetTransform,h=CanvasRenderingContext2D.prototype.rotate,d=CanvasRenderingContext2D.prototype.scale,p=CanvasRenderingContext2D.prototype.setTransform,g=CanvasRenderingContext2D.prototype.transform,v=CanvasRenderingContext2D.prototype.translate,y=CanvasRenderingContext2D.prototype.save,_=CanvasRenderingContext2D.prototype.restore;CanvasRenderingContext2D.prototype.resetTransform=function(){u&&u.apply(this,Array.from(arguments)),this._transform_ext||(this._transform_ext=new l),this._transform_ext.reset()},CanvasRenderingContext2D.prototype.rotate=function(t){h&&h.apply(this,Array.from(arguments)),this._transform_ext||(this._transform_ext=new l),this._transform_ext.rotate(t)},CanvasRenderingContext2D.prototype.scale=function(t,r){d&&d.apply(this,Array.from(arguments)),this._transform_ext||(this._transform_ext=new l),this._transform_ext.scale(t,r)},CanvasRenderingContext2D.prototype.setTransform=function(t,r,i,o,a,c){if(p&&p.apply(this,Array.from(arguments)),r)t=t;else{var u=t;t=u.a,r=u.b,i=u.c,o=u.d,a=u.e,c=u.f}this._transform_ext||(this._transform_ext=new l),this._transform_ext.setValues(t,r,i,o,a,c)},CanvasRenderingContext2D.prototype.transform=function(t,r,i,o,a,c){g&&g.apply(this,Array.from(arguments)),this._transform_ext||(this._transform_ext=new l),this._transform_ext.multiply(new l([t,r,i,o,a,c]))},CanvasRenderingContext2D.prototype.translate=function(t,r){v&&v.apply(this,Array.from(arguments)),this._transform_ext||(this._transform_ext=new l),this._transform_ext.translate(t,r)},CanvasRenderingContext2D.prototype.save=function(){y&&y.apply(this,Array.from(arguments)),this._transform_ext_stack||(this._transform_ext_stack=[]),this._transform_ext||(this._transform_ext=new l),this._transform_ext_stack.push(this._transform_ext.clone())},CanvasRenderingContext2D.prototype.restore=function(){_&&_.apply(this,Array.from(arguments)),this._transform_ext_stack||(this._transform_ext_stack=[]),this._transform_ext=this._transform_ext_stack.pop(),this._transform_ext||(this._transform_ext=new l)}}for(var m={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},b=Object.keys(m),A=null,S=0,w=[b,["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror"],["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"]];S<w.length;S++){var x=w[S];if(x[m.fullscreenEnabled]in document){A=x;break}}if(A){var C=Element.prototype;C.requestFullscreen=C[A[m.requestFullscreen]],(C=Document.prototype).exitFullscreen=C[A[m.exitFullscreen]];var k=b[m.fullscreenElement],P=b[m.fullscreenEnabled];if(k in document||(Object.defineProperty(document,k,{get:function get(){return document[A[m.fullscreenElement]]}}),Object.defineProperty(document,P,{get:function get(){return document[A[m.fullscreenEnabled]]}})),b!==A){var R=function proxyListener(t){var r,i=t.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();"function"==typeof Event?r=new Event(i,t):(r=document.createEvent("Event")).initEvent(i,t.bubbles,t.cancelable),t.target.dispatchEvent(r)};document.addEventListener(A[m.fullscreenchange],R),document.addEventListener(A[m.fullscreenerror],R)}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t})(t,r)}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_setPrototypeOf(t,r)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}String.format=function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a=-1;function callback(t,r,o,l,c,u){if("%%"==t)return"%";if(void 0!==i[++a]){t=l?parseInt(l.substr(1)):void 0;var h,d=c?parseInt(c.substr(1)):void 0;switch(u){case"s":h=i[a];break;case"c":h=i[a][0];break;case"f":h=parseFloat(i[a]).toFixed(t);break;case"p":h=parseFloat(i[a]).toPrecision(t);break;case"e":h=parseFloat(i[a]).toExponential(t);break;case"x":h=parseInt(i[a]).toString(d||16);break;case"d":h=parseFloat(parseInt(i[a],d||10).toPrecision(t)).toFixed(0)}h="object"==_typeof(h)?JSON.stringify(h):h.toString(d);for(var p=parseInt(o),g=o&&"0"==o[0]?"0":" ";h.length<p;)h=void 0!==r?h+g:g+h;return h}}var l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(l,callback)};var T=function ViewElement(t){return function(r){!function validateSelector(t){if(t.indexOf("-")<=0)throw new Error("At least one dash is required in the custom element name!")}(t.selector);var i="";t.styles&&(i+="<style>\n".concat(t.styles,"\n</style>")),t.template&&(i+="\n".concat(t.template));var o=document.createElement("template");o.innerHTML=i;var a=r.prototype.connectedCallback||function(){},l=r.prototype.initialized||function(){return!1};r.prototype.connectedCallback=function(){if(!l.call(this)){this.template=t.template;var r=document.importNode(o.content,!0);t.useShadow?this.attachShadow({mode:"open"}).appendChild(r):this.appendChild(r);var i,c=t.useShadow?this.shadowRoot:this,u=_createForOfIteratorHelper(Reflect.ownKeys(this));try{for(u.s();!(i=u.n()).done;){var h=i.value.toString(),d=c.querySelector("#"+h);d&&(this[h]=d)}}catch(t){u.e(t)}finally{u.f()}a.call(this)}},customElements.define(t.selector,r)}};function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function _construct(t,r,i){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function _construct(t,r,i){var o=[null];o.push.apply(o,r);var a=new(Function.bind.apply(t,o));return i&&_setPrototypeOf(a,i.prototype),a}).apply(null,arguments)}function _wrapNativeSuper(t){var r="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function _wrapNativeSuper(t){if(null===t||!function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,Wrapper)}function Wrapper(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(t.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,t)})(t)}var E,L=__webpack_require__(466),I=__webpack_require__.n(L);var O="undefined"==typeof document?void 0:document,M=!!O&&"content"in O.createElement("template"),D=!!O&&O.createRange&&"createContextualFragment"in O.createRange();function toElement(t){return t=t.trim(),M?function createFragmentFromTemplate(t){var r=O.createElement("template");return r.innerHTML=t,r.content.childNodes[0]}(t):D?function createFragmentFromRange(t){return E||(E=O.createRange()).selectNode(O.body),E.createContextualFragment(t).childNodes[0]}(t):function createFragmentFromWrap(t){var r=O.createElement("body");return r.innerHTML=t,r.childNodes[0]}(t)}function compareNodeNames(t,r){var i,o,a=t.nodeName,l=r.nodeName;return a===l||(i=a.charCodeAt(0),o=l.charCodeAt(0),i<=90&&o>=97?a===l.toUpperCase():o<=90&&i>=97&&l===a.toUpperCase())}function syncBooleanAttrProp(t,r,i){t[i]!==r[i]&&(t[i]=r[i],t[i]?t.setAttribute(i,""):t.removeAttribute(i))}var N={OPTION:function(t,r){var i=t.parentNode;if(i){var o=i.nodeName.toUpperCase();"OPTGROUP"===o&&(o=(i=i.parentNode)&&i.nodeName.toUpperCase()),"SELECT"!==o||i.hasAttribute("multiple")||(t.hasAttribute("selected")&&!r.selected&&(t.setAttribute("selected","selected"),t.removeAttribute("selected")),i.selectedIndex=-1)}syncBooleanAttrProp(t,r,"selected")},INPUT:function(t,r){syncBooleanAttrProp(t,r,"checked"),syncBooleanAttrProp(t,r,"disabled"),t.value!==r.value&&(t.value=r.value),r.hasAttribute("value")||t.removeAttribute("value")},TEXTAREA:function(t,r){var i=r.value;t.value!==i&&(t.value=i);var o=t.firstChild;if(o){var a=o.nodeValue;if(a==i||!i&&a==t.placeholder)return;o.nodeValue=i}},SELECT:function(t,r){if(!r.hasAttribute("multiple")){for(var i,o,a=-1,l=0,c=t.firstChild;c;)if("OPTGROUP"===(o=c.nodeName&&c.nodeName.toUpperCase()))c=(i=c).firstChild;else{if("OPTION"===o){if(c.hasAttribute("selected")){a=l;break}l++}!(c=c.nextSibling)&&i&&(c=i.nextSibling,i=null)}t.selectedIndex=a}}};function noop(){}function defaultGetNodeKey(t){if(t)return t.getAttribute&&t.getAttribute("id")||t.id}const B=function morphdomFactory(t){return function morphdom(r,i,o){if(o||(o={}),"string"==typeof i)if("#document"===r.nodeName||"HTML"===r.nodeName||"BODY"===r.nodeName){var a=i;(i=O.createElement("html")).innerHTML=a}else i=toElement(i);var l=o.getNodeKey||defaultGetNodeKey,c=o.onBeforeNodeAdded||noop,u=o.onNodeAdded||noop,h=o.onBeforeElUpdated||noop,d=o.onElUpdated||noop,p=o.onBeforeNodeDiscarded||noop,g=o.onNodeDiscarded||noop,v=o.onBeforeElChildrenUpdated||noop,y=!0===o.childrenOnly,_=Object.create(null),m=[];function addKeyedRemoval(t){m.push(t)}function walkDiscardedChildNodes(t,r){if(1===t.nodeType)for(var i=t.firstChild;i;){var o=void 0;r&&(o=l(i))?addKeyedRemoval(o):(g(i),i.firstChild&&walkDiscardedChildNodes(i,r)),i=i.nextSibling}}function removeNode(t,r,i){!1!==p(t)&&(r&&r.removeChild(t),g(t),walkDiscardedChildNodes(t,i))}function handleNodeAdded(t){u(t);for(var r=t.firstChild;r;){var i=r.nextSibling,o=l(r);if(o){var a=_[o];a&&compareNodeNames(r,a)?(r.parentNode.replaceChild(a,r),morphEl(a,r)):handleNodeAdded(r)}else handleNodeAdded(r);r=i}}function morphEl(r,i,o){var a=l(i);if(a&&delete _[a],!o){if(!1===h(r,i))return;if(t(r,i),d(r),!1===v(r,i))return}"TEXTAREA"!==r.nodeName?function morphChildren(t,r){var i,o,a,u,h,d=r.firstChild,p=t.firstChild;e:for(;d;){for(u=d.nextSibling,i=l(d);p;){if(a=p.nextSibling,d.isSameNode&&d.isSameNode(p)){d=u,p=a;continue e}o=l(p);var g=p.nodeType,v=void 0;if(g===d.nodeType&&(1===g?(i?i!==o&&((h=_[i])?a===h?v=!1:(t.insertBefore(h,p),o?addKeyedRemoval(o):removeNode(p,t,!0),p=h):v=!1):o&&(v=!1),(v=!1!==v&&compareNodeNames(p,d))&&morphEl(p,d)):3!==g&&8!=g||(v=!0,p.nodeValue!==d.nodeValue&&(p.nodeValue=d.nodeValue))),v){d=u,p=a;continue e}o?addKeyedRemoval(o):removeNode(p,t,!0),p=a}if(i&&(h=_[i])&&compareNodeNames(h,d))t.appendChild(h),morphEl(h,d);else{var y=c(d);!1!==y&&(y&&(d=y),d.actualize&&(d=d.actualize(t.ownerDocument||O)),t.appendChild(d),handleNodeAdded(d))}d=u,p=a}!function cleanupFromEl(t,r,i){for(;r;){var o=r.nextSibling;(i=l(r))?addKeyedRemoval(i):removeNode(r,t,!0),r=o}}(t,p,o);var m=N[t.nodeName];m&&m(t,r)}(r,i):N.TEXTAREA(r,i)}!function indexTree(t){if(1===t.nodeType||11===t.nodeType)for(var r=t.firstChild;r;){var i=l(r);i&&(_[i]=r),indexTree(r),r=r.nextSibling}}(r);var b=r,A=b.nodeType,S=i.nodeType;if(!y)if(1===A)1===S?compareNodeNames(r,i)||(g(r),b=function moveChildren(t,r){for(var i=t.firstChild;i;){var o=i.nextSibling;r.appendChild(i),i=o}return r}(r,function createElementNS(t,r){return r&&"http://www.w3.org/1999/xhtml"!==r?O.createElementNS(r,t):O.createElement(t)}(i.nodeName,i.namespaceURI))):b=i;else if(3===A||8===A){if(S===A)return b.nodeValue!==i.nodeValue&&(b.nodeValue=i.nodeValue),b;b=i}if(b===i)g(r);else{if(i.isSameNode&&i.isSameNode(b))return;if(morphEl(b,i,y),m)for(var w=0,x=m.length;w<x;w++){var C=_[m[w]];C&&removeNode(C,C.parentNode,!1)}}return!y&&b!==r&&r.parentNode&&(b.actualize&&(b=b.actualize(r.ownerDocument||O)),r.parentNode.replaceChild(b,r)),b}}((function morphAttrs(t,r){var i,o,a,l,c=r.attributes;if(11!==r.nodeType&&11!==t.nodeType){for(var u=c.length-1;u>=0;u--)o=(i=c[u]).name,a=i.namespaceURI,l=i.value,a?(o=i.localName||o,t.getAttributeNS(a,o)!==l&&("xmlns"===i.prefix&&(o=i.name),t.setAttributeNS(a,o,l))):t.getAttribute(o)!==l&&t.setAttribute(o,l);for(var h=t.attributes,d=h.length-1;d>=0;d--)o=(i=h[d]).name,(a=i.namespaceURI)?(o=i.localName||o,r.hasAttributeNS(a,o)||t.removeAttributeNS(a,o)):r.hasAttribute(o)||t.removeAttribute(o)}}));function _createSuper(t){var r=function web_view_element_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var z,j=function(t){_inherits(WebViewElement,t);var r=_createSuper(WebViewElement);function WebViewElement(){var t;_classCallCheck(this,WebViewElement);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=r.call.apply(r,[this].concat(o))).template=void 0,t}return _createClass(WebViewElement,[{key:"initialized",value:function initialized(){return!1}},{key:"render",value:function render(){if(this.template){var t=I().render(this.template,this);B(this.lastElementChild,t)}}}]),WebViewElement}(_wrapNativeSuper(HTMLElement));function web_search_createSuper(t){var r=function web_search_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}T({selector:"web-search",template:__webpack_require__(198),styles:[__webpack_require__(426)]})(z=function(t){_inherits(WebSearch,t);var r=web_search_createSuper(WebSearch);function WebSearch(){var t;return _classCallCheck(this,WebSearch),(t=r.call(this)).searchClearButton=void 0,t.searchBackwardButton=void 0,t.searchForwardButton=void 0,t.searchResult=void 0,t.searchResultText=void 0,t.searchField=void 0,t.searchButton=void 0,t._searchResult=void 0,t._searchFunction=void 0,t._onSearchBackward=void 0,t._onSearchForward=void 0,t}return _createClass(WebSearch,[{key:"connectedCallback",value:function connectedCallback(){var t=this;this.searchField.addEventListener("keyup",(function(r){r.preventDefault(),13===r.keyCode&&t.search()})),this.searchClearButton.addEventListener("click",this.clearSearch.bind(this)),this.searchBackwardButton.addEventListener("click",this.searchBackward.bind(this)),this.searchForwardButton.addEventListener("click",this.searchForward.bind(this)),this.searchButton.addEventListener("click",this.search.bind(this))}},{key:"searchFunction",set:function set(t){this._searchFunction=t}},{key:"onSearchBackward",set:function set(t){this._onSearchBackward=t}},{key:"onSearchForward",set:function set(t){this._onSearchForward=t}},{key:"search",value:function search(){var t=this;this._searchFunction&&this._searchFunction(this.searchField.value).then((function(r){t._searchResult=r,t._searchResult&&(t.updateSearchResultView(),t.searchForward())}))}},{key:"clearSearch",value:function clearSearch(){this._searchResult=null,this.updateSearchResultView()}},{key:"searchBackward",value:function searchBackward(){this._searchResult&&this._searchResult.backward()&&(this._onSearchBackward&&this._onSearchBackward(this._searchResult),this.updateSearchResultView())}},{key:"searchForward",value:function searchForward(){this._searchResult&&this._searchResult.forward()&&(this._onSearchForward&&this._onSearchForward(this._searchResult),this.updateSearchResultView())}},{key:"updateSearchResultView",value:function updateSearchResultView(){this._searchResult&&this._searchResult.getFound()>0?(this.searchResultText.innerHTML=this._searchResult.getCurrentIndex()+" of "+this._searchResult.getFound(),this.setElementVisibility(this.searchResult,!0)):(this.searchResultText.innerHTML="0",this.setElementVisibility(this.searchResult,!1))}},{key:"setElementVisibility",value:function setElementVisibility(t,r){r?(t.classList.remove("slide-out"),t.classList.add("slide-in")):(t.classList.remove("slide-in"),t.classList.add("slide-out"))}}]),WebSearch}(j));var U=function(){function SearchResult(t){_classCallCheck(this,SearchResult),this.pageIndices=void 0,this.index=void 0,this.pageIndices=t,this.index=0}return _createClass(SearchResult,[{key:"getFound",value:function getFound(){return this.pageIndices.length}},{key:"getCurrentIndex",value:function getCurrentIndex(){return this.index}},{key:"getCurrentPageIndex",value:function getCurrentPageIndex(){var t=this.index-1<0?0:this.index-1;return this.pageIndices[t]}},{key:"forward",value:function forward(){return this.index+1>this.pageIndices.length?this.index=1:this.index++,!0}},{key:"backward",value:function backward(){return this.index-1<1?this.index=this.pageIndices.length:this.index--,!0}}]),SearchResult}();function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}function _get(t,r,i){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(t,r,i){var o=_superPropBase(t,r);if(o){var a=Object.getOwnPropertyDescriptor(o,r);return a.get?a.get.call(i):a.value}})(t,r,i||t)}function property_createSuper(t){var r=function property_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var H,V,G=function(t){_inherits(Property,t);var r=property_createSuper(Property);function Property(t){var i;return _classCallCheck(this,Property),(i=r.call(this))._value=void 0,i._value=t,i}return _createClass(Property,[{key:"value",get:function get(){return this._value},set:function set(t){this._value!==t&&(this._value=t,this.notify(this._value))}},{key:"notifyObservers",value:function notifyObservers(){_get(_getPrototypeOf(Property.prototype),"notify",this).call(this,this._value)}}]),Property}(function(){function Observable(){_classCallCheck(this,Observable),this.observers=void 0,this.observers=[]}return _createClass(Observable,[{key:"subscribe",value:function subscribe(t){this.observers.push(t)}},{key:"unsubscribe",value:function unsubscribe(t){this.observers=this.observers.filter((function(r){return r!==t}))}},{key:"notify",value:function notify(t){this.observers.forEach((function(r){return r(t)}))}}]),Observable}());function web_select_createSuper(t){var r=function web_select_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}T({selector:"web-select",template:__webpack_require__(588),styles:[__webpack_require__(890)]})(H=function(t){_inherits(WebSelect,t);var r=web_select_createSuper(WebSelect);function WebSelect(){var t;return _classCallCheck(this,WebSelect),(t=r.call(this)).selectedCell=void 0,t.cellList=void 0,t._value=void 0,t._selectedIndex=void 0,t._value=new G,t._selectedIndex=new G,t}return _createClass(WebSelect,[{key:"connectedCallback",value:function connectedCallback(){for(var t=this,r=function _loop(){var r=o[i];if(r instanceof q){if(r==t.selectedCell)return"continue";var a=t.cellList.childElementCount;t.cellList.appendChild(r),r.addEventListener("click",(function(){t.selectedCell.innerHTML=r.innerHTML,t._value.value=r.getAttribute("value"),t._selectedIndex.value=a})),null!==r.getAttribute("selected")&&(t.selectedCell.innerHTML=r.innerHTML)}},i=0,o=Array.from(this.children);i<o.length;i++)r();this.selectedCell.addEventListener("click",(function(){t.cellList.classList.toggle("web-select-list-show")})),document.addEventListener("click",(function(r){if(!t.selectedCell.contains(r.target)){var i=document.querySelectorAll("#cellList");for(var o in i){var a=i[o];a.classList&&a.classList.contains("web-select-list-show")&&a.classList.remove("web-select-list-show")}}}))}},{key:"selectedIndex",get:function get(){return this._selectedIndex.value}},{key:"value",get:function get(){return this._value.value}},{key:"selectedIndexProperty",get:function get(){return this._selectedIndex}},{key:"valueProperty",get:function get(){return this._value}}]),WebSelect}(j));var W,q=T({selector:"web-select-cell"})(V=function(t){_inherits(WebSelectCell,t);var r=web_select_createSuper(WebSelectCell);function WebSelectCell(){return _classCallCheck(this,WebSelectCell),r.call(this)}return _createClass(WebSelectCell,[{key:"value",get:function get(){return this.getAttribute("value")},set:function set(t){this.setAttribute("value",t)}},{key:"selected",get:function get(){return this.hasAttribute("selected")},set:function set(t){t?this.setAttribute("selected",""):this.removeAttribute("selected")}}]),WebSelectCell}(j))||V;function web_slider_createSuper(t){var r=function web_slider_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Y,Q;T({selector:"web-slider",template:__webpack_require__(729),styles:[__webpack_require__(574)]})(W=function(t){_inherits(WebSlider,t);var r=web_slider_createSuper(WebSlider);function WebSlider(){var t;return _classCallCheck(this,WebSlider),(t=r.call(this)).slider=void 0,t.progressElement=void 0,t.bubbleElement=void 0,t.thumbElement=void 0,t.valueFormatter=void 0,t}return _createClass(WebSlider,[{key:"connectedCallback",value:function connectedCallback(){this.progress&&(this.progressElement=document.createElement("div"),this.progressElement.classList.add("progress"),this.appendChild(this.progressElement)),this.bubble&&(this.bubbleElement=document.createElement("div"),this.bubbleElement.classList.add("bubble"),this.appendChild(this.bubbleElement)),this.thumbElement=document.createElement("div"),this.thumbElement.classList.add("thumb"),this.appendChild(this.thumbElement),this.slider.addEventListener("input",this.onInput.bind(this),!1),this.min=this.getAttribute("min"),this.max=this.getAttribute("max"),this.value=this.getAttribute("value"),this.step=this.getAttribute("step")}},{key:"attributeChangedCallback",value:function attributeChangedCallback(t,r,i){if(this.slider){switch(t){case"min":this.slider.min=i;break;case"max":this.slider.max=i;break;case"value":this.slider.value=i;break;case"step":this.slider.step=i}this.onInput()}}},{key:"bubble",get:function get(){return this.hasAttribute("bubble")},set:function set(t){t?this.setAttribute("bubble",""):this.removeAttribute("bubble")}},{key:"progress",get:function get(){return this.hasAttribute("progress")},set:function set(t){t?this.setAttribute("progress",""):this.removeAttribute("progress")}},{key:"min",get:function get(){return this.slider.min},set:function set(t){this.slider.min=t,this.onInput()}},{key:"max",get:function get(){return this.slider.max},set:function set(t){this.slider.max=t,this.onInput()}},{key:"step",get:function get(){return this.slider.step},set:function set(t){this.slider.step=t}},{key:"value",get:function get(){return this.slider.value},set:function set(t){this.slider.value=t,this.onInput()}},{key:"addInputListener",value:function addInputListener(t){this.slider.addEventListener("input",t,!1)}},{key:"setValueFormatter",value:function setValueFormatter(t){this.valueFormatter=t}},{key:"onInput",value:function onInput(){var t=this.slider.value,r=parseFloat(this.slider.max)-parseFloat(this.slider.min),i=(parseFloat(t)-parseFloat(this.slider.min))/r*100,o=this.thumbElement.getBoundingClientRect().width,a=o*i/100;if(this.progressElement&&(this.progressElement.style.width="calc("+i+"% - "+a+"px)"),this.bubbleElement){var l=a-o/2;this.bubbleElement.style.left="calc("+i+"% - "+l+"px)",this.bubbleElement.innerHTML=this.valueFormatter?this.valueFormatter(t):t}this.thumbElement.style.left="calc("+i+"% - "+a+"px)"}}],[{key:"observedAttributes",get:function get(){return["min","max","value","step","bubble","progress"]}}]),WebSlider}(j));function web_media_controls_createSuper(t){var r=function web_media_controls_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}!function(t){t.Created="Created",t.Initializing="Initializing",t.Initialized="Initialized",t.Starting="Starting",t.Started="Started",t.Stopping="Stopping",t.Stopped="Stopped",t.Suspending="Suspending",t.Suspended="Suspended",t.Destroying="Destroying",t.Destroyed="Destroyed",t.Error="Error"}(Y||(Y={}));T({selector:"web-media-controls",template:__webpack_require__(171),styles:[__webpack_require__(264)]})(Q=function(t){_inherits(WebMediaControls,t);var r=web_media_controls_createSuper(WebMediaControls);function WebMediaControls(){var t;return _classCallCheck(this,WebMediaControls),(t=r.call(this)).audio=void 0,t.prevButton=void 0,t.nextButton=void 0,t.playButton=void 0,t.pauseButton=void 0,t.playbackSpeedSelect=void 0,t.fullscreenButton=void 0,t.timeSlider=void 0,t.volumeSlider=void 0,t.volumeIndicator=void 0,t.currentTimeText=void 0,t.durationText=void 0,t.duration=void 0,t.volume=void 0,t}return _createClass(WebMediaControls,[{key:"connectedCallback",value:function connectedCallback(){var t=this;this.timeSlider.setValueFormatter((function(r){return t.formatTime(parseFloat(r)*t.duration)})),document.addEventListener("fullscreenchange",(function(){t.setFullscreen(null!=document.fullscreenElement)})),this.querySelectorAll(".rate-steps > li").forEach((function(r){r.addEventListener("click",(function(){t.classList.contains("active")||(r.parentNode.querySelector("li.active").classList.remove("active"),r.classList.add("active"),t.audio.playbackRate=parseFloat(r.dataset.value))}))}))}},{key:"visible",get:function get(){return this.hasAttribute("visible")},set:function set(t){t?this.setAttribute("visible",""):this.removeAttribute("visible")}},{key:"show",value:function show(){this.visible=!0}},{key:"hide",value:function hide(){this.visible=!1}},{key:"getAudioElement",value:function getAudioElement(){return this.audio}},{key:"setDuration",value:function setDuration(t){this.duration=t,this.durationText.innerHTML=this.formatTime(t)}},{key:"setVolume",value:function setVolume(t){this.volume=t,0===t?this.setVolumeIndicator("icon-volume0"):t<.33?this.setVolumeIndicator("icon-volume1"):t>.33&&t<.66?this.setVolumeIndicator("icon-volume2"):t>.66&&this.setVolumeIndicator("icon-volume3"),this.volumeSlider.value=(100*t).toString()}},{key:"setTime",value:function setTime(t){this.currentTimeText.innerHTML=this.formatTime(t),this.timeSlider.value=(t/this.duration).toString()}},{key:"setMuted",value:function setMuted(t){t?this.setVolumeIndicator("icon-mute"):this.setVolume(this.volume)}},{key:"setFullscreen",value:function setFullscreen(t){t?this.setFullscreenIndicator("icon-contract"):this.setFullscreenIndicator("icon-expand")}},{key:"setMediaState",value:function setMediaState(t){var r=t===Y.Started;this.playButton.style.display=r?"none":"inherit",this.pauseButton.style.display=r?"inherit":"none"}},{key:"setOnPlay",value:function setOnPlay(t){this.playButton.addEventListener("click",(function(r){r.stopPropagation(),t()}),!1)}},{key:"setOnPause",value:function setOnPause(t){this.pauseButton.addEventListener("click",(function(){event.stopPropagation(),t()}),!1)}},{key:"setOnTime",value:function setOnTime(t){var r=this;this.timeSlider.addInputListener((function(){t(parseFloat(r.timeSlider.value))}))}},{key:"setOnVolume",value:function setOnVolume(t){var r=this;this.volumeSlider.addInputListener((function(){t(parseFloat(r.volumeSlider.value)/100)}))}},{key:"setOnMute",value:function setOnMute(t){var r=this;this.volumeIndicator.addEventListener("click",(function(){event.stopPropagation(),t(!r.volumeIndicator.classList.contains("icon-mute"))}),!1)}},{key:"setOnPlaybackSpeed",value:function setOnPlaybackSpeed(t){this.playbackSpeedSelect.valueProperty.subscribe(t)}},{key:"setOnFullscreen",value:function setOnFullscreen(t){var r=this;this.fullscreenButton.addEventListener("click",(function(){event.stopPropagation(),t(r.fullscreenButton.classList.contains("icon-expand"))}),!1)}},{key:"setOnPrevious",value:function setOnPrevious(t){this.prevButton.addEventListener("click",(function(){event.stopPropagation(),t()}),!1)}},{key:"setOnNext",value:function setOnNext(t){this.nextButton.addEventListener("click",(function(){event.stopPropagation(),t()}),!1)}},{key:"formatTime",value:function formatTime(t){var r=Math.floor(t%60);t/=60;var i=Math.floor(t%60);t/=60;var o=Math.floor(t);if(o>0)return String.format("%01d:%02d:%02d",o,i,r);var a=i>9?"%02d":"%d";return String.format(a+":%02d",i,r)}},{key:"setFullscreenIndicator",value:function setFullscreenIndicator(t){var r=this.fullscreenButton.classList;r.remove("icon-expand","icon-contract"),r.add(t)}},{key:"setVolumeIndicator",value:function setVolumeIndicator(t){var r=this.volumeIndicator.classList;r.remove("icon-mute");for(var i=0;i<4;i++)r.remove("icon-volume"+i);r.add(t)}}],[{key:"observedAttributes",get:function get(){return["visible"]}}]),WebMediaControls}(j));var X=function(){function Dimension(t,r){_classCallCheck(this,Dimension),this.width=void 0,this.height=void 0,this.width=t,this.height=r}return _createClass(Dimension,[{key:"equals",value:function equals(t){return!!t&&(this.width===t.height&&this.height===t.height)}},{key:"toString",value:function toString(){return"[".concat(this.height,", ").concat(this.width,"]")}}]),Dimension}(),K=function(){function SizeEvent(t){_classCallCheck(this,SizeEvent),this._size=void 0,this._size=t}return _createClass(SizeEvent,[{key:"size",get:function get(){return this._size}}]),SizeEvent}(),$=function(){function TypedEvent(){_classCallCheck(this,TypedEvent),this.listeners=[],this.listenersOncer=[]}return _createClass(TypedEvent,[{key:"subscribe",value:function subscribe(t){var r=this;return this.listeners.push(t),{dispose:function dispose(){return r.unsubscribe(t)}}}},{key:"subscribeOnce",value:function subscribeOnce(t){this.listenersOncer.push(t)}},{key:"unsubscribe",value:function unsubscribe(t){var r=this.listeners.indexOf(t);r>-1&&this.listeners.splice(r,1)}},{key:"publish",value:function publish(t){this.listeners.forEach((function(r){return r(t)})),this.listenersOncer.forEach((function(r){return r(t)})),this.listenersOncer=[]}},{key:"pipe",value:function pipe(t){return this.subscribe((function(r){return t.publish(r)}))}}]),TypedEvent}();function render_surface_createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function render_surface_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return render_surface_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return render_surface_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function render_surface_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}var Z=function(){function RenderSurface(t){_classCallCheck(this,RenderSurface),this.canvas=void 0,this.canvasContext=void 0,this.renderers=void 0,this.sizeEvent=new $,this.transform=void 0,this.size=void 0,this.canvas=t,this.canvasContext=t.getContext("2d"),this.renderers=new Map,this.transform=new l}return _createClass(RenderSurface,[{key:"clear",value:function clear(){this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"registerRenderer",value:function registerRenderer(t,r){this.renderers.set(t,r)}},{key:"renderImageSource",value:function renderImageSource(t){this.canvasContext.drawImage(t,0,0)}},{key:"renderSurface",value:function renderSurface(t){this.canvasContext.drawImage(t.canvas,0,0)}},{key:"renderShapes",value:function renderShapes(t){var r,i=render_surface_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;this.renderShape(o,null)}}catch(t){i.e(t)}finally{i.f()}}},{key:"renderShape",value:function renderShape(t,r){var i=this.renderers.get(t.constructor.name);if(i){var o=this.canvas.width*this.transform.getScaleX(),a=this.transform.getTranslateX(),l=this.transform.getTranslateY();this.canvasContext.save(),this.canvasContext.scale(o,o),this.canvasContext.translate(-a,-l),i.render(this.canvasContext,t,r),this.canvasContext.restore()}}},{key:"getSize",value:function getSize(){return this.size}},{key:"setSize",value:function setSize(t,r){var i=window.devicePixelRatio||1;this.size=new X(t*i,r*i),this.resizeCanvas(t,r,i),this.fireSizeEvent(new K(this.size))}},{key:"setTransform",value:function setTransform(t){this.transform.setTransform(t)}},{key:"addSizeListener",value:function addSizeListener(t){return this.sizeEvent.subscribe(t)}},{key:"removeSizeListener",value:function removeSizeListener(t){this.sizeEvent.unsubscribe(t)}},{key:"fireSizeEvent",value:function fireSizeEvent(t){this.sizeEvent.publish(t)}},{key:"resizeCanvas",value:function resizeCanvas(t,r,i){var o=this.canvas.getAttribute("scale");o&&"full"===o&&(this.canvas.width=t*i,this.canvas.height=r*i),this.canvas.style.width=t+"px",this.canvas.style.height=r+"px"}}]),RenderSurface}(),J=function(){function ShapeEvent(t,r){_classCallCheck(this,ShapeEvent),this._shape=void 0,this._dirtyRegion=void 0,this._shape=t,this._dirtyRegion=r}return _createClass(ShapeEvent,[{key:"shape",get:function get(){return this._shape}},{key:"dirtyRegion",get:function get(){return this._dirtyRegion}}]),ShapeEvent}(),ee=function(){function Rectangle(t,r,i,o){_classCallCheck(this,Rectangle),this.x=void 0,this.y=void 0,this.width=void 0,this.height=void 0,this.set(t,r,i,o)}return _createClass(Rectangle,[{key:"set",value:function set(t,r,i,o){this.x=t,this.y=r,this.width=i,this.height=o}},{key:"isEmpty",value:function isEmpty(){return this.width<=0||this.height<=0}},{key:"containsPoint",value:function containsPoint(t){var r=t.x,i=t.y;return r>=this.x&&i>=this.y&&r<this.x+this.width&&i<this.y+this.height}},{key:"containsRect",value:function containsRect(t){if(this.isEmpty()||t.isEmpty())return!1;var r=t.x,i=t.y,o=t.width,a=t.height,l=this.x,c=this.y;return r>=l&&i>=c&&r+o<=l+this.width&&i+a<=c+this.height}},{key:"intersectsLine",value:function intersectsLine(t,r,i,o){for(var a=this.x,l=this.x+this.width,c=this.y,u=this.y+this.height,h=this.computeCode(t,r,a,l,c,u),d=this.computeCode(i,o,a,l,c,u);;){if(!(h|d))return!0;if(h&d)return!1;var p=h||d,g=void 0,v=void 0;8&p?(g=t+(i-t)*(u-r)/(o-r),v=u):4&p?(g=t+(i-t)*(c-r)/(o-r),v=c):2&p?(v=r+(o-r)*(l-t)/(i-t),g=l):1&p&&(v=r+(o-r)*(a-t)/(i-t),g=a),p==h?(t=g,r=v,h=this.computeCode(t,r,a,l,c,u)):(i=g,o=v,d=this.computeCode(i,o,a,l,c,u))}}},{key:"intersection",value:function intersection(t){var r=Math.max(this.x,t.x),i=Math.max(this.y,t.y),o=Math.min(this.x+this.width,t.x+t.width)-r,a=Math.min(this.y+this.height,t.y+t.height)-i;return o<=0||a<=0?null:new Rectangle(r,i,o,a)}},{key:"union",value:function union(t){var r=Math.min(this.x,t.x),i=Math.min(this.y,t.y),o=Math.max(this.x+this.width,t.x+t.width),a=Math.max(this.y+this.height,t.y+t.height);this.set(r,i,o-r,a-i)}},{key:"equals",value:function equals(t){return!!t&&(this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height)}},{key:"toString",value:function toString(){return"[".concat(this.x,", ").concat(this.y,", ").concat(this.height,", ").concat(this.width,"]")}},{key:"computeCode",value:function computeCode(t,r,i,o,a,l){var c=0;return t<i?c|=1:t>o&&(c|=2),r<a?c|=4:r>l&&(c|=8),c}}],[{key:"empty",value:function empty(){return new Rectangle(0,0,0,0)}}]),Rectangle}();function shape_createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function shape_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return shape_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return shape_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function shape_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}var te=function(){function Shape(){_classCallCheck(this,Shape),this._points=[],this._bounds=ee.empty(),this.changeEvent=new $,this.selected=void 0,this.keyEvent=void 0}return _createClass(Shape,[{key:"addPoint",value:function addPoint(t){var r=this._points.length,i=null;return r>0&&(i=this._points[r-1]),!t.equals(i)&&(this._points.push(t),!0)}},{key:"points",get:function get(){return this._points}},{key:"contains",value:function contains(t){return this._bounds.containsPoint(t)}},{key:"intersects",value:function intersects(t){return null!=this._bounds.intersection(t)}},{key:"bounds",get:function get(){return this._bounds}},{key:"getKeyEvent",value:function getKeyEvent(){return this.keyEvent}},{key:"setKeyEvent",value:function setKeyEvent(t){this.keyEvent=t}},{key:"isSelected",value:function isSelected(){return this.selected}},{key:"setSelected",value:function setSelected(t){this.selected!=t&&(this.selected=t,this.fireShapeEvent(new J(this,this.bounds)))}},{key:"moveByDelta",value:function moveByDelta(t){var r,i=shape_createForOfIteratorHelper(this._points);try{for(i.s();!(r=i.n()).done;){r.value.subtract(t)}}catch(t){i.e(t)}finally{i.f()}this.updateBoundsByDelta(t),this.fireShapeEvent(new J(this,this.bounds))}},{key:"clone",value:function clone(){return Object.create(this)}},{key:"addChangeListener",value:function addChangeListener(t){return this.changeEvent.subscribe(t)}},{key:"removeChangeListener",value:function removeChangeListener(t){this.changeEvent.unsubscribe(t)}},{key:"updateBoundsByDelta",value:function updateBoundsByDelta(t){this.bounds.x-=t.x,this.bounds.y-=t.y}},{key:"fireShapeEvent",value:function fireShapeEvent(t){this.changeEvent.publish(t)}}]),Shape}();function slide_shape_createSuper(t){var r=function slide_shape_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var ne=function(t){_inherits(SlideShape,t);var r=slide_shape_createSuper(SlideShape);function SlideShape(t){var i;return _classCallCheck(this,SlideShape),(i=r.call(this)).page=void 0,i.page=t,i.updateBounds(),i}return _createClass(SlideShape,[{key:"getPage",value:function getPage(){return this.page}},{key:"setPageRect",value:function setPageRect(t){this.bounds.equals(t)||(this.bounds.set(t.x,t.y,t.width,t.height),this.fireShapeEvent(new J(this,this.bounds)))}},{key:"updateBounds",value:function updateBounds(){this.bounds.set(0,0,1,1)}}]),SlideShape}(te);function asyncGeneratorStep(t,r,i,o,a,l,c){try{var u=t[l](c),h=u.value}catch(t){return void i(t)}u.done?r(h):Promise.resolve(h).then(o,a)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(o,a){var l=t.apply(r,i);function _next(t){asyncGeneratorStep(l,o,a,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,o,a,_next,_throw,"throw",t)}_next(void 0)}))}}var re,ie=__webpack_require__(757),se=__webpack_require__.n(ie),oe=function(){function SlideRenderer(){_classCallCheck(this,SlideRenderer),this.backCanvas=document.createElement("canvas"),this.renderTask=void 0}return _createClass(SlideRenderer,[{key:"render",value:function(){var t=_asyncToGenerator(se().mark((function _callee(t,r,i){var o,a,l,c,u,h,d,p,g,v=this;return se().wrap((function _callee$(y){for(;;)switch(y.prev=y.next){case 0:if(!this.renderTask){y.next=2;break}return y.abrupt("return",null);case 2:return o=r.getPage(),y.next=5,o.getNativePage();case 5:return a=y.sent,l=1/r.bounds.width,c=i.width*l,u=r.bounds.x*c,h=r.bounds.y*c,d=a.view[2]-a.view[0],p=l*(i.width/d),(g=a.getViewport({scale:p,dontFlip:!1})).transform[4]-=u,g.transform[5]-=h,this.backCanvas.width=i.width,this.backCanvas.height=i.height,this.renderTask=a.render({canvasContext:this.backCanvas.getContext("2d"),viewport:g}),y.abrupt("return",this.renderTask.promise.then((function(){return t.canvas.width=v.backCanvas.width,t.canvas.height=v.backCanvas.height,t.drawImage(v.backCanvas,0,0),v.renderTask=null,v.backCanvas}),(function(t){})));case 19:case"end":return y.stop()}}),_callee,this)})));return function render(r,i,o){return t.apply(this,arguments)}}()}]),SlideRenderer}();function web_slide_pre_view_createSuper(t){var r=function web_slide_pre_view_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var ae,le=T({selector:"slide-preview",template:__webpack_require__(935),styles:[__webpack_require__(290)],useShadow:!0})(re=function(t){_inherits(WebSlidePreview,t);var r=web_slide_pre_view_createSuper(WebSlidePreview);function WebSlidePreview(){var t;return _classCallCheck(this,WebSlidePreview),(t=r.call(this)).slideCanvas=void 0,t.slideRenderSurface=void 0,t.page=void 0,t}return _createClass(WebSlidePreview,[{key:"initialized",value:function initialized(){return null!=this.slideRenderSurface}},{key:"connectedCallback",value:function connectedCallback(){this.slideCanvas=this.shadowRoot.querySelector(".slide-canvas");var t=this.getSize();this.style.margin="4px 4px 0 4px",this.style.width=t.width+"px",this.style.height=t.height+"px",this.slideRenderSurface=new Z(this.slideCanvas),this.slideRenderSurface.setSize(t.width,t.height),this.slideRenderSurface.registerRenderer(ne.name,new oe),this.renderSurface()}},{key:"getSlideRenderSurface",value:function getSlideRenderSurface(){return this.slideRenderSurface}},{key:"setPage",value:function setPage(t){if(this.page=t,this.slideRenderSurface){var r=this.slideRenderSurface.getSize(),i=new ee(0,0,r.width,r.height);this.slideRenderSurface.renderShape(t.getSlideShape(),i)}}},{key:"setSize",value:function setSize(t,r){this.slideRenderSurface&&(this.slideRenderSurface.setSize(t,r),this.renderSurface())}},{key:"renderSurface",value:function renderSurface(){if(this.page){var t=this.slideRenderSurface.getSize(),r=new ee(0,0,t.width,t.height);this.slideRenderSurface.renderShape(this.page.getSlideShape(),r)}}},{key:"getSize",value:function getSize(){var t=4/3,r=this.parentElement.getBoundingClientRect(),i=r.width-this.getScrollbarWidth()-8,o=r.height;return i/o>t?i=o*t:o=i/t,new X(i,o)}},{key:"getScrollbarWidth",value:function getScrollbarWidth(){var t=document.createElement("div");t.style.visibility="hidden",t.style.width="100px",document.body.appendChild(t);var r=t.offsetWidth;t.style.overflow="scroll";var i=document.createElement("div");i.style.width="100%",t.appendChild(i);var o=i.offsetWidth;return t.parentNode.removeChild(t),r-o}}]),WebSlidePreview}(j))||re;function web_sidebar_view_createSuper(t){var r=function web_sidebar_view_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}T({selector:"sidebar-view",template:__webpack_require__(103),styles:[__webpack_require__(420)],useShadow:!0})(ae=function(t){_inherits(WebSidebarView,t);var r=web_sidebar_view_createSuper(WebSidebarView);function WebSidebarView(){var t;return _classCallCheck(this,WebSidebarView),(t=r.call(this)).previewPool=new Array,t.previewScroller=void 0,t.onPageSelect=void 0,t.lastSelectedIndex=void 0,t.selectedIndex=void 0,t}return _createClass(WebSidebarView,[{key:"initialized",value:function initialized(){return null!=this.previewScroller}},{key:"connectedCallback",value:function connectedCallback(){var t=this;this.previewScroller.addEventListener("rangechange",(function(r){(t.selectedIndex>=r.first||t.selectedIndex<=r.last)&&t.setSelectedPreview(t.lastSelectedIndex,t.selectedIndex)})),this.previewScroller.createElement=function(r,i){var o=t.previewPool.pop();if(o)return o;var a=new le;return a.addEventListener("click",t.previewSelected.bind(t)),a},this.previewScroller.updateElement=function(t,r,i){t.id="page"+i,t.dataset.id=i.toString(),t.classList.remove("selected"),t.setPage(r)},this.previewScroller.recycleElement=function(r,i,o){r.id=null,r.dataset.id=null,t.previewPool.push(r)}}},{key:"setDocument",value:function setDocument(t){for(var r=t.getPageCount(),i=new Array(r),o=0;o<r;o++)i[o]=t.getPage(o);this.previewScroller.itemSource=i}},{key:"setSelectedPageIndex",value:function setSelectedPageIndex(t,r){this.lastSelectedIndex=this.selectedIndex,this.selectedIndex=r,this.setSelectedPreview(t,r),this.previewScroller.scrollToIndex(r)}},{key:"setOnPageSelect",value:function setOnPageSelect(t){this.onPageSelect=t}},{key:"previewSelected",value:function previewSelected(t){var r=t.currentTarget;if(r instanceof HTMLElement&&this.onPageSelect){var i=parseInt(r.dataset.id);this.onPageSelect(i)}}},{key:"setSelectedPreview",value:function setSelectedPreview(t,r){var i=this.shadowRoot.querySelector("#page"+t);i&&i.classList.remove("selected"),(i=this.shadowRoot.querySelector("#page"+r))&&i.classList.add("selected")}}]),WebSidebarView}(j));function slide_render_surface_createSuper(t){var r=function slide_render_surface_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var ce,ue=function(t){_inherits(SlideRenderSurface,t);var r=slide_render_surface_createSuper(SlideRenderSurface);function SlideRenderSurface(){return _classCallCheck(this,SlideRenderSurface),r.apply(this,arguments)}return _createClass(SlideRenderSurface,[{key:"renderShape",value:function renderShape(t,r){var i=this.renderers.get(t.constructor.name),o=null;if(i){var a=t.bounds,l=this.canvas.width/a.width;this.canvasContext.save(),this.canvasContext.scale(l,l),o=i.render(this.canvasContext,t,r),this.canvasContext.restore()}return o}}]),SlideRenderSurface}(Z),he=__webpack_require__(299),de=__webpack_require__(963),fe=function(){function TextLayerSurface(t){_classCallCheck(this,TextLayerSurface),this.root=void 0,this.size=void 0,this.root=t}return _createClass(TextLayerSurface,[{key:"clear",value:function clear(){for(;this.root.firstChild;)this.root.removeChild(this.root.firstChild)}},{key:"render",value:function(){var t=_asyncToGenerator(se().mark((function _callee(t){var r,i,o,a,l,c,u,h,d,p,g;return se().wrap((function _callee$(v){for(;;)switch(v.prev=v.next){case 0:return this.clear(),v.next=3,t.getNativePage();case 3:return r=v.sent,v.next=6,r.getTextContent();case 6:i=v.sent,o=t.getSlideShape(),o.bounds,a=1/o.bounds.width,l=this.size.width*a,c=o.bounds.x*l,u=o.bounds.y*l,h=r.view[2]-r.view[0],d=a*(this.size.width/h),(p=r.getViewport({scale:d,dontFlip:!1})).transform[4]-=c,p.transform[5]-=u,(0,he.renderTextLayer)({textContent:i,container:this.root,viewport:p,enhanceTextSelection:!0,textDivs:[]}).promise.catch((function(t){console.error(t)})),(g=new de.SimpleLinkService).externalLinkTarget=2,new de.AnnotationLayerBuilder({pageDiv:this.root,pdfPage:r,linkService:g}).render(p);case 23:case"end":return v.stop()}}),_callee,this)})));return function render(r){return t.apply(this,arguments)}}()},{key:"getSize",value:function getSize(){return this.size}},{key:"setSize",value:function setSize(t,r){this.size=new X(t,r),this.root.style.width=t+"px",this.root.style.height=r+"px"}}]),TextLayerSurface}();function web_slide_view_createSuper(t){var r=function web_slide_view_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var pe;T({selector:"slide-view",template:__webpack_require__(547),styles:[__webpack_require__(322)]})(ce=function(t){_inherits(WebSlideView,t);var r=web_slide_view_createSuper(WebSlideView);function WebSlideView(){var t;return _classCallCheck(this,WebSlideView),(t=r.call(this)).slideRenderSurface=void 0,t.actionRenderSurface=void 0,t.volatileRenderSurface=void 0,t.textLayerSurface=void 0,t}return _createClass(WebSlideView,[{key:"connectedCallback",value:function connectedCallback(){var t=this.querySelector(".slide-canvas"),r=this.querySelector(".action-canvas"),i=this.querySelector(".volatile-canvas"),o=this.querySelector(".text-layer");this.slideRenderSurface=new ue(t),this.actionRenderSurface=new Z(r),this.volatileRenderSurface=new Z(i),this.textLayerSurface=new fe(o),this.resize(),window.addEventListener("resize",this.resize.bind(this),!1)}},{key:"getActionRenderSurface",value:function getActionRenderSurface(){return this.actionRenderSurface}},{key:"getSlideRenderSurface",value:function getSlideRenderSurface(){return this.slideRenderSurface}},{key:"getVolatileRenderSurface",value:function getVolatileRenderSurface(){return this.volatileRenderSurface}},{key:"getTextLayerSurface",value:function getTextLayerSurface(){return this.textLayerSurface}},{key:"repaint",value:function repaint(){this.resize()}},{key:"resize",value:function resize(){var t=this.querySelector(".slide-view"),r=4/3,i=t.clientWidth,o=t.clientHeight;i/o>r?i=o*r:o=i/r,this.slideRenderSurface.setSize(i,o),this.actionRenderSurface.setSize(i,o),this.volatileRenderSurface.setSize(i,o),this.textLayerSurface.setSize(i,o)}}]),WebSlideView}(j));function web_player_view_createSuper(t){var r=function web_player_view_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var ge;T({selector:"player-view",template:__webpack_require__(940),styles:[__webpack_require__(621)]})(pe=function(t){_inherits(WebPlayerView,t);var r=web_player_view_createSuper(WebPlayerView);function WebPlayerView(){var t;return _classCallCheck(this,WebPlayerView),(t=r.call(this)).slideView=void 0,t.mediaControls=void 0,t.idleHandle=void 0,t.idleTime=void 0,t.resetIdleHandler=void 0,t.showControlsHandler=void 0,t}return _createClass(WebPlayerView,[{key:"connectedCallback",value:function connectedCallback(){var t=this;this.resetIdleHandler=this.resetIdle.bind(this),this.showControlsHandler=function(){t.showControls(),t.initHideControls()},this.mediaControls.show(),this.slideView.repaint(),this.setVolume(0)}},{key:"getAudioElement",value:function getAudioElement(){return this.mediaControls.getAudioElement()}},{key:"getSlideView",value:function getSlideView(){return this.slideView}},{key:"setDuration",value:function setDuration(t){this.mediaControls.setDuration(t)}},{key:"setVolume",value:function setVolume(t){this.mediaControls.setVolume(t)}},{key:"setTime",value:function setTime(t){this.mediaControls.setTime(t)}},{key:"setMuted",value:function setMuted(t){this.mediaControls.setMuted(t)}},{key:"setFullscreen",value:function setFullscreen(t){this.mediaControls.setFullscreen(t)}},{key:"setMediaState",value:function setMediaState(t){t===Y.Started?this.initHideControls():(this.shutdownIdleHandler(),this.showControls()),this.mediaControls.setMediaState(t)}},{key:"setOnPlay",value:function setOnPlay(t){this.mediaControls.setOnPlay(t)}},{key:"setOnPause",value:function setOnPause(t){this.mediaControls.setOnPause(t)}},{key:"setOnTime",value:function setOnTime(t){this.mediaControls.setOnTime(t)}},{key:"setOnVolume",value:function setOnVolume(t){this.mediaControls.setOnVolume(t)}},{key:"setOnMute",value:function setOnMute(t){this.mediaControls.setOnMute(t)}},{key:"setOnFullscreen",value:function setOnFullscreen(t){this.mediaControls.setOnFullscreen(t)}},{key:"setOnPrevious",value:function setOnPrevious(t){this.mediaControls.setOnPrevious(t)}},{key:"setOnNext",value:function setOnNext(t){this.mediaControls.setOnNext(t)}},{key:"showControls",value:function showControls(){this.removeEventListener("mousemove",this.showControlsHandler),this.mediaControls.show()}},{key:"initHideControls",value:function initHideControls(){this.idleHandle||(this.idleHandle=window.setInterval(this.handleIdle.bind(this),1e3),this.idleTime=Date.now(),this.addEventListener("mousemove",this.resetIdleHandler))}},{key:"resetIdle",value:function resetIdle(){this.idleTime=Date.now()}},{key:"handleIdle",value:function handleIdle(){Date.now()-this.idleTime>3e3&&(this.shutdownIdleHandler(),this.mediaControls.hide(),this.removeEventListener("mousemove",this.resetIdleHandler),this.addEventListener("mousemove",this.showControlsHandler))}},{key:"shutdownIdleHandler",value:function shutdownIdleHandler(){this.idleHandle&&(window.clearInterval(this.idleHandle),this.idleHandle=null)}}]),WebPlayerView}(j));function web_start_view_createSuper(t){var r=function web_start_view_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var ve,ye=T({selector:"start-view",template:__webpack_require__(239),styles:[__webpack_require__(803)]})(ge=function(t){_inherits(WebStartView,t);var r=web_start_view_createSuper(WebStartView);function WebStartView(){var t;_classCallCheck(this,WebStartView);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=r.call.apply(r,[this].concat(o))).onOpenClassroom=void 0,t.openRecordingButton=void 0,t.openStreamButton=void 0,t.classrooms=void 0,t}return _createClass(WebStartView,[{key:"connectedCallback",value:function connectedCallback(){this.render()}},{key:"setClassrooms",value:function setClassrooms(t){var r=this;this.classrooms=t,this.render(),this.querySelectorAll(".classroom-item").forEach((function(t,i){t.addEventListener("click",(function(){r.onOpenClassroom&&r.onOpenClassroom(r.classrooms[i])}))}))}},{key:"setOnOpenClassroom",value:function setOnOpenClassroom(t){this.onOpenClassroom=t}},{key:"setOnOpenRecording",value:function setOnOpenRecording(t){this.openRecordingButton.addEventListener("change",(function(r){var i=r.target.files[0];t(i)}),!1)}},{key:"setOnOpenStream",value:function setOnOpenStream(t){}},{key:"formatClassroomDate",value:function formatClassroomDate(){return function(t,r){var i=parseInt(r(t)),o=new Date(i);return o.getHours()+":"+o.getMinutes()}}}]),WebStartView}(j))||ge;function web_toolbar_view_createSuper(t){var r=function web_toolbar_view_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var _e;T({selector:"toolbar-view",template:__webpack_require__(924),styles:[__webpack_require__(601)]})(ve=function(t){_inherits(WebToolbarView,t);var r=web_toolbar_view_createSuper(WebToolbarView);function WebToolbarView(){var t;return _classCallCheck(this,WebToolbarView),(t=r.call(this)).openRecordingButton=void 0,t.sidebarPosSelect=void 0,t.search=void 0,t}return _createClass(WebToolbarView,[{key:"setSidebarPosition",value:function setSidebarPosition(){throw new Error("Method not implemented.")}},{key:"setOnSiderbarPosition",value:function setOnSiderbarPosition(t){this.sidebarPosSelect.valueProperty.subscribe(t)}},{key:"setOnSearch",value:function setOnSearch(t){this.search.searchFunction=t}},{key:"setOnSearchPrevious",value:function setOnSearchPrevious(t){this.search.onSearchBackward=t}},{key:"setOnSearchNext",value:function setOnSearchNext(t){this.search.onSearchForward=t}},{key:"setOnOpenRecording",value:function setOnOpenRecording(t){}}]),WebToolbarView}(j));!function(t){t.TOP="top",t.RIGHT="right",t.BOTTOM="bottom",t.LEFT="left",t.NONE="none"}(_e||(_e={}));var me,be=function(){function SideUtil(){_classCallCheck(this,SideUtil)}return _createClass(SideUtil,null,[{key:"valueOf",value:function valueOf(t){return _e[t.toUpperCase()]}}]),SideUtil}();function web_playback_view_createSuper(t){var r=function web_playback_view_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Ae,Se=T({selector:"web-playback-view",template:__webpack_require__(801),styles:[__webpack_require__(409)]})(me=function(t){_inherits(WebPlaybackView,t);var r=web_playback_view_createSuper(WebPlaybackView);function WebPlaybackView(){var t;return _classCallCheck(this,WebPlaybackView),(t=r.call(this)).sidebarLeft=void 0,t.sidebarRight=void 0,t.toolbar=void 0,t.player=void 0,t.sidebar=void 0,t}return _createClass(WebPlaybackView,[{key:"getToolbarView",value:function getToolbarView(){return this.toolbar}},{key:"getSidebarView",value:function getSidebarView(){return this.sidebar}},{key:"getPlayerView",value:function getPlayerView(){return this.player}},{key:"setSidebarPosition",value:function setSidebarPosition(t){switch(t){case _e.LEFT:this.sidebarLeft.appendChild(this.sidebar);break;case _e.RIGHT:this.sidebarRight.appendChild(this.sidebar);break;case _e.NONE:this.sidebarLeft.contains(this.sidebar)&&this.sidebarLeft.removeChild(this.sidebar),this.sidebarRight.contains(this.sidebar)&&this.sidebarRight.removeChild(this.sidebar)}}}]),WebPlaybackView}(j))||me;function web_stream_playback_view_createSuper(t){var r=function web_stream_playback_view_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var we=T({selector:"web-stream-playback-view",template:__webpack_require__(861),styles:[__webpack_require__(382)]})(Ae=function(t){_inherits(WebStreamPlaybackView,t);var r=web_stream_playback_view_createSuper(WebStreamPlaybackView);function WebStreamPlaybackView(){var t;return _classCallCheck(this,WebStreamPlaybackView),(t=r.call(this)).player=void 0,t}return _createClass(WebStreamPlaybackView,[{key:"getPlayerView",value:function getPlayerView(){return this.player}}]),WebStreamPlaybackView}(j))||Ae,xe=Symbol(),Ce=Symbol(),ke=Symbol(),Pe=function(){function ItemSource(t){var r=t.getLength,i=t.item,o=t.key;if(_classCallCheck(this,ItemSource),"function"!=typeof r)throw new TypeError("getLength option must be a function");if("function"!=typeof i)throw new TypeError("item option must be a function");if("function"!=typeof o)throw new TypeError("key option must be a function");this[xe]=r,this[Ce]=i,this[ke]=o}return _createClass(ItemSource,[{key:"length",get:function get(){return this[xe]()}}],[{key:"fromArray",value:function fromArray(t,r){if(!Array.isArray(t))throw new TypeError("First argument to fromArray() must be an array");if("function"!=typeof r&&void 0!==r)throw new TypeError("Second argument to fromArray() must be a function or undefined");return new this({getLength:function getLength(){return t.length},item:function item(r){return t[r]},key:function key(i){return r?r(t[i],i):i}})}}]),ItemSource}();function _defineProperty(t,r,i){return r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}var Re=function(){function Layout1dBase(t){_classCallCheck(this,Layout1dBase),this._physicalMin=0,this._physicalMax=0,this._first=-1,this._last=-1,this._latestCoords={left:0,top:0},this._itemSize={width:100,height:100},this._spacing=0,this._sizeDim="height",this._secondarySizeDim="width",this._positionDim="top",this._secondaryPositionDim="left",this._direction="vertical",this._scrollPosition=0,this._scrollError=0,this._viewportSize={width:0,height:0},this._totalItems=0,this._scrollSize=1,this._overhang=150,this._pendingReflow=!1,this._scrollToIndex=-1,this._scrollToAnchor=0,this._listeners=new Map,Object.assign(this,t)}return _createClass(Layout1dBase,[{key:"addEventListener",value:function addEventListener(t,r,i){t in this._listeners||(this._listeners[t]=[]),this._listeners[t].push({target:this,listener:r,options:i})}},{key:"dispatchEvent",value:function dispatchEvent(t){if(!(t.type in this._listeners))return!0;for(var r=this._listeners[t.type].slice(),i=0,o=r.length;i<o;i++)"function"==typeof r[i].listener?r[i].listener.call(r[i].target,this):r[i].listener.handleEvent(t);return!t.defaultPrevented}},{key:"removeEventListener",value:function removeEventListener(t,r,i){if(t in this._listeners)for(var o=this._listeners[t],a=0,l=o.length;a<l;a++)if(o[a].listener===r)return void o.splice(a,1)}},{key:"totalItems",get:function get(){return this._totalItems},set:function set(t){t!==this._totalItems&&(this._totalItems=t,this._scheduleReflow())}},{key:"direction",get:function get(){return this._direction},set:function set(t){(t="horizontal"===t?t:"vertical")!==this._direction&&(this._direction=t,this._sizeDim="horizontal"===t?"width":"height",this._secondarySizeDim="horizontal"===t?"height":"width",this._positionDim="horizontal"===t?"left":"top",this._secondaryPositionDim="horizontal"===t?"top":"left",this._scheduleReflow())}},{key:"itemSize",get:function get(){return this._itemSize},set:function set(t){var r=this._itemDim1,i=this._itemDim2;Object.assign(this._itemSize,t),r===this._itemDim1&&i===this._itemDim2||(i!==this._itemDim2?this._itemDim2Changed():this._scheduleReflow())}},{key:"spacing",get:function get(){return this._spacing},set:function set(t){t!==this._spacing&&(this._spacing=t,this._scheduleReflow())}},{key:"viewportSize",get:function get(){return this._viewportSize},set:function set(t){var r=this._viewDim1,i=this._viewDim2;Object.assign(this._viewportSize,t),i!==this._viewDim2?this._viewDim2Changed():r!==this._viewDim1&&this._checkThresholds()}},{key:"viewportScroll",get:function get(){return this._latestCoords},set:function set(t){Object.assign(this._latestCoords,t);var r=this._scrollPosition;this._scrollPosition=this._latestCoords[this._positionDim],r!==this._scrollPosition&&this._scrollPositionChanged(r,this._scrollPosition),this._checkThresholds()}},{key:"_delta",get:function get(){return this._itemDim1+this._spacing}},{key:"_itemDim1",get:function get(){return this._itemSize[this._sizeDim]}},{key:"_itemDim2",get:function get(){return this._itemSize[this._secondarySizeDim]}},{key:"_viewDim1",get:function get(){return this._viewportSize[this._sizeDim]}},{key:"_viewDim2",get:function get(){return this._viewportSize[this._secondarySizeDim]}},{key:"_num",get:function get(){return-1===this._first||-1===this._last?0:this._last-this._first+1}},{key:"reflowIfNeeded",value:function reflowIfNeeded(){this._pendingReflow&&(this._pendingReflow=!1,this._reflow())}},{key:"scrollToIndex",value:function scrollToIndex(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"start";if(Number.isFinite(t)){switch(t=Math.min(this.totalItems,Math.max(0,t)),this._scrollToIndex=t,"nearest"===r&&(r=t>this._first+this._num/2?"end":"start"),r){case"start":this._scrollToAnchor=0;break;case"center":this._scrollToAnchor=.5;break;case"end":this._scrollToAnchor=1;break;default:throw new TypeError("position must be one of: start, center, end, nearest")}this._scheduleReflow(),this.reflowIfNeeded()}}},{key:"_scheduleReflow",value:function _scheduleReflow(){this._pendingReflow=!0}},{key:"_reflow",value:function _reflow(){var t=this._first,r=this._last,i=this._scrollSize;this._updateScrollSize(),this._getActiveItems(),this._scrollIfNeeded(),this._scrollSize!==i&&this._emitScrollSize(),-1===this._first&&-1===this._last?this._emitRange():(this._first!==t||this._last!==r||this._spacingChanged)&&(this._emitRange(),this._emitChildPositions()),this._emitScrollError()}},{key:"_updateScrollSize",value:function _updateScrollSize(){this._scrollSize=Math.max(1,this._totalItems*this._delta)}},{key:"_checkThresholds",value:function _checkThresholds(){if(0===this._viewDim1&&this._num>0)this._scheduleReflow();else{var t=Math.max(0,this._scrollPosition-this._overhang),r=Math.min(this._scrollSize,this._scrollPosition+this._viewDim1+this._overhang);(this._physicalMin>t||this._physicalMax<r)&&this._scheduleReflow()}}},{key:"_scrollIfNeeded",value:function _scrollIfNeeded(){if(-1!==this._scrollToIndex){var t=this._scrollToIndex,r=this._scrollToAnchor,i=this._getItemPosition(t)[this._positionDim],o=this._getItemSize(t)[this._sizeDim],a=this._scrollPosition+this._viewDim1*r,l=i+o*r,c=Math.floor(Math.min(this._scrollSize-this._viewDim1,Math.max(0,this._scrollPosition-a+l)));this._scrollError+=this._scrollPosition-c,this._scrollPosition=c}}},{key:"_emitRange",value:function _emitRange(t){var r=Object.assign({first:this._first,last:this._last,num:this._num,stable:!0},t);this.dispatchEvent(new CustomEvent("rangechange",{detail:r}))}},{key:"_emitScrollSize",value:function _emitScrollSize(){var t=_defineProperty({},this._sizeDim,this._scrollSize);this.dispatchEvent(new CustomEvent("scrollsizechange",{detail:t}))}},{key:"_emitScrollError",value:function _emitScrollError(){if(this._scrollError){var t,r=(_defineProperty(t={},this._positionDim,this._scrollError),_defineProperty(t,this._secondaryPositionDim,0),t);this.dispatchEvent(new CustomEvent("scrollerrorchange",{detail:r})),this._scrollError=0}}},{key:"_emitChildPositions",value:function _emitChildPositions(){for(var t={},r=this._first;r<=this._last;r++)t[r]=this._getItemPosition(r);this.dispatchEvent(new CustomEvent("itempositionchange",{detail:t}))}},{key:"_itemDim2Changed",value:function _itemDim2Changed(){}},{key:"_viewDim2Changed",value:function _viewDim2Changed(){}},{key:"_scrollPositionChanged",value:function _scrollPositionChanged(t,r){var i=this._scrollSize-this._viewDim1;(t<i||r<i)&&(this._scrollToIndex=-1)}},{key:"_getActiveItems",value:function _getActiveItems(){}},{key:"_getItemPosition",value:function _getItemPosition(t){}},{key:"_getItemSize",value:function _getItemSize(t){var r;return _defineProperty(r={},this._sizeDim,this._itemDim1),_defineProperty(r,this._secondarySizeDim,this._itemDim2),r}}]),Layout1dBase}();function Layout1dGrid_createSuper(t){var r=function Layout1dGrid_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Te=function(t){_inherits(Layout1dGrid,t);var r=Layout1dGrid_createSuper(Layout1dGrid);function Layout1dGrid(t){var i;return _classCallCheck(this,Layout1dGrid),(i=r.call(this,t))._rolumns=1,i}return _createClass(Layout1dGrid,[{key:"updateItemSizes",value:function updateItemSizes(t){var r=Object.values(t)[0];r&&(this.itemSize=r)}},{key:"_viewDim2Changed",value:function _viewDim2Changed(){this._defineGrid()}},{key:"_itemDim2Changed",value:function _itemDim2Changed(){this._defineGrid()}},{key:"_getActiveItems",value:function _getActiveItems(){var t=Math.max(0,this._scrollPosition-this._overhang),r=Math.min(this._scrollSize,this._scrollPosition+this._viewDim1+this._overhang),i=Math.floor(t/this._delta),o=Math.ceil(r/this._delta)-1;this._first=i*this._rolumns,this._last=Math.min((o+1)*this._rolumns-1,this._totalItems),this._physicalMin=this._delta*i,this._physicalMax=this._delta*(o+1)}},{key:"_getItemPosition",value:function _getItemPosition(t){var r;return _defineProperty(r={},this._positionDim,Math.floor(t/this._rolumns)*this._delta),_defineProperty(r,this._secondaryPositionDim,this._spacing+t%this._rolumns*(this._spacing+this._itemDim2)),r}},{key:"_defineGrid",value:function _defineGrid(){var t=this._spacing;this._rolumns=Math.max(1,Math.floor(this._viewDim2/this._itemDim2)),this._rolumns>1&&(this._spacing=this._viewDim2%(this._rolumns*this._itemDim2)/(this._rolumns+1)),this._spacingChanged=!(t===this._spacing),this._scheduleReflow()}},{key:"_updateScrollSize",value:function _updateScrollSize(){this._scrollSize=Math.max(1,Math.ceil(this._totalItems/this._rolumns)*this._delta)}}]),Layout1dGrid}(Re);function Layout1d_createSuper(t){var r=function Layout1d_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Ee=function(t){_inherits(Layout1d,t);var r=Layout1d_createSuper(Layout1d);function Layout1d(t){var i;return _classCallCheck(this,Layout1d),(i=r.call(this,t))._physicalItems=new Map,i._newPhysicalItems=new Map,i._metrics=new Map,i._anchorIdx=null,i._anchorPos=null,i._stable=!0,i._needsRemeasure=!1,i._nMeasured=0,i._tMeasured=0,i._estimate=!0,i}return _createClass(Layout1d,[{key:"updateItemSizes",value:function updateItemSizes(t){var r=this;Object.keys(t).forEach((function(i){var o=t[i],a=r._getMetrics(i),l=a[r._sizeDim];a.width=o.width+(o.marginLeft||0)+(o.marginRight||0),a.height=o.height+(o.marginTop||0)+(o.marginBottom||0);var c,u=a[r._sizeDim],h=r._getPhysicalItem(Number(i));h&&(void 0!==u&&(h.size=u,void 0===l?(c=u,r._nMeasured++):c=u-l),r._tMeasured=r._tMeasured+c)})),this._nMeasured?(this._updateItemSize(),this._scheduleReflow()):console.warn("No items measured yet.")}},{key:"_updateItemSize",value:function _updateItemSize(){this._itemSize[this._sizeDim]=Math.round(this._tMeasured/this._nMeasured)}},{key:"_getMetrics",value:function _getMetrics(t){return this._metrics[t]=this._metrics[t]||{}}},{key:"_getPhysicalItem",value:function _getPhysicalItem(t){return this._newPhysicalItems.get(t)||this._physicalItems.get(t)}},{key:"_getSize",value:function _getSize(t){var r=this._getPhysicalItem(t);return r&&r.size}},{key:"_getPosition",value:function _getPosition(t){var r=this._physicalItems.get(t);return r?r.pos:t*this._delta+this._spacing}},{key:"_calculateAnchor",value:function _calculateAnchor(t,r){return 0===t?0:r>this._scrollSize-this._viewDim1?this._totalItems-1:Math.max(0,Math.min(this._totalItems-1,Math.floor((t+r)/2/this._delta)))}},{key:"_getAnchor",value:function _getAnchor(t,r){if(0===this._physicalItems.size)return this._calculateAnchor(t,r);if(this._first<0)return console.error("_getAnchor: negative _first"),this._calculateAnchor(t,r);if(this._last<0)return console.error("_getAnchor: negative _last"),this._calculateAnchor(t,r);var i=this._getPhysicalItem(this._first),o=this._getPhysicalItem(this._last),a=i.pos,l=a+i.size,c=o.pos,u=c+o.size;if(u<t)return this._calculateAnchor(t,r);if(a>r)return this._calculateAnchor(t,r);if(a>=t||l>=t)return this._first;if(u<=r||c<=r)return this._last;for(var h=this._last,d=this._first;;){var p=Math.round((h+d)/2),g=this._physicalItems.get(p),v=g.pos,y=v+g.size;if(v>=t&&v<=r||y>=t&&y<=r)return p;y<t?d=p+1:v>r&&(h=p-1)}}},{key:"_getActiveItems",value:function _getActiveItems(){if(0===this._viewDim1||0===this._totalItems)this._clearItems();else{var t=Math.min(this._scrollSize,this._scrollPosition+this._viewDim1+this._overhang),r=Math.max(0,t-this._viewDim1-2*this._overhang);this._getItems(r,t)}}},{key:"_clearItems",value:function _clearItems(){this._first=-1,this._last=-1,this._physicalMin=0,this._physicalMax=0;var t=this._newPhysicalItems;this._newPhysicalItems=this._physicalItems,this._newPhysicalItems.clear(),this._physicalItems=t,this._stable=!0}},{key:"_getItems",value:function _getItems(t,r){var i=this._newPhysicalItems;null!==this._anchorIdx&&null!==this._anchorPos||(this._anchorIdx=this._getAnchor(t,r),this._anchorPos=this._getPosition(this._anchorIdx));var o=this._getSize(this._anchorIdx);void 0===o&&(o=this._itemDim1);var a=0;for(this._anchorPos+o+this._spacing<t&&(a=t-(this._anchorPos+o+this._spacing)),this._anchorPos>r&&(a=r-this._anchorPos),a&&(this._scrollPosition-=a,t-=a,r-=a,this._scrollError+=a),i.set(this._anchorIdx,{pos:this._anchorPos,size:o}),this._first=this._last=this._anchorIdx,this._physicalMin=this._physicalMax=this._anchorPos,this._stable=!0;this._physicalMin>t&&this._first>0;){var l=this._getSize(--this._first);void 0===l&&(this._stable=!1,l=this._itemDim1);var c=this._physicalMin-=l+this._spacing;if(i.set(this._first,{pos:c,size:l}),!1===this._stable&&!1===this._estimate)break}for(;this._physicalMax<r&&this._last<this._totalItems;){var u=this._getSize(this._last);if(void 0===u&&(this._stable=!1,u=this._itemDim1),i.set(this._last++,{pos:this._physicalMax,size:u}),!1===this._stable&&!1===this._estimate)break;this._physicalMax+=u+this._spacing}this._last--;var h=this._calculateError();h&&(this._physicalMin-=h,this._physicalMax-=h,this._anchorPos-=h,this._scrollPosition-=h,i.forEach((function(t){return t.pos-=h})),this._scrollError+=h),this._stable&&(this._newPhysicalItems=this._physicalItems,this._newPhysicalItems.clear(),this._physicalItems=i)}},{key:"_calculateError",value:function _calculateError(){return 0===this._first?this._physicalMin:this._physicalMin<=0?this._physicalMin-this._first*this._delta:this._last===this._maxIdx?this._physicalMax-this._scrollSize:this._physicalMax>=this._scrollSize?this._physicalMax-this._scrollSize+(this._totalItems-1-this._last)*this._delta:0}},{key:"_updateScrollSize",value:function _updateScrollSize(){_get(_getPrototypeOf(Layout1d.prototype),"_updateScrollSize",this).call(this),this._scrollSize=Math.max(this._physicalMax,this._scrollSize)}},{key:"_reflow",value:function _reflow(){var t=this._first,r=this._last,i=this._scrollSize;this._updateScrollSize(),this._getActiveItems(),this._scrollIfNeeded(),this._scrollSize!==i&&this._emitScrollSize(),this._emitRange(),-1===this._first&&-1===this._last?this._resetReflowState():this._first!==t||this._last!==r||this._needsRemeasure?(this._emitChildPositions(),this._emitScrollError()):(this._emitChildPositions(),this._emitScrollError(),this._resetReflowState())}},{key:"_resetReflowState",value:function _resetReflowState(){this._anchorIdx=null,this._anchorPos=null,this._stable=!0}},{key:"_getItemPosition",value:function _getItemPosition(t){var r;return _defineProperty(r={},this._positionDim,this._getPosition(t)),_defineProperty(r,this._secondaryPositionDim,0),r}},{key:"_getItemSize",value:function _getItemSize(t){var r;return _defineProperty(r={},this._sizeDim,this._getSize(t)||this._itemDim1),_defineProperty(r,this._secondarySizeDim,this._itemDim2),r}},{key:"_viewDim2Changed",value:function _viewDim2Changed(){this._needsRemeasure=!0,this._scheduleReflow()}},{key:"_emitRange",value:function _emitRange(){var t=this._needsRemeasure,r=this._stable;this._needsRemeasure=!1,_get(_getPrototypeOf(Layout1d.prototype),"_emitRange",this).call(this,{remeasure:t,stable:r})}}]),Layout1d}(Re);function set(t,r,i,o){return(set="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function set(t,r,i,o){var a,l=_superPropBase(t,r);if(l){if((a=Object.getOwnPropertyDescriptor(l,r)).set)return a.set.call(o,i),!0;if(!a.writable)return!1}if(a=Object.getOwnPropertyDescriptor(o,r)){if(!a.writable)return!1;a.value=i,Object.defineProperty(o,r,a)}else _defineProperty(o,r,i);return!0})(t,r,i,o)}function _set(t,r,i,o,a){if(!set(t,r,i,o||t)&&a)throw new Error("failed to set property");return i}var Le=function(){function VirtualRepeater(t){_classCallCheck(this,VirtualRepeater),this._createElementFn=null,this._updateElementFn=null,this._recycleElementFn=null,this._elementKeyFn=null,this._measureCallback=null,this._totalItems=0,this._num=1/0,this._first=0,this._last=0,this._prevFirst=0,this._prevLast=0,this._needsReset=!1,this._needsRemeasure=!1,this._pendingRender=null,this._container=null,this._ordered=[],this._active=new Map,this._prevActive=new Map,this._keyToChild=new Map,this._childToKey=new WeakMap,this._indexToMeasure={},this.__incremental=!1,t&&Object.assign(this,t)}return _createClass(VirtualRepeater,[{key:"container",get:function get(){return this._container},set:function set(t){var r=this;t!==this._container&&(this._container&&this._ordered.forEach((function(t){return r._removeChild(t)})),this._container=t,t?this._ordered.forEach((function(t){return r._insertBefore(t,null)})):(this._ordered.length=0,this._active.clear(),this._prevActive.clear()),this.requestReset())}},{key:"createElement",get:function get(){return this._createElementFn},set:function set(t){t!==this._createElementFn&&(this._createElementFn=t,this._keyToChild.clear(),this.requestReset())}},{key:"updateElement",get:function get(){return this._updateElementFn},set:function set(t){t!==this._updateElementFn&&(this._updateElementFn=t,this.requestReset())}},{key:"recycleElement",get:function get(){return this._recycleElementFn},set:function set(t){t!==this._recycleElementFn&&(this._recycleElementFn=t,this.requestReset())}},{key:"elementKey",get:function get(){return this._elementKeyFn},set:function set(t){t!==this._elementKeyFn&&(this._elementKeyFn=t,this._keyToChild.clear(),this.requestReset())}},{key:"first",get:function get(){return this._first},set:function set(t){if("number"!=typeof t)throw new Error("New value must be a number.");var r=Math.max(0,Math.min(t,this._totalItems-this._num));r!==this._first&&(this._first=r,this._scheduleRender())}},{key:"num",get:function get(){return this._num},set:function set(t){if("number"!=typeof t)throw new Error("New value must be a number.");t!==this._num&&(this._num=t,this.first=this._first,this._scheduleRender())}},{key:"totalItems",get:function get(){return this._totalItems},set:function set(t){if("number"!=typeof t)throw new Error("New value must be a number.");t!==this._totalItems&&(this._totalItems=t,this.first=this._first,this.requestReset())}},{key:"_incremental",get:function get(){return this.__incremental},set:function set(t){t!==this.__incremental&&(this.__incremental=t,this._scheduleRender())}},{key:"requestReset",value:function requestReset(){this._needsReset=!0,this._scheduleRender()}},{key:"requestRemeasure",value:function requestRemeasure(){this._needsRemeasure=!0,this._scheduleRender()}},{key:"_shouldRender",value:function _shouldRender(){return Boolean(this.container&&this.createElement)}},{key:"_scheduleRender",value:function _scheduleRender(){var t=this;this._pendingRender||(this._pendingRender=requestAnimationFrame((function(){t._pendingRender=null,t._shouldRender()&&t._render()})))}},{key:"_toMeasure",get:function get(){var t=this;return this._ordered.reduce((function(r,i,o){var a=t._first+o;return(t._needsReset||t._needsRemeasure||a<t._prevFirst||a>t._prevLast)&&(r.indices.push(a),r.children.push(i)),r}),{indices:[],children:[]})}},{key:"_measureChildren",value:function _measureChildren(t){var r=this,i=t.indices,o=t.children.map((function(t,o){return r._indexToMeasure[i[o]]||r._measureChild(t)})).reduce((function(t,o,a){return t[i[a]]=r._indexToMeasure[i[a]]=o,t}),{});this._measureCallback(o)}},{key:"_render",value:function _render(){var t=this,r=this._first!==this._prevFirst||this._num!==this._prevNum;(r||this._needsReset)&&(this._last=this._first+Math.min(this._num,this._totalItems-this._first)-1,(this._num||this._prevNum)&&(this._needsReset?this._reset(this._first,this._last):(this._discardHead(),this._discardTail(),this._addHead(),this._addTail()))),(this._needsRemeasure||this._needsReset)&&(this._indexToMeasure={});var i=this._num>0&&this._measureCallback&&(r||this._needsRemeasure||this._needsReset)?this._toMeasure:null;this._incremental||(this._prevActive.forEach((function(r,i){return t._unassignChild(i,r)})),this._prevActive.clear()),this._prevFirst=this._first,this._prevLast=this._last,this._prevNum=this._num,this._needsReset=!1,this._needsRemeasure=!1,this._didRender(),i&&this._measureChildren(i)}},{key:"_didRender",value:function _didRender(){}},{key:"_discardHead",value:function _discardHead(){for(var t=this._ordered,r=this._prevFirst;t.length&&r<this._first;r++)this._unassignChild(t.shift(),r)}},{key:"_discardTail",value:function _discardTail(){for(var t=this._ordered,r=this._prevLast;t.length&&r>this._last;r--)this._unassignChild(t.pop(),r)}},{key:"_addHead",value:function _addHead(){for(var t=this._first,r=Math.min(this._last,this._prevFirst-1);r>=t;r--){var i=this._assignChild(r);this._insertBefore(i,this._firstChild),this.updateElement&&this.updateElement(i,r),this._ordered.unshift(i)}}},{key:"_addTail",value:function _addTail(){for(var t=Math.max(this._first,this._prevLast+1),r=this._last,i=t;i<=r;i++){var o=this._assignChild(i);this._insertBefore(o,null),this.updateElement&&this.updateElement(o,i),this._ordered.push(o)}}},{key:"_reset",value:function _reset(t,r){var i=this._active;this._active=this._prevActive,this._prevActive=i,this._ordered.length=0;for(var o=this._firstChild,a=t;a<=r;a++){var l=this._assignChild(a);this._ordered.push(l),o?o===this._node(l)?o=this._nextSibling(l):this._insertBefore(l,o):this._childIsAttached(l)||this._insertBefore(l,null),this.updateElement&&this.updateElement(l,a)}}},{key:"_assignChild",value:function _assignChild(t){var r,i=this.elementKey?this.elementKey(t):t;return(r=this._keyToChild.get(i))?this._prevActive.delete(r):(r=this.createElement(t),this._keyToChild.set(i,r),this._childToKey.set(r,i)),this._showChild(r),this._active.set(r,t),r}},{key:"_unassignChild",value:function _unassignChild(t,r){if(this._hideChild(t),this._incremental)this._active.delete(t),this._prevActive.set(t,r);else{var i=this._childToKey.get(t);this._childToKey.delete(t),this._keyToChild.delete(i),this._active.delete(t),this.recycleElement?this.recycleElement(t,r):this._node(t).parentNode&&this._removeChild(t)}}},{key:"_firstChild",get:function get(){return this._ordered.length&&this._childIsAttached(this._ordered[0])?this._node(this._ordered[0]):null}},{key:"_node",value:function _node(t){return t}},{key:"_nextSibling",value:function _nextSibling(t){return t.nextSibling}},{key:"_insertBefore",value:function _insertBefore(t,r){this._container.insertBefore(t,r)}},{key:"_removeChild",value:function _removeChild(t){t.parentNode.removeChild(t)}},{key:"_childIsAttached",value:function _childIsAttached(t){var r=this._node(t);return r&&r.parentNode===this._container}},{key:"_hideChild",value:function _hideChild(t){t.style&&(t.style.display="none")}},{key:"_showChild",value:function _showChild(t){t.style&&(t.style.display=null)}},{key:"_measureChild",value:function _measureChild(t){var r=t.getBoundingClientRect(),i=r.width,o=r.height;return 0===i&&0===o&&(i=parseFloat(t.style.width),o=parseFloat(t.style.height)),Object.assign({width:i,height:o},function getMargins(t){var r=window.getComputedStyle(t);return{marginTop:getMarginValue(r.marginTop),marginRight:getMarginValue(r.marginRight),marginBottom:getMarginValue(r.marginBottom),marginLeft:getMarginValue(r.marginLeft)}}(t))}}]),VirtualRepeater}();function getMarginValue(t){return t=t?parseFloat(t):NaN,Number.isNaN(t)?0:t}var Ie=function(){if("undefined"!=typeof Map)return Map;function getIndex(t,r){var i=-1;return t.some((function(t,o){return t[0]===r&&(i=o,!0)})),i}return function(){function class_1(){this.__entries__=[]}return Object.defineProperty(class_1.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),class_1.prototype.get=function(t){var r=getIndex(this.__entries__,t),i=this.__entries__[r];return i&&i[1]},class_1.prototype.set=function(t,r){var i=getIndex(this.__entries__,t);~i?this.__entries__[i][1]=r:this.__entries__.push([t,r])},class_1.prototype.delete=function(t){var r=this.__entries__,i=getIndex(r,t);~i&&r.splice(i,1)},class_1.prototype.has=function(t){return!!~getIndex(this.__entries__,t)},class_1.prototype.clear=function(){this.__entries__.splice(0)},class_1.prototype.forEach=function(t,r){void 0===r&&(r=null);for(var i=0,o=this.__entries__;i<o.length;i++){var a=o[i];t.call(r,a[1],a[0])}},class_1}()}(),Oe="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,Me=void 0!==__webpack_require__.g&&__webpack_require__.g.Math===Math?__webpack_require__.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Fe="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(Me):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var De=["top","right","bottom","left","width","height","size","weight"],Ne="undefined"!=typeof MutationObserver,Be=function(){function ResizeObserverController(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function throttle(t,r){var i=!1,o=!1,a=0;function resolvePending(){i&&(i=!1,t()),o&&proxy()}function timeoutCallback(){Fe(resolvePending)}function proxy(){var t=Date.now();if(i){if(t-a<2)return;o=!0}else i=!0,o=!1,setTimeout(timeoutCallback,r);a=t}return proxy}(this.refresh.bind(this),20)}return ResizeObserverController.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},ResizeObserverController.prototype.removeObserver=function(t){var r=this.observers_,i=r.indexOf(t);~i&&r.splice(i,1),!r.length&&this.connected_&&this.disconnect_()},ResizeObserverController.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},ResizeObserverController.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},ResizeObserverController.prototype.connect_=function(){Oe&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Ne?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},ResizeObserverController.prototype.disconnect_=function(){Oe&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},ResizeObserverController.prototype.onTransitionEnd_=function(t){var r=t.propertyName,i=void 0===r?"":r;De.some((function(t){return!!~i.indexOf(t)}))&&this.refresh()},ResizeObserverController.getInstance=function(){return this.instance_||(this.instance_=new ResizeObserverController),this.instance_},ResizeObserverController.instance_=null,ResizeObserverController}(),defineConfigurable=function(t,r){for(var i=0,o=Object.keys(r);i<o.length;i++){var a=o[i];Object.defineProperty(t,a,{value:r[a],enumerable:!1,writable:!1,configurable:!0})}return t},getWindowOf=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||Me},ze=createRectInit(0,0,0,0);function toFloat(t){return parseFloat(t)||0}function getBordersSize(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return r.reduce((function(r,i){return r+toFloat(t["border-"+i+"-width"])}),0)}function getHTMLElementContentRect(t){var r=t.clientWidth,i=t.clientHeight;if(!r&&!i)return ze;var o=getWindowOf(t).getComputedStyle(t),a=function getPaddings(t){for(var r={},i=0,o=["top","right","bottom","left"];i<o.length;i++){var a=o[i],l=t["padding-"+a];r[a]=toFloat(l)}return r}(o),l=a.left+a.right,c=a.top+a.bottom,u=toFloat(o.width),h=toFloat(o.height);if("border-box"===o.boxSizing&&(Math.round(u+l)!==r&&(u-=getBordersSize(o,"left","right")+l),Math.round(h+c)!==i&&(h-=getBordersSize(o,"top","bottom")+c)),!function isDocumentElement(t){return t===getWindowOf(t).document.documentElement}(t)){var d=Math.round(u+l)-r,p=Math.round(h+c)-i;1!==Math.abs(d)&&(u-=d),1!==Math.abs(p)&&(h-=p)}return createRectInit(a.left,a.top,u,h)}var je="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof getWindowOf(t).SVGGraphicsElement}:function(t){return t instanceof getWindowOf(t).SVGElement&&"function"==typeof t.getBBox};function getContentRect(t){return Oe?je(t)?function getSVGContentRect(t){var r=t.getBBox();return createRectInit(0,0,r.width,r.height)}(t):getHTMLElementContentRect(t):ze}function createRectInit(t,r,i,o){return{x:t,y:r,width:i,height:o}}var Ue=function(){function ResizeObservation(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=createRectInit(0,0,0,0),this.target=t}return ResizeObservation.prototype.isActive=function(){var t=getContentRect(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},ResizeObservation.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},ResizeObservation}(),He=function He(t,r){var i=function createReadOnlyRect(t){var r=t.x,i=t.y,o=t.width,a=t.height,l="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(l.prototype);return defineConfigurable(c,{x:r,y:i,width:o,height:a,top:i,right:r+o,bottom:a+i,left:r}),c}(r);defineConfigurable(this,{target:t,contentRect:i})},Ve=function(){function ResizeObserverSPI(t,r,i){if(this.activeObservations_=[],this.observations_=new Ie,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=r,this.callbackCtx_=i}return ResizeObserverSPI.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof getWindowOf(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)||(r.set(t,new Ue(t)),this.controller_.addObserver(this),this.controller_.refresh())}},ResizeObserverSPI.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof getWindowOf(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)&&(r.delete(t),r.size||this.controller_.removeObserver(this))}},ResizeObserverSPI.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},ResizeObserverSPI.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(r){r.isActive()&&t.activeObservations_.push(r)}))},ResizeObserverSPI.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,r=this.activeObservations_.map((function(t){return new He(t.target,t.broadcastRect())}));this.callback_.call(t,r,t),this.clearActive()}},ResizeObserverSPI.prototype.clearActive=function(){this.activeObservations_.splice(0)},ResizeObserverSPI.prototype.hasActive=function(){return this.activeObservations_.length>0},ResizeObserverSPI}(),Ge="undefined"!=typeof WeakMap?new WeakMap:new Ie,We=function ResizeObserver(t){if(!(this instanceof ResizeObserver))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=Be.getInstance(),i=new Ve(t,r,this);Ge.set(this,i)};["observe","unobserve","disconnect"].forEach((function(t){We.prototype[t]=function(){var r;return(r=Ge.get(this))[t].apply(r,arguments)}}));const qe=void 0!==Me.ResizeObserver?Me.ResizeObserver:We;function VirtualScroller_createSuper(t){var r=function VirtualScroller_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Ye=function(t){_inherits(RangeChangeEvent,t);var r=VirtualScroller_createSuper(RangeChangeEvent);function RangeChangeEvent(t,i){var o;return _classCallCheck(this,RangeChangeEvent),(o=r.call(this,t,i))._first=Math.floor(i.first||0),o._last=Math.floor(i.last||0),o}return _createClass(RangeChangeEvent,[{key:"first",get:function get(){return this._first}},{key:"last",get:function get(){return this._last}}]),RangeChangeEvent}(_wrapNativeSuper(Event)),Qe=function(t){_inherits(VirtualScroller,t);var r=VirtualScroller_createSuper(VirtualScroller);function VirtualScroller(t){var i;return _classCallCheck(this,VirtualScroller),(i=r.call(this))._num=0,i._first=-1,i._last=-1,i._prevFirst=-1,i._prevLast=-1,i._needsUpdateView=!1,i._layout=null,i._scrollTarget=null,i._sizer=null,i._scrollSize=null,i._scrollErr=null,i._childrenPos=null,i._containerElement=null,i._containerInlineStyle=null,i._containerSize=null,i._containerRO=new qe((function(t){return i._containerSizeChanged(t[0].contentRect)})),i._skipNextChildrenSizeChanged=!1,i._childrenRO=new qe((function(t){return i._childrenSizeChanged(t)})),t&&Object.assign(_assertThisInitialized(i),t),i}return _createClass(VirtualScroller,[{key:"container",get:function get(){return _get(_getPrototypeOf(VirtualScroller.prototype),"container",this)},set:function set(t){_set(_getPrototypeOf(VirtualScroller.prototype),"container",t,this,!0);var r=this._containerElement,i=t&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE?t.host:t;r!==i&&(this._containerRO.disconnect(),this._containerSize=null,r?(this._containerInlineStyle?r.setAttribute("style",this._containerInlineStyle):r.removeAttribute("style"),this._containerInlineStyle=null,r===this._scrollTarget&&(r.removeEventListener("scroll",this,{passive:!0}),this._sizer&&this._sizer.remove())):addEventListener("scroll",this,{passive:!0}),this._containerElement=i,i&&(this._containerInlineStyle=i.getAttribute("style")||null,i===this._scrollTarget&&(this._sizer=this._sizer||this._createContainerSizer(),this._container.prepend(this._sizer)),this._scheduleUpdateView(),this._containerRO.observe(i)))}},{key:"layout",get:function get(){return this._layout},set:function set(t){t!==this._layout&&(this._layout&&(this._measureCallback=null,this._layout.removeEventListener("scrollsizechange",this),this._layout.removeEventListener("scrollerrorchange",this),this._layout.removeEventListener("itempositionchange",this),this._layout.removeEventListener("rangechange",this),this._containerElement&&this._sizeContainer()),this._layout=t,this._layout&&("function"==typeof this._layout.updateItemSizes&&(this._measureCallback=this._layout.updateItemSizes.bind(this._layout),this.requestRemeasure()),this._layout.addEventListener("scrollsizechange",this),this._layout.addEventListener("scrollerrorchange",this),this._layout.addEventListener("itempositionchange",this),this._layout.addEventListener("rangechange",this),this._scheduleUpdateView()))}},{key:"scrollTarget",get:function get(){return this._scrollTarget},set:function set(t){t===window&&(t=null),this._scrollTarget!==t&&(this._scrollTarget&&(this._scrollTarget.removeEventListener("scroll",this,{passive:!0}),this._sizer&&this._scrollTarget===this._containerElement&&this._sizer.remove()),this._scrollTarget=t,t&&(t.addEventListener("scroll",this,{passive:!0}),t===this._containerElement&&(this._sizer=this._sizer||this._createContainerSizer(),this._container.prepend(this._sizer))))}},{key:"_render",value:function _render(){var t=this;for(this._childrenRO.disconnect(),this._layout.totalItems=this.totalItems,this._needsUpdateView&&(this._needsUpdateView=!1,this._updateView()),this._layout.reflowIfNeeded();this._pendingRender&&(cancelAnimationFrame(this._pendingRender),this._pendingRender=null),this._sizeContainer(this._scrollSize),this._scrollErr&&(this._correctScrollError(this._scrollErr),this._scrollErr=null),_get(_getPrototypeOf(VirtualScroller.prototype),"_render",this).call(this),this._layout.reflowIfNeeded(),this._pendingRender;);this._skipNextChildrenSizeChanged=!0,this._kids.forEach((function(r){return t._childrenRO.observe(r)}))}},{key:"_didRender",value:function _didRender(){this._childrenPos&&(this._positionChildren(this._childrenPos),this._childrenPos=null)}},{key:"handleEvent",value:function handleEvent(t){switch(t.type){case"scroll":this._scrollTarget&&t.target!==this._scrollTarget||this._scheduleUpdateView();break;case"scrollsizechange":this._scrollSize=t.detail,this._scheduleRender();break;case"scrollerrorchange":this._scrollErr=t.detail,this._scheduleRender();break;case"itempositionchange":this._childrenPos=t.detail,this._scheduleRender();break;case"rangechange":this._adjustRange(t.detail);break;default:console.warn("event not handled",t)}}},{key:"_createContainerSizer",value:function _createContainerSizer(){var t=document.createElement("div");return Object.assign(t.style,{position:"absolute",margin:"-2px 0 0 0",padding:0,visibility:"hidden",fontSize:"2px"}),t.innerHTML="&nbsp;",t}},{key:"_kids",get:function get(){return this._ordered}},{key:"_scheduleUpdateView",value:function _scheduleUpdateView(){this._needsUpdateView=!0,this._scheduleRender()}},{key:"_updateView",value:function _updateView(){var t,r,i,o;if(this._scrollTarget===this._containerElement)t=this._containerSize.width,r=this._containerSize.height,o=this._containerElement.scrollLeft,i=this._containerElement.scrollTop;else{var a=this._containerElement.getBoundingClientRect(),l=this._scrollTarget?this._scrollTarget.getBoundingClientRect():{top:0,left:0,width:innerWidth,height:innerHeight},c=l.width,u=l.height,h=Math.max(0,Math.min(c,a.left-l.left)),d=Math.max(0,Math.min(u,a.top-l.top));t=("vertical"===this._layout.direction?Math.max(0,Math.min(c,a.right-l.left)):c)-h,r=("vertical"===this._layout.direction?u:Math.max(0,Math.min(u,a.bottom-l.top)))-d,o=Math.max(0,-(a.x-l.left)),i=Math.max(0,-(a.y-l.top))}this._layout.viewportSize={width:t,height:r},this._layout.viewportScroll={top:i,left:o}}},{key:"_sizeContainer",value:function _sizeContainer(t){if(this._scrollTarget===this._containerElement){var r=t&&t.width?t.width-1:0,i=t&&t.height?t.height-1:0;this._sizer.style.transform="translate(".concat(r,"px, ").concat(i,"px)")}else{var o=this._containerElement.style;o.minWidth=t&&t.width?t.width+"px":null,o.minHeight=t&&t.height?t.height+"px":null}}},{key:"_positionChildren",value:function _positionChildren(t){var r=this,i=this._kids;Object.keys(t).forEach((function(o){var a=o-r._first,l=i[a];if(l){var c=t[o],u=c.top,h=c.left;l.style.position="absolute",l.style.transform="translate(".concat(h,"px, ").concat(u,"px)")}}))}},{key:"_adjustRange",value:function _adjustRange(t){this.num=t.num,this.first=t.first,this._incremental=!t.stable,t.remeasure?this.requestRemeasure():t.stable&&this._notifyStable()}},{key:"_shouldRender",value:function _shouldRender(){if(!_get(_getPrototypeOf(VirtualScroller.prototype),"_shouldRender",this).call(this)||!this._layout)return!1;if(null===this._containerSize){var t=this._containerElement.getBoundingClientRect(),r=t.width,i=t.height;this._containerSize={width:r,height:i}}return this._containerSize.width>0||this._containerSize.height>0}},{key:"_correctScrollError",value:function _correctScrollError(t){this._scrollTarget?(this._scrollTarget.scrollTop-=t.top,this._scrollTarget.scrollLeft-=t.left):window.scroll(window.scrollX-t.left,window.scrollY-t.top)}},{key:"_notifyStable",value:function _notifyStable(){var t=this.first,r=t+this.num-1;this._container.dispatchEvent(new Ye("rangechange",{first:t,last:r}))}},{key:"_containerSizeChanged",value:function _containerSizeChanged(t){var r=t.width,i=t.height;this._containerSize={width:r,height:i},this._scheduleUpdateView()}},{key:"_childrenSizeChanged",value:function _childrenSizeChanged(){this._skipNextChildrenSizeChanged?this._skipNextChildrenSizeChanged=!1:this.requestRemeasure()}}]),VirtualScroller}(Le);function virtual_scroller_createSuper(t){var r=function virtual_scroller_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Xe=Symbol(),Ke=Symbol(),$e=Symbol(),Ze=Symbol(),Je=Symbol(),et=Symbol(),tt=Symbol(),nt=Symbol(),rt=Symbol(),it=function(t){_inherits(VirtualScrollerElement,t);var r=virtual_scroller_createSuper(VirtualScrollerElement);function VirtualScrollerElement(){var t;_classCallCheck(this,VirtualScrollerElement),(t=r.call(this))[Xe]=null,t[Je]=[];var i=null;return t[Ke]=function(){if(t[Je]&&t[Je].length)return t[Je].pop();if(!i){var r=t.querySelector("template");i=r&&r.content.firstElementChild?r.content.firstElementChild:document.createElement("div")}return i.cloneNode(!0)},t[$e]=function(t,r){return t.textContent=r.toString()},t[Ze]=function(r){return t[Je].push(r)},t[et]=null,t[tt]={},t[nt]=!1,t}return _createClass(VirtualScrollerElement,[{key:"connectedCallback",value:function connectedCallback(){this[nt]||(this.attachShadow({mode:"open"}).innerHTML="\n<style>\n  :host {\n    display: block;\n    position: relative;\n    contain: strict;\n    height: 100%;\n    overflow: auto;\n    -webkit-overflow-scrolling: touch;\n  }\n  :host([hidden]) {\n    display: none;\n  }\n  ::slotted(*) {\n    box-sizing: border-box;\n  }\n  :host([layout=vertical]) ::slotted(*) {\n    width: 100%;\n  }\n  :host([layout=horizontal]) ::slotted(*) {\n    height: 100%;\n  }\n</style>\n<slot></slot>",this.layout||(this.layout="vertical"),this[nt]=!0),this[rt]()}},{key:"attributeChangedCallback",value:function attributeChangedCallback(){this[rt]()}},{key:"layout",get:function get(){return this.getAttribute("layout")},set:function set(t){this.setAttribute("layout",t)}},{key:"itemSource",get:function get(){return this[et]},set:function set(t){this[et]=Array.isArray(t)?Pe.fromArray(t):t,this[rt]()}},{key:"createElement",get:function get(){return this[Ke]},set:function set(t){this[Je]&&(this.recycleElement=null),this[Ke]=t,this[tt].createElement=null,this[rt]()}},{key:"updateElement",get:function get(){return this[$e]},set:function set(t){this[$e]=t,this[tt].updateElement=null,this[rt]()}},{key:"recycleElement",get:function get(){return this[Ze]},set:function set(t){this[Je]=null,this[Ze]=t,this[tt].recycleElement=null,this[rt]()}},{key:"itemsChanged",value:function itemsChanged(){this[Xe]&&(this[rt](),this[Xe].requestReset())}},{key:"scrollToIndex",value:function scrollToIndex(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.position,o=void 0===i?"start":i;this[Xe]&&this[Xe].layout.scrollToIndex(t,o)}},{key:rt,value:function value(){var t=this;if(this[nt]&&this.createElement){this[Xe]||(this[Xe]=new Qe({container:this,scrollTarget:this}));var r=this[Xe],i=this.layout,o=i.endsWith("-grid")?Te:Ee,a=i.startsWith("horizontal")?"horizontal":"vertical",l=r.layout instanceof o&&r.layout.direction===a?r.layout:new o({direction:a}),c=this[tt],u=c.createElement,h=c.updateElement,d=c.recycleElement;u||(u=this[tt].createElement=function(r){return t.createElement(t.itemSource[Ce](r),r)}),this.updateElement&&!h&&(h=this[tt].updateElement=function(r,i){return t.updateElement(r,t.itemSource[Ce](i),i)}),this.recycleElement&&!d&&(d=this[tt].recycleElement=function(r,i){return t.recycleElement(r,t.itemSource[Ce](i),i)});var p=this.itemSource?this.itemSource[ke]:null,g=this.itemSource?this.itemSource.length:0;Object.assign(r,{layout:l,createElement:u,updateElement:h,recycleElement:d,elementKey:p,totalItems:g})}}}],[{key:"observedAttributes",get:function get(){return["layout"]}}]),VirtualScrollerElement}(_wrapNativeSuper(HTMLElement));customElements.define("virtual-scroller",it);var st,ot=function(){function WebWindowView(){_classCallCheck(this,WebWindowView),this.initialize()}return _createClass(WebWindowView,[{key:"initialize",value:function initialize(){window.onload=function(){document.body.style.visibility="visible"}}},{key:"setView",value:function setView(t){if(!(t instanceof HTMLElement))throw new Error("View is expected to be of type HTMLElement");document.body.removeChild(document.body.firstElementChild),document.body.appendChild(t)}}]),WebWindowView}(),at=function(){function Presenter(t,r){_classCallCheck(this,Presenter),this.cmdMethodMap=new Map,this.view=void 0,this.parent=void 0,this.children=void 0,this.view=t,this.parent=r,this.children=[]}return _createClass(Presenter,[{key:"destroy",value:function destroy(){this.destroyChildren()}},{key:"destroyChildren",value:function destroyChildren(){for(;this.children.length;){this.children.shift().destroy()}}},{key:"addChild",value:function addChild(t){this.children.push(t)}},{key:"execute",value:function execute(t){var r=this.cmdMethodMap.get(t.constructor.name);return r?r.call(this,t):this.parent?this.parent.execute(t):Promise.reject()}},{key:"addCommandExecuter",value:function addCommandExecuter(t,r){this.cmdMethodMap.set(t,r)}}]),Presenter}(),lt=function(){function ProgressiveDataView(t,r,i){_classCallCheck(this,ProgressiveDataView),this.dataView=void 0,this.offset=void 0,this.dataView=new DataView(t,r,i),this.offset=r||0}return _createClass(ProgressiveDataView,[{key:"byteOffset",get:function get(){return this.offset}},{key:"skip",value:function skip(t){if(this.offset+t>=this.dataView.byteLength)throw new Error("Out of bounds ".concat(this.offset+t," exceeds length ").concat(this.dataView.byteLength));this.offset+=t}},{key:"getString",value:function getString(t){for(var r="",i=-1,o=0;o<t&&0!=(i=this.getUint8());o++)r+=String.fromCharCode(i);return r}},{key:"getFloat32",value:function getFloat32(t){var r=this.dataView.getFloat32(this.offset,t);return this.offset+=4,r}},{key:"getFloat64",value:function getFloat64(t){var r=this.dataView.getFloat64(this.offset,t);return this.offset+=8,r}},{key:"getInt8",value:function getInt8(){var t=this.dataView.getInt8(this.offset);return this.offset+=1,t}},{key:"getInt16",value:function getInt16(t){var r=this.dataView.getInt16(this.offset,t);return this.offset+=2,r}},{key:"getInt32",value:function getInt32(t){var r=this.dataView.getInt32(this.offset,t);return this.offset+=4,r}},{key:"getUint8",value:function getUint8(){var t=this.dataView.getUint8(this.offset);return this.offset+=1,t}},{key:"getUint16",value:function getUint16(t){var r=this.dataView.getUint16(this.offset,t);return this.offset+=2,r}},{key:"getUint32",value:function getUint32(t){var r=this.dataView.getUint32(this.offset,t);return this.offset+=4,r}}]),ProgressiveDataView}();function pen_point_createSuper(t){var r=function pen_point_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}!function(t){t[t.TOOL_BEGIN=0]="TOOL_BEGIN",t[t.TOOL_EXECUTE=1]="TOOL_EXECUTE",t[t.TOOL_END=2]="TOOL_END",t[t.PEN=3]="PEN",t[t.HIGHLIGHTER=4]="HIGHLIGHTER",t[t.POINTER=5]="POINTER",t[t.ARROW=6]="ARROW",t[t.LINE=7]="LINE",t[t.RECTANGLE=8]="RECTANGLE",t[t.ELLIPSE=9]="ELLIPSE",t[t.TEXT=10]="TEXT",t[t.TEXT_CHANGE=11]="TEXT_CHANGE",t[t.TEXT_FONT_CHANGE=12]="TEXT_FONT_CHANGE",t[t.TEXT_LOCATION_CHANGE=13]="TEXT_LOCATION_CHANGE",t[t.TEXT_REMOVE=14]="TEXT_REMOVE",t[t.TEXT_SELECTION=15]="TEXT_SELECTION",t[t.LATEX=16]="LATEX",t[t.LATEX_FONT_CHANGE=17]="LATEX_FONT_CHANGE",t[t.UNDO=18]="UNDO",t[t.REDO=19]="REDO",t[t.CLONE=20]="CLONE",t[t.SELECT=21]="SELECT",t[t.SELECT_GROUP=22]="SELECT_GROUP",t[t.RUBBER=23]="RUBBER",t[t.CLEAR_SHAPES=24]="CLEAR_SHAPES",t[t.PANNING=25]="PANNING",t[t.EXTEND_VIEW=26]="EXTEND_VIEW",t[t.ZOOM=27]="ZOOM",t[t.ZOOM_OUT=28]="ZOOM_OUT",t[t.NEXT_PAGE=29]="NEXT_PAGE",t[t.KEY=30]="KEY",t[t.STATIC=31]="STATIC"}(st||(st={}));var ct=function(t){_inherits(PenPoint,t);var r=pen_point_createSuper(PenPoint);function PenPoint(t,i,o){var a;return _classCallCheck(this,PenPoint),(a=r.call(this,t,i)).p=void 0,a.p=o,a}return _createClass(PenPoint,[{key:"clone",value:function clone(){return new PenPoint(this.x,this.y,this.p)}},{key:"equals",value:function equals(t){return!!t&&(this.x===t.x&&this.y===t.y&&this.p===t.p)}}],[{key:"createZero",value:function createZero(){return new PenPoint(0,0,0)}}]),PenPoint}(a),ut=function Action(){_classCallCheck(this,Action),this.keyEvent=void 0,this.timestamp=void 0};function brush_action_createSuper(t){var r=function brush_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var ht=function(t){_inherits(BrushAction,t);var r=brush_action_createSuper(BrushAction);function BrushAction(t){var i;return _classCallCheck(this,BrushAction),(i=r.call(this)).brush=void 0,i.brush=t,i}return BrushAction}(ut),dt=function(){function PaintTool(){_classCallCheck(this,PaintTool),this.brush=void 0}return _createClass(PaintTool,[{key:"begin",value:function begin(t,r){}},{key:"execute",value:function execute(t){}},{key:"end",value:function end(t){}}]),PaintTool}(),ft=function ShapeAction(t){_classCallCheck(this,ShapeAction),this.shapes=void 0,this.shapes=t};function add_shape_action_createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function add_shape_action_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return add_shape_action_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return add_shape_action_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function add_shape_action_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}function add_shape_action_createSuper(t){var r=function add_shape_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var pt=function(t){_inherits(AddShapeAction,t);var r=add_shape_action_createSuper(AddShapeAction);function AddShapeAction(t){return _classCallCheck(this,AddShapeAction),r.call(this,t)}return _createClass(AddShapeAction,[{key:"execute",value:function execute(t){var r,i=add_shape_action_createForOfIteratorHelper(this.shapes);try{for(i.s();!(r=i.n()).done;){var o=r.value;t.addShape(o)}}catch(t){i.e(t)}finally{i.f()}}},{key:"undo",value:function undo(t){var r,i=add_shape_action_createForOfIteratorHelper(this.shapes);try{for(i.s();!(r=i.n()).done;){var o=r.value;t.removeShape(o)}}catch(t){i.e(t)}finally{i.f()}}},{key:"redo",value:function redo(t){this.execute(t)}}]),AddShapeAction}(ft),gt=function(){function Line(t,r,i,o){_classCallCheck(this,Line),this.x1=void 0,this.y1=void 0,this.x2=void 0,this.y2=void 0,this.set(t,r,i,o)}return _createClass(Line,[{key:"set",value:function set(t,r,i,o){this.x1=t,this.y1=r,this.x2=i,this.y2=o}},{key:"getStartPoint",value:function getStartPoint(){return new a(this.x1,this.y1)}},{key:"getEndPoint",value:function getEndPoint(){return new a(this.x2,this.y2)}},{key:"distance",value:function distance(t,r){var i=this.x2-this.x1,o=this.y2-this.y1,a=Math.sqrt(i*i+o*o);return Math.abs(((this.y1-this.y2)*t+i*r+(this.x1*this.y2-this.x2*this.y1))/a)}},{key:"intersects",value:function intersects(t){return Line.intersects(this.x1,this.y1,this.x2,this.y2,t.x1,t.y1,t.x2,t.y2)}},{key:"getIntersectionPoint",value:function getIntersectionPoint(t,r,i,o){var l=(o-r)*(this.x2-this.x1)-(i-t)*(this.y2-this.y1);if(Math.abs(l)<.01)return null;var c=((i-t)*(this.y1-r)-(o-r)*(this.x1-t))/l,u=((this.x2-this.x1)*(this.y1-r)-(this.y2-this.y1)*(this.x1-t))/l;if(c>=0&&c<=1&&u>=0&&u<=1){var h=this.y2-this.y1,d=this.x1-this.x2,p=h*this.x1+d*this.y1,g=o-r,v=t-i,y=g*t+v*r;return new a((v*p-d*y)/l,(h*y-g*p)/l)}return null}}],[{key:"intersects",value:function intersects(t,r,i,o,a,l,c,u){var h=(u-l)*(i-t)-(c-a)*(o-r);if(0==h)return!1;var d=((c-a)*(r-l)-(u-l)*(t-a))/h,p=((i-t)*(r-l)-(o-r)*(t-a))/h;return d>=0&&d<=1&&p>=0&&p<=1}}]),Line}();function stroke_shape_createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function stroke_shape_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return stroke_shape_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return stroke_shape_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function stroke_shape_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}function stroke_shape_createSuper(t){var r=function stroke_shape_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var vt=function(t){_inherits(StrokeShape,t);var r=stroke_shape_createSuper(StrokeShape);function StrokeShape(t){var i;return _classCallCheck(this,StrokeShape),(i=r.call(this))._brush=void 0,i.minPoint=new a(0,0),i.maxPoint=new a(0,0),i._brush=t,i}return _createClass(StrokeShape,[{key:"brush",get:function get(){return this._brush}},{key:"addPoint",value:function addPoint(t){var r=_get(_getPrototypeOf(StrokeShape.prototype),"addPoint",this).call(this,t);return r&&(this.minPoint.x=Math.min(this.minPoint.x,t.x),this.minPoint.y=Math.min(this.minPoint.y,t.y),this.maxPoint.x=Math.max(this.maxPoint.x,t.x),this.maxPoint.y=Math.max(this.maxPoint.y,t.y),this.updateBounds(),this.fireShapeEvent(new J(this,this.bounds))),r}},{key:"contains",value:function contains(t){var r=this.brush.width/2;if(0===this.points.length)return!1;if(1===this.points.length)return this.points[0].distance(t)<=r;for(var i=new gt(t.x+r,t.y+r,t.x-r,t.y-r),o=new gt(t.x-r,t.y+r,t.x+r,t.y-r),a=0,l=this.points[a++],c=null,u=null;a<this.points.length;){if(c=this.points[a++],(u=new gt(l.x,l.y,c.x,c.y)).intersects(i))return!0;if(u.intersects(o))return!0;l=c}return!1}},{key:"intersects",value:function intersects(t){if(0===this.points.length)return!1;if(1===this.points.length)return t.containsPoint(this.points[0]);for(var r=0,i=this.points[r++],o=null;r<this.points.length;){if(o=this.points[r++],t.intersectsLine(i.x,i.y,o.x,o.y))return!0;i=o}return!1}},{key:"updateBounds",value:function updateBounds(){var t=this.minPoint.x,r=this.minPoint.y,i=this.maxPoint.x-this.minPoint.x,o=this.maxPoint.y-this.minPoint.y;this.bounds.set(t,r,i,o)}},{key:"clone",value:function clone(){var t=new StrokeShape(this.brush.clone());t.bounds.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),t.setKeyEvent(this.getKeyEvent()),t.setSelected(this.isSelected());var r,i=stroke_shape_createForOfIteratorHelper(this.points);try{for(i.s();!(r=i.n()).done;){var o=r.value;t.points.push(o.clone())}}catch(t){i.e(t)}finally{i.f()}return t}}]),StrokeShape}(te);function arrayLikeToArray_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}function unsupportedIterableToArray_unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return arrayLikeToArray_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?arrayLikeToArray_arrayLikeToArray(t,r):void 0}}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return arrayLikeToArray_arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||unsupportedIterableToArray_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pen_stroke_createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function pen_stroke_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return pen_stroke_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return pen_stroke_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function pen_stroke_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}var yt=function(){function PenStroke(t){_classCallCheck(this,PenStroke),this.vector=new a(0,0),this.normal=new a(0,0),this.miter=new a(0,0),this.offsetA=new a(0,0),this.offsetB=new a(0,0),this.lastLineTop=new gt(0,0,0,0),this.lastLineBottom=new gt(0,0,0,0),this.A=new Array,this.B=new Array,this.points=new Array,this.strokeWidth=void 0,this.strokeWidth=t}return _createClass(PenStroke,[{key:"getStrokeList",value:function getStrokeList(){if(0===this.points.length)return null;var t=new Array;return 1==this.points.length?(this.capOnePoint(t,this.points[0],this.strokeWidth),t):(t.push.apply(t,_toConsumableArray(this.A)),this.capEndpoint(t,this.points[1],this.points[0],!1),t.push.apply(t,_toConsumableArray(this.B)),t)}},{key:"addPoint",value:function addPoint(t){this.points.push(t.clone());var r=this.points.length;if(r>1){r>2&&this.points.shift();var i=this.points[0];0===this.A.length||0===this.B.length?(this.capEndpoint(this.A,i,t,!1),this.beginPath(i,t)):this.advance(i,t)}}},{key:"intersects",value:function intersects(t){return 0!==this.points.length&&(1===this.points.length?t.containsPoint(this.points[0]):!!this.intersectsRect(this.A,t)||!!this.intersectsRect(this.B,t))}},{key:"moveByDelta",value:function moveByDelta(t){var r,i=pen_stroke_createForOfIteratorHelper(this.A);try{for(i.s();!(r=i.n()).done;){r.value.subtract(t)}}catch(t){i.e(t)}finally{i.f()}var o,a=pen_stroke_createForOfIteratorHelper(this.B);try{for(a.s();!(o=a.n()).done;){o.value.subtract(t)}}catch(t){a.e(t)}finally{a.f()}var l,c=pen_stroke_createForOfIteratorHelper(this.points);try{for(c.s();!(l=c.n()).done;){l.value.subtract(t)}}catch(t){c.e(t)}finally{c.f()}}},{key:"clone",value:function clone(){var t,r=new PenStroke(this.strokeWidth),i=pen_stroke_createForOfIteratorHelper(this.A);try{for(i.s();!(t=i.n()).done;){var o=t.value;r.A.push(o.clone())}}catch(t){i.e(t)}finally{i.f()}var a,l=pen_stroke_createForOfIteratorHelper(this.B);try{for(l.s();!(a=l.n()).done;){var c=a.value;r.B.push(c.clone())}}catch(t){l.e(t)}finally{l.f()}var u,h=pen_stroke_createForOfIteratorHelper(this.points);try{for(h.s();!(u=h.n()).done;){var d=u.value;r.points.push(d.clone())}}catch(t){h.e(t)}finally{h.f()}return r}},{key:"advance",value:function advance(t,r){this.advancePath(this.A,t,r,!1),this.advancePath(this.B,t,r,!0)}},{key:"advancePath",value:function advancePath(t,r,i,o){this.vector.set(i.x,i.y).subtract(r).normalize(),this.normal.set(-this.vector.y,this.vector.x).normalize(),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(r)/2),this.offsetA.set(r.x,r.y),this.offset(this.offsetA,this.miter,o),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(i)/2),this.offsetB.set(i.x,i.y),this.offset(this.offsetB,this.miter,o);var a=new gt(this.offsetA.x,this.offsetA.y,this.offsetB.x,this.offsetB.y),l=o?this.lastLineTop:this.lastLineBottom,c=l.getIntersectionPoint(a.x1,a.y1,a.x2,a.y2);if(null!=c)this.intersect(t,c,o);else{var u=l.getEndPoint(),h=a.getStartPoint(),d=this.toDegrees(u,r),p=this.toDegrees(h,r);Math.abs(d-p)>180&&(d%=360,p%=360),this.cap(t,r,d,p,this.strokeWidth*this.toPressure(r)/2,2,o)}l.set(a.x1,a.y1,a.x2,a.y2)}},{key:"beginPath",value:function beginPath(t,r){this.vector.set(r.x,r.y).subtract(t).normalize(),this.normal.set(-this.vector.y,this.vector.x).normalize(),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(t)/2),this.offsetA.set(t.x,t.y).add(this.miter),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(r)/2),this.offsetB.set(r.x,r.y).add(this.miter),this.addPathPoint(this.A,this.offsetB.x,this.offsetB.y,!1),this.lastLineBottom.set(this.offsetA.x,this.offsetA.y,this.offsetB.x,this.offsetB.y),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(t)/2),this.offsetA.set(t.x,t.y).subtract(this.miter),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(r)/2),this.offsetB.set(r.x,r.y).subtract(this.miter),this.addPathPoint(this.B,this.offsetA.x,this.offsetA.y,!0),this.addPathPoint(this.B,this.offsetB.x,this.offsetB.y,!0),this.lastLineTop.set(this.offsetA.x,this.offsetA.y,this.offsetB.x,this.offsetB.y)}},{key:"cap",value:function cap(t,r,i,o,a,l,c){if(i>o)for(var u=i;u>=o;u-=l){var h=Math.PI*u/180,d=r.x+a*Math.cos(h),p=r.y+a*Math.sin(h);this.addPathPoint(t,d,p,c)}else for(var g=i;g<=o;g+=l){var v=Math.PI*g/180,y=r.x+a*Math.cos(v),_=r.y+a*Math.sin(v);this.addPathPoint(t,y,_,c)}}},{key:"capOnePoint",value:function capOnePoint(t,r,i){this.addPathPoint(t,r.x+i*this.toPressure(r)/2,r.y,!1),this.cap(t,r,0,360,i*this.toPressure(r)/2,2,!1)}},{key:"capEndpoint",value:function capEndpoint(t,r,i,o){this.vector.set(i.x,i.y).subtract(r).normalize(),this.normal.set(-this.vector.y,this.vector.x).normalize(),this.miter.set(this.normal.x,this.normal.y).multiply(this.strokeWidth*this.toPressure(r)/2),this.offsetA.set(r.x,r.y).add(this.miter),this.offsetB.set(r.x,r.y).subtract(this.miter),this.addPathPoint(t,this.offsetB.x,this.offsetB.y,o);var a=this.toDegrees(this.offsetB,this.offsetA),l=a-180;this.cap(t,r,a,l,this.strokeWidth*this.toPressure(r)/2,2,o)}},{key:"addPathPoint",value:function addPathPoint(t,r,i,o){o?t.unshift(new ct(r,i,1)):t.push(new ct(r,i,1))}},{key:"intersect",value:function intersect(t,r,i){i?t[0].set(r.x,r.y):t[t.length-1].set(r.x,r.y)}},{key:"offset",value:function offset(t,r,i){i?t.subtract(r):t.add(r)}},{key:"toPressure",value:function toPressure(t){return Math.min(1,Math.sqrt(t.p+.1))}},{key:"toDegrees",value:function toDegrees(t,r){var i=Math.atan2(t.y-r.y,t.x-r.x);return 180*(2*Math.PI+i)/Math.PI}},{key:"intersectsRect",value:function intersectsRect(t,r){for(var i=0,o=t[i++],a=null;i<t.length;){if(a=t[i++],r.intersectsLine(o.x,o.y,a.x,a.y))return!0;o=a}return!1}}]),PenStroke}();function pen_shape_createSuper(t){var r=function pen_shape_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var _t=function(t){_inherits(PenShape,t);var r=pen_shape_createSuper(PenShape);function PenShape(t){var i;return _classCallCheck(this,PenShape),(i=r.call(this,t)).stroke=void 0,i.stroke=new yt(t.width),i}return _createClass(PenShape,[{key:"addPoint",value:function addPoint(t){if(this.points.length>0){var r=this.points[0];if(t.equals(r))return!1;this.points[0]=t}else this.points.push(t);return this.stroke.addPoint(t),this.updateBounds(),this.fireShapeEvent(new J(this,this.bounds)),!0}},{key:"contains",value:function contains(t){return this.stroke.intersects(new ee(t.x,t.y,t.x,t.y))}},{key:"intersects",value:function intersects(t){return this.stroke.intersects(t)}},{key:"getPenStroke",value:function getPenStroke(){return this.stroke}},{key:"moveByDelta",value:function moveByDelta(t){this.stroke.moveByDelta(t),this.updateBoundsByDelta(t),this.fireShapeEvent(new J(this,this.bounds))}},{key:"clone",value:function clone(){var t=new PenShape(this.brush.clone());return t.stroke=this.stroke.clone(),t.bounds.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),t.setKeyEvent(this.getKeyEvent()),t.setSelected(this.isSelected()),t}}]),PenShape}(vt);function pen_tool_createSuper(t){var r=function pen_tool_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var mt=function(t){_inherits(PenTool,t);var r=pen_tool_createSuper(PenTool);function PenTool(){var t;_classCallCheck(this,PenTool);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=r.call.apply(r,[this].concat(o))).shape=void 0,t}return _createClass(PenTool,[{key:"begin",value:function begin(t,r){this.shape=new _t(this.brush),this.shape.addPoint(t),r.page.addAction(new pt([this.shape]))}},{key:"execute",value:function execute(t){this.shape.addPoint(t)}},{key:"end",value:function end(t){}}]),PenTool}(dt);function pen_action_createSuper(t){var r=function pen_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var bt=function(t){_inherits(PenAction,t);var r=pen_action_createSuper(PenAction);function PenAction(){return _classCallCheck(this,PenAction),r.apply(this,arguments)}return _createClass(PenAction,[{key:"execute",value:function execute(t){var r=new mt;r.brush=this.brush,t.setTool(r)}}]),PenAction}(ht);function brush_createSuper(t){var r=function brush_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var At=function(t){_inherits(Brush,t);var r=brush_createSuper(Brush);function Brush(t,i){var o;return _classCallCheck(this,Brush),(o=r.call(this,t)).width=void 0,o.width=i,o}return _createClass(Brush,[{key:"clone",value:function clone(){return new Brush(this.color,this.width)}}]),Brush}((function Paint(t){_classCallCheck(this,Paint),this.color=void 0,this.color=t})),St=/\((\d+),\s*(\d+),\s*(\d+)(,\s*(\d*.\d*))?\)/,wt=function(){function Color(t,r,i,o){_classCallCheck(this,Color),this.r=void 0,this.g=void 0,this.b=void 0,this.a=void 0,this.r=t,this.g=r,this.b=i,this.a=o||1}return _createClass(Color,[{key:"toHex",value:function toHex(){return"#"+this.r.toString(16)+this.g.toString(16)+this.b.toString(16)}},{key:"toRgb",value:function toRgb(){return"rgb(".concat(this.r,", ").concat(this.g,", ").concat(this.b,")")}},{key:"toRgba",value:function toRgba(){return"rgba(".concat(this.r,", ").concat(this.g,", ").concat(this.b,", ").concat(this.a,")")}},{key:"equals",value:function equals(t){return this.a===t.a&&this.r===t.r&&this.g===t.g&&this.b===t.b}}],[{key:"fromHex",value:function fromHex(t){var r=t.trim();if(0!==r.indexOf("#"))throw new Error("Not a hex color representation");return r=r.substr(r.indexOf("#")+1),new Color(parseInt(r.substr(0,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(4,2),16))}},{key:"fromRGBString",value:function fromRGBString(t){var r=t.trim();if(0!==r.indexOf("rgb"))throw new Error("Not a rgb color representation");var i=St.exec(r);return new Color(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),i[5]?parseFloat(i[5]):1)}},{key:"fromRGBNumber",value:function fromRGBNumber(t){return new Color(t>>16&255,t>>8&255,255&t,(t>>24&255)/255)}}]),Color}();function highlighter_tool_createSuper(t){var r=function highlighter_tool_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var xt=function(t){_inherits(HighlighterTool,t);var r=highlighter_tool_createSuper(HighlighterTool);function HighlighterTool(){var t;_classCallCheck(this,HighlighterTool);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=r.call.apply(r,[this].concat(o))).shape=void 0,t}return _createClass(HighlighterTool,[{key:"begin",value:function begin(t,r){this.shape=new vt(this.brush),this.shape.addPoint(t),r.page.addAction(new pt([this.shape]))}},{key:"execute",value:function execute(t){this.shape.addPoint(t)}}]),HighlighterTool}(dt);function highlighter_action_createSuper(t){var r=function highlighter_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Ct=function(t){_inherits(HighlighterAction,t);var r=highlighter_action_createSuper(HighlighterAction);function HighlighterAction(){return _classCallCheck(this,HighlighterAction),r.apply(this,arguments)}return _createClass(HighlighterAction,[{key:"execute",value:function execute(t){var r=new xt;r.brush=this.brush,t.setTool(r)}}]),HighlighterAction}(ht);function pointer_shape_createSuper(t){var r=function pointer_shape_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var kt=function(t){_inherits(PointerShape,t);var r=pointer_shape_createSuper(PointerShape);function PointerShape(){return _classCallCheck(this,PointerShape),r.apply(this,arguments)}return _createClass(PointerShape,[{key:"addPoint",value:function addPoint(t){if(this.points.length>0){var r=this.points[0];if(t.equals(r))return!1;this.points[0]=t}else this.points.push(t);return this.updateBounds(),this.fireShapeEvent(new J(this,this.bounds)),!0}},{key:"updateBounds",value:function updateBounds(){var t=this.points[0],r=this.brush.width;this.bounds.set(t.x-r,t.y-r,t.x+2*r,t.y+2*r)}}]),PointerShape}(vt);function pointer_tool_createSuper(t){var r=function pointer_tool_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Pt=function(t){_inherits(PointerTool,t);var r=pointer_tool_createSuper(PointerTool);function PointerTool(){var t;_classCallCheck(this,PointerTool);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=r.call.apply(r,[this].concat(o))).shape=void 0,t.page=void 0,t}return _createClass(PointerTool,[{key:"begin",value:function begin(t,r){this.page=r.page,this.shape=new kt(this.brush),this.shape.addPoint(t),this.page.addShape(this.shape)}},{key:"execute",value:function execute(t){this.shape.addPoint(t)}},{key:"end",value:function end(t){this.page.removeShape(this.shape)}}]),PointerTool}(dt);function pointer_action_createSuper(t){var r=function pointer_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Rt=function(t){_inherits(PointerAction,t);var r=pointer_action_createSuper(PointerAction);function PointerAction(){return _classCallCheck(this,PointerAction),r.apply(this,arguments)}return _createClass(PointerAction,[{key:"execute",value:function execute(t){var r=new Pt;r.brush=this.brush,t.setTool(r)}}]),PointerAction}(ht);function form_shape_createSuper(t){var r=function form_shape_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Tt=function(t){_inherits(FormShape,t);var r=form_shape_createSuper(FormShape);function FormShape(){return _classCallCheck(this,FormShape),r.apply(this,arguments)}return _createClass(FormShape,[{key:"setP0",value:function setP0(t){if(this.points.length>0){var r=this.points[0];if(t.equals(r))return!1;this.points[0]=t}else this.points.push(t);return!0}},{key:"setP1",value:function setP1(t){if(this.points.length>1){var r=this.points[1];if(t.equals(r))return!1;this.points[1]=t}else this.points.push(t);return this.updateBounds(),this.fireShapeEvent(new J(this,this.bounds)),!0}},{key:"updateBounds",value:function updateBounds(){if(!(this.points.length<2)){var t=this.points[0],r=this.points[1];r.x<t.x?(this.bounds.x=r.x,this.bounds.width=t.x-r.x):(this.bounds.x=t.x,this.bounds.width=r.x-t.x),r.y<t.y?(this.bounds.y=r.y,this.bounds.height=t.y-r.y):(this.bounds.y=t.y,this.bounds.height=r.y-t.y)}}},{key:"fill",value:function fill(){var t=this.getKeyEvent();return null!=t&&t.altKey}}]),FormShape}(vt);function arrow_shape_createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function arrow_shape_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return arrow_shape_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return arrow_shape_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function arrow_shape_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}function arrow_shape_createSuper(t){var r=function arrow_shape_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Et=function(t){_inherits(ArrowShape,t);var r=arrow_shape_createSuper(ArrowShape);function ArrowShape(){return _classCallCheck(this,ArrowShape),r.apply(this,arguments)}return _createClass(ArrowShape,[{key:"clone",value:function clone(){var t=new ArrowShape(this.brush.clone());t.bounds.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),t.setKeyEvent(this.getKeyEvent()),t.setSelected(this.isSelected());var r,i=arrow_shape_createForOfIteratorHelper(this.points);try{for(i.s();!(r=i.n()).done;){var o=r.value;t.points.push(o.clone())}}catch(t){i.e(t)}finally{i.f()}return t}}]),ArrowShape}(Tt);function arrow_tool_createSuper(t){var r=function arrow_tool_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Lt=function(t){_inherits(ArrowTool,t);var r=arrow_tool_createSuper(ArrowTool);function ArrowTool(){var t;_classCallCheck(this,ArrowTool);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=r.call.apply(r,[this].concat(o))).shape=void 0,t.context=void 0,t}return _createClass(ArrowTool,[{key:"begin",value:function begin(t,r){this.context=r,this.shape=new Et(this.brush),this.shape.setP0(t),r.page.addAction(new pt([this.shape]))}},{key:"execute",value:function execute(t){this.shape.setKeyEvent(this.context.keyEvent),this.shape.setP1(t)}}]),ArrowTool}(dt);function arrow_action_createSuper(t){var r=function arrow_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var It=function(t){_inherits(ArrowAction,t);var r=arrow_action_createSuper(ArrowAction);function ArrowAction(){return _classCallCheck(this,ArrowAction),r.apply(this,arguments)}return _createClass(ArrowAction,[{key:"execute",value:function execute(t){var r=new Lt;r.brush=this.brush,t.setKeyEvent(this.keyEvent),t.setTool(r)}}]),ArrowAction}(ht);function line_shape_createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function line_shape_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return line_shape_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return line_shape_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function line_shape_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}function line_shape_createSuper(t){var r=function line_shape_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Ot=function(t){_inherits(LineShape,t);var r=line_shape_createSuper(LineShape);function LineShape(){return _classCallCheck(this,LineShape),r.apply(this,arguments)}return _createClass(LineShape,[{key:"clone",value:function clone(){var t=new LineShape(this.brush.clone());t.bounds.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),t.setKeyEvent(this.getKeyEvent()),t.setSelected(this.isSelected());var r,i=line_shape_createForOfIteratorHelper(this.points);try{for(i.s();!(r=i.n()).done;){var o=r.value;t.points.push(o.clone())}}catch(t){i.e(t)}finally{i.f()}return t}}]),LineShape}(Tt);function line_tool_createSuper(t){var r=function line_tool_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Mt=function(t){_inherits(LineTool,t);var r=line_tool_createSuper(LineTool);function LineTool(){var t;_classCallCheck(this,LineTool);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=r.call.apply(r,[this].concat(o))).shape=void 0,t.context=void 0,t}return _createClass(LineTool,[{key:"begin",value:function begin(t,r){this.context=r,this.shape=new Ot(this.brush),this.shape.setP0(t),r.page.addAction(new pt([this.shape]))}},{key:"execute",value:function execute(t){this.shape.setKeyEvent(this.context.keyEvent),this.shape.setP1(t)}}]),LineTool}(dt);function line_action_createSuper(t){var r=function line_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Ft=function(t){_inherits(LineAction,t);var r=line_action_createSuper(LineAction);function LineAction(){return _classCallCheck(this,LineAction),r.apply(this,arguments)}return _createClass(LineAction,[{key:"execute",value:function execute(t){var r=new Mt;r.brush=this.brush,t.setKeyEvent(this.keyEvent),t.setTool(r)}}]),LineAction}(ht);function rectangle_shape_createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function rectangle_shape_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return rectangle_shape_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return rectangle_shape_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function rectangle_shape_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}function rectangle_shape_createSuper(t){var r=function rectangle_shape_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Dt=function(t){_inherits(RectangleShape,t);var r=rectangle_shape_createSuper(RectangleShape);function RectangleShape(){return _classCallCheck(this,RectangleShape),r.apply(this,arguments)}return _createClass(RectangleShape,[{key:"contains",value:function contains(t){if(this.points.length<2)return!1;if(this.fill())return this.bounds.containsPoint(t);var r=this.brush.width,i=this.bounds.x,o=this.bounds.y,a=this.bounds.x+this.bounds.width,l=this.bounds.y;return!!this.intersectsSegment(r,i,o,a,l,t)||(i=this.bounds.x+this.bounds.width,o=this.bounds.y,a=this.bounds.x+this.bounds.width,l=this.bounds.y+this.bounds.height,!!this.intersectsSegment(r,i,o,a,l,t)||(i=this.bounds.x+this.bounds.width,o=this.bounds.y+this.bounds.height,a=this.bounds.x,l=this.bounds.y+this.bounds.height,!!this.intersectsSegment(r,i,o,a,l,t)||(i=this.bounds.x,o=this.bounds.y,a=this.bounds.x,l=this.bounds.y+this.bounds.height,!!this.intersectsSegment(r,i,o,a,l,t))))}},{key:"intersects",value:function intersects(t){return null!=this.bounds.intersection(t)}},{key:"clone",value:function clone(){var t=new RectangleShape(this.brush.clone());t.bounds.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),t.setKeyEvent(this.getKeyEvent()),t.setSelected(this.isSelected());var r,i=rectangle_shape_createForOfIteratorHelper(this.points);try{for(i.s();!(r=i.n()).done;){var o=r.value;t.points.push(o.clone())}}catch(t){i.e(t)}finally{i.f()}return t}},{key:"intersectsSegment",value:function intersectsSegment(t,r,i,o,a,l){var c=l.x+t,u=l.y+t,h=l.x-t,d=l.y-t;return!!gt.intersects(r,i,o,a,c,u,h,d)||(c=l.x-t,u=l.y+t,h=l.x+t,d=l.y-t,!!gt.intersects(r,i,o,a,c,u,h,d))}}]),RectangleShape}(Tt);function rectangle_tool_createSuper(t){var r=function rectangle_tool_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Nt=function(t){_inherits(RectangleTool,t);var r=rectangle_tool_createSuper(RectangleTool);function RectangleTool(){var t;_classCallCheck(this,RectangleTool);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=r.call.apply(r,[this].concat(o))).shape=void 0,t.context=void 0,t}return _createClass(RectangleTool,[{key:"begin",value:function begin(t,r){this.context=r,this.shape=new Dt(this.brush),this.shape.setP0(t),r.page.addAction(new pt([this.shape]))}},{key:"execute",value:function execute(t){this.shape.setKeyEvent(this.context.keyEvent),this.shape.setP1(t)}}]),RectangleTool}(dt);function rectangle_action_createSuper(t){var r=function rectangle_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Bt=function(t){_inherits(RectangleAction,t);var r=rectangle_action_createSuper(RectangleAction);function RectangleAction(){return _classCallCheck(this,RectangleAction),r.apply(this,arguments)}return _createClass(RectangleAction,[{key:"execute",value:function execute(t){var r=new Nt;r.brush=this.brush,t.setKeyEvent(this.keyEvent),t.setTool(r)}}]),RectangleAction}(ht),zt=function(){function Ellipse(t,r,i,o){_classCallCheck(this,Ellipse),this.x=void 0,this.y=void 0,this.width=void 0,this.height=void 0,this.radiusX=void 0,this.radiusY=void 0,this.centerX=void 0,this.centerY=void 0,this.x=t,this.y=r,this.width=i,this.height=o,this.radiusX=.5*i,this.radiusY=.5*o,this.centerX=t+this.radiusX,this.centerY=r+this.radiusY}return _createClass(Ellipse,[{key:"containsPoint",value:function containsPoint(t,r){var i=this.width;if(i<=0)return!1;var o=this.height;if(o<=0)return!1;var a=(t-this.x)/i-.5,l=(r-this.y)/o-.5;return a*a+l*l<.25}},{key:"containsRect",value:function containsRect(t,r,i,o){return this.containsPoint(t,r)&&this.containsPoint(t+i,r)&&this.containsPoint(t,r+o)&&this.containsPoint(t+i,r+o)}},{key:"intersectsRect",value:function intersectsRect(t,r,i,o){return!(i<=0||o<=0)&&(!(this.width<=0||this.height<=0)&&(this.centerX>=t&&this.centerY>=r&&this.centerX<=t+i&&this.centerY<=r+o||(this.intersectsLine(t,r,t+i,r)||this.intersectsLine(t,r+o,t+i,r+o)||this.intersectsLine(t,r,t,r+o)||this.intersectsLine(t+i,r,t+i,r+o))))}},{key:"intersectsLine",value:function intersectsLine(t,r,i,o){if(this.width<=0||this.height<=0)return!1;t-=this.centerX,i-=this.centerX,r-=this.centerY,o-=this.centerY;var a=this.radiusX*this.radiusX,l=this.radiusY*this.radiusY,c=Math.pow(i-t,2)/a+Math.pow(o-r,2)/l,u=2*t*(i-t)/a+2*r*(o-r)/l,h=u*u-4*c*(t*t/a+r*r/l-1);if(0===h){var d=-u/2/c;return d>=0&&d<=1}if(h>0){var p=Math.sqrt(h),g=(-u+p)/2/c,v=(-u-p)/2/c;return g>=0&&g<=1||v>=0&&v<=1}return!1}}]),Ellipse}();function ellipse_shape_createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function ellipse_shape_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return ellipse_shape_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ellipse_shape_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function ellipse_shape_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}function ellipse_shape_createSuper(t){var r=function ellipse_shape_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var jt=function(t){_inherits(EllipseShape,t);var r=ellipse_shape_createSuper(EllipseShape);function EllipseShape(){return _classCallCheck(this,EllipseShape),r.apply(this,arguments)}return _createClass(EllipseShape,[{key:"contains",value:function contains(t){if(this.points.length<2)return!1;var r=new zt(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height);return this.fill()?r.containsPoint(t.x,t.y):r.intersectsLine(t.x,t.y,t.x+this.brush.width,t.y+this.brush.width)}},{key:"intersects",value:function intersects(t){return!(this.points.length<2)&&new zt(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height).intersectsRect(t.x,t.y,t.width,t.height)}},{key:"clone",value:function clone(){var t=new EllipseShape(this.brush.clone());t.bounds.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),t.setKeyEvent(this.getKeyEvent()),t.setSelected(this.isSelected());var r,i=ellipse_shape_createForOfIteratorHelper(this.points);try{for(i.s();!(r=i.n()).done;){var o=r.value;t.points.push(o.clone())}}catch(t){i.e(t)}finally{i.f()}return t}}]),EllipseShape}(Tt);function ellipse_tool_createSuper(t){var r=function ellipse_tool_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Ut=function(t){_inherits(EllipseTool,t);var r=ellipse_tool_createSuper(EllipseTool);function EllipseTool(){var t;_classCallCheck(this,EllipseTool);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=r.call.apply(r,[this].concat(o))).shape=void 0,t.context=void 0,t}return _createClass(EllipseTool,[{key:"begin",value:function begin(t,r){this.context=r,this.shape=new jt(this.brush),this.shape.setP0(t),r.page.addAction(new pt([this.shape]))}},{key:"execute",value:function execute(t){this.shape.setKeyEvent(this.context.keyEvent),this.shape.setP1(t)}}]),EllipseTool}(dt);function ellipse_action_createSuper(t){var r=function ellipse_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Ht=function(t){_inherits(EllipseAction,t);var r=ellipse_action_createSuper(EllipseAction);function EllipseAction(){return _classCallCheck(this,EllipseAction),r.apply(this,arguments)}return _createClass(EllipseAction,[{key:"execute",value:function execute(t){var r=new Ut;r.brush=this.brush,t.setKeyEvent(this.keyEvent),t.setTool(r)}}]),EllipseAction}(ht);function tool_action_createSuper(t){var r=function tool_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Vt=function(t){_inherits(ToolAction,t);var r=tool_action_createSuper(ToolAction);function ToolAction(t){var i;return _classCallCheck(this,ToolAction),(i=r.call(this)).point=void 0,i.point=t,i}return ToolAction}(ut);function tool_begin_action_createSuper(t){var r=function tool_begin_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Gt=function(t){_inherits(ToolBeginAction,t);var r=tool_begin_action_createSuper(ToolBeginAction);function ToolBeginAction(){return _classCallCheck(this,ToolBeginAction),r.apply(this,arguments)}return _createClass(ToolBeginAction,[{key:"execute",value:function execute(t){t.beginTool(this.point)}}]),ToolBeginAction}(Vt);function tool_execute_action_createSuper(t){var r=function tool_execute_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Wt=function(t){_inherits(ToolExecuteAction,t);var r=tool_execute_action_createSuper(ToolExecuteAction);function ToolExecuteAction(){return _classCallCheck(this,ToolExecuteAction),r.apply(this,arguments)}return _createClass(ToolExecuteAction,[{key:"execute",value:function execute(t){t.executeTool(this.point)}}]),ToolExecuteAction}(Vt);function tool_end_action_createSuper(t){var r=function tool_end_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var qt=function(t){_inherits(ToolEndAction,t);var r=tool_end_action_createSuper(ToolEndAction);function ToolEndAction(){return _classCallCheck(this,ToolEndAction),r.apply(this,arguments)}return _createClass(ToolEndAction,[{key:"execute",value:function execute(t){t.endTool(this.point)}}]),ToolEndAction}(Vt),Yt=function(){function AtomicTool(){_classCallCheck(this,AtomicTool)}return _createClass(AtomicTool,[{key:"execute",value:function execute(t){}},{key:"end",value:function end(t){}}]),AtomicTool}();function undo_tool_createSuper(t){var r=function undo_tool_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Qt=function(t){_inherits(UndoTool,t);var r=undo_tool_createSuper(UndoTool);function UndoTool(){return _classCallCheck(this,UndoTool),r.apply(this,arguments)}return _createClass(UndoTool,[{key:"begin",value:function begin(t,r){r.page.undo()}}]),UndoTool}(Yt);function undo_action_createSuper(t){var r=function undo_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Xt=function(t){_inherits(UndoAction,t);var r=undo_action_createSuper(UndoAction);function UndoAction(){return _classCallCheck(this,UndoAction),r.apply(this,arguments)}return _createClass(UndoAction,[{key:"execute",value:function execute(t){t.selectAndExecuteTool(new Qt)}}]),UndoAction}(ut);function redo_tool_createSuper(t){var r=function redo_tool_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Kt=function(t){_inherits(RedoTool,t);var r=redo_tool_createSuper(RedoTool);function RedoTool(){return _classCallCheck(this,RedoTool),r.apply(this,arguments)}return _createClass(RedoTool,[{key:"begin",value:function begin(t,r){r.page.redo()}}]),RedoTool}(Yt);function redo_action_createSuper(t){var r=function redo_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var $t=function(t){_inherits(RedoAction,t);var r=redo_action_createSuper(RedoAction);function RedoAction(){return _classCallCheck(this,RedoAction),r.apply(this,arguments)}return _createClass(RedoAction,[{key:"execute",value:function execute(t){t.selectAndExecuteTool(new Kt)}}]),RedoAction}(ut);function remove_shape_action_createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function remove_shape_action_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return remove_shape_action_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return remove_shape_action_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function remove_shape_action_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}function remove_shape_action_createSuper(t){var r=function remove_shape_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Zt=function(t){_inherits(RemoveShapeAction,t);var r=remove_shape_action_createSuper(RemoveShapeAction);function RemoveShapeAction(t){return _classCallCheck(this,RemoveShapeAction),r.call(this,t)}return _createClass(RemoveShapeAction,[{key:"execute",value:function execute(t){var r,i=remove_shape_action_createForOfIteratorHelper(this.shapes);try{for(i.s();!(r=i.n()).done;){var o=r.value;t.removeShape(o)}}catch(t){i.e(t)}finally{i.f()}}},{key:"undo",value:function undo(t){var r,i=remove_shape_action_createForOfIteratorHelper(this.shapes);try{for(i.s();!(r=i.n()).done;){var o=r.value;t.addShape(o)}}catch(t){i.e(t)}finally{i.f()}}},{key:"redo",value:function redo(t){this.execute(t)}}]),RemoveShapeAction}(ft);function clear_shapes_tool_createSuper(t){var r=function clear_shapes_tool_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Jt=function(t){_inherits(ClearShapesTool,t);var r=clear_shapes_tool_createSuper(ClearShapesTool);function ClearShapesTool(){return _classCallCheck(this,ClearShapesTool),r.apply(this,arguments)}return _createClass(ClearShapesTool,[{key:"begin",value:function begin(t,r){var i=Object.assign([],r.page.getShapes());r.page.addAction(new Zt(i))}}]),ClearShapesTool}(Yt);function clear_shapes_action_createSuper(t){var r=function clear_shapes_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var en=function(t){_inherits(ClearShapesAction,t);var r=clear_shapes_action_createSuper(ClearShapesAction);function ClearShapesAction(){return _classCallCheck(this,ClearShapesAction),r.apply(this,arguments)}return _createClass(ClearShapesAction,[{key:"execute",value:function execute(t){t.selectAndExecuteTool(new Jt)}}]),ClearShapesAction}(ut);function key_action_createSuper(t){var r=function key_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var tn=function(t){_inherits(KeyAction,t);var r=key_action_createSuper(KeyAction);function KeyAction(){return _classCallCheck(this,KeyAction),r.apply(this,arguments)}return _createClass(KeyAction,[{key:"execute",value:function execute(t){t.setKeyEvent(this.keyEvent)}}]),KeyAction}(ut);function clone_tool_createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function clone_tool_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return clone_tool_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return clone_tool_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function clone_tool_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}var nn=function(){function CloneTool(){_classCallCheck(this,CloneTool),this.sourcePoint=void 0,this.context=void 0,this.selectedShapes=void 0}return _createClass(CloneTool,[{key:"begin",value:function begin(t,r){if(this.sourcePoint=t.clone(),this.context=r,this.getSelectedShapes(),this.hasSelectedShapes())if(this.hitSelected(t)){var i,o=new Array,a=clone_tool_createForOfIteratorHelper(this.selectedShapes);try{for(a.s();!(i=a.n()).done;){var l=i.value.clone();o.push(l)}}catch(t){a.e(t)}finally{a.f()}r.page.addAction(new pt(o))}else this.removeSelection();else{var c=this.getTopLevelShape(t);if(null!=c){var u=c.clone();r.page.addAction(new pt([u])),this.addSelection(u)}}}},{key:"execute",value:function execute(t){this.sourcePoint.subtract(t),this.moveShapes(t,this.sourcePoint),this.sourcePoint=t.clone()}},{key:"end",value:function end(t){}},{key:"getTopLevelShape",value:function getTopLevelShape(t){var r,i=null,o=clone_tool_createForOfIteratorHelper(this.context.page.getShapes());try{for(o.s();!(r=o.n()).done;){var a=r.value;a.contains(t)&&(i=a)}}catch(t){o.e(t)}finally{o.f()}return i}},{key:"getSelectedShapes",value:function getSelectedShapes(){this.selectedShapes=new Array;var t,r=clone_tool_createForOfIteratorHelper(this.context.page.getShapes());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.isSelected()&&this.selectedShapes.push(i)}}catch(t){r.e(t)}finally{r.f()}}},{key:"moveShapes",value:function moveShapes(t,r){if(this.hasSelectedShapes()){this.context.beginBulkRender();var i,o=clone_tool_createForOfIteratorHelper(this.selectedShapes);try{for(o.s();!(i=o.n()).done;){i.value.moveByDelta(r)}}catch(t){o.e(t)}finally{o.f()}this.context.endBulkRender()}}},{key:"hasSelectedShapes",value:function hasSelectedShapes(){return 0!=this.selectedShapes.length}},{key:"addSelection",value:function addSelection(t){t.setSelected(!0),this.selectedShapes.push(t)}},{key:"removeSelection",value:function removeSelection(){this.context.beginBulkRender();var t,r=clone_tool_createForOfIteratorHelper(this.selectedShapes);try{for(r.s();!(t=r.n()).done;){t.value.setSelected(!1)}}catch(t){r.e(t)}finally{r.f()}this.selectedShapes.length=0,this.context.endBulkRender()}},{key:"hitSelected",value:function hitSelected(t){var r,i=clone_tool_createForOfIteratorHelper(this.selectedShapes);try{for(i.s();!(r=i.n()).done;){if(r.value.contains(t))return!0}}catch(t){i.e(t)}finally{i.f()}return!1}}]),CloneTool}();function clone_action_createSuper(t){var r=function clone_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var rn=function(t){_inherits(CloneAction,t);var r=clone_action_createSuper(CloneAction);function CloneAction(){return _classCallCheck(this,CloneAction),r.apply(this,arguments)}return _createClass(CloneAction,[{key:"execute",value:function execute(t){t.setKeyEvent(this.keyEvent),t.setTool(new nn)}}]),CloneAction}(ut);function select_tool_createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function select_tool_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return select_tool_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return select_tool_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function select_tool_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}var sn=function(){function SelectTool(){_classCallCheck(this,SelectTool),this.sourcePoint=void 0,this.context=void 0,this.selectedShape=void 0}return _createClass(SelectTool,[{key:"begin",value:function begin(t,r){this.sourcePoint=t.clone(),this.context=r,this.selectedShape=this.getTopLevelShape(t),this.removeSelection(),null!=this.selectedShape&&this.selectedShape.setSelected(!0)}},{key:"execute",value:function execute(t){null!=this.selectedShape&&(this.sourcePoint.subtract(t),this.context.beginBulkRender(),this.selectedShape.moveByDelta(this.sourcePoint),this.context.endBulkRender(),this.sourcePoint=t.clone())}},{key:"end",value:function end(t){null!=this.selectedShape&&(this.context.beginBulkRender(),this.selectedShape.setSelected(!1),this.context.endBulkRender())}},{key:"getTopLevelShape",value:function getTopLevelShape(t){var r,i=null,o=select_tool_createForOfIteratorHelper(this.context.page.getShapes());try{for(o.s();!(r=o.n()).done;){var a=r.value;a.contains(t)&&(i=a)}}catch(t){o.e(t)}finally{o.f()}return i}},{key:"removeSelection",value:function removeSelection(){this.context.beginBulkRender();var t,r=select_tool_createForOfIteratorHelper(this.context.page.getShapes());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.isSelected()&&i.setSelected(!1)}}catch(t){r.e(t)}finally{r.f()}this.context.endBulkRender()}}]),SelectTool}();function select_action_createSuper(t){var r=function select_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var on=function(t){_inherits(SelectAction,t);var r=select_action_createSuper(SelectAction);function SelectAction(){return _classCallCheck(this,SelectAction),r.apply(this,arguments)}return _createClass(SelectAction,[{key:"execute",value:function execute(t){t.setKeyEvent(this.keyEvent),t.setTool(new sn)}}]),SelectAction}(ut);function select_shape_createSuper(t){var r=function select_shape_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var an,ln=function(t){_inherits(SelectShape,t);var r=select_shape_createSuper(SelectShape);function SelectShape(){return _classCallCheck(this,SelectShape),r.call(this,null)}return SelectShape}(Tt);function select_group_tool_createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function select_group_tool_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return select_group_tool_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return select_group_tool_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function select_group_tool_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}!function(t){t[t.Select=0]="Select",t[t.Move=1]="Move"}(an||(an={}));var cn=function(){function SelectGroupTool(){_classCallCheck(this,SelectGroupTool),this.mode=void 0,this.context=void 0,this.shape=void 0,this.selectedShapes=void 0,this.sourcePoint=void 0,this.initialized=void 0}return _createClass(SelectGroupTool,[{key:"begin",value:function begin(t,r){this.sourcePoint=t.clone(),this.context=r,this.initialized=!1,this.shape=new ln,this.context.page.addShape(this.shape),this.getSelectedShapes(),this.hasSelectedShapes()?this.hitSelected(t)?this.mode=an.Move:(this.context.beginBulkRender(),this.removeSelection(),this.context.endBulkRender(),this.mode=an.Select):this.mode=an.Select}},{key:"execute",value:function execute(t){this.mode==an.Select?(this.initialized||(this.shape.setP0(t),this.initialized=!0),this.shape.addPoint(t.clone()),this.shape.setP1(t),this.selectGroup(this.shape.bounds)):this.mode==an.Move&&(this.sourcePoint.subtract(t),this.moveShapes(this.sourcePoint),this.sourcePoint=t.clone())}},{key:"end",value:function end(t){this.context.page.removeShape(this.shape),this.initialized=!1}},{key:"selectGroup",value:function selectGroup(t){this.context.beginBulkRender(),this.removeSelection();var r,i=select_group_tool_createForOfIteratorHelper(this.context.page.getShapes());try{for(i.s();!(r=i.n()).done;){var o=r.value;o!==this.shape&&(o.intersects(t)&&this.addSelection(o))}}catch(t){i.e(t)}finally{i.f()}this.context.endBulkRender()}},{key:"addSelection",value:function addSelection(t){t.setSelected(!0),this.selectedShapes.push(t)}},{key:"getSelectedShapes",value:function getSelectedShapes(){this.selectedShapes=new Array;var t,r=select_group_tool_createForOfIteratorHelper(this.context.page.getShapes());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.isSelected()&&this.selectedShapes.push(i)}}catch(t){r.e(t)}finally{r.f()}}},{key:"hasSelectedShapes",value:function hasSelectedShapes(){return 0!=this.selectedShapes.length}},{key:"hitSelected",value:function hitSelected(t){var r,i=select_group_tool_createForOfIteratorHelper(this.selectedShapes);try{for(i.s();!(r=i.n()).done;){if(r.value.contains(t))return!0}}catch(t){i.e(t)}finally{i.f()}return!1}},{key:"removeSelection",value:function removeSelection(){var t,r=select_group_tool_createForOfIteratorHelper(this.selectedShapes);try{for(r.s();!(t=r.n()).done;){t.value.setSelected(!1)}}catch(t){r.e(t)}finally{r.f()}this.selectedShapes.length=0}},{key:"moveShapes",value:function moveShapes(t){if(this.hasSelectedShapes()){this.context.beginBulkRender();var r,i=select_group_tool_createForOfIteratorHelper(this.selectedShapes);try{for(i.s();!(r=i.n()).done;){r.value.moveByDelta(t)}}catch(t){i.e(t)}finally{i.f()}this.context.endBulkRender()}}}]),SelectGroupTool}();function select_group_action_createSuper(t){var r=function select_group_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var un=function(t){_inherits(SelectGroupAction,t);var r=select_group_action_createSuper(SelectGroupAction);function SelectGroupAction(){return _classCallCheck(this,SelectGroupAction),r.apply(this,arguments)}return _createClass(SelectGroupAction,[{key:"execute",value:function execute(t){t.setKeyEvent(this.keyEvent),t.setTool(new cn)}}]),SelectGroupAction}(ut),hn=function(){function PanTool(){_classCallCheck(this,PanTool),this.context=void 0,this.lastPoint=void 0}return _createClass(PanTool,[{key:"begin",value:function begin(t,r){this.context=r,this.lastPoint=t}},{key:"execute",value:function execute(t){var r=this.context.page.getSlideShape(),i=r.bounds,o=i.x+(this.lastPoint.x-t.x),a=i.y+(this.lastPoint.y-t.y);r.setPageRect(new ee(o,a,i.width,i.height)),this.lastPoint=t}},{key:"end",value:function end(t){}}]),PanTool}();function pan_action_createSuper(t){var r=function pan_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var dn=function(t){_inherits(PanAction,t);var r=pan_action_createSuper(PanAction);function PanAction(){return _classCallCheck(this,PanAction),r.apply(this,arguments)}return _createClass(PanAction,[{key:"execute",value:function execute(t){t.setKeyEvent(this.keyEvent),t.setTool(new hn)}}]),PanAction}(ut);function extend_view_tool_createSuper(t){var r=function extend_view_tool_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var fn=function(t){_inherits(ExtendViewTool,t);var r=extend_view_tool_createSuper(ExtendViewTool);function ExtendViewTool(t){var i;return _classCallCheck(this,ExtendViewTool),(i=r.call(this)).rect=void 0,i.rect=t,i}return _createClass(ExtendViewTool,[{key:"begin",value:function begin(t,r){r.page.getSlideShape().setPageRect(this.rect)}}]),ExtendViewTool}(Yt);function extend_view_action_createSuper(t){var r=function extend_view_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var pn=function(t){_inherits(ExtendViewAction,t);var r=extend_view_action_createSuper(ExtendViewAction);function ExtendViewAction(t){var i;return _classCallCheck(this,ExtendViewAction),(i=r.call(this)).rect=void 0,i.rect=t,i}return _createClass(ExtendViewAction,[{key:"execute",value:function execute(t){t.setKeyEvent(this.keyEvent),t.selectAndExecuteTool(new fn(this.rect))}}]),ExtendViewAction}(ut);function zoom_shape_createSuper(t){var r=function zoom_shape_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var gn=function(t){_inherits(ZoomShape,t);var r=zoom_shape_createSuper(ZoomShape);function ZoomShape(){return _classCallCheck(this,ZoomShape),r.call(this,null)}return _createClass(ZoomShape,[{key:"updateBounds",value:function updateBounds(){_get(_getPrototypeOf(ZoomShape.prototype),"updateBounds",this).call(this);var t=this.bounds.width,r=Math.abs(3*t/4)*Math.sign(this.bounds.height);this.bounds.height=r}}]),ZoomShape}(Tt),vn=function(){function ZoomTool(){_classCallCheck(this,ZoomTool),this.shape=void 0,this.context=void 0,this.initialized=void 0}return _createClass(ZoomTool,[{key:"begin",value:function begin(t,r){this.context=r,this.shape=new gn,this.context.page.addShape(this.shape)}},{key:"execute",value:function execute(t){this.initialized||(this.shape.setP0(t),this.initialized=!0),this.shape.setP1(t)}},{key:"end",value:function end(t){this.initialized=!1,this.context.page.removeShape(this.shape),this.context.page.getSlideShape().setPageRect(this.shape.bounds)}}]),ZoomTool}();function zoom_action_createSuper(t){var r=function zoom_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var yn=function(t){_inherits(ZoomAction,t);var r=zoom_action_createSuper(ZoomAction);function ZoomAction(){return _classCallCheck(this,ZoomAction),r.apply(this,arguments)}return _createClass(ZoomAction,[{key:"execute",value:function execute(t){t.setKeyEvent(this.keyEvent),t.setTool(new vn)}}]),ZoomAction}(ut);function zoom_out_tool_createSuper(t){var r=function zoom_out_tool_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var _n=function(t){_inherits(ZoomOutTool,t);var r=zoom_out_tool_createSuper(ZoomOutTool);function ZoomOutTool(){return _classCallCheck(this,ZoomOutTool),r.apply(this,arguments)}return _createClass(ZoomOutTool,[{key:"begin",value:function begin(t,r){r.page.getSlideShape().setPageRect(new ee(0,0,1,1))}}]),ZoomOutTool}(Yt);function zoom_out_action_createSuper(t){var r=function zoom_out_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var mn=function(t){_inherits(ZoomOutAction,t);var r=zoom_out_action_createSuper(ZoomOutAction);function ZoomOutAction(){return _classCallCheck(this,ZoomOutAction),r.apply(this,arguments)}return _createClass(ZoomOutAction,[{key:"execute",value:function execute(t){t.setKeyEvent(this.keyEvent),t.selectAndExecuteTool(new _n)}}]),ZoomOutAction}(ut);function rubber_tool_createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function rubber_tool_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return rubber_tool_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return rubber_tool_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function rubber_tool_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}var bn=function(){function RubberTool(){_classCallCheck(this,RubberTool),this.context=void 0}return _createClass(RubberTool,[{key:"begin",value:function begin(t,r){this.context=r}},{key:"execute",value:function execute(t){var r,i=new Array,o=rubber_tool_createForOfIteratorHelper(this.context.page.getShapes());try{for(o.s();!(r=o.n()).done;){var a=r.value;a.contains(t)&&i.push(a)}}catch(t){o.e(t)}finally{o.f()}0!=i.length&&this.context.page.addAction(new Zt(i))}},{key:"end",value:function end(t){}}]),RubberTool}();function rubber_action_createSuper(t){var r=function rubber_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var An=function(t){_inherits(RubberAction,t);var r=rubber_action_createSuper(RubberAction);function RubberAction(){return _classCallCheck(this,RubberAction),r.apply(this,arguments)}return _createClass(RubberAction,[{key:"execute",value:function execute(t){t.setKeyEvent(this.keyEvent),t.setTool(new bn)}}]),RubberAction}(ut);function typesetting_shape_createSuper(t){var r=function typesetting_shape_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Sn=function(t){_inherits(TypesettingShape,t);var r=typesetting_shape_createSuper(TypesettingShape);function TypesettingShape(t){var i;return _classCallCheck(this,TypesettingShape),(i=r.call(this)).handle=void 0,i.textAttributes=void 0,i.textColor=void 0,i.text=void 0,i.handle=t,i}return _createClass(TypesettingShape,[{key:"getHandle",value:function getHandle(){return this.handle}},{key:"setText",value:function setText(t){this.text!==t&&(this.text=t,this.fireShapeEvent(new J(this,this.bounds)))}},{key:"getText",value:function getText(){return this.text}},{key:"setTextColor",value:function setTextColor(t){this.textColor&&this.textColor.equals(t)||(this.textColor=t,this.fireShapeEvent(new J(this,this.bounds)))}},{key:"getTextColor",value:function getTextColor(){return this.textColor}},{key:"setTextAttributes",value:function setTextAttributes(t){this.textAttributes=new Map(t),this.fireShapeEvent(new J(this,this.bounds))}},{key:"getTextAttributes",value:function getTextAttributes(){return this.textAttributes}},{key:"isUnderline",value:function isUnderline(){return this.textAttributes.get("underline")}},{key:"isStrikethrough",value:function isStrikethrough(){return this.textAttributes.get("strikethrough")}},{key:"setLocation",value:function setLocation(t){return(this.bounds.x!==t.x||this.bounds.y!==t.y)&&(this.bounds.x=t.x,this.bounds.y=t.y,this.fireShapeEvent(new J(this,this.bounds)),!0)}},{key:"updateBounds",value:function updateBounds(){}}]),TypesettingShape}(te);function text_shape_createSuper(t){var r=function text_shape_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var wn=function(t){_inherits(TextShape,t);var r=text_shape_createSuper(TextShape);function TextShape(){var t;_classCallCheck(this,TextShape);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=r.call.apply(r,[this].concat(o))).font=void 0,t}return _createClass(TextShape,[{key:"setFont",value:function setFont(t){this.font&&this.font.equals(t)||(this.font=t,this.fireShapeEvent(new J(this,this.bounds)))}},{key:"getFont",value:function getFont(){return this.font}},{key:"clone",value:function clone(){var t=new TextShape(this.getHandle());return t.setLocation(new a(this.bounds.x,this.bounds.y)),t.setFont(this.font),t.setTextColor(this.getTextColor()),t.setTextAttributes(new Map(this.getTextAttributes())),t}}]),TextShape}(Sn),xn=function(){function TextTool(t){_classCallCheck(this,TextTool),this.handle=void 0,this.shape=void 0,this.context=void 0,this.handle=t}return _createClass(TextTool,[{key:"begin",value:function begin(t,r){this.context=r,this.shape=new wn(this.handle)}},{key:"execute",value:function execute(t){}},{key:"end",value:function end(t){this.shape.setLocation(t),this.context.page.addShape(this.shape)}}]),TextTool}();function text_action_createSuper(t){var r=function text_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Cn=function(t){_inherits(TextAction,t);var r=text_action_createSuper(TextAction);function TextAction(t){var i;return _classCallCheck(this,TextAction),(i=r.call(this)).handle=void 0,i.handle=t,i}return _createClass(TextAction,[{key:"execute",value:function execute(t){t.setKeyEvent(this.keyEvent),t.setTool(new xn(this.handle))}}]),TextAction}(ut);function text_font_tool_createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function text_font_tool_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return text_font_tool_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return text_font_tool_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function text_font_tool_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}function text_font_tool_createSuper(t){var r=function text_font_tool_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var kn=function(t){_inherits(TextFontTool,t);var r=text_font_tool_createSuper(TextFontTool);function TextFontTool(t,i,o,a){var l;return _classCallCheck(this,TextFontTool),(l=r.call(this)).handle=void 0,l.font=void 0,l.textColor=void 0,l.textAttributes=void 0,l.handle=t,l.font=i,l.textColor=o,l.textAttributes=a,l}return _createClass(TextFontTool,[{key:"begin",value:function begin(t,r){var i,o=text_font_tool_createForOfIteratorHelper(r.page.getShapes());try{for(o.s();!(i=o.n()).done;){var a=i.value;if(a instanceof wn&&a.getHandle()===this.handle){a.setFont(this.font),a.setTextColor(this.textColor),a.setTextAttributes(this.textAttributes);break}}}catch(t){o.e(t)}finally{o.f()}}}]),TextFontTool}(Yt);function text_font_action_createSuper(t){var r=function text_font_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Pn=function(t){_inherits(TextFontAction,t);var r=text_font_action_createSuper(TextFontAction);function TextFontAction(t,i,o,a){var l;return _classCallCheck(this,TextFontAction),(l=r.call(this)).handle=void 0,l.font=void 0,l.textColor=void 0,l.textAttributes=void 0,l.handle=t,l.font=i,l.textColor=o,l.textAttributes=a,l}return _createClass(TextFontAction,[{key:"execute",value:function execute(t){t.selectAndExecuteTool(new kn(this.handle,this.font,this.textColor,this.textAttributes))}}]),TextFontAction}(ut);function text_change_tool_createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function text_change_tool_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return text_change_tool_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return text_change_tool_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function text_change_tool_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}function text_change_tool_createSuper(t){var r=function text_change_tool_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Rn=function(t){_inherits(TextChangeTool,t);var r=text_change_tool_createSuper(TextChangeTool);function TextChangeTool(t,i){var o;return _classCallCheck(this,TextChangeTool),(o=r.call(this)).handle=void 0,o.text=void 0,o.handle=t,o.text=i,o}return _createClass(TextChangeTool,[{key:"begin",value:function begin(t,r){var i,o=text_change_tool_createForOfIteratorHelper(r.page.getShapes());try{for(o.s();!(i=o.n()).done;){var a=i.value;if(a instanceof Sn&&a.getHandle()===this.handle){a.setText(this.text);break}}}catch(t){o.e(t)}finally{o.f()}}}]),TextChangeTool}(Yt);function text_change_action_createSuper(t){var r=function text_change_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Tn=function(t){_inherits(TextChangeAction,t);var r=text_change_action_createSuper(TextChangeAction);function TextChangeAction(t,i){var o;return _classCallCheck(this,TextChangeAction),(o=r.call(this)).handle=void 0,o.text=void 0,o.handle=t,o.text=i,o}return _createClass(TextChangeAction,[{key:"execute",value:function execute(t){t.selectAndExecuteTool(new Rn(this.handle,this.text))}}]),TextChangeAction}(ut);function text_move_tool_createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function text_move_tool_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return text_move_tool_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return text_move_tool_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function text_move_tool_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}function text_move_tool_createSuper(t){var r=function text_move_tool_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var En=function(t){_inherits(TextMoveTool,t);var r=text_move_tool_createSuper(TextMoveTool);function TextMoveTool(t,i){var o;return _classCallCheck(this,TextMoveTool),(o=r.call(this)).handle=void 0,o.point=void 0,o.handle=t,o.point=i,o}return _createClass(TextMoveTool,[{key:"begin",value:function begin(t,r){var i,o=text_move_tool_createForOfIteratorHelper(r.page.getShapes());try{for(o.s();!(i=o.n()).done;){var a=i.value;if(a instanceof Sn&&a.getHandle()===this.handle){r.beginBulkRender(),a.setLocation(this.point),r.endBulkRender();break}}}catch(t){o.e(t)}finally{o.f()}}}]),TextMoveTool}(Yt);function text_move_action_createSuper(t){var r=function text_move_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Ln=function(t){_inherits(TextMoveAction,t);var r=text_move_action_createSuper(TextMoveAction);function TextMoveAction(t,i){var o;return _classCallCheck(this,TextMoveAction),(o=r.call(this)).handle=void 0,o.point=void 0,o.handle=t,o.point=i,o}return _createClass(TextMoveAction,[{key:"execute",value:function execute(t){t.selectAndExecuteTool(new En(this.handle,this.point))}}]),TextMoveAction}(ut);function text_remove_tool_createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function text_remove_tool_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return text_remove_tool_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return text_remove_tool_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function text_remove_tool_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}function text_remove_tool_createSuper(t){var r=function text_remove_tool_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var In=function(t){_inherits(TextRemoveTool,t);var r=text_remove_tool_createSuper(TextRemoveTool);function TextRemoveTool(t){var i;return _classCallCheck(this,TextRemoveTool),(i=r.call(this)).handle=void 0,i.handle=t,i}return _createClass(TextRemoveTool,[{key:"begin",value:function begin(t,r){var i,o=text_remove_tool_createForOfIteratorHelper(r.page.getShapes());try{for(o.s();!(i=o.n()).done;){var a=i.value;if(a instanceof Sn&&a.getHandle()===this.handle){r.page.removeShape(a);break}}}catch(t){o.e(t)}finally{o.f()}}}]),TextRemoveTool}(Yt);function text_remove_action_createSuper(t){var r=function text_remove_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var On=function(t){_inherits(TextRemoveAction,t);var r=text_remove_action_createSuper(TextRemoveAction);function TextRemoveAction(t){var i;return _classCallCheck(this,TextRemoveAction),(i=r.call(this)).handle=void 0,i.handle=t,i}return _createClass(TextRemoveAction,[{key:"execute",value:function execute(t){t.selectAndExecuteTool(new In(this.handle))}}]),TextRemoveAction}(ut),Mn=function(){function Font(t,r,i,o){_classCallCheck(this,Font),this.family=void 0,this.size=void 0,this.style=void 0,this.weight=void 0,this.family=t,this.size=r,this.style=i,this.weight=o}return _createClass(Font,[{key:"equals",value:function equals(t){return!!t&&(this===t||this.family===t.family&&this.size===t.size&&this.style===t.style&&this.weight===t.weight)}},{key:"toString",value:function toString(){var t=this.size+"px "+this.family;return this.weight&&(t=this.weight+" "+t),this.style&&(t=this.style+" "+t),t}}]),Font}();function text_highlight_shape_createSuper(t){var r=function text_highlight_shape_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Fn=function(t){_inherits(TextHighlightShape,t);var r=text_highlight_shape_createSuper(TextHighlightShape);function TextHighlightShape(t){var i;return _classCallCheck(this,TextHighlightShape),(i=r.call(this)).color=void 0,i.color=t,i}return _createClass(TextHighlightShape,[{key:"addTextBounds",value:function addTextBounds(t){this.bounds.isEmpty()?this.bounds.set(t.x,t.y,t.width,t.height):this.bounds.union(t),this.fireShapeEvent(new J(this,this.bounds))}},{key:"getColor",value:function getColor(){return this.color}},{key:"contains",value:function contains(t){return this.bounds.containsPoint(t)}},{key:"intersects",value:function intersects(t){return null!=this.bounds.intersection(t)}},{key:"clone",value:function clone(){var t=new TextHighlightShape(this.color);return t.setKeyEvent(this.getKeyEvent()),t}},{key:"updateBounds",value:function updateBounds(){}}]),TextHighlightShape}(te);function text_highlight_tool_createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function text_highlight_tool_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return text_highlight_tool_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return text_highlight_tool_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function text_highlight_tool_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}var Dn=function(){function TextHighlightTool(t,r){_classCallCheck(this,TextHighlightTool),this.color=void 0,this.textBounds=void 0,this.shape=void 0,this.color=t,this.textBounds=r}return _createClass(TextHighlightTool,[{key:"begin",value:function begin(t,r){var i,o=text_highlight_tool_createForOfIteratorHelper(this.textBounds);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.containsPoint(t)&&(this.shape||(this.shape=new Fn(this.color),r.page.addAction(new pt([this.shape]))),this.shape.addTextBounds(a))}}catch(t){o.e(t)}finally{o.f()}}},{key:"execute",value:function execute(t){var r,i=text_highlight_tool_createForOfIteratorHelper(this.textBounds);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.containsPoint(t)&&this.shape.addTextBounds(o)}}catch(t){i.e(t)}finally{i.f()}}},{key:"end",value:function end(t){this.shape=null}}]),TextHighlightTool}();function text_highlight_action_createSuper(t){var r=function text_highlight_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Nn=function(t){_inherits(TextHighlightAction,t);var r=text_highlight_action_createSuper(TextHighlightAction);function TextHighlightAction(t,i){var o;return _classCallCheck(this,TextHighlightAction),(o=r.call(this)).color=void 0,o.textBounds=void 0,o.color=t,o.textBounds=i,o}return _createClass(TextHighlightAction,[{key:"execute",value:function execute(t){t.setKeyEvent(this.keyEvent),t.setTool(new Dn(this.color,this.textBounds))}}]),TextHighlightAction}(ut);function latex_shape_createSuper(t){var r=function latex_shape_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Bn=function(t){_inherits(LatexShape,t);var r=latex_shape_createSuper(LatexShape);function LatexShape(){var t;_classCallCheck(this,LatexShape);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=r.call.apply(r,[this].concat(o))).font=void 0,t}return _createClass(LatexShape,[{key:"setFont",value:function setFont(t){this.font&&this.font.equals(t)||(this.font=t,this.fireShapeEvent(new J(this,this.bounds)))}},{key:"getFont",value:function getFont(){return this.font}},{key:"clone",value:function clone(){var t=new LatexShape(this.getHandle());return t.setLocation(new a(this.bounds.x,this.bounds.y)),t.setFont(this.font),t.setTextColor(this.getTextColor()),t.setTextAttributes(new Map(this.getTextAttributes())),t}}]),LatexShape}(Sn),zn=function(){function LatexTool(t){_classCallCheck(this,LatexTool),this.handle=void 0,this.shape=void 0,this.context=void 0,this.handle=t}return _createClass(LatexTool,[{key:"begin",value:function begin(t,r){this.context=r,this.shape=new Bn(this.handle)}},{key:"execute",value:function execute(t){}},{key:"end",value:function end(t){this.shape.setLocation(t),this.context.page.addShape(this.shape)}}]),LatexTool}();function latex_action_createSuper(t){var r=function latex_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var jn=function(t){_inherits(LatexAction,t);var r=latex_action_createSuper(LatexAction);function LatexAction(t){var i;return _classCallCheck(this,LatexAction),(i=r.call(this)).handle=void 0,i.handle=t,i}return _createClass(LatexAction,[{key:"execute",value:function execute(t){t.setKeyEvent(this.keyEvent),t.setTool(new zn(this.handle))}}]),LatexAction}(ut);function latex_font_tool_createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function latex_font_tool_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return latex_font_tool_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return latex_font_tool_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function latex_font_tool_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}function latex_font_tool_createSuper(t){var r=function latex_font_tool_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Un=function(t){_inherits(LatexFontTool,t);var r=latex_font_tool_createSuper(LatexFontTool);function LatexFontTool(t,i,o,a){var l;return _classCallCheck(this,LatexFontTool),(l=r.call(this)).handle=void 0,l.font=void 0,l.textColor=void 0,l.textAttributes=void 0,l.handle=t,l.font=i,l.textColor=o,l.textAttributes=a,l}return _createClass(LatexFontTool,[{key:"begin",value:function begin(t,r){var i,o=latex_font_tool_createForOfIteratorHelper(r.page.getShapes());try{for(o.s();!(i=o.n()).done;){var a=i.value;if(a instanceof Bn&&a.getHandle()===this.handle){a.setFont(this.font),a.setTextColor(this.textColor),a.setTextAttributes(this.textAttributes);break}}}catch(t){o.e(t)}finally{o.f()}}}]),LatexFontTool}(Yt);function latex_font_action_createSuper(t){var r=function latex_font_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Hn=function(t){_inherits(LatexFontAction,t);var r=latex_font_action_createSuper(LatexFontAction);function LatexFontAction(t,i,o,a){var l;return _classCallCheck(this,LatexFontAction),(l=r.call(this)).handle=void 0,l.font=void 0,l.textColor=void 0,l.textAttributes=void 0,l.handle=t,l.font=i,l.textColor=o,l.textAttributes=a,l}return _createClass(LatexFontAction,[{key:"execute",value:function execute(t){t.selectAndExecuteTool(new Un(this.handle,this.font,this.textColor,this.textAttributes))}}]),LatexFontAction}(ut),Vn=function(){function ActionParser(){_classCallCheck(this,ActionParser)}return _createClass(ActionParser,null,[{key:"parse",value:function parse(t,r){var i=null,o=this.parseActionHeader(t);switch(r){case st.CLEAR_SHAPES:i=this.atomicAction(t,en);break;case st.UNDO:i=this.atomicAction(t,Xt);break;case st.REDO:i=this.atomicAction(t,$t);break;case st.KEY:i=this.atomicAction(t,tn);break;case st.PEN:i=this.toolBrushAction(t,bt);break;case st.HIGHLIGHTER:i=this.toolBrushAction(t,Ct);break;case st.POINTER:i=this.toolBrushAction(t,Rt);break;case st.ARROW:i=this.toolBrushAction(t,It);break;case st.LINE:i=this.toolBrushAction(t,Ft);break;case st.RECTANGLE:i=this.toolBrushAction(t,Bt);break;case st.ELLIPSE:i=this.toolBrushAction(t,Ht);break;case st.CLONE:i=this.atomicAction(t,rn);break;case st.SELECT:i=this.atomicAction(t,on);break;case st.SELECT_GROUP:i=this.atomicAction(t,un);break;case st.LATEX:i=this.textAction(t,jn);break;case st.LATEX_FONT_CHANGE:i=this.latexFontAction(t);break;case st.TEXT:i=this.textAction(t,Cn);break;case st.TEXT_CHANGE:i=this.textChangeAction(t);break;case st.TEXT_FONT_CHANGE:i=this.textFontAction(t);break;case st.TEXT_LOCATION_CHANGE:i=this.textMoveAction(t);break;case st.TEXT_REMOVE:i=this.textRemoveAction(t);break;case st.TEXT_SELECTION:i=this.textHighlightAction(t);break;case st.TOOL_BEGIN:i=this.toolDragAction(t,Gt);break;case st.TOOL_EXECUTE:i=this.toolDragAction(t,Wt);break;case st.TOOL_END:i=this.toolDragAction(t,qt);break;case st.PANNING:i=this.atomicAction(t,dn);break;case st.EXTEND_VIEW:i=this.extendViewAction(t);break;case st.ZOOM:i=this.atomicAction(t,yn);break;case st.ZOOM_OUT:i=this.atomicAction(t,mn);break;case st.RUBBER:i=this.atomicAction(t,An)}return i&&(i.keyEvent=o),i}},{key:"parseActionHeader",value:function parseActionHeader(t){var r=null;return(t.getInt32()&this.KEY_EVENT_MASK)==this.KEY_EVENT_MASK&&(r=this.parseKeyEvent(t)),r}},{key:"parseKeyEvent",value:function parseKeyEvent(t){t.getInt32();var r,i=t.getInt32();switch(t.getInt8()){case 0:r="keydown";break;case 1:r="keyup";break;case 2:r="keypress";break;default:throw new Error("Unknown key event type")}return new KeyboardEvent(r,{shiftKey:0!=(2&i),ctrlKey:0!=(4&i),altKey:0!=(8&i)})}},{key:"atomicAction",value:function atomicAction(t,r){return new r}},{key:"toolBrushAction",value:function toolBrushAction(t,r){var i=t.getInt32(),o=(t.getInt8(),t.getFloat64()),a=wt.fromRGBNumber(i);return new r(new At(a,o))}},{key:"toolDragAction",value:function toolDragAction(t,r){return new r(new ct(t.getFloat32(),t.getFloat32(),t.getFloat32()))}},{key:"extendViewAction",value:function extendViewAction(t){var r=t.getFloat64(),i=t.getFloat64(),o=t.getFloat64(),a=t.getFloat64();return new pn(new ee(r,i,o,a))}},{key:"textAction",value:function textAction(t,r){return new r(t.getInt32())}},{key:"textChangeAction",value:function textChangeAction(t){var r=t.getInt32(),i=t.getInt32(),o=t.getString(i);return new Tn(r,o)}},{key:"textMoveAction",value:function textMoveAction(t){var r=t.getInt32(),i=new a(t.getFloat64(),t.getFloat64());return new Ln(r,i)}},{key:"textRemoveAction",value:function textRemoveAction(t){var r=t.getInt32();return new On(r)}},{key:"textHighlightAction",value:function textHighlightAction(t){for(var r=t.getInt32(),i=t.getInt32(),o=wt.fromRGBNumber(r),a=new Array,l=0;l<i;l++){var c=t.getFloat64(),u=t.getFloat64(),h=t.getFloat64(),d=t.getFloat64();a.push(new ee(c,u,h,d))}return new Nn(o,a)}},{key:"textFontAction",value:function textFontAction(t){var r,i=t.getInt32(),o=t.getInt32(),a=t.getInt32(),l=t.getString(a),c=t.getFloat64(),u=t.getInt8(),h=t.getInt8(),d=t.getInt8()>0,p=t.getInt8()>0,g=100*(h+1);switch(u){case 0:r="normal";break;case 1:r="italic";break;default:console.error("Unsupported font style")}var v=wt.fromRGBNumber(o),y=new Mn(l,c,r,g.toString()),_=new Map;return _.set("strikethrough",d),_.set("underline",p),new Pn(i,y,v,_)}},{key:"latexFontAction",value:function latexFontAction(t){var r=t.getInt32(),i=(t.getInt32(),t.getFloat32()),o=t.getInt32(),a=wt.fromRGBNumber(o),l=new Mn("Arial",i),c=new Map;return new Hn(r,l,a,c)}}]),ActionParser}();Vn.KEY_EVENT_MASK=1;var Gn=function RecordedPage(){_classCallCheck(this,RecordedPage),this.staticActions=[],this.playbackActions=[],this.pageNumber=void 0,this.timestamp=void 0},Wn=function(){function RecordedPageParser(){_classCallCheck(this,RecordedPageParser)}return _createClass(RecordedPageParser,[{key:"parse",value:function parse(t){var r=new Gn,i=t.getInt32(),o=t.getInt32();r.pageNumber=i,r.timestamp=o;var a=t.getInt32();if(a>0)for(var l=t.byteOffset+a;t.byteOffset<l;){t.getInt32();var c=t.getInt8(),u=t.getInt32(),h=Vn.parse(t,c);h.timestamp=u,h&&r.staticActions.push(h)}var d=t.getInt32();if(d>0)for(var p=t.byteOffset+d;t.byteOffset<p;){t.getInt32();var g=t.getInt8(),v=t.getInt32(),y=Vn.parse(t,g);y.timestamp=v,y&&r.playbackActions.push(y)}return r}}]),RecordedPageParser}(),qn=function(){function FileActionParser(){_classCallCheck(this,FileActionParser)}return _createClass(FileActionParser,[{key:"parse",value:function parse(t){for(var r=new lt(t),i=t.byteLength,o=[];r.byteOffset<i;){r.getInt32();var a=(new Wn).parse(r);a&&o.push(a)}return o}}]),FileActionParser}(),Yn=function Recording(){_classCallCheck(this,Recording),this.audio=void 0,this.document=void 0,this.actions=void 0},Qn=function RawRecording(){_classCallCheck(this,RawRecording),this.audio=void 0,this.document=void 0,this.actions=void 0},Xn=function RecordingFileHeader(){_classCallCheck(this,RecordingFileHeader),this.version=void 0,this.duration=void 0,this.checksum=void 0,this.actionLength=void 0,this.audioLength=void 0,this.documentLength=void 0};Xn.FILE_MARKER=777014354,Xn.LENGTH=48;var Kn,$n=function(){function RecordingFileReader(){_classCallCheck(this,RecordingFileReader)}var t;return _createClass(RecordingFileReader,[{key:"read",value:(t=_asyncToGenerator(se().mark((function _callee(t){var r,i,o,a,l=this;return se().wrap((function _callee$(c){for(;;)switch(c.prev=c.next){case 0:return r=0,i=Xn.LENGTH,o=null,a=new Qn,c.abrupt("return",this.readHeader(t).then((function(a){return r=i,i+=(o=a).actionLength,l.readActions(t,r,i)})).then((function(c){return a.actions=c,r=i,i+=o.documentLength,l.readDocument(t,r,i)})).then((function(c){return a.document=c,r=i,i+=o.audioLength,l.readAudio(t,r,i)})).then((function(t){return a.audio=t,a})));case 5:case"end":return c.stop()}}),_callee,this)}))),function read(r){return t.apply(this,arguments)})},{key:"readActions",value:function readActions(t,r,i){var o=new FileReader,a=t.slice(r,i);return new Promise((function(t,r){o.onloadend=function(i){var o=i.target;if(o.error)r(o.error);else{var a=(new qn).parse(o.result);t(a)}},o.readAsArrayBuffer(a)}))}},{key:"readAudio",value:function readAudio(t,r,i){return t.slice(r,i)}},{key:"readDocument",value:function readDocument(t,r,i){var o=new FileReader,a=t.slice(r,i);return new Promise((function(t,r){o.onloadend=function(i){var o=i.target;if(o.error)r(o.error);else{var a=new Uint8Array(o.result);t(a)}},o.readAsArrayBuffer(a)}))}},{key:"readHeader",value:function readHeader(t){var r=new FileReader,i=t.slice(0,Xn.LENGTH);return new Promise((function(t,o){r.onloadend=function(r){var i=r.target;if(i.error)o(i.error);else{var a=new lt(i.result);if(a.getInt32()!==Xn.FILE_MARKER)return void o("Invalid recording file header.");var l=new Xn;l.version=a.getInt32(),a.skip(8),a.skip(20),l.actionLength=a.getInt32(),l.documentLength=a.getInt32(),l.audioLength=a.getInt32(),t(l)}},r.readAsArrayBuffer(i)}))}}]),RecordingFileReader}(),Zn=function(){function PageEvent(t,r,i,o){_classCallCheck(this,PageEvent),this._changeType=void 0,this._page=void 0,this._shape=void 0,this._dirtyRegion=void 0,this._page=t,this._changeType=r,this._shape=i,this._dirtyRegion=o}return _createClass(PageEvent,[{key:"changeType",get:function get(){return this._changeType}},{key:"page",get:function get(){return this._page}},{key:"shape",get:function get(){return this._shape}},{key:"dirtyRegion",get:function get(){return this._dirtyRegion}}]),PageEvent}();!function(t){t.Clear="Clear",t.ShapeAdded="ShapeAdded",t.ShapeRemoved="ShapeRemoved",t.ShapeModified="ShapeModified",t.PageTransform="PageTransform"}(Kn||(Kn={}));var Jn=function(){function ActionHandler(t){_classCallCheck(this,ActionHandler),this.undoActions=[],this.redoActions=[],this.model=void 0,this.model=t}return _createClass(ActionHandler,[{key:"executeAction",value:function executeAction(t){this.undoActions.push(t),this.redoActions.length=0,t.execute(this.model)}},{key:"undo",value:function undo(){if(!(this.undoActions.length<1)){var t=this.undoActions.pop();this.redoActions.push(t),t.undo(this.model)}}},{key:"redo",value:function redo(){if(!(this.redoActions.length<1)){var t=this.redoActions.pop();this.undoActions.push(t),t.redo(this.model)}}},{key:"clear",value:function clear(){this.undoActions.length=0,this.redoActions.length=0}}]),ActionHandler}(),er=function(){function Page(t,r){_classCallCheck(this,Page),this.shapeChangeListener=void 0,this.actionHandler=new Jn(this),this.changeEvent=new $,this.shapes=[],this.slideShape=void 0,this.document=void 0,this.pageNumber=void 0,this.document=t,this.pageNumber=r,this.slideShape=new ne(this),this.slideShape.addChangeListener(this.onSlideTransform.bind(this)),this.shapeChangeListener=this.onShapeModified.bind(this)}return _createClass(Page,[{key:"getNativePage",value:function getNativePage(){return this.document.getNativePage(this.pageNumber)}},{key:"addChangeListener",value:function addChangeListener(t){return this.changeEvent.subscribe(t)}},{key:"removeChangeListener",value:function removeChangeListener(t){this.changeEvent.unsubscribe(t)}},{key:"addShape",value:function addShape(t){var r=this.shapes.length;this.shapes.push(t)>r&&(t.addChangeListener(this.shapeChangeListener),this.firePageEvent(new Zn(this,Kn.ShapeAdded,t)))}},{key:"removeShape",value:function removeShape(t){var r=this.shapes.indexOf(t);r>-1&&(this.shapes.splice(r,1).length>0&&(t.removeChangeListener(this.shapeChangeListener),this.firePageEvent(new Zn(this,Kn.ShapeRemoved,t))))}},{key:"getSlideShape",value:function getSlideShape(){return this.slideShape}},{key:"getShapes",value:function getShapes(){return this.shapes}},{key:"hasShapes",value:function hasShapes(){return this.shapes.length>0}},{key:"addAction",value:function addAction(t){this.actionHandler.executeAction(t)}},{key:"undo",value:function undo(){this.actionHandler.undo()}},{key:"redo",value:function redo(){this.actionHandler.redo()}},{key:"clear",value:function clear(){this.actionHandler.clear(),this.shapes.length=0,this.firePageEvent(new Zn(this,Kn.Clear,null))}},{key:"onSlideTransform",value:function onSlideTransform(t){this.firePageEvent(new Zn(this,Kn.PageTransform,t.shape,t.dirtyRegion))}},{key:"onShapeModified",value:function onShapeModified(t){this.firePageEvent(new Zn(this,Kn.ShapeModified,t.shape,t.dirtyRegion))}},{key:"firePageEvent",value:function firePageEvent(t){this.changeEvent.publish(t)}}]),Page}();function pdf_js_document_createSuper(t){var r=function pdf_js_document_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var tr,nr=function(t){_inherits(PdfJsDocument,t);var r,i=pdf_js_document_createSuper(PdfJsDocument);function PdfJsDocument(t){var r;return _classCallCheck(this,PdfJsDocument),(r=i.call(this)).document=void 0,r.document=t,r.loadPages(t),r}return _createClass(PdfJsDocument,[{key:"getPageText",value:(r=_asyncToGenerator(se().mark((function _callee(t){var r,i;return se().wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.document.getPage(t+1);case 2:return r=o.sent,o.next=5,r.getTextContent();case 5:return i=o.sent,o.abrupt("return",i.items.map((function(t){return t.str})).join(" "));case 7:case"end":return o.stop()}}),_callee,this)}))),function getPageText(t){return r.apply(this,arguments)})},{key:"getNativePage",value:function getNativePage(t){return this.document.getPage(t+1)}},{key:"loadPages",value:function loadPages(t){this.pages=[];for(var r=0;r<t.numPages;r++)this.pages.push(new er(this,r))}}]),PdfJsDocument}(function(){function SlideDocument(){_classCallCheck(this,SlideDocument),this.pages=void 0}return _createClass(SlideDocument,[{key:"getPageCount",value:function getPageCount(){return this.pages.length}},{key:"getPage",value:function getPage(t){if(t<0||t>this.pages.length-1)throw new Error("Page number ".concat(t," out of bounds."));return this.pages[t]}}]),SlideDocument}()),rr=function(){function DocumentService(){_classCallCheck(this,DocumentService)}return _createClass(DocumentService,[{key:"loadDocument",value:function loadDocument(t){return new Promise((function(r,i){(0,he.getDocument)(t).promise.then((function(t){r(new nr(t))}),(function(t){i(t)}))}))}}]),DocumentService}(),ir=function(){function OpenRecordingCommand(t){_classCallCheck(this,OpenRecordingCommand),this.file=void 0,this.file=t}return _createClass(OpenRecordingCommand,[{key:"execute",value:function execute(t){var r=this;return new Promise((function(i,o){var a=(new $n).read(r.file);a.then((function(r){(new rr).loadDocument(r.document).then((function(o){var a=new Yn;a.actions=r.actions,a.audio=r.audio,a.document=o,t.setRecording(a),i()})).catch((function(t){o(t)}))})),a.catch((function(t){o(t)}))}))}}]),OpenRecordingCommand}(),sr=function(){function SidebarPositionCommand(t){_classCallCheck(this,SidebarPositionCommand),this.side=void 0,this.side=t}return _createClass(SidebarPositionCommand,[{key:"execute",value:function execute(t){var r=this;return new Promise((function(i,o){t.setSidebarPosition(r.side),i()}))}}]),SidebarPositionCommand}();function web_snackbar_createSuper(t){var r=function web_snackbar_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var or=T({selector:"web-snackbar",template:__webpack_require__(222),styles:[__webpack_require__(776)]})(tr=function(t){_inherits(WebSnackbar,t);var r=web_snackbar_createSuper(WebSnackbar);function WebSnackbar(){var t;return _classCallCheck(this,WebSnackbar),(t=r.call(this)).onClose=void 0,t.position=void 0,t.text=void 0,t.timeout=void 0,t.timeoutId=void 0,t.top=void 0,t.bottom=void 0,t.text="",t.position="top-center",t.timeout=3e3,t}return _createClass(WebSnackbar,[{key:"connectedCallback",value:function connectedCallback(){var t=this;addEventListener("transitionend",(function transitionListener(r){"opacity"===r.propertyName&&"0"===t.style.opacity&&(removeEventListener("transitionend",transitionListener),t.parentElement.removeChild(t))})),this.querySelector("span").innerHTML=this.text,this.querySelector("svg").addEventListener("click",this.close.bind(this)),this.top=getComputedStyle(this).top,this.bottom=getComputedStyle(this).bottom,this.classList.add(this.position),this.style.opacity="1",this.timeoutId=window.setTimeout(this.close.bind(this),this.timeout)}},{key:"setPosition",value:function setPosition(t){this.position=t}},{key:"setText",value:function setText(t){this.text=t}},{key:"setTimeout",value:function setTimeout(t){this.timeout=t}},{key:"setOnClose",value:function setOnClose(t){this.onClose=t}},{key:"show",value:function show(){document.body.appendChild(this)}},{key:"close",value:function close(){window.clearTimeout(this.timeoutId),this.style.opacity="0",this.style.top=this.top,this.style.bottom=this.bottom,this.onClose&&this.onClose()}}]),WebSnackbar}(j))||tr;function toolbar_presenter_createSuper(t){var r=function toolbar_presenter_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var ar=function(t){_inherits(ToolbarPresenter,t);var r,i=toolbar_presenter_createSuper(ToolbarPresenter);function ToolbarPresenter(t,r,o){var a;return _classCallCheck(this,ToolbarPresenter),(a=i.call(this,t,r)).recordingPlayer=void 0,a.searchService=void 0,a.recordingPlayer=o,a}return _createClass(ToolbarPresenter,[{key:"initialize",value:function initialize(){this.view.setOnOpenRecording(this.onOpenRecording.bind(this)),this.view.setOnSiderbarPosition(this.onSidebarPosition.bind(this)),this.view.setOnSearch(this.onSearch.bind(this)),this.view.setOnSearchNext(this.onSearchNext.bind(this)),this.view.setOnSearchPrevious(this.onSearchPrevious.bind(this))}},{key:"setSearchService",value:function setSearchService(t){this.searchService=t}},{key:"onOpenRecording",value:function onOpenRecording(t){t&&this.execute(new ir(t)).catch((function(t){var r=new or;r.setText(t),r.show(),console.error(t)}))}},{key:"onSidebarPosition",value:function onSidebarPosition(t){this.execute(new sr(be.valueOf(t))).catch((function(t){var r=new or;r.setText(t),r.show(),console.error(t)}))}},{key:"onSearch",value:(r=_asyncToGenerator(se().mark((function _callee(t){var r,i,o;return se().wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(null!==t&&null===t.match(/^ *$/)){a.next=2;break}return a.abrupt("return",null);case 2:this.searchService.search(t),r=new Array,i=this.recordingPlayer.getDocument(),o=0;case 6:if(!(o<i.getPageCount())){a.next=14;break}return a.next=9,i.getPageText(o);case 9:-1!==a.sent.search(new RegExp(t,"i"))&&r.push(o);case 11:o++,a.next=6;break;case 14:return a.abrupt("return",new U(r));case 15:case"end":return a.stop()}}),_callee,this)}))),function onSearch(t){return r.apply(this,arguments)})},{key:"onSearchNext",value:function onSearchNext(t){this.recordingPlayer.setSelectedPage(t.getCurrentPageIndex())}},{key:"onSearchPrevious",value:function onSearchPrevious(t){this.recordingPlayer.setSelectedPage(t.getCurrentPageIndex())}}]),ToolbarPresenter}(at);function sidebar_presenter_createSuper(t){var r=function sidebar_presenter_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var lr=function(t){_inherits(SidebarPresenter,t);var r=sidebar_presenter_createSuper(SidebarPresenter);function SidebarPresenter(t,i,o){var a;return _classCallCheck(this,SidebarPresenter),(a=r.call(this,t,i)).recordingPlayer=void 0,a.selectedPageIndex=void 0,a.recordingPlayer=o,a}return _createClass(SidebarPresenter,[{key:"setSelectedPage",value:function setSelectedPage(t){this.selectedPageIndex!==t&&(this.view.setSelectedPageIndex(this.selectedPageIndex,t),this.selectedPageIndex=t)}},{key:"initialize",value:function initialize(){this.view.setDocument(this.recordingPlayer.getDocument()),this.view.setOnPageSelect(this.onPageSelect.bind(this)),this.recordingPlayer.getSelectedPageProperty().subscribe(this.setSelectedPage.bind(this)),this.setSelectedPage(0)}},{key:"onPageSelect",value:function onPageSelect(t){this.recordingPlayer.setSelectedPage(t)}}]),SidebarPresenter}(at),cr=function(){function FullscreenCommand(t){_classCallCheck(this,FullscreenCommand),this.fullscreen=void 0,this.fullscreen=t}return _createClass(FullscreenCommand,[{key:"execute",value:function execute(){var t=this;return new Promise((function(r,i){var o=null!=document.fullscreenElement;o&&t.fullscreen?i("Already in full-screen mode."):((null==t.fullscreen?!o:t.fullscreen)?document.documentElement.requestFullscreen().catch((function(t){i(t)})):document.exitFullscreen(),r())}))}}]),FullscreenCommand}();function ownKeys(t,r){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.push.apply(i,o)}return i}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(i),!0).forEach((function(r){_defineProperty(t,r,i[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))}))}return t}function shortcut_createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function shortcut_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return shortcut_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return shortcut_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function shortcut_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}var ur=function(){function Shortcut(t){_classCallCheck(this,Shortcut),this.SHIFT_MASK=16,this.CTRL_MASK=32,this.ALT_MASK=64,this.META_MASK=128,this.eventListener=void 0,this.shortcutMap=void 0,this.target=void 0,this.defaultOptions={type:"keydown",repeat:!1,captureEditable:!1},this.target=t||document,this.shortcutMap=new Map,this.eventListener=this.onKeyEvent.bind(this),this.target.addEventListener("keydown",this.eventListener),this.target.addEventListener("keyup",this.eventListener)}return _createClass(Shortcut,[{key:"bind",value:function bind(t,r,i){if(Array.isArray(t)){var o,a=shortcut_createForOfIteratorHelper(t);try{for(a.s();!(o=a.n()).done;){var l=o.value;this.bindKeyCombination(l,r,i)}}catch(t){a.e(t)}finally{a.f()}}else this.bindKeyCombination(t,r,i)}},{key:"unbind",value:function unbind(t){t=t.toLowerCase(),this.shortcutMap.delete(this.getKeyCombinationHash(t))}},{key:"dispose",value:function dispose(){this.target.removeEventListener("keydown",this.eventListener),this.target.removeEventListener("keyup",this.eventListener),this.shortcutMap.clear()}},{key:"bindKeyCombination",value:function bindKeyCombination(t,r,i){t=t.toLowerCase();var o=this.getKeyCombinationHash(t),a=this.shortcutMap.get(o);a&&console.warn('Overriding already registered key combination "'.concat(t,'"')),a={callback:r,options:i=_objectSpread(_objectSpread({},this.defaultOptions),i)},this.shortcutMap.set(o,a)}},{key:"onKeyEvent",value:function onKeyEvent(t){if(t.key){var r=this.getKeyEventHash(t),i=this.shortcutMap.get(r);if((i||(r=t.key.toLowerCase()+"0",i=this.shortcutMap.get(r)))&&(i.options.repeat||!t.repeat)&&i.options.type===t.type){var o,a=t.target;switch(a.tagName){case"INPUT":case"TEXTAREA":case"SELECT":o=!0;break;default:o=a.isContentEditable}!i.options.captureEditable&&o||i.callback()}}}},{key:"extractKeys",value:function extractKeys(t){return t.endsWith("+")?t.split("+").filter((function(t){return t})).concat(["+"]):t.split("+")}},{key:"getKeyCombinationHash",value:function getKeyCombinationHash(t){var r,i=null,o=0,a=shortcut_createForOfIteratorHelper(this.extractKeys(t));try{for(a.s();!(r=a.n()).done;){var l=r.value;switch(l){case"alt":o|=this.ALT_MASK;break;case"control":o|=this.CTRL_MASK;break;case"shift":o|=this.SHIFT_MASK;break;case"meta":o|=this.META_MASK;break;default:i&&console.warn('Multiple keys for key combination "'.concat(t,'" specified')),i=l}}}catch(t){a.e(t)}finally{a.f()}if(!i)throw new Error('No key (except modifiers) for key combination "'.concat(t,'" specified'));return i+o}},{key:"getKeyEventHash",value:function getKeyEventHash(t){var r=t.key.toLowerCase(),i=0;return" "===r&&(r="space"),t.altKey&&(i|=this.ALT_MASK),t.ctrlKey&&(i|=this.CTRL_MASK),t.shiftKey&&(i|=this.SHIFT_MASK),t.metaKey&&(i|=this.META_MASK),r+i}}]),Shortcut}();function player_presenter_createSuper(t){var r=function player_presenter_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var hr=function(t){_inherits(PlayerPresenter,t);var r=player_presenter_createSuper(PlayerPresenter);function PlayerPresenter(t,i,o){var a;return _classCallCheck(this,PlayerPresenter),(a=r.call(this,t,i)).recordingPlayer=void 0,a.shortcut=void 0,a.recordingPlayer=o,a.shortcut=new ur,a}return _createClass(PlayerPresenter,[{key:"initialize",value:function initialize(){var t=this;this.recordingPlayer.getStateProperty().subscribe(this.view.setMediaState.bind(this.view)),this.recordingPlayer.getDurationProperty().subscribe(this.view.setDuration.bind(this.view)),this.recordingPlayer.getTimeProperty().subscribe(this.view.setTime.bind(this.view)),this.recordingPlayer.getVolumeProperty().subscribe(this.view.setVolume.bind(this.view)),this.recordingPlayer.getMutedProperty().subscribe(this.view.setMuted.bind(this.view)),this.view.setOnPlay(this.recordingPlayer.start.bind(this.recordingPlayer)),this.view.setOnPause(this.recordingPlayer.suspend.bind(this.recordingPlayer)),this.view.setOnTime(this.recordingPlayer.setTime.bind(this.recordingPlayer)),this.view.setOnVolume(this.recordingPlayer.setVolume.bind(this.recordingPlayer)),this.view.setOnMute(this.recordingPlayer.setMuted.bind(this.recordingPlayer)),this.view.setOnPrevious(this.recordingPlayer.previous.bind(this.recordingPlayer)),this.view.setOnNext(this.recordingPlayer.next.bind(this.recordingPlayer)),this.view.addEventListener("click",(function(){t.recordingPlayer.started()})),this.view.setOnFullscreen((function(r){t.execute(new cr(r))})),this.bindShortcuts(),this.recordingPlayer.getDuration()&&this.view.setDuration(this.recordingPlayer.getDuration()),this.view.setVolume(this.recordingPlayer.getVolume()),this.view.setMuted(this.recordingPlayer.getMuted()),this.recordingPlayer.init()}},{key:"destroy",value:function destroy(){this.shortcut.dispose(),_get(_getPrototypeOf(PlayerPresenter.prototype),"destroy",this).call(this)}},{key:"bindShortcuts",value:function bindShortcuts(){var t=this,r={repeat:!0};this.shortcut.bind(["arrowUp","arrowLeft","pageUp"],(function previousShortcut(){return t.recordingPlayer.previous()}),r),this.shortcut.bind(["arrowDown","arrowRight","pageDown"],(function nextShortcut(){return t.recordingPlayer.next()}),r),this.shortcut.bind("space",(function playPauseShortcut(){t.recordingPlayer.started()?t.recordingPlayer.started()&&t.recordingPlayer.suspend():t.recordingPlayer.start()})),this.shortcut.bind("m",(function muteShortcut(){return t.recordingPlayer.setMuted(!t.recordingPlayer.getMuted())})),this.shortcut.bind("f",(function fullscreenShortcut(){return t.execute(new cr)}))}}]),PlayerPresenter}(at),dr=function(){function SearchService(t){_classCallCheck(this,SearchService),this.findController=void 0}return _createClass(SearchService,[{key:"search",value:function search(t){}}]),SearchService}(),fr=function(){function HighlighterRenderer(){_classCallCheck(this,HighlighterRenderer)}return _createClass(HighlighterRenderer,[{key:"render",value:function render(t,r,i){var o=r.points,a=o.length;if(!(a<1)){var l=r.brush,c=r.isSelected()?"rgba(255, 0, 100, 0.5)":l.color.toRgba(),u=0,h=o[u++];if(u!==a){for(t.beginPath(),t.strokeStyle=c,t.lineWidth=l.width,t.lineCap="round",t.lineJoin="round",t.globalAlpha=1,t.globalCompositeOperation="multiply",t.moveTo(h.x,h.y);u<a;)h=o[u++],t.lineTo(h.x,h.y);t.stroke()}else this.drawCircle(t,l,h.x,h.y,h.p)}}},{key:"drawCircle",value:function drawCircle(t,r,i,o,a){var l=a*r.width/2;t.beginPath(),t.fillStyle=r.color.toRgba(),t.arc(i,o,l,0,2*Math.PI),t.fill()}}]),HighlighterRenderer}(),pr=function(){function PointerRenderer(){_classCallCheck(this,PointerRenderer)}return _createClass(PointerRenderer,[{key:"render",value:function render(t,r,i){var o=r.points[0];if(o){var a=r.brush,l=a.width,c=l/2;t.beginPath(),t.fillStyle=a.color.toRgba(),t.arc(o.x,o.y,l,0,2*Math.PI),t.fill(),t.beginPath(),t.strokeStyle=a.color.toRgb(),t.lineWidth=l/4,t.arc(o.x,o.y,c,0,2*Math.PI),t.stroke()}}}]),PointerRenderer}(),gr=function(){function ArrowRenderer(){_classCallCheck(this,ArrowRenderer)}return _createClass(ArrowRenderer,[{key:"render",value:function render(t,r,i){var o=r.points[0],a=r.points[1];if(o&&a){var l=r.getKeyEvent(),c=r.brush;if(t.save(),this.createArrowPath(t,l,o,a,c.width),t.fillStyle=c.color.toRgba(),t.fill(),t.restore(),r.isSelected()){var u=t.getTransformExt().getScaleX();this.createArrowPath(t,l,o,a,c.width),t.strokeStyle="rgb(255, 0, 100)",t.lineWidth=2/u,t.setLineDash([5/u]),t.stroke()}}}},{key:"createArrowPath",value:function createArrowPath(t,r,i,o,a){var l=null!=r&&r.altKey,c=null!=r&&r.shiftKey,u=i.x,h=i.y,d=l?2*a:a,p=d/2,g=o.x-u,v=o.y-h,y=Math.atan2(v,g),_=Math.sqrt(g*g+v*v),m=.5,b=5*d,A=_-.5*d/m,S=_-.5*b,w=m*b*.5*.35,x=m*b,C=c?.5*d/m+.75*b:0;if(t.translate(u,h),t.rotate(y),t.beginPath(),t.moveTo(C,-p),t.lineTo(A-.75*b,-p),t.lineTo(A-b,-x),t.quadraticCurveTo(S,-w,_,0),t.quadraticCurveTo(S,w,A-b,x),t.lineTo(A-.75*b,p),t.lineTo(C,p),c){var k=C-.5*b,P=m*b*.5*.35;t.lineTo(C+.25*b,x),t.quadraticCurveTo(k,P,0,0),t.quadraticCurveTo(k,-P,C+.25*b,-x)}t.closePath()}}]),ArrowRenderer}(),vr=function(){function RectangleRenderer(){_classCallCheck(this,RectangleRenderer)}return _createClass(RectangleRenderer,[{key:"render",value:function render(t,r,i){var o=r.bounds;if(!o.isEmpty()){var a=r.getKeyEvent(),l=r.brush,c=l.color.toRgba(),u=a&&a.altKey,h=o.x,d=o.y,p=o.width,g=o.height;t.beginPath(),u?(t.fillStyle=c,t.rect(h,d,p,g),t.fill()):(t.strokeStyle=c,t.lineWidth=l.width,t.rect(h,d,p,g),t.stroke()),r.isSelected()&&(u&&(h+=l.width/2,d+=l.width/2,p-=l.width,g-=l.width),t.beginPath(),t.strokeStyle="rgb(255, 0, 100)",t.lineWidth=l.width,t.setLineDash([5/t.getTransformExt().getScaleX()]),t.rect(h,d,p,g),t.stroke())}}}]),RectangleRenderer}(),yr=function(){function LineRenderer(){_classCallCheck(this,LineRenderer)}return _createClass(LineRenderer,[{key:"render",value:function render(t,r,i){var o=r.points[0],a=r.points[1];if(o&&a){var l=r.getKeyEvent(),c=r.brush,u=null!=l&&l.altKey,h=u?2*c.width:c.width;if(t.beginPath(),t.strokeStyle=c.color.toRgba(),t.lineWidth=h,t.lineCap="round",t.moveTo(o.x,o.y),t.lineTo(a.x,a.y),t.stroke(),r.isSelected()){var d=t.getTransformExt().getScaleX(),p=u?7/d:5/d,g=u?15/d:12/d;t.beginPath(),t.strokeStyle="rgb(255, 0, 100)",t.lineWidth=h,t.setLineDash([p,g]),t.moveTo(o.x,o.y),t.lineTo(a.x,a.y),t.stroke()}}}}]),LineRenderer}(),_r=function(){function EllipseRenderer(){_classCallCheck(this,EllipseRenderer)}return _createClass(EllipseRenderer,[{key:"render",value:function render(t,r,i){var o=r.points[0],a=r.points[1];if(o&&a){var l=r.getKeyEvent(),c=r.brush,u=c.color.toRgba(),h=l&&l.altKey,d=Math.min(o.x,a.x),p=Math.min(o.y,a.y),g=Math.max(o.x,a.x),v=Math.max(o.y,a.y),y=.5*Math.abs(g-d),_=.5*Math.abs(v-p),m=d+y,b=p+_;if(t.beginPath(),h?(t.fillStyle=u,t.ellipse(m,b,y,_,0,0,2*Math.PI),t.fill()):(t.strokeStyle=u,t.lineWidth=c.width,t.ellipse(m,b,y,_,0,0,2*Math.PI),t.stroke()),r.isSelected()){var A=0;h&&(A=c.width/2),t.beginPath(),t.strokeStyle="rgb(255, 0, 100)",t.lineWidth=c.width,t.setLineDash([5/t.getTransformExt().getScaleX()]),t.ellipse(m,b,y-A,_-A,0,0,2*Math.PI),t.stroke()}}}}]),EllipseRenderer}(),mr=function(){function SelectRenderer(){_classCallCheck(this,SelectRenderer),this.FRAME_COLOR="#FF0064"}return _createClass(SelectRenderer,[{key:"render",value:function render(t,r,i){var o=r.points[0],a=r.points[1];if(o&&a){var l=2/t.getTransformExt().getScaleX(),c=4/t.getTransformExt().getScaleY();t.beginPath(),t.strokeStyle=this.FRAME_COLOR,t.lineWidth=l,t.lineDashOffset=0,t.setLineDash([c]),t.lineCap="butt",t.lineJoin="bevel",t.rect(o.x,o.y,a.x-o.x,a.y-o.y),t.stroke()}}}]),SelectRenderer}(),br=function(){function ZoomRenderer(){_classCallCheck(this,ZoomRenderer),this.FILL_COLOR="rgba(0, 163, 232, 0.4)",this.FRAME_COLOR="rgb(255, 0, 100)"}return _createClass(ZoomRenderer,[{key:"render",value:function render(t,r,i){var o=r.bounds;t.fillStyle=this.FILL_COLOR,t.fillRect(o.x,o.y,o.width,o.height),t.beginPath(),t.strokeStyle=this.FRAME_COLOR,t.lineWidth=2/t.getTransformExt().getScaleX(),t.rect(o.x,o.y,o.width,o.height),t.stroke()}}]),ZoomRenderer}(),Ar=function(){function TextRenderer(){_classCallCheck(this,TextRenderer)}return _createClass(TextRenderer,[{key:"render",value:function render(t,r,i){var o=r.getText();if(o&&0!==o.length){var a=r.bounds,l=r.getFont(),c=t.getTransformExt(),u=c.getScaleX(),h=l.size*u,d=c.getTranslateX()+a.x*u,p=c.getTranslateY()+a.y*u,g=new Mn(l.family,h,l.style,l.weight);t.setTransform(1,0,0,1,0,0),t.font=g.toString(),t.fillStyle=r.getTextColor().toRgba(),t.fillText(o,d,p+h)}}}]),TextRenderer}(),Sr=function(){function TextHighlightRenderer(){_classCallCheck(this,TextHighlightRenderer)}return _createClass(TextHighlightRenderer,[{key:"render",value:function render(t,r,i){var o=r.bounds;o.isEmpty()||(t.beginPath(),t.globalAlpha=1,t.globalCompositeOperation="multiply",t.fillStyle=r.getColor().toRgba(),t.rect(o.x,o.y,o.width,o.height),t.fill())}}]),TextHighlightRenderer}(),wr=function(){function LatexRenderer(){_classCallCheck(this,LatexRenderer)}return _createClass(LatexRenderer,[{key:"render",value:function render(t,r,i){var o=r.getText();if(o&&0!==o.length){var a=r.bounds,l=r.getFont(),c=t.getTransformExt(),u=c.getScaleX(),h=l.size*u,d=c.getTranslateX()+a.x*u,p=c.getTranslateY()+a.y*u,g=new Mn(l.family,h,l.style,l.weight);t.setTransform(1,0,0,1,0,0),t.font=g.toString(),t.fillStyle=r.getTextColor().toRgba(),t.fillText(o,d,p+h)}}}]),LatexRenderer}(),xr=function(){function PenRenderer(){_classCallCheck(this,PenRenderer)}return _createClass(PenRenderer,[{key:"render",value:function render(t,r,i){var o=r.brush,a=r.isSelected()?"rgb(255, 0, 100)":o.color.toRgb(),l=r.getPenStroke().getStrokeList(),c=l.length,u=0,h=l[u++];for(t.beginPath(),t.fillStyle=a,t.beginPath(),t.moveTo(h.x,h.y);u<c;)h=l[u++],u<c&&t.lineTo(h.x,h.y);t.fill()}}]),PenRenderer}(),Cr=function(){function RenderController(){_classCallCheck(this,RenderController),this.pageChangeListener=void 0,this.slideRenderSurface=void 0,this.actionRenderSurface=void 0,this.volatileRenderSurface=void 0,this.textLayerSurface=void 0,this.page=void 0,this.lastShape=void 0,this.lastTransform=void 0,this.seek=!1,this.pageChangeListener=this.pageChanged.bind(this),this.lastTransform=new l}return _createClass(RenderController,[{key:"setPage",value:function setPage(t){this.page&&this.disableRendering(),this.page=t,this.seek||this.enableRendering(),this.renderAllLayers()}},{key:"setSeek",value:function setSeek(t){this.seek=t,t?this.disableRendering():(this.enableRendering(),this.lastTransform.equals(this.getPageTransform())?this.refreshAnnotationLayers():this.renderAllLayers())}},{key:"setSlideRenderSurface",value:function setSlideRenderSurface(t){this.slideRenderSurface=t,this.slideRenderSurface.registerRenderer(ne.name,new oe),this.slideRenderSurface.addSizeListener(this.slideRenderSurfaceSizeChanged.bind(this))}},{key:"setActionRenderSurface",value:function setActionRenderSurface(t){this.actionRenderSurface=t,this.actionRenderSurface.addSizeListener(this.actionRenderSurfaceSizeChanged.bind(this)),this.registerShapeRenderers(t)}},{key:"setVolatileRenderSurface",value:function setVolatileRenderSurface(t){this.volatileRenderSurface=t,this.registerShapeRenderers(t)}},{key:"setTextLayerSurface",value:function setTextLayerSurface(t){this.textLayerSurface=t}},{key:"beginBulkRender",value:function beginBulkRender(){this.seek||this.disableRendering()}},{key:"endBulkRender",value:function endBulkRender(){this.seek||(this.refreshAnnotationLayers(),this.enableRendering())}},{key:"enableRendering",value:function enableRendering(){this.page.addChangeListener(this.pageChangeListener)}},{key:"disableRendering",value:function disableRendering(){this.page.removeChangeListener(this.pageChangeListener)}},{key:"slideRenderSurfaceSizeChanged",value:function slideRenderSurfaceSizeChanged(t){this.renderAllLayers()}},{key:"actionRenderSurfaceSizeChanged",value:function actionRenderSurfaceSizeChanged(t){this.refreshAnnotationLayers()}},{key:"pageChanged",value:function pageChanged(t){switch(t.changeType){case Kn.PageTransform:this.renderAllLayers();break;case Kn.Clear:this.clearAnnotationLayers();break;case Kn.ShapeAdded:if(this.lastShape&&this.lastShape!=t.shape){var r=this.actionRenderSurface.getSize(),i=new ee(0,0,r.width,r.height);this.renderPermanentLayer(this.lastShape,i)}this.renderVolatileLayer(t.shape,t.dirtyRegion);break;case Kn.ShapeRemoved:this.refreshAnnotationLayers();break;case Kn.ShapeModified:this.renderVolatileLayer(t.shape,t.dirtyRegion)}}},{key:"clearAnnotationLayers",value:function clearAnnotationLayers(){this.volatileRenderSurface.clear(),this.actionRenderSurface.renderSurface(this.slideRenderSurface),this.lastShape=null}},{key:"refreshAnnotationLayers",value:function refreshAnnotationLayers(){var t=this.page.getShapes(),r=t.length-1;if(r>=0){this.actionRenderSurface.renderSurface(this.slideRenderSurface),r>0&&this.actionRenderSurface.renderShapes(t.slice(0,r));var i=t[r];this.renderVolatileLayer(i,i.bounds)}else this.volatileRenderSurface.clear(),this.actionRenderSurface.renderSurface(this.slideRenderSurface),this.lastShape=null}},{key:"renderAllLayers",value:function renderAllLayers(){var t=this;this.renderSlideLayer(this.page).then((function(r){if(r){var i=t.getPageTransform();t.lastTransform.setTransform(i),t.actionRenderSurface.setTransform(i),t.volatileRenderSurface.setTransform(i),t.actionRenderSurface.renderImageSource(r),t.actionRenderSurface.renderShapes(t.page.getShapes()),t.volatileRenderSurface.clear(),t.textLayerSurface.render(t.page),t.lastShape=null}}))}},{key:"renderPermanentLayer",value:function renderPermanentLayer(t,r){this.actionRenderSurface.renderShape(t,r)}},{key:"renderVolatileLayer",value:function renderVolatileLayer(t,r){this.volatileRenderSurface.renderSurface(this.actionRenderSurface),this.volatileRenderSurface.renderShape(t,r),this.lastShape=t}},{key:"renderSlideLayer",value:function renderSlideLayer(t){var r=this.slideRenderSurface.getSize(),i=new ee(0,0,r.width,r.height);return this.slideRenderSurface.renderShape(t.getSlideShape(),i)}},{key:"getPageTransform",value:function getPageTransform(){var t=this.page.getSlideShape().bounds,r=new l;return r.translate(t.x,t.y),r.scale(1/t.width,1/t.height),r}},{key:"registerShapeRenderers",value:function registerShapeRenderers(t){t.registerRenderer(_t.name,new xr),t.registerRenderer(vt.name,new fr),t.registerRenderer(kt.name,new pr),t.registerRenderer(Et.name,new gr),t.registerRenderer(Dt.name,new vr),t.registerRenderer(Ot.name,new yr),t.registerRenderer(jt.name,new _r),t.registerRenderer(ln.name,new mr),t.registerRenderer(wn.name,new Ar),t.registerRenderer(Fn.name,new Sr),t.registerRenderer(Bn.name,new wr),t.registerRenderer(gn.name,new br)}}]),RenderController}(),kr=function(){function Executable(){_classCallCheck(this,Executable),this.stateEvent=new $,this._state=Y.Created,this._prevState=Y.Created}return _createClass(Executable,[{key:"state",get:function get(){return this._state}},{key:"previousState",get:function get(){return this._prevState}},{key:"initialized",value:function initialized(){return this._state===Y.Initialized}},{key:"created",value:function created(){return this._state===Y.Created}},{key:"started",value:function started(){return this._state===Y.Started}},{key:"stopped",value:function stopped(){return this._state===Y.Stopped}},{key:"suspended",value:function suspended(){return this._state===Y.Suspended}},{key:"destroyed",value:function destroyed(){return this._state===Y.Destroyed}},{key:"error",value:function error(){return this._state===Y.Error}},{key:"addStateListener",value:function addStateListener(t){return this.stateEvent.subscribe(t)}},{key:"removeStateListener",value:function removeStateListener(t){this.stateEvent.unsubscribe(t)}},{key:"fireStateChanged",value:function fireStateChanged(){this.stateEvent.publish(this._state)}},{key:"setState",value:function setState(t){if(!this.validateNextState(t))throw new Error("Invalid state transition for ".concat(this.constructor.name,": [").concat(this.state,"] -> [").concat(t,"]."));this._prevState=this._state,this._state=t,this.fireStateChanged()}},{key:"validateNextState",value:function validateNextState(t){switch(this._state){case Y.Created:return this.isAllowed(t,Y.Initializing,Y.Destroying);case Y.Initializing:return this.isAllowed(t,Y.Initialized,Y.Error);case Y.Initialized:return this.isAllowed(t,Y.Starting,Y.Destroying);case Y.Starting:return this.isAllowed(t,Y.Started,Y.Error);case Y.Started:return this.isAllowed(t,Y.Suspending,Y.Stopping,Y.Destroying,Y.Error);case Y.Stopping:return this.isAllowed(t,Y.Stopped,Y.Error);case Y.Stopped:return this.isAllowed(t,Y.Starting,Y.Destroying);case Y.Suspending:return this.isAllowed(t,Y.Suspended,Y.Error);case Y.Suspended:return this.isAllowed(t,Y.Starting,Y.Stopping,Y.Destroying);case Y.Destroying:return this.isAllowed(t,Y.Destroyed,Y.Error);case Y.Destroyed:return this.isAllowed(t,Y.Initializing);case Y.Error:return this.isAllowed(t,Y.Starting,Y.Stopping,Y.Destroying);default:return!1}}},{key:"isAllowed",value:function isAllowed(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];if(!i)throw new Error("No allowed states provided.");for(var a=0,l=i;a<l.length;a++){var c=l[a];if(t==c)return!0}return!1}}]),Executable}();function media_player_createSuper(t){var r=function media_player_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Pr=function(t){_inherits(MediaPlayer,t);var r=media_player_createSuper(MediaPlayer);function MediaPlayer(t){var i;return _classCallCheck(this,MediaPlayer),(i=r.call(this)).media=void 0,i.media=t,i.media.addEventListener("pause",i.mediaPaused.bind(_assertThisInitialized(i)),!1),i.media.addEventListener("play",i.mediaPlaying.bind(_assertThisInitialized(i)),!1),i.media.addEventListener("ended",i.mediaEnded.bind(_assertThisInitialized(i)),!1),i.media.addEventListener("error",i.mediaError.bind(_assertThisInitialized(i)),!1),i}return _createClass(MediaPlayer,[{key:"source",set:function set(t){this.media.src=t}},{key:"duration",get:function get(){return this.media.duration}},{key:"time",get:function get(){return this.media.currentTime},set:function set(t){this.media.currentTime=t}},{key:"muted",get:function get(){return this.media.muted},set:function set(t){this.media.muted=t}},{key:"volume",get:function get(){return this.media.volume},set:function set(t){this.media.volume=t}},{key:"init",value:function init(){this.setState(Y.Initializing),this.setState(Y.Initialized)}},{key:"start",value:function start(){(this.created()||this.destroyed())&&this.init(),this.setState(Y.Starting),this.media.play()}},{key:"stop",value:function stop(){this.setState(Y.Stopping),this.media.pause()}},{key:"suspend",value:function suspend(){this.setState(Y.Suspending),this.media.pause()}},{key:"destroy",value:function destroy(){(this.started()||this.suspended())&&stop(),this.setState(Y.Destroying),this.setState(Y.Destroyed)}},{key:"addDurationListener",value:function addDurationListener(t){var r=this;this.media.addEventListener("durationchange",(function(){t(r.media.duration)}),!1)}},{key:"addTimeListener",value:function addTimeListener(t){var r=this;this.media.addEventListener("timeupdate",(function(){t(r.media.currentTime)}),!1)}},{key:"addVolumeListener",value:function addVolumeListener(t){var r=this;this.media.addEventListener("volumechange",(function(){t(r.media.volume)}),!1)}},{key:"addMutedListener",value:function addMutedListener(t){var r=this;this.media.addEventListener("volumechange",(function(){t(r.media.muted)}),!1)}},{key:"mediaPaused",value:function mediaPaused(){this.started()&&this.setState(Y.Suspending),this.setState(Y.Suspended)}},{key:"mediaPlaying",value:function mediaPlaying(){(this.suspended()||this.stopped())&&this.setState(Y.Starting),this.setState(Y.Started)}},{key:"mediaEnded",value:function mediaEnded(){this.initialized()||this.stopped()||((this.started()||this.suspended())&&this.setState(Y.Stopping),this.time=0,this.setState(Y.Stopped))}},{key:"mediaError",value:function mediaError(){if(this.media.error){var t="Media error code: "+this.media.error.code;this.media.error.message&&(t+=", message: "+this.media.error.message),console.error(t)}this.setState(Y.Error)}}]),MediaPlayer}(kr),Rr=function(){function SyncState(t){_classCallCheck(this,SyncState),this.mediaPlayer=void 0,this.mediaPlayer=t}return _createClass(SyncState,[{key:"audioTime",get:function get(){return 1e3*this.mediaPlayer.time}}]),SyncState}();function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var i=[],o=!0,a=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(o=(c=u.next()).done)&&(i.push(c.value),!r||i.length!==r);o=!0);}catch(t){a=!0,l=t}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}return i}}(t,r)||unsupportedIterableToArray_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function executable_base_createSuper(t){var r=function executable_base_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Tr=function(t){_inherits(ExecutableBase,t);var r=executable_base_createSuper(ExecutableBase);function ExecutableBase(){return _classCallCheck(this,ExecutableBase),r.apply(this,arguments)}return _createClass(ExecutableBase,[{key:"init",value:function init(){this.setState(Y.Initializing);try{this.initInternal()}catch(t){throw this.setState(Y.Error),new Error("Failed to init ".concat(this.constructor.name,": ").concat(t))}this.setState(Y.Initialized)}},{key:"start",value:function start(){(this.created()||this.destroyed())&&this.init(),this.setState(Y.Starting);try{this.startInternal()}catch(t){throw this.setState(Y.Error),new Error("Failed to start ".concat(this.constructor.name,": ").concat(t))}this.setState(Y.Started)}},{key:"stop",value:function stop(){this.setState(Y.Stopping);try{this.stopInternal()}catch(t){throw this.setState(Y.Error),new Error("Failed to stop ".concat(this.constructor.name,": ").concat(t))}this.setState(Y.Stopped)}},{key:"suspend",value:function suspend(){this.setState(Y.Suspending);try{this.suspendInternal()}catch(t){throw this.setState(Y.Error),new Error("Failed to suspend ".concat(this.constructor.name,": ").concat(t))}this.setState(Y.Suspended)}},{key:"suspendInternal",value:function suspendInternal(){}},{key:"destroy",value:function destroy(){(this.started()||this.suspended())&&stop(),this.setState(Y.Destroying);try{this.destroyInternal()}catch(t){throw this.setState(Y.Error),new Error("Failed to destroy ".concat(this.constructor.name,": ").concat(t))}this.setState(Y.Destroyed)}}]),ExecutableBase}(kr);function action_player_createSuper(t){var r=function action_player_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Er=function(t){_inherits(ActionPlayer,t);var r=action_player_createSuper(ActionPlayer);function ActionPlayer(t,i){var o;return _classCallCheck(this,ActionPlayer),(o=r.call(this)).document=void 0,o.executor=void 0,o.document=t,o.executor=i,o}return _createClass(ActionPlayer,[{key:"getDocument",value:function getDocument(){return this.document}},{key:"getExecutor",value:function getExecutor(){return this.executor}}]),ActionPlayer}(Tr);function page_action_createSuper(t){var r=function page_action_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Lr=function(t){_inherits(PageAction,t);var r=page_action_createSuper(PageAction);function PageAction(t){var i;return _classCallCheck(this,PageAction),(i=r.call(this)).pageNumber=void 0,i.pageNumber=t,i}return _createClass(PageAction,[{key:"execute",value:function execute(t){t.setPageNumber(this.pageNumber)}}]),PageAction}(ut),Ir=function(){function ToolContext(t){_classCallCheck(this,ToolContext),this.renderController=void 0,this.page=void 0,this.keyEvent=void 0,this.renderController=t}return _createClass(ToolContext,[{key:"beginBulkRender",value:function beginBulkRender(){this.renderController.beginBulkRender()}},{key:"endBulkRender",value:function endBulkRender(){this.renderController.endBulkRender()}}]),ToolContext}(),Or=function(){function SimpleActionExecutor(t){_classCallCheck(this,SimpleActionExecutor),this.document=void 0,this.toolContext=void 0,this.tool=void 0,this.previousTool=void 0,this.pageNumber=void 0,this.document=t,this.toolContext=new Ir(null)}return _createClass(SimpleActionExecutor,[{key:"setOnSelectPageIndex",value:function setOnSelectPageIndex(t){}},{key:"setSeek",value:function setSeek(t){}},{key:"setKeyEvent",value:function setKeyEvent(t){this.toolContext.keyEvent=t}},{key:"setPageNumber",value:function setPageNumber(t){if(this.pageNumber!==t){var r=this.document.getPage(t);this.pageNumber=t,this.toolContext.page=r}}},{key:"setTool",value:function setTool(t){if(!t)throw new Error("Tool must not be null");(this.tool||this.tool!==t)&&(this.setPreviousTool(this.tool),this.tool=t)}},{key:"selectAndExecuteTool",value:function selectAndExecuteTool(t){var r=ct.createZero();this.setTool(t),this.beginTool(r),this.executeTool(r),this.endTool(r),this.setPreviousTool(this.previousTool)}},{key:"beginTool",value:function beginTool(t){this.tool.begin(t.clone(),this.toolContext)}},{key:"executeTool",value:function executeTool(t){this.tool.execute(t.clone())}},{key:"endTool",value:function endTool(t){this.tool.end(t.clone())}},{key:"setPreviousTool",value:function setPreviousTool(t){t&&(t instanceof Yt||(this.previousTool=t))}}]),SimpleActionExecutor}(),Mr=function(){function FileActionExecutor(t,r){_classCallCheck(this,FileActionExecutor),this.document=void 0,this.renderController=void 0,this.toolContext=void 0,this.tool=void 0,this.previousTool=void 0,this.pageNumber=void 0,this.pageIndexObserver=void 0,this.document=t,this.renderController=r,this.toolContext=new Ir(r)}return _createClass(FileActionExecutor,[{key:"setOnSelectPageIndex",value:function setOnSelectPageIndex(t){this.pageIndexObserver=t}},{key:"setKeyEvent",value:function setKeyEvent(t){this.toolContext.keyEvent=t}},{key:"setSeek",value:function setSeek(t){this.renderController.setSeek(t)}},{key:"setPageNumber",value:function setPageNumber(t){if(this.pageNumber!==t){var r=this.document.getPage(t);this.pageNumber=t,this.toolContext.page=r,this.renderController.setPage(r),this.pageIndexObserver&&this.pageIndexObserver(t)}}},{key:"setTool",value:function setTool(t){if(!t)throw new Error("Tool must not be null");(this.tool||this.tool!==t)&&(this.setPreviousTool(this.tool),this.tool=t)}},{key:"selectAndExecuteTool",value:function selectAndExecuteTool(t){this.executeAtomicTool(t)}},{key:"beginTool",value:function beginTool(t){this.tool.begin(t.clone(),this.toolContext)}},{key:"executeTool",value:function executeTool(t){this.tool.execute(t.clone())}},{key:"endTool",value:function endTool(t){this.tool.end(t.clone())}},{key:"executeAtomicTool",value:function executeAtomicTool(t){var r=ct.createZero();this.setTool(t),this.beginTool(r),this.executeTool(r),this.endTool(r),this.setPreviousTool(this.previousTool)}},{key:"setPreviousTool",value:function setPreviousTool(t){t&&(t instanceof Yt||(this.previousTool=t))}}]),FileActionExecutor}();function file_action_player_createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function file_action_player_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return file_action_player_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return file_action_player_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function file_action_player_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}function file_action_player_createSuper(t){var r=function file_action_player_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Fr=function(t){_inherits(FileActionPlayer,t);var r=file_action_player_createSuper(FileActionPlayer);function FileActionPlayer(t,i,o,a){var l;return _classCallCheck(this,FileActionPlayer),(l=r.call(this,t,new Mr(t,a))).simpleExecutor=void 0,l.recordedPages=void 0,l.syncState=void 0,l.pageChangeActions=void 0,l.actions=void 0,l.pageNumber=void 0,l.requestID=void 0,l.recordedPages=i,l.syncState=o,l.simpleExecutor=new Or(t),l}return _createClass(FileActionPlayer,[{key:"seekByTime",value:function seekByTime(t){var r=this.getTimeTablePage(t);return this.seek(r,t),r}},{key:"seekByPage",value:function seekByPage(t){var r=this.pageChangeActions.get(t);return null==r?-1:(this.seek(t,r),r)}},{key:"initInternal",value:function initInternal(){this.pageNumber=0,this.actions=[],this.pageChangeActions=new Map;var t,r=file_action_player_createForOfIteratorHelper(this.recordedPages);try{for(r.s();!(t=r.n()).done;){var i=t.value;this.pageChangeActions.set(i.pageNumber,i.timestamp)}}catch(t){r.e(t)}finally{r.f()}this.resetPage(this.pageNumber),this.getPlaybackActions(this.pageNumber),this.executor.setPageNumber(this.pageNumber)}},{key:"startInternal",value:function startInternal(){try{this.run()}catch(t){throw console.error(t),new Error("Execute action failed.")}}},{key:"stopInternal",value:function stopInternal(){cancelAnimationFrame(this.requestID),this.reset(),this.seekByPage(0)}},{key:"suspendInternal",value:function suspendInternal(){cancelAnimationFrame(this.requestID)}},{key:"destroyInternal",value:function destroyInternal(){this.actions.length=0,this.pageChangeActions.clear()}},{key:"executeActions",value:function executeActions(){for(var t=!0;t;){var r=this.state;if(r===Y.Starting||r===Y.Started){var i=this.syncState.audioTime,o=this.actions.length;if(o>0){var a=this.actions[o-1];i>=a.timestamp?(a.execute(this.executor),this.actions.pop(),o=this.actions.length):t=!1}else this.pageNumber<this.recordedPages.length-1?this.getPlaybackActions(++this.pageNumber):t=!1}else t=!1}}},{key:"run",value:function run(){this.executeActions(),this.requestID=requestAnimationFrame(this.run.bind(this))}},{key:"getPlaybackActions",value:function getPlaybackActions(t){var r,i=this.recordedPages[t];this.loadStaticShapes(i);var o=new Lr(t);o.timestamp=i.timestamp,this.actions.length=0,this.actions.push(o),(r=this.actions).push.apply(r,_toConsumableArray(i.playbackActions)),this.actions.length>1&&this.actions.reverse(),this.pageNumber=t}},{key:"getTimeTablePage",value:function getTimeTablePage(t){var r,i=0,o=file_action_player_createForOfIteratorHelper(this.pageChangeActions);try{for(o.s();!(r=o.n()).done;){var a=_slicedToArray(r.value,2),l=a[0],c=a[1];if(t==c){i=l;break}if(t<c)break;i=l}}catch(t){o.e(t)}finally{o.f()}return i}},{key:"seek",value:function seek(t,r){if(this.executor.setSeek(!0),this.resetPages(t,this.pageNumber),this.recordedPages[t].pageNumber===t){this.getPlaybackActions(t);for(var i=this.actions.length;i>0;){var o=this.actions[i-1];if(!(r>=o.timestamp))break;try{o.execute(this.executor)}catch(t){console.error(t)}this.actions.pop(),i=this.actions.length}}this.executor.setSeek(!1)}},{key:"reset",value:function reset(){this.executor.setSeek(!0),this.resetPages(0,this.pageNumber),this.executor.setSeek(!1)}},{key:"resetPages",value:function resetPages(t,r){if(t===r)this.resetPage(t);else if(t<r)for(var i=t;i<=r;)this.resetPage(i++)}},{key:"resetPage",value:function resetPage(t){var r=this.document.getPage(t);r.hasShapes()&&r.clear(),r.getSlideShape().setPageRect(new ee(0,0,1,1))}},{key:"loadStaticShapes",value:function loadStaticShapes(t){var r=t.staticActions;if(!(r.length<1)){this.simpleExecutor.setPageNumber(t.pageNumber);var i,o=file_action_player_createForOfIteratorHelper(r);try{for(o.s();!(i=o.n()).done;){var a=i.value;try{a.execute(this.simpleExecutor)}catch(t){console.error(t)}}}catch(t){o.e(t)}finally{o.f()}}}}]),FileActionPlayer}(Er),Dr=function(){function PlaybackModel(){_classCallCheck(this,PlaybackModel),this._state=new G,this._selectedPageIndex=new G,this._duration=new G,this._time=new G,this._volume=new G,this._muted=new G}return _createClass(PlaybackModel,[{key:"selectedPageIndexProperty",get:function get(){return this._selectedPageIndex}},{key:"selectedPageIndex",get:function get(){return this._selectedPageIndex.value},set:function set(t){this._selectedPageIndex.value=t}},{key:"stateProperty",get:function get(){return this._state}},{key:"getState",value:function getState(){return this._state.value}},{key:"setState",value:function setState(t){this._state.value=t}},{key:"durationProperty",get:function get(){return this._duration}},{key:"getDuration",value:function getDuration(){return this._duration.value}},{key:"setDuration",value:function setDuration(t){this._duration.value=t}},{key:"timeProperty",get:function get(){return this._time}},{key:"getTime",value:function getTime(){return this._time.value}},{key:"setTime",value:function setTime(t){this._time.value=t}},{key:"volumeProperty",get:function get(){return this._volume}},{key:"getVolume",value:function getVolume(){return this._volume.value}},{key:"setVolume",value:function setVolume(t){this._volume.value=t}},{key:"mutedProperty",get:function get(){return this._muted}},{key:"getMuted",value:function getMuted(){return this._muted.value}},{key:"setMuted",value:function setMuted(t){this._muted.value=t}}]),PlaybackModel}();function recording_player_createSuper(t){var r=function recording_player_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Nr=function(t){_inherits(RecordingPlayer,t);var r=recording_player_createSuper(RecordingPlayer);function RecordingPlayer(t,i){var o;return _classCallCheck(this,RecordingPlayer),(o=r.call(this)).mediaPlayer=void 0,o.actionPlayer=void 0,o.playbackModel=void 0,o.onMediaStateCallback=void 0,o.mediaPlayer=t,o.actionPlayer=i,o.playbackModel=new Dr,o.playbackModel.selectedPageIndex=0,o.onMediaStateCallback=o.onMediaState.bind(_assertThisInitialized(o)),o.actionPlayer.getExecutor().setOnSelectPageIndex(o.updateSelectedPage.bind(_assertThisInitialized(o))),o.mediaPlayer.addStateListener(o.onMediaStateCallback),o.mediaPlayer.addDurationListener(o.playbackModel.setDuration.bind(o.playbackModel)),o.mediaPlayer.addTimeListener(o.playbackModel.setTime.bind(o.playbackModel)),o.mediaPlayer.addVolumeListener(o.playbackModel.setVolume.bind(o.playbackModel)),o.mediaPlayer.addMutedListener(o.playbackModel.setMuted.bind(o.playbackModel)),o}return _createClass(RecordingPlayer,[{key:"previous",value:function previous(){this.setSelectedPage(this.playbackModel.selectedPageIndex-1)}},{key:"next",value:function next(){this.setSelectedPage(this.playbackModel.selectedPageIndex+1)}},{key:"setSelectedPage",value:function setSelectedPage(t){var r=this.getDocument();if(!(t<0||t>r.getPageCount()-1)){var i=this.actionPlayer.seekByPage(t);i>-1&&(this.mediaPlayer.time=i/1e3,this.updateSelectedPage(t))}}},{key:"getDocument",value:function getDocument(){return this.actionPlayer.getDocument()}},{key:"getDuration",value:function getDuration(){return this.mediaPlayer.duration}},{key:"setTime",value:function setTime(t){t*=this.mediaPlayer.duration,this.actionPlayer.seekByTime(1e3*t),this.mediaPlayer.time=t}},{key:"getTime",value:function getTime(){return this.mediaPlayer.time}},{key:"setMuted",value:function setMuted(t){this.mediaPlayer.muted=t}},{key:"getMuted",value:function getMuted(){return this.mediaPlayer.muted}},{key:"setVolume",value:function setVolume(t){this.mediaPlayer.muted&&(this.mediaPlayer.muted=!1),this.mediaPlayer.volume=t}},{key:"getVolume",value:function getVolume(){return this.mediaPlayer.volume}},{key:"getSelectedPageProperty",value:function getSelectedPageProperty(){return this.playbackModel.selectedPageIndexProperty}},{key:"getStateProperty",value:function getStateProperty(){return this.playbackModel.stateProperty}},{key:"getDurationProperty",value:function getDurationProperty(){return this.playbackModel.durationProperty}},{key:"getTimeProperty",value:function getTimeProperty(){return this.playbackModel.timeProperty}},{key:"getVolumeProperty",value:function getVolumeProperty(){return this.playbackModel.volumeProperty}},{key:"getMutedProperty",value:function getMutedProperty(){return this.playbackModel.mutedProperty}},{key:"initInternal",value:function initInternal(){this.mediaPlayer.init()}},{key:"startInternal",value:function startInternal(){this.mediaPlayer.start()}},{key:"stopInternal",value:function stopInternal(){this.mediaPlayer.stopped()||this.mediaPlayer.stop()}},{key:"suspendInternal",value:function suspendInternal(){this.mediaPlayer.suspend()}},{key:"destroyInternal",value:function destroyInternal(){this.mediaPlayer.removeStateListener(this.onMediaStateCallback),this.mediaPlayer.destroy(),this.onMediaStateCallback=null}},{key:"updateSelectedPage",value:function updateSelectedPage(t){this.playbackModel.selectedPageIndex=t}},{key:"onMediaState",value:function onMediaState(t){switch(t){case Y.Initialized:this.actionPlayer.init();break;case Y.Started:this.actionPlayer.start();break;case Y.Stopped:this.actionPlayer.stop(),this.stop();break;case Y.Suspended:this.actionPlayer.suspend()}this.playbackModel.setState(t)}}]),RecordingPlayer}(Tr);function playback_presenter_createSuper(t){var r=function playback_presenter_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Br=function(t){_inherits(PlaybackPresenter,t);var r=playback_presenter_createSuper(PlaybackPresenter);function PlaybackPresenter(t,i,o){var a;return _classCallCheck(this,PlaybackPresenter),(a=r.call(this,t,i)).recording=void 0,a.recording=o,a}return _createClass(PlaybackPresenter,[{key:"initialize",value:function initialize(){this.addCommandExecuter("SidebarPositionCommand",this.executeSidebarPosition);var t=this.view.getToolbarView(),r=this.view.getPlayerView(),i=this.view.getSidebarView(),o=new dr(this.recording.document),a=r.getSlideView(),l=new Cr;l.setActionRenderSurface(a.getActionRenderSurface()),l.setSlideRenderSurface(a.getSlideRenderSurface()),l.setVolatileRenderSurface(a.getVolatileRenderSurface()),l.setTextLayerSurface(a.getTextLayerSurface());var c=new Pr(r.getAudioElement());c.source=URL.createObjectURL(new Blob([this.recording.audio],{type:"audio/wav"}));var u=new Rr(c),h=new Fr(this.recording.document,this.recording.actions,u,l),d=new Nr(c,h),p=new ar(t,this,d);p.setSearchService(o),p.initialize();var g=new hr(r,this,d);g.initialize();var v=new lr(i,this,d);v.initialize(),this.addChild(p),this.addChild(g),this.addChild(v)}},{key:"setSidebarPosition",value:function setSidebarPosition(t){this.view.setSidebarPosition(t),this.view.getPlayerView().getSlideView().repaint()}},{key:"executeSidebarPosition",value:function executeSidebarPosition(t){return t.execute(this)}}]),PlaybackPresenter}(at);function http_request_createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function http_request_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return http_request_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return http_request_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function http_request_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}var zr=function(){function HttpRequest(t){_classCallCheck(this,HttpRequest),this.requestOptions=void 0,this.onProgress=void 0,this.requestOptions=t||{returnType:"body",responseType:"json",withCredentials:!1,timeout:0}}return _createClass(HttpRequest,[{key:"setHttpParams",value:function setHttpParams(t){return this.requestOptions.params=t,this}},{key:"setHttpHeaders",value:function setHttpHeaders(t){return this.requestOptions.headers=t,this}},{key:"setReturnType",value:function setReturnType(t){return this.requestOptions.returnType=t,this}},{key:"setResponseType",value:function setResponseType(t){return this.requestOptions.responseType=t,this}},{key:"setWithCredentials",value:function setWithCredentials(t){return this.requestOptions.withCredentials=t,this}},{key:"setTimeout",value:function setTimeout(t){return this.requestOptions.timeout=t,this}},{key:"setOptions",value:function setOptions(t){return this.requestOptions=t,this}},{key:"setOnProgress",value:function setOnProgress(t){return this.onProgress=t,this}},{key:"delete",value:function _delete(t){return this.request("DELETE",t)}},{key:"get",value:function get(t){return this.request("GET",t)}},{key:"head",value:function head(t){return this.request("HEAD",t)}},{key:"options",value:function options(t){return this.request("OPTIONS",t)}},{key:"patch",value:function patch(t,r){return this.request("PATCH",t,r)}},{key:"post",value:function post(t,r){return this.request("POST",t,r)}},{key:"put",value:function put(t,r){return this.request("PUT",t,r)}},{key:"request",value:function request(t,r,i){var o=this,request=new XMLHttpRequest;return request.open(t,this.composeUrl(r),!0),request.responseType=this.requestOptions.responseType,request.timeout=this.requestOptions.timeout,request.withCredentials=this.requestOptions.withCredentials,this.setHeaders(i,request),new Promise((function(t,r){var a=function errorHandler(){r(o.getResponse(request))};request.onload=function(){if(request.status>=200&&request.status<400){var r=null;r="response"===o.requestOptions.returnType?o.getResponse(request):o.decodeBody(request),t(r)}else a()},request.ontimeout=a,request.onerror=a,o.onProgress&&(i&&request.upload?request.upload.onprogress=o.onProgress:request.onprogress=o.onProgress),request.send(o.encodeBody(i))}))}},{key:"getResponse",value:function getResponse(t){return{body:this.decodeBody(t),headers:this.getHeaders(t),status:t.status,statusText:t.statusText}}},{key:"composeUrl",value:function composeUrl(t){var r=this.requestOptions.params;if(!r)return t;var i=r?r.toString():"";if(i){var o=t.indexOf("?");t=t+(-1===o?"?":o<t.length-1?"&":"")+i}return t}},{key:"getContentType",value:function getContentType(t){return null==t?null:t instanceof Blob?t.type:t instanceof FormData?null:"string"==typeof t?"text/plain":t instanceof URLSearchParams?"application/x-www-form-urlencoded; charset=UTF-8":"object"===_typeof(t)||"number"==typeof t||Array.isArray(t)?"application/json":null}},{key:"encodeBody",value:function encodeBody(t){return null==t?null:t instanceof ArrayBuffer||t instanceof Blob||t instanceof FormData||"string"==typeof t?t:"object"===_typeof(t)||"boolean"==typeof t||Array.isArray(t)?JSON.stringify(t):t.toString()}},{key:"decodeBody",value:function decodeBody(t){var r=t.response||null,i=t.responseType;if(!i){i=t.getResponseHeader("Content-Type");var o=new RegExp("^\\w+/(\\w+);?").exec(i);o&&(i=o[1])}return"json"===i&&"string"==typeof r&&(r=""!==r?JSON.parse(r):null),r}},{key:"setHeaders",value:function setHeaders(t,r){var i=this.requestOptions.headers;if(i){var o,a=http_request_createForOfIteratorHelper(i);try{for(a.s();!(o=a.n()).done;){var l=_slicedToArray(o.value,2),c=l[0],u=l[1];if(Array.isArray(u)){var h,d=http_request_createForOfIteratorHelper(u);try{for(d.s();!(h=d.n()).done;){var p=h.value;r.setRequestHeader(c,p)}}catch(t){d.e(t)}finally{d.f()}}else r.setRequestHeader(c,u)}}catch(t){a.e(t)}finally{a.f()}}if(!i||!i.has("Content-Type")){var g=this.getContentType(t);g&&r.setRequestHeader("Content-Type",g)}i&&i.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*")}},{key:"getHeaders",value:function getHeaders(t){var r=new Map,i=t.getAllResponseHeaders();if(i){var o,a=http_request_createForOfIteratorHelper(i.trim().split(/[\r\n]+/));try{for(a.s();!(o=a.n()).done;){var l=o.value,c=l.indexOf(":");if(c>0){var u=l.slice(0,c),h=l.slice(c+1).trim(),d=u.toLowerCase(),p=r.get(d);p?("string"==typeof p?[p]:p).push(h):r.set(d,h)}}}catch(t){a.e(t)}finally{a.f()}}return r}}]),HttpRequest}(),jr=function(){function ClassroomServiceClient(t){_classCallCheck(this,ClassroomServiceClient),this.apiPath="/bcast/ws",this.host=void 0,this.host=t}return _createClass(ClassroomServiceClient,[{key:"getClassrooms",value:function getClassrooms(){return(new zr).get(this.getFullPath("/classroom/list"))}},{key:"getClassroomDocument",value:function getClassroomDocument(t,r){var i=this;return new Promise((function(o,a){var l=new FormData;l.set("classroomName",t.shortName),l.set("fileName",r.fileName),(new zr).setResponseType("arraybuffer").post(i.getFullPath("/stream/document/get"),l).then((function(t){if(t){var r=new Uint8Array(t);(new rr).loadDocument(r).then((function(t){o(t)})).catch((function(t){a(t)}))}else a("Received empty classroom document")})).catch((function(t){a(t)}))}))}},{key:"getFullPath",value:function getFullPath(t){return this.host+this.apiPath+t}}]),ClassroomServiceClient}(),Ur=function(){function OpenClassroomCommand(t){_classCallCheck(this,OpenClassroomCommand),this.classroom=void 0,this.classroom=t}return _createClass(OpenClassroomCommand,[{key:"execute",value:function execute(t){var r=this;return new Promise((function(i,o){var a=r.classroom.documents;!a||a.length<1?o("Classroom has no documents available"):new jr("http://192.168.0.73:80").getClassroomDocument(r.classroom,a[0]).then((function(a){try{t.setStreamPlayer(r.classroom,a),i()}catch(t){o(t)}})).catch((function(t){o(t)}))}))}}]),OpenClassroomCommand}();function start_presenter_createSuper(t){var r=function start_presenter_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Hr=function(t){_inherits(StartPresenter,t);var r=start_presenter_createSuper(StartPresenter);function StartPresenter(){var t;_classCallCheck(this,StartPresenter);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=r.call.apply(r,[this].concat(o))).classroomService=void 0,t}return _createClass(StartPresenter,[{key:"initialize",value:function initialize(){this.classroomService=new jr("http://192.168.0.73:80"),this.view.setOnOpenRecording(this.onOpenRecording.bind(this)),this.view.setOnOpenStream(this.onOpenStream.bind(this)),this.view.setOnOpenClassroom(this.onOpenClassroom.bind(this))}},{key:"onOpenRecording",value:function onOpenRecording(t){t&&this.execute(new ir(t)).catch((function(t){var r=new or;r.setText(t),r.show(),console.error(t)}))}},{key:"onOpenStream",value:function onOpenStream(){var t=this;this.classroomService.getClassrooms().then((function(r){t.view.setClassrooms(r)})).catch((function(t){var r=new or;r.setText("Failed to establish connection to the server"),r.show(),console.error(t)}))}},{key:"onOpenClassroom",value:function onOpenClassroom(t){this.execute(new Ur(t)).catch((function(t){var r=new or;r.setText(t),r.show(),console.error(t)}))}}]),StartPresenter}(at);function stream_action_player_createSuper(t){var r=function stream_action_player_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Vr=function(t){_inherits(StreamActionPlayer,t);var r=stream_action_player_createSuper(StreamActionPlayer);function StreamActionPlayer(t,i,o){var a;return _classCallCheck(this,StreamActionPlayer),(a=r.call(this,t,i)).syncState=void 0,a.actions=void 0,a.requestID=void 0,a.syncState=o,a}return _createClass(StreamActionPlayer,[{key:"addAction",value:function addAction(t){this.actions.push(t)}},{key:"seekByTime",value:function seekByTime(t){throw new Error("Method not implemented.")}},{key:"seekByPage",value:function seekByPage(t){throw new Error("Method not implemented.")}},{key:"executeActions",value:function executeActions(){for(var t=this.actions.length;t>0;){var r=this.actions[t-1];if(!(this.syncState.audioTime>=r.timestamp))break;r.execute(this.executor),this.actions.pop(),t=this.actions.length}}},{key:"initInternal",value:function initInternal(){this.actions=[],this.executor.setPageNumber(0)}},{key:"startInternal",value:function startInternal(){try{this.run()}catch(t){throw console.error(t),new Error("Execute action failed.")}}},{key:"stopInternal",value:function stopInternal(){cancelAnimationFrame(this.requestID)}},{key:"suspendInternal",value:function suspendInternal(){cancelAnimationFrame(this.requestID)}},{key:"destroyInternal",value:function destroyInternal(){this.actions.length=0}},{key:"run",value:function run(){this.executeActions(),this.requestID=requestAnimationFrame(this.run.bind(this))}}]),StreamActionPlayer}(Er);function stream_player_createSuper(t){var r=function stream_player_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Gr=function(t){_inherits(StreamPlayer,t);var r=stream_player_createSuper(StreamPlayer);function StreamPlayer(t,i,o){var a;return _classCallCheck(this,StreamPlayer),(a=r.call(this)).mediaPlayer=void 0,a.actionPlayer=void 0,a.playbackModel=void 0,a.mediaClient=void 0,a.mediaClient=t,a.mediaPlayer=i,a.actionPlayer=o,a.playbackModel=new Dr,a.playbackModel.selectedPageIndex=0,a.actionPlayer.getExecutor().setOnSelectPageIndex(a.updateSelectedPage.bind(_assertThisInitialized(a))),a.mediaPlayer.addDurationListener(a.playbackModel.setDuration.bind(a.playbackModel)),a.mediaPlayer.addTimeListener(a.playbackModel.setTime.bind(a.playbackModel)),a.mediaPlayer.addVolumeListener(a.playbackModel.setVolume.bind(a.playbackModel)),a.mediaPlayer.addMutedListener(a.playbackModel.setMuted.bind(a.playbackModel)),a}return _createClass(StreamPlayer,[{key:"previous",value:function previous(){}},{key:"next",value:function next(){}},{key:"getDocument",value:function getDocument(){return this.actionPlayer.getDocument()}},{key:"getDuration",value:function getDuration(){return 0}},{key:"setTime",value:function setTime(t){}},{key:"getTime",value:function getTime(){return this.mediaPlayer.time}},{key:"setMuted",value:function setMuted(t){this.mediaPlayer.muted=t}},{key:"getMuted",value:function getMuted(){return this.mediaPlayer.muted}},{key:"setVolume",value:function setVolume(t){this.mediaPlayer.muted&&(this.mediaPlayer.muted=!1),this.mediaPlayer.volume=t}},{key:"getVolume",value:function getVolume(){return this.mediaPlayer.volume}},{key:"getSelectedPageProperty",value:function getSelectedPageProperty(){return this.playbackModel.selectedPageIndexProperty}},{key:"getStateProperty",value:function getStateProperty(){return this.playbackModel.stateProperty}},{key:"getDurationProperty",value:function getDurationProperty(){return this.playbackModel.durationProperty}},{key:"getTimeProperty",value:function getTimeProperty(){return this.playbackModel.timeProperty}},{key:"getVolumeProperty",value:function getVolumeProperty(){return this.playbackModel.volumeProperty}},{key:"getMutedProperty",value:function getMutedProperty(){return this.playbackModel.mutedProperty}},{key:"initInternal",value:function initInternal(){this.mediaClient.init()}},{key:"startInternal",value:function startInternal(){this.mediaClient.start()}},{key:"stopInternal",value:function stopInternal(){this.mediaClient.stop()}},{key:"suspendInternal",value:function suspendInternal(){this.mediaClient.suspend()}},{key:"destroyInternal",value:function destroyInternal(){this.mediaClient.destroy()}},{key:"updateSelectedPage",value:function updateSelectedPage(t){this.playbackModel.selectedPageIndex=t}}]),StreamPlayer}(Tr);function stream_player_presenter_createSuper(t){var r=function stream_player_presenter_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Wr,qr=function(t){_inherits(StreamPlayerPresenter,t);var r=stream_player_presenter_createSuper(StreamPlayerPresenter);function StreamPlayerPresenter(t,i,o){var a;return _classCallCheck(this,StreamPlayerPresenter),(a=r.call(this,t,i)).streamPlayer=void 0,a.shortcut=void 0,a.streamPlayer=o,a.shortcut=new ur,a}return _createClass(StreamPlayerPresenter,[{key:"initialize",value:function initialize(){var t=this;this.streamPlayer.getStateProperty().subscribe(this.view.setMediaState.bind(this.view)),this.streamPlayer.getVolumeProperty().subscribe(this.view.setVolume.bind(this.view)),this.streamPlayer.getMutedProperty().subscribe(this.view.setMuted.bind(this.view)),this.view.setOnPlay(this.streamPlayer.start.bind(this.streamPlayer)),this.view.setOnPause(this.streamPlayer.suspend.bind(this.streamPlayer)),this.view.setOnVolume(this.streamPlayer.setVolume.bind(this.streamPlayer)),this.view.setOnMute(this.streamPlayer.setMuted.bind(this.streamPlayer)),this.view.setOnFullscreen((function(r){t.execute(new cr(r))})),this.bindShortcuts(),this.view.setVolume(this.streamPlayer.getVolume()),this.view.setMuted(this.streamPlayer.getMuted()),this.streamPlayer.init(),this.streamPlayer.start()}},{key:"destroy",value:function destroy(){this.shortcut.dispose(),_get(_getPrototypeOf(StreamPlayerPresenter.prototype),"destroy",this).call(this)}},{key:"bindShortcuts",value:function bindShortcuts(){var t=this;this.shortcut.bind("m",(function muteShortcut(){return t.streamPlayer.setMuted(!t.streamPlayer.getMuted())})),this.shortcut.bind("f",(function fullscreenShortcut(){return t.execute(new cr)}))}}]),StreamPlayerPresenter}(at);!function(t){t.Audio="Audio",t.Event="Event",t.Camera="Camera",t.Messenger="Messenger"}(Wr||(Wr={}));var Yr,Qr=function(){function RtpPacket(){_classCallCheck(this,RtpPacket),this.version=void 0,this.padding=void 0,this.extension=void 0,this.marker=void 0,this.payloadType=void 0,this.seqNumber=void 0,this.timestamp=void 0,this.ssrc=void 0,this.csrc=void 0,this.payload=void 0,this.version=2,this.extension=0,this.marker=0}return _createClass(RtpPacket,[{key:"toString",value:function toString(){for(var t=null==this.csrc?0:this.csrc.length,r="",i=0;i<t;i++)r+="CSRC: "+this.csrc[i];var o=new Array;return o.push("[RTP Packet]"),o.push("V: ".concat(this.version," P: ").concat(this.padding," X: ").concat(this.extension," CC: ").concat(t)),o.push("M: ".concat(this.marker," PT: ").concat(this.payloadType," Seq: ").concat(this.seqNumber)),o.push("Timestamp: ".concat(this.timestamp)),o.push("SSRC: ".concat(this.ssrc)),r&&o.push("".concat(r)),o.push("Data length: ".concat(this.payload.length)),o.join(" ")}}],[{key:"deserialize",value:function deserialize(t){if(t.byteLength<12)throw new Error("Insufficient data to deserialize RtpPacket");var r=new RtpPacket;r.version=(192&t[0])>>>6,r.padding=(32&t[0])>>>5,r.extension=(16&t[0])>>>4;var i=15&t[0];if(r.marker=(128&t[1])>>7,r.payloadType=127&t[1],r.seqNumber=(255&t[2])<<8|255&t[3],r.timestamp=(255&t[4])<<24|(255&t[5])<<16|(255&t[6])<<8|255&t[7],r.timestamp=r.timestamp>>>0,r.ssrc=(255&t[8])<<24|(255&t[9])<<16|(255&t[10])<<8|255&t[11],r.ssrc=r.ssrc>>>0,i>0){r.csrc=new Array(i);for(var o=0;o<i;o++){var a=12+4*o;r.csrc[o]=(t[a]<<24)+(t[a+1]<<16)|t[a+2]<<8|t[a+3]}}var l=12+4*i;return r.payload=t.slice(l),r}}]),RtpPacket}();function media_receiver_createSuper(t){var r=function media_receiver_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}!function(t){t.RTP_UDP="RTP/UDP",t.RTP_TCP="RTP/TCP",t.RTP_TCP_TLS="RTP/TCP-TLS",t.RTP_HTTP="RTP/HTTP",t.RTP_HTTP_TLS="RTP/HTTP-TLS",t.HTTP="HTTP",t.HTTP_TLS="HTTP-TLS",t.WS="WS",t.WS_TLS="WS-TLS"}(Yr||(Yr={}));var Xr=function(t){_inherits(MediaReceiver,t);var r=media_receiver_createSuper(MediaReceiver);function MediaReceiver(t){var i;_classCallCheck(this,MediaReceiver),(i=r.call(this)).url=void 0,i.socket=void 0;var o=t.transport;if(o!==Yr.WS&&o!==Yr.WS_TLS)throw new Error("MediaReceiver only supports WebSocket transport");var a=o===Yr.WS_TLS?"wss://":"ws://";return i.url=a+t.address+":"+t.port,i}return _createClass(MediaReceiver,[{key:"init",value:function init(){this.setState(Y.Initializing),this.setState(Y.Initialized)}},{key:"start",value:function start(){var t=this;(this.created()||this.destroyed())&&this.init(),this.setState(Y.Starting);try{this.socket=new WebSocket(this.url),this.socket.binaryType="arraybuffer"}catch(t){throw this.setState(Y.Error),t}this.socket.onopen=function(r){t.setState(Y.Started),console.log("connected")},this.socket.onclose=function(r){1e3!==r.code||t.error()||t.setState(Y.Stopped)},this.socket.onerror=function(r){t.setState(Y.Error)},this.socket.onmessage=function(r){var i=r.data,o=Qr.deserialize(new Uint8Array(i));t.process(o)}}},{key:"stop",value:function stop(){this.socket.readyState===WebSocket.OPEN&&(this.setState(Y.Stopping),this.socket.close())}},{key:"suspend",value:function suspend(){this.stop()}},{key:"destroy",value:function destroy(){this.started()&&stop()}}]),MediaReceiver}(kr),Kr=function(){function RtpActionDecoder(){_classCallCheck(this,RtpActionDecoder)}return _createClass(RtpActionDecoder,[{key:"decode",value:function decode(t){var r=new lt(t.payload.buffer),i=(r.getInt32(),r.getInt8()),o=r.getInt32(),a=Vn.parse(r,i);return a.timestamp=o,a}}]),RtpActionDecoder}();function action_receiver_createSuper(t){var r=function action_receiver_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var $r=function(t){_inherits(ActionReceiver,t);var r=action_receiver_createSuper(ActionReceiver);function ActionReceiver(t,i){var o;return _classCallCheck(this,ActionReceiver),(o=r.call(this,t)).actionPlayer=void 0,o.decoder=void 0,o.actionPlayer=i,o.decoder=new Kr,o}return _createClass(ActionReceiver,[{key:"process",value:function process(t){var r=this.decoder.decode(t);this.actionPlayer.addAction(r),console.log(r.constructor.name)}}]),ActionReceiver}(Xr),Zr=function(){function RtpAudioDecoder(){_classCallCheck(this,RtpAudioDecoder)}return _createClass(RtpAudioDecoder,[{key:"decode",value:function decode(t){return t.payload}}]),RtpAudioDecoder}();function audio_receiver_createSuper(t){var r=function audio_receiver_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var Jr=function(t){_inherits(AudioReceiver,t);var r=audio_receiver_createSuper(AudioReceiver);function AudioReceiver(t,i){var o;return _classCallCheck(this,AudioReceiver),(o=r.call(this,t)).audioPlayer=void 0,o.decoder=void 0,o.audioPlayer=i,o.decoder=new Zr,o}return _createClass(AudioReceiver,[{key:"process",value:function process(t){var r=this.decoder.decode(t);this.audioPlayer.addAudioData(r)}}]),AudioReceiver}(Xr);function classroom_media_client_createForOfIteratorHelper(t,r){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function classroom_media_client_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return classroom_media_client_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return classroom_media_client_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){i=t[Symbol.iterator]()},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==i.return||i.return()}finally{if(u)throw l}}}}function classroom_media_client_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}function classroom_media_client_createSuper(t){var r=function classroom_media_client_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var ei=function(t){_inherits(ClassroomMediaClient,t);var r=classroom_media_client_createSuper(ClassroomMediaClient);function ClassroomMediaClient(t,i,o){var a;return _classCallCheck(this,ClassroomMediaClient),(a=r.call(this)).classroom=void 0,a.mediaReceivers=void 0,a.actionPlayer=void 0,a.audioPlayer=void 0,a.classroom=t,a.actionPlayer=i,a.audioPlayer=o,a.mediaReceivers=[],a}return _createClass(ClassroomMediaClient,[{key:"initInternal",value:function initInternal(){var t=this.classroom.services;if(!t||t.length<1)throw new Error("Classroom has no services available");var r=t.find((function(t){return"stream"===t._type}));if(!r)throw new Error("Classroom has no stream service available");this.createActionReceiver(r),this.createAudioReceiver(r),this.actionPlayer.init(),this.audioPlayer.init();var i,o=classroom_media_client_createForOfIteratorHelper(this.mediaReceivers);try{for(o.s();!(i=o.n()).done;){i.value.init()}}catch(t){o.e(t)}finally{o.f()}}},{key:"startInternal",value:function startInternal(){this.actionPlayer.start(),this.audioPlayer.start();var t,r=classroom_media_client_createForOfIteratorHelper(this.mediaReceivers);try{for(r.s();!(t=r.n()).done;){t.value.start()}}catch(t){r.e(t)}finally{r.f()}}},{key:"stopInternal",value:function stopInternal(){var t,r=classroom_media_client_createForOfIteratorHelper(this.mediaReceivers);try{for(r.s();!(t=r.n()).done;){t.value.stop()}}catch(t){r.e(t)}finally{r.f()}this.actionPlayer.stop(),this.audioPlayer.stop()}},{key:"destroyInternal",value:function destroyInternal(){var t,r=classroom_media_client_createForOfIteratorHelper(this.mediaReceivers);try{for(r.s();!(t=r.n()).done;){t.value.destroy()}}catch(t){r.e(t)}finally{r.f()}this.actionPlayer.destroy(),this.audioPlayer.destroy()}},{key:"createActionReceiver",value:function createActionReceiver(t){var r=t.streamDescriptions.find((function(t){return t.mediaType===Wr.Event}));if(!r)throw new Error("No action stream available");var i=new $r(r,this.actionPlayer);this.mediaReceivers.push(i)}},{key:"createAudioReceiver",value:function createAudioReceiver(t){var r=t.streamDescriptions.find((function(t){return t.mediaType===Wr.Audio}));if(!r)throw new Error("No audio stream available");var i=new Jr(r,this.audioPlayer);this.mediaReceivers.push(i)}}]),ClassroomMediaClient}(Tr);function stream_audio_player_createSuper(t){var r=function stream_audio_player_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var ti=function(t){_inherits(StreamAudioPlayer,t);var r=stream_audio_player_createSuper(StreamAudioPlayer);function StreamAudioPlayer(t){var i;return _classCallCheck(this,StreamAudioPlayer),(i=r.call(this)).audioContext=void 0,i.audioSource=void 0,i.audioGain=void 0,i.mediaSource=void 0,i.media=void 0,i.buffer=void 0,i.media=t,i.media.volume=1,i.buffer=[],i}return _createClass(StreamAudioPlayer,[{key:"addAudioData",value:function addAudioData(t){var r=this;this.started()&&this.audioContext.decodeAudioData(t.buffer).then((function(t){})).catch((function(t){console.error(t),r.stop()}))}},{key:"setVolume",value:function setVolume(t){this.audioGain.gain.value=t}},{key:"initInternal",value:function initInternal(){var t=this;this.audioContext=new AudioContext,this.audioContext.onstatechange=function(){console.log(t.audioContext.state)},this.audioGain=this.audioContext.createGain(),this.audioGain.connect(this.audioContext.destination),this.audioSource=this.audioContext.createBufferSource(),this.audioSource.connect(this.audioGain)}},{key:"startInternal",value:function startInternal(){this.audioSource.start()}},{key:"suspendInternal",value:function suspendInternal(){this.audioSource.stop()}},{key:"stopInternal",value:function stopInternal(){this.audioSource.stop(),this.audioSource.disconnect(),this.audioGain.disconnect()}},{key:"destroyInternal",value:function destroyInternal(){}}]),StreamAudioPlayer}(Tr);function stream_playback_presenter_createSuper(t){var r=function stream_playback_presenter_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var ni=function(t){_inherits(StreamPlaybackPresenter,t);var r=stream_playback_presenter_createSuper(StreamPlaybackPresenter);function StreamPlaybackPresenter(t,i,o,a){var l;return _classCallCheck(this,StreamPlaybackPresenter),(l=r.call(this,t,i)).classroom=void 0,l.doc=void 0,l.classroom=o,l.doc=a,l}return _createClass(StreamPlaybackPresenter,[{key:"initialize",value:function initialize(){var t=this.view.getPlayerView(),r=t.getSlideView(),i=new Cr;i.setActionRenderSurface(r.getActionRenderSurface()),i.setSlideRenderSurface(r.getSlideRenderSurface()),i.setVolatileRenderSurface(r.getVolatileRenderSurface()),i.setTextLayerSurface(r.getTextLayerSurface());var o=new Mr(this.doc,i),a=new Pr(t.getAudioElement()),l=new ti(t.getAudioElement()),c=new Rr(a),u=new Vr(this.doc,o,c),h=new ei(this.classroom,u,l),d=new Gr(h,a,u),p=new qr(t,this,d);p.initialize(),this.addChild(p)}}]),StreamPlaybackPresenter}(at);function window_presenter_createSuper(t){var r=function window_presenter_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}var ri=new(function(t){_inherits(WindowPresenter,t);var r=window_presenter_createSuper(WindowPresenter);function WindowPresenter(){return _classCallCheck(this,WindowPresenter),r.apply(this,arguments)}return _createClass(WindowPresenter,[{key:"initialize",value:function initialize(){this.addCommandExecuter(cr.name,this.executeFullscreen),this.addCommandExecuter(ir.name,this.executeOpenRecording),this.addCommandExecuter(Ur.name,this.executeOpenClassroom);var t=new ye,r=new Hr(t,this);this.setContent(t,r)}},{key:"openRecording",value:function openRecording(t){var r=this;(new zr).setResponseType("arraybuffer").get(t).then((function(i){i&&r.execute(new ir(new File([i],t))).catch((function(t){var r=new or;r.setText(t),r.show(),console.error(t)}))})).catch((function(t){console.error(t)}))}},{key:"setRecording",value:function setRecording(t){var r=new Se,i=new Br(r,this,t);this.setContent(r,i)}},{key:"setStreamPlayer",value:function setStreamPlayer(t,r){var i=new we,o=new ni(i,this,t,r);this.setContent(i,o)}},{key:"executeFullscreen",value:function executeFullscreen(t){return t.execute()}},{key:"executeOpenRecording",value:function executeOpenRecording(t){return t.execute(this)}},{key:"executeOpenClassroom",value:function executeOpenClassroom(t){return t.execute(this)}},{key:"setContent",value:function setContent(t,r){this.view.setView(t),r.initialize(),this.destroyChildren(),this.addChild(r)}}]),WindowPresenter}(at))(new ot);ri.initialize(),ri.openRecording("${recordingFile}")})()})();